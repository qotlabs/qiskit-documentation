(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[845],{7632:function(e,t,r){"use strict";r.d(t,{$J5:function(){return eK},$ZC:function(){return Z},AF9:function(){return eV},Ac_:function(){return M},Bpv:function(){return eM},CYq:function(){return B},ERt:function(){return F},Ep7:function(){return L},FWI:function(){return e3},Ff7:function(){return e4},G4P:function(){return s},GBf:function(){return p},GNB:function(){return ev},HEo:function(){return eS},HQL:function(){return y},JFQ:function(){return O},JI8:function(){return e1},KHy:function(){return G},LoZ:function(){return eq},MeK:function(){return eA},MuY:function(){return ex},NAI:function(){return eW},O9T:function(){return e6},OQy:function(){return ek},OT1:function(){return ei},P6m:function(){return eH},POQ:function(){return z},Ply:function(){return N},PzV:function(){return eo},RFY:function(){return eE},Rms:function(){return ee},RyK:function(){return ed},S26:function(){return b},Sns:function(){return eU},Snx:function(){return n},SzQ:function(){return R},T4i:function(){return v},TLo:function(){return eZ},Tqj:function(){return l},TwG:function(){return eB},U8I:function(){return W},UGi:function(){return x},UUc:function(){return ew},VLu:function(){return eR},VOp:function(){return ef},Vat:function(){return e2},WDD:function(){return eQ},WFQ:function(){return et},WVG:function(){return q},YER:function(){return eL},YNN:function(){return eb},_H$:function(){return es},_rq:function(){return ea},bdd:function(){return $},bqU:function(){return er},cDv:function(){return eY},cEB:function(){return eC},d1r:function(){return ez},d3:function(){return ey},dEO:function(){return j},dRF:function(){return eg},deL:function(){return e$},e7T:function(){return e5},fL7:function(){return P},fOP:function(){return d},faP:function(){return D},fkr:function(){return a},fwM:function(){return eD},gvF:function(){return el},ixZ:function(){return i},j8V:function(){return ep},k8:function(){return e0},kAy:function(){return X},kuR:function(){return ec},m4f:function(){return rgba},mUS:function(){return e_},nh1:function(){return eG},ni5:function(){return k},np8:function(){return eX},p4Y:function(){return eJ},p6t:function(){return C},rRt:function(){return u},ret:function(){return g},roR:function(){return eT},s5t:function(){return en},tGJ:function(){return ej},tLI:function(){return eh},tLT:function(){return eO},v5R:function(){return m},vSE:function(){return Y},vpi:function(){return eP},w51:function(){return _},w6Z:function(){return em},wAI:function(){return A},xSj:function(){return eN},yB$:function(){return Q},yGj:function(){return eI},yyG:function(){return eF},zT9:function(){return eu},ztu:function(){return f}});var n="#000000",i="#ffffff",a=i,s="#e8e8e8",l="#f1c21b",u="#ff832b",d="#fff1f1",f="#ffd7d9",p="#ffb3b8",g="#ff8389",m="#fa4d56",y="#da1e28",v="#a2191f",x="#750e13",b="#c21e25",O="#ffc2c5",R="#ffd6e8",_="#9f1853",A="#740937",C="#bf1d63",k="#ffbdda",P="#e8daff",N="#be95ff",L="#a56eff",M="#8a3ffc",F="#6929c4",D="#491d8b",j="#7c3dd6",B="#dcc7ff",z="#edf5ff",W="#d0e2ff",G="#a6c8ff",Z="#78a9ff",q="#4589ff",$="#0f62fe",Y="#0043ce",X="#002d9c",Q="#0053ff",ee="#b8d3ff",et="#bae6ff",er="#00539a",en="#003a6d",ei="#99daff",eo="#0066bd",ea="#9ef0f0",es="#005d5d",ec="#004144",el="#57e5e5",eu="#007070",ed="#defbe6",ef="#a7f0ba",eh="#42be65",ep="#24a148",eg="#198038",em="#0e6027",ey="#044317",ev="#74e792",ex="#11742f",eb="#f2f4f8",eE="#dde1e6",eT="#c1c7cd",eO="#a2a9b0",eR="#878d96",e_="#697077",eA="#4d5358",eS="#343a3f",eC="#21272a",ek="#121619",eI="#e4e9f1",ew="#cdd3da",eP="#757b85",eN="#585e64",eL="#5d646a",eM="#434a51",eF="#2b3236",eD="#f4f4f4",ej="#e0e0e0",eU="#c6c6c6",eB="#a8a8a8",ez="#8d8d8d",eW="#6f6f6f",eG="#525252",eH="#393939",eZ="#262626",eV="#161616",eq="#e8e8e8",eK="#d1d1d1",e$="#b5b5b5",eY="#7a7a7a",eX="#5e5e5e",eQ="#636363",eJ="#474747",e0="#333333",e1="#e5e0df",e2="#565151",e5="#3c3838",e3="#d8d0cf",e4="#696363",e6={black:{100:n},blue:{10:z,20:W,30:G,40:Z,50:q,60:$,70:Y,80:X,90:"#001d6c",100:"#001141"},coolGray:{10:eb,20:eE,30:eT,40:eO,50:eR,60:e_,70:eA,80:eS,90:eC,100:ek},cyan:{10:"#e5f6ff",20:et,30:"#82cfff",40:"#33b1ff",50:"#1192e8",60:"#0072c3",70:er,80:en,90:"#012749",100:"#061727"},gray:{10:eD,20:ej,30:eU,40:eB,50:ez,60:eW,70:eG,80:eH,90:eZ,100:eV},green:{10:ed,20:ef,30:"#6fdc8c",40:eh,50:ep,60:eg,70:em,80:ey,90:"#022d0d",100:"#071908"},magenta:{10:"#fff0f7",20:R,30:"#ffafd2",40:"#ff7eb6",50:"#ee5396",60:"#d02670",70:_,80:A,90:"#510224",100:"#2a0a18"},orange:{10:"#fff2e8",20:"#ffd9be",30:"#ffb784",40:u,50:"#eb6200",60:"#ba4e00",70:"#8a3800",80:"#5e2900",90:"#3e1a00",100:"#231000"},purple:{10:"#f6f2ff",20:P,30:"#d4bbff",40:N,50:L,60:M,70:F,80:D,90:"#31135e",100:"#1c0f30"},red:{10:d,20:f,30:p,40:g,50:m,60:y,70:v,80:x,90:"#520408",100:"#2d0709"},teal:{10:"#d9fbfb",20:ea,30:"#3ddbd9",40:"#08bdba",50:"#009d9a",60:"#007d79",70:es,80:ec,90:"#022b30",100:"#081a1c"},warmGray:{10:"#f7f3f2",20:e1,30:"#cac5c4",40:"#ada8a8",50:"#8f8b8b",60:"#726e6e",70:e2,80:e5,90:"#272525",100:"#171414"},white:{0:i},yellow:{10:"#fcf4d6",20:"#fddc69",30:l,40:"#d2a106",50:"#b28600",60:"#8e6a00",70:"#684e00",80:"#483700",90:"#302400",100:"#1c1500"}};function rgba(e,t){var r=[e.substring(1,3),e.substring(3,5),e.substring(5,7)].map(function(e){return parseInt(e,16)});return"rgba(".concat(r[0],", ").concat(r[1],", ").concat(r[2],", ").concat(t,")")}},99265:function(e,t,r){"use strict";r.d(t,{BV:function(){return ee},Bf:function(){return W},Bh:function(){return ep},Bx:function(){return F},CK:function(){return N},CZ:function(){return em},EA:function(){return b},EY:function(){return R},GA:function(){return l},Gg:function(){return _},HL:function(){return et},Hs:function(){return $},Hv:function(){return p},IE:function(){return d},Iq:function(){return eh},JS:function(){return x},M3:function(){return C},MZ:function(){return eg},Pl:function(){return ex},Po:function(){return q},Qo:function(){return z},SX:function(){return s},Sd:function(){return Z},Sw:function(){return Q},TX:function(){return B},TZ:function(){return ey},U_:function(){return y},Wl:function(){return k},X_:function(){return el},Xq:function(){return L},_G:function(){return ed},a0:function(){return eO},aE:function(){return v},aS:function(){return ea},cz:function(){return eo},d1:function(){return f},fi:function(){return eT},gI:function(){return g},hb:function(){return O},hj:function(){return j},iK:function(){return m},it:function(){return G},jB:function(){return u},k5:function(){return ei},ni:function(){return X},nv:function(){return D},oz:function(){return M},pb:function(){return eb},pj:function(){return A},pt:function(){return ec},qN:function(){return ef},rP:function(){return er},tQ:function(){return en},u0:function(){return es},vU:function(){return P},vv:function(){return ev},w8:function(){return eE},wt:function(){return Y},yD:function(){return eu}});var n=r(48546),i={mono:"'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace",sans:"'IBM Plex Sans', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', sans-serif",serif:"'IBM Plex Serif', 'Georgia', Times, serif"},a={light:300,regular:400,semibold:600};function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}(0,n.px)(n.XE),i.sans,a.regular,a.semibold,i.mono;var s={fontSize:(0,n.hO)(12),fontWeight:a.regular,lineHeight:1.33333,letterSpacing:(0,n.px)(.32)},l={fontSize:(0,n.hO)(14),fontWeight:a.regular,lineHeight:1.28572,letterSpacing:(0,n.px)(.32)},u={fontSize:(0,n.hO)(12),fontWeight:a.regular,lineHeight:1.33333,letterSpacing:(0,n.px)(.32)},d={fontSize:(0,n.hO)(14),fontWeight:a.regular,lineHeight:1.28572,letterSpacing:(0,n.px)(.16)},f={fontSize:(0,n.hO)(12),lineHeight:1.33333,letterSpacing:(0,n.px)(.32)},p={fontSize:(0,n.hO)(14),lineHeight:1.28572,letterSpacing:(0,n.px)(.16)},g={fontSize:(0,n.hO)(14),fontWeight:a.regular,lineHeight:1.28572,letterSpacing:(0,n.px)(.16)},m={fontSize:(0,n.hO)(14),fontWeight:a.regular,lineHeight:1.42857,letterSpacing:(0,n.px)(.16)},y={fontSize:(0,n.hO)(16),fontWeight:a.regular,lineHeight:1.375,letterSpacing:0},v={fontSize:(0,n.hO)(16),fontWeight:a.regular,lineHeight:1.5,letterSpacing:0},x={fontFamily:i.mono,fontSize:(0,n.hO)(12),fontWeight:a.regular,lineHeight:1.33333,letterSpacing:(0,n.px)(.32)},b={fontFamily:i.mono,fontSize:(0,n.hO)(14),fontWeight:a.regular,lineHeight:1.42857,letterSpacing:(0,n.px)(.32)},O={fontSize:(0,n.hO)(14),fontWeight:a.semibold,lineHeight:1.42857,letterSpacing:(0,n.px)(.16)},R={fontSize:(0,n.hO)(14),fontWeight:a.semibold,lineHeight:1.28572,letterSpacing:(0,n.px)(.16)},_={fontSize:(0,n.hO)(16),fontWeight:a.semibold,lineHeight:1.5,letterSpacing:0},A={fontSize:(0,n.hO)(16),fontWeight:a.semibold,lineHeight:1.375,letterSpacing:0},C={fontSize:(0,n.hO)(20),fontWeight:a.regular,lineHeight:1.4,letterSpacing:0},k={fontSize:(0,n.hO)(28),fontWeight:a.regular,lineHeight:1.28572,letterSpacing:0},P={fontSize:(0,n.hO)(32),fontWeight:a.regular,lineHeight:1.25,letterSpacing:0},N={fontSize:(0,n.hO)(42),fontWeight:a.light,lineHeight:1.199,letterSpacing:0},L={fontSize:(0,n.hO)(54),fontWeight:a.light,lineHeight:1.199,letterSpacing:0},M=_objectSpread2(_objectSpread2({},O),{},{lineHeight:1.25}),F=_objectSpread2(_objectSpread2({},_),{},{lineHeight:1.5}),D={fontSize:(0,n.hO)(20),fontWeight:a.regular,lineHeight:1.4,letterSpacing:0,breakpoints:{xlg:{fontSize:(0,n.hO)(20),lineHeight:1.4},max:{fontSize:(0,n.hO)(24),lineHeight:1.334}}},j={fontSize:(0,n.hO)(28),fontWeight:a.regular,lineHeight:1.28572,letterSpacing:0,breakpoints:{xlg:{fontSize:(0,n.hO)(32),fontWeight:a.regular,lineHeight:1.25},max:{fontSize:(0,n.hO)(32),fontWeight:a.regular}}},B={fontSize:(0,n.hO)(32),fontWeight:a.regular,lineHeight:1.25,letterSpacing:0,breakpoints:{md:{fontSize:(0,n.hO)(36),fontWeight:a.light,lineHeight:1.22,letterSpacing:0},lg:{fontSize:(0,n.hO)(42),lineHeight:1.19,letterSpacing:0},xlg:{fontSize:(0,n.hO)(48),lineHeight:1.17,letterSpacing:0},max:{fontSize:(0,n.hO)(60),letterSpacing:0}}},z={fontSize:(0,n.hO)(32),fontWeight:a.semibold,lineHeight:1.25,letterSpacing:0,breakpoints:{md:{fontSize:(0,n.hO)(36),fontWeight:a.semibold,lineHeight:1.22,letterSpacing:0},lg:{fontSize:(0,n.hO)(42),fontWeight:a.semibold,lineHeight:1.19,letterSpacing:0},xlg:{fontSize:(0,n.hO)(48),fontWeight:a.semibold,lineHeight:1.17,letterSpacing:0},max:{fontSize:(0,n.hO)(60),fontWeight:a.semibold,letterSpacing:0}}},W={fontSize:(0,n.hO)(24),fontWeight:a.light,lineHeight:1.334,letterSpacing:0,breakpoints:{lg:{fontSize:(0,n.hO)(28),lineHeight:1.28572},max:{fontSize:(0,n.hO)(32),lineHeight:1.25}}},G={fontFamily:i.serif,fontSize:(0,n.hO)(20),fontWeight:a.regular,lineHeight:1.3,letterSpacing:0,breakpoints:{md:{fontSize:(0,n.hO)(20),fontWeight:a.regular,letterSpacing:0},lg:{fontSize:(0,n.hO)(24),fontWeight:a.regular,lineHeight:1.334,letterSpacing:0},xlg:{fontSize:(0,n.hO)(28),fontWeight:a.regular,lineHeight:1.28572,letterSpacing:0},max:{fontSize:(0,n.hO)(32),fontWeight:a.regular,lineHeight:1.25,letterSpacing:0}}},Z={fontFamily:i.serif,fontSize:(0,n.hO)(32),fontWeight:a.light,lineHeight:1.25,letterSpacing:0,breakpoints:{md:{fontSize:(0,n.hO)(36),lineHeight:1.22},lg:{fontSize:(0,n.hO)(42),lineHeight:1.19},xlg:{fontSize:(0,n.hO)(48),lineHeight:1.17},max:{fontSize:(0,n.hO)(60)}}},q={fontSize:(0,n.hO)(42),fontWeight:a.light,lineHeight:1.19,letterSpacing:0,breakpoints:{md:{fontSize:(0,n.hO)(42)},lg:{fontSize:(0,n.hO)(54)},xlg:{fontSize:(0,n.hO)(60),lineHeight:1.17},max:{fontSize:(0,n.hO)(76),lineHeight:1.13}}},$={fontSize:(0,n.hO)(42),fontWeight:a.semibold,lineHeight:1.19,letterSpacing:0,breakpoints:{md:{fontSize:(0,n.hO)(42)},lg:{fontSize:(0,n.hO)(54)},xlg:{fontSize:(0,n.hO)(60),lineHeight:1.16},max:{fontSize:(0,n.hO)(76),lineHeight:1.13}}},Y={fontSize:(0,n.hO)(42),fontWeight:a.light,lineHeight:1.19,letterSpacing:0,breakpoints:{md:{fontSize:(0,n.hO)(54),lineHeight:1.18},lg:{fontSize:(0,n.hO)(60),lineHeight:1.16,letterSpacing:(0,n.px)(-.64)},xlg:{fontSize:(0,n.hO)(76),lineHeight:1.13},max:{fontSize:(0,n.hO)(84),lineHeight:1.11,letterSpacing:(0,n.px)(-.96)}}},X={fontSize:(0,n.hO)(42),fontWeight:a.light,lineHeight:1.19,letterSpacing:0,breakpoints:{md:{fontSize:(0,n.hO)(68),lineHeight:1.15},lg:{fontSize:(0,n.hO)(92),lineHeight:1.11,letterSpacing:(0,n.px)(-.64)},xlg:{fontSize:(0,n.hO)(122),lineHeight:1.07,letterSpacing:(0,n.px)(-.64)},max:{fontSize:(0,n.hO)(156),lineHeight:1.05,letterSpacing:(0,n.px)(-.96)}}},Q={fontSize:(0,n.hO)(12),fontWeight:a.regular,lineHeight:1.33333,letterSpacing:(0,n.px)(.32)},ee={fontSize:(0,n.hO)(14),fontWeight:a.regular,lineHeight:1.28572,letterSpacing:(0,n.px)(.16)},et=g,er=y,en=m,ei=v,eo=R,ea=A,es=C,ec=k,el=P,eu=N,ed=L,ef=D,eh=j,ep=B,eg=z,em=W,ey=G,ev=Z,ex=q,eb=$,eE=Y,eT=X;Object.keys(n.AV);var eO=["caption01","caption02","label01","label02","helperText01","helperText02","bodyShort01","bodyLong01","bodyShort02","bodyLong02","code01","code02","heading01","productiveHeading01","heading02","productiveHeading02","productiveHeading03","productiveHeading04","productiveHeading05","productiveHeading06","productiveHeading07","expressiveHeading01","expressiveHeading02","expressiveHeading03","expressiveHeading04","expressiveHeading05","expressiveHeading06","expressiveParagraph01","quotation01","quotation02","display01","display02","display03","display04","legal01","legal02","bodyCompact01","bodyCompact02","body01","body02","headingCompact01","headingCompact02","heading03","heading04","heading05","heading06","heading07","fluidHeading03","fluidHeading04","fluidHeading05","fluidHeading06","fluidParagraph01","fluidQuotation01","fluidQuotation02","fluidDisplay01","fluidDisplay02","fluidDisplay03","fluidDisplay04"]},91433:function(e,t){"use strict";var r=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};function isEmpty(e){return e&&0===e.length}function keys(e){return null==e?[]:Object.keys(e)}function values(e){for(var t=[],r=Object.keys(e),n=0;n<r.length;n++)t.push(e[r[n]]);return t}function mapValues(e,t){for(var r=[],n=keys(e),i=0;i<n.length;i++){var a=n[i];r.push(t.call(null,e[a],a))}return r}function map(e,t){for(var r=[],n=0;n<e.length;n++)r.push(t.call(null,e[n],n));return r}function flatten(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];Array.isArray(n)?t=t.concat(flatten(n)):t.push(n)}return t}function first(e){return isEmpty(e)?void 0:e[0]}function last(e){var t=e&&e.length;return t?e[t-1]:void 0}function forEach(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)t.call(null,e[r],r);else if(isObject(e))for(var n=keys(e),r=0;r<n.length;r++){var i=n[r],a=e[i];t.call(null,a,i)}else throw Error("non exhaustive match")}function isString(e){return"string"==typeof e}function isUndefined(e){return void 0===e}function isFunction(e){return e instanceof Function}function drop(e,t){return void 0===t&&(t=1),e.slice(t,e.length)}function dropRight(e,t){return void 0===t&&(t=1),e.slice(0,e.length-t)}function filter(e,t){var r=[];if(Array.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];t.call(null,i)&&r.push(i)}return r}function reject(e,t){return filter(e,function(e){return!t(e)})}function pick(e,t){for(var r=Object.keys(e),n={},i=0;i<r.length;i++){var a=r[i],s=e[a];t(s)&&(n[a]=s)}return n}function has(e,t){return!!isObject(e)&&e.hasOwnProperty(t)}function contains(e,t){return void 0!==find(e,function(e){return e===t})}function cloneArr(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t}function cloneObj(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function find(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(t.call(null,n))return n}}function findAll(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n];t.call(null,i)&&r.push(i)}return r}function reduce(e,t,r){for(var n=Array.isArray(e),i=n?e:values(e),a=n?[]:keys(e),s=r,l=0;l<i.length;l++)s=t.call(null,s,i[l],n?l:a[l]);return s}function compact(e){return reject(e,function(e){return null==e})}function uniq(e,t){void 0===t&&(t=function(e){return e});var r=[];return reduce(e,function(e,n){var i=t(n);return contains(r,i)?e:(r.push(i),e.concat(n))},[])}function partial(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=[null].concat(t);return Function.bind.apply(e,n)}function isArray(e){return Array.isArray(e)}function isRegExp(e){return e instanceof RegExp}function isObject(e){return e instanceof Object}function every(e,t){for(var r=0;r<e.length;r++)if(!t(e[r],r))return!1;return!0}function difference(e,t){return reject(e,function(e){return contains(t,e)})}function some(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}function indexOf(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return r;return -1}function sortBy(e,t){var r=cloneArr(e);return r.sort(function(e,r){return t(e)-t(r)}),r}function zipObject(e,t){if(e.length!==t.length)throw Error("can't zipObject with different number of keys and values!");for(var r={},n=0;n<e.length;n++)r[e[n]]=t[n];return r}function assign(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n++)for(var i=t[n],a=keys(i),s=0;s<a.length;s++){var l=a[s];e[l]=i[l]}return e}function assignNoOverwrite(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n++)for(var i=t[n],a=keys(i),s=0;s<a.length;s++){var l=a[s];has(e,l)||(e[l]=i[l])}return e}function defaults(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return assignNoOverwrite.apply(void 0,r([{}],e,!1))}function groupBy(e,t){var r={};return forEach(e,function(e){var n=t(e),i=r[n];i?i.push(e):r[n]=[e]}),r}function merge(e,t){for(var r=cloneObj(e),n=keys(t),i=0;i<n.length;i++){var a=n[i],s=t[a];r[a]=s}return r}function NOOP(){}function IDENTITY(e){return e}function packArray(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(void 0!==n?n:void 0)}return t}function PRINT_ERROR(e){console&&console.error&&console.error("Error: "+e)}function PRINT_WARNING(e){console&&console.warn&&console.warn("Warning: "+e)}function isES2015MapSupported(){return"function"==typeof Map}function peek(e){return e[e.length-1]}function timer(e){var t=new Date().getTime(),r=e();return{time:new Date().getTime()-t,value:r}}function toFastProperties(e){function FakeConstructor(){}FakeConstructor.prototype=e;var t=new FakeConstructor;function fakeAccess(){return typeof t.bar}return fakeAccess(),fakeAccess(),e}function upperFirst(e){if(!e)return e;var t=getCharacterFromCodePointAt(e,0);return t.toUpperCase()+e.substring(t.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.toFastProperties=t.timer=t.peek=t.isES2015MapSupported=t.PRINT_WARNING=t.PRINT_ERROR=t.packArray=t.IDENTITY=t.NOOP=t.merge=t.groupBy=t.defaults=t.assignNoOverwrite=t.assign=t.zipObject=t.sortBy=t.indexOf=t.some=t.difference=t.every=t.isObject=t.isRegExp=t.isArray=t.partial=t.uniq=t.compact=t.reduce=t.findAll=t.find=t.cloneObj=t.cloneArr=t.contains=t.has=t.pick=t.reject=t.filter=t.dropRight=t.drop=t.isFunction=t.isUndefined=t.isString=t.forEach=t.last=t.first=t.flatten=t.map=t.mapValues=t.values=t.keys=t.isEmpty=void 0,t.upperFirst=void 0,t.isEmpty=isEmpty,t.keys=keys,t.values=values,t.mapValues=mapValues,t.map=map,t.flatten=flatten,t.first=first,t.last=last,t.forEach=forEach,t.isString=isString,t.isUndefined=isUndefined,t.isFunction=isFunction,t.drop=drop,t.dropRight=dropRight,t.filter=filter,t.reject=reject,t.pick=pick,t.has=has,t.contains=contains,t.cloneArr=cloneArr,t.cloneObj=cloneObj,t.find=find,t.findAll=findAll,t.reduce=reduce,t.compact=compact,t.uniq=uniq,t.partial=partial,t.isArray=isArray,t.isRegExp=isRegExp,t.isObject=isObject,t.every=every,t.difference=difference,t.some=some,t.indexOf=indexOf,t.sortBy=sortBy,t.zipObject=zipObject,t.assign=assign,t.assignNoOverwrite=assignNoOverwrite,t.defaults=defaults,t.groupBy=groupBy,t.merge=merge,t.NOOP=NOOP,t.IDENTITY=IDENTITY,t.packArray=packArray,t.PRINT_ERROR=PRINT_ERROR,t.PRINT_WARNING=PRINT_WARNING,t.isES2015MapSupported=isES2015MapSupported,t.peek=peek,t.timer=timer,t.toFastProperties=toFastProperties,t.upperFirst=upperFirst;var n=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;function getCharacterFromCodePointAt(e,t){var r=e.substring(t,t+1);return n.test(r)?r:e[t]}},54925:function(e,t,r){"use strict";t._b=t.H7=t.LK=t.Mf=t.SE=t.N$=t.oI=t.$9=t.pT=t.fK=t.ej=t.hI=t.Wx=t.Sj=t.r3=t.ue=t.ZW=t.z5=t.Oq=t.P7=t.bS=t.N7=t.Hs=t.vA=t.ol=t.l$=t.sd=t.dK=t.V3=t.Bw=t.hW=t._o=t.b4=t.nu=t.wd=t.q4=void 0;var n=r(62839);Object.defineProperty(t,"q4",{enumerable:!0,get:function(){return n.VERSION}});var i=r(72092);Object.defineProperty(t,"wd",{enumerable:!0,get:function(){return i.CstParser}}),Object.defineProperty(t,"nu",{enumerable:!0,get:function(){return i.EmbeddedActionsParser}}),Object.defineProperty(t,"b4",{enumerable:!0,get:function(){return i.ParserDefinitionErrorType}}),Object.defineProperty(t,"_o",{enumerable:!0,get:function(){return i.EMPTY_ALT}});var a=r(80593);Object.defineProperty(t,"hW",{enumerable:!0,get:function(){return a.Lexer}}),Object.defineProperty(t,"Bw",{enumerable:!0,get:function(){return a.LexerDefinitionErrorType}});var s=r(40711);Object.defineProperty(t,"V3",{enumerable:!0,get:function(){return s.createToken}}),Object.defineProperty(t,"dK",{enumerable:!0,get:function(){return s.createTokenInstance}}),Object.defineProperty(t,"sd",{enumerable:!0,get:function(){return s.EOF}}),Object.defineProperty(t,"l$",{enumerable:!0,get:function(){return s.tokenLabel}}),Object.defineProperty(t,"ol",{enumerable:!0,get:function(){return s.tokenMatcher}}),Object.defineProperty(t,"vA",{enumerable:!0,get:function(){return s.tokenName}});var l=r(23566);Object.defineProperty(t,"Hs",{enumerable:!0,get:function(){return l.defaultParserErrorProvider}});var u=r(60193);Object.defineProperty(t,"N7",{enumerable:!0,get:function(){return u.EarlyExitException}}),Object.defineProperty(t,"bS",{enumerable:!0,get:function(){return u.isRecognitionException}}),Object.defineProperty(t,"P7",{enumerable:!0,get:function(){return u.MismatchedTokenException}}),Object.defineProperty(t,"Oq",{enumerable:!0,get:function(){return u.NotAllInputParsedException}}),Object.defineProperty(t,"z5",{enumerable:!0,get:function(){return u.NoViableAltException}});var d=r(65389);Object.defineProperty(t,"ZW",{enumerable:!0,get:function(){return d.defaultLexerErrorProvider}});var f=r(84925);Object.defineProperty(t,"ue",{enumerable:!0,get:function(){return f.Alternation}}),Object.defineProperty(t,"r3",{enumerable:!0,get:function(){return f.Alternative}}),Object.defineProperty(t,"Sj",{enumerable:!0,get:function(){return f.NonTerminal}}),Object.defineProperty(t,"Wx",{enumerable:!0,get:function(){return f.Option}}),Object.defineProperty(t,"hI",{enumerable:!0,get:function(){return f.Repetition}}),Object.defineProperty(t,"ej",{enumerable:!0,get:function(){return f.RepetitionMandatory}}),Object.defineProperty(t,"fK",{enumerable:!0,get:function(){return f.RepetitionMandatoryWithSeparator}}),Object.defineProperty(t,"pT",{enumerable:!0,get:function(){return f.RepetitionWithSeparator}}),Object.defineProperty(t,"$9",{enumerable:!0,get:function(){return f.Rule}}),Object.defineProperty(t,"oI",{enumerable:!0,get:function(){return f.Terminal}});var p=r(84925);Object.defineProperty(t,"N$",{enumerable:!0,get:function(){return p.serializeGrammar}}),Object.defineProperty(t,"SE",{enumerable:!0,get:function(){return p.serializeProduction}});var g=r(17884);function clearCache(){console.warn("The clearCache function was 'soft' removed from the Chevrotain API.\n	 It performs no action other than printing this message.\n	 Please avoid using it as it will be completely removed in the future")}Object.defineProperty(t,"Mf",{enumerable:!0,get:function(){return g.GAstVisitor}}),t.LK=clearCache;var m=r(61084);Object.defineProperty(t,"H7",{enumerable:!0,get:function(){return m.createSyntaxDiagramsCode}}),t._b=function(){throw Error("The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.	\nSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0")}},61084:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSyntaxDiagramsCode=void 0;var n=r(62839);function createSyntaxDiagramsCode(e,t){var r=void 0===t?{}:t,i=r.resourceBase,a=void 0===i?"https://unpkg.com/chevrotain@"+n.VERSION+"/diagrams/":i,s=r.css;return"\n<!-- This is a generated file -->\n<!DOCTYPE html>\n<meta charset=\"utf-8\">\n<style>\n  body {\n    background-color: hsl(30, 20%, 95%)\n  }\n</style>\n\n\n<link rel='stylesheet' href='"+(void 0===s?"https://unpkg.com/chevrotain@"+n.VERSION+"/diagrams/diagrams.css":s)+"'>\n"+("\n<script src='"+a+"vendor/railroad-diagrams.js'></script>\n<script src='"+a+"src/diagrams_builder.js'></script>\n<script src='"+a)+"src/diagrams_behavior.js'></script>\n<script src='"+a+'src/main.js\'></script>\n\n<div id="diagrams" align="center"></div>    \n'+("\n<script>\n    window.serializedGrammar = "+JSON.stringify(e,null,"  "))+';\n</script>\n\n<script>\n    var diagramsDiv = document.getElementById("diagrams");\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\n</script>\n'}t.createSyntaxDiagramsCode=createSyntaxDiagramsCode},98543:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineNameProp=t.functionName=t.classNameFromInstance=void 0;var n=r(91433);function classNameFromInstance(e){return functionName(e.constructor)}t.classNameFromInstance=classNameFromInstance;var i="name";function functionName(e){return e.name||"anonymous"}function defineNameProp(e,t){var r=Object.getOwnPropertyDescriptor(e,i);return(!!(0,n.isUndefined)(r)||!!r.configurable)&&(Object.defineProperty(e,i,{enumerable:!1,configurable:!0,writable:!1,value:t}),!0)}t.functionName=functionName,t.defineNameProp=defineNameProp},2786:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IN=void 0,t.IN="_~IN~_"},40886:function(e,t){"use strict";function setNodeLocationOnlyOffset(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset==!0&&(e.endOffset=t.endOffset)}function setNodeLocationFull(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset==!0&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}function addTerminalToCst(e,t,r){void 0===e.children[r]?e.children[r]=[t]:e.children[r].push(t)}function addNoneTerminalToCst(e,t,r){void 0===e.children[t]?e.children[t]=[r]:e.children[t].push(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.addNoneTerminalToCst=t.addTerminalToCst=t.setNodeLocationFull=t.setNodeLocationOnlyOffset=void 0,t.setNodeLocationOnlyOffset=setNodeLocationOnlyOffset,t.setNodeLocationFull=setNodeLocationFull,t.addTerminalToCst=addTerminalToCst,t.addNoneTerminalToCst=addNoneTerminalToCst},25980:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateRedundantMethods=t.validateMissingCstMethods=t.validateVisitor=t.CstVisitorDefinitionError=t.createBaseVisitorConstructorWithDefaults=t.createBaseSemanticVisitorConstructor=t.defaultVisit=void 0;var n,i,a=r(91433),s=r(98543);function defaultVisit(e,t){for(var r=(0,a.keys)(e),n=r.length,i=0;i<n;i++)for(var s=e[r[i]],l=s.length,u=0;u<l;u++){var d=s[u];void 0===d.tokenTypeIdx&&this[d.name](d.children,t)}}function createBaseSemanticVisitorConstructor(e,t){var derivedConstructor=function(){};return(0,s.defineNameProp)(derivedConstructor,e+"BaseSemantics"),derivedConstructor.prototype={visit:function(e,t){if((0,a.isArray)(e)&&(e=e[0]),!(0,a.isUndefined)(e))return this[e.name](e.children,t)},validateVisitor:function(){var e=validateVisitor(this,t);if(!(0,a.isEmpty)(e)){var r=(0,a.map)(e,function(e){return e.msg});throw Error("Errors Detected in CST Visitor <"+(0,s.functionName)(this.constructor)+">:\n	"+r.join("\n\n").replace(/\n/g,"\n	"))}}},derivedConstructor.prototype.constructor=derivedConstructor,derivedConstructor._RULE_NAMES=t,derivedConstructor}function createBaseVisitorConstructorWithDefaults(e,t,r){var derivedConstructor=function(){};(0,s.defineNameProp)(derivedConstructor,e+"BaseSemanticsWithDefaults");var n=Object.create(r.prototype);return(0,a.forEach)(t,function(e){n[e]=defaultVisit}),derivedConstructor.prototype=n,derivedConstructor.prototype.constructor=derivedConstructor,derivedConstructor}function validateVisitor(e,t){var r=validateMissingCstMethods(e,t),n=validateRedundantMethods(e,t);return r.concat(n)}function validateMissingCstMethods(e,t){var r=(0,a.map)(t,function(t){if(!(0,a.isFunction)(e[t]))return{msg:"Missing visitor method: <"+t+"> on "+(0,s.functionName)(e.constructor)+" CST Visitor.",type:i.MISSING_METHOD,methodName:t}});return(0,a.compact)(r)}t.defaultVisit=defaultVisit,t.createBaseSemanticVisitorConstructor=createBaseSemanticVisitorConstructor,t.createBaseVisitorConstructorWithDefaults=createBaseVisitorConstructorWithDefaults,(n=i=t.CstVisitorDefinitionError||(t.CstVisitorDefinitionError={}))[n.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",n[n.MISSING_METHOD=1]="MISSING_METHOD",t.validateVisitor=validateVisitor,t.validateMissingCstMethods=validateMissingCstMethods;var l=["constructor","visit","validateVisitor"];function validateRedundantMethods(e,t){var r=[];for(var n in e)!(0,a.isFunction)(e[n])||(0,a.contains)(l,n)||(0,a.contains)(t,n)||r.push({msg:"Redundant visitor method: <"+n+"> on "+(0,s.functionName)(e.constructor)+" CST Visitor\nThere is no Grammar Rule corresponding to this method's name.\n",type:i.REDUNDANT_METHOD,methodName:n});return r}t.validateRedundantMethods=validateRedundantMethods},23566:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultGrammarValidatorErrorProvider=t.defaultGrammarResolverErrorProvider=t.defaultParserErrorProvider=void 0;var n=r(40711),i=r(91433),a=r(91433),s=r(84925),l=r(48527);t.defaultParserErrorProvider={buildMismatchTokenMessage:function(e){var t=e.expected,r=e.actual;return e.previous,e.ruleName,"Expecting "+((0,n.hasTokenLabel)(t)?"--> "+(0,n.tokenLabel)(t)+" <--":"token of type --> "+t.name+" <--")+" but found --> '"+r.image+"' <--"},buildNotAllInputParsedMessage:function(e){var t=e.firstRedundant;return e.ruleName,"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage:function(e){var t=e.expectedPathsPerAlt,r=e.actual,i=(e.previous,e.customUserDescription);e.ruleName;var s="Expecting: ",l="\nbut found: '"+(0,a.first)(r).image+"'";if(i)return s+i+l;var u=(0,a.reduce)(t,function(e,t){return e.concat(t)},[]),d=(0,a.map)(u,function(e){return"["+(0,a.map)(e,function(e){return(0,n.tokenLabel)(e)}).join(", ")+"]"});return s+"one of these possible Token sequences:\n"+(0,a.map)(d,function(e,t){return"  "+(t+1)+". "+e}).join("\n")+l},buildEarlyExitMessage:function(e){var t=e.expectedIterationPaths,r=e.actual,i=e.customUserDescription;e.ruleName;var s="Expecting: ",l="\nbut found: '"+(0,a.first)(r).image+"'";return i?s+i+l:s+"expecting at least one iteration which starts with one of these possible Token sequences::\n  <"+(0,a.map)(t,function(e){return"["+(0,a.map)(e,function(e){return(0,n.tokenLabel)(e)}).join(",")+"]"}).join(" ,")+">"+l}},Object.freeze(t.defaultParserErrorProvider),t.defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(e,t){return"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+"<-\ninside top level rule: ->"+e.name+"<-"}},t.defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(e,t){function getExtraProductionArgument(e){return e instanceof s.Terminal?e.terminalType.name:e instanceof s.NonTerminal?e.nonTerminalName:""}var r=e.name,n=(0,a.first)(t),i=n.idx,u=(0,l.getProductionDslName)(n),d=getExtraProductionArgument(n),f="->"+u+(i>0?i:"")+"<- "+(d?"with argument: ->"+d+"<-":"")+"\n                  appears more than once ("+t.length+" times) in the top level rule: ->"+r+"<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  ";return(f=f.replace(/[ \t]+/g," ")).replace(/\s\s+/g,"\n")},buildNamespaceConflictError:function(e){return"Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+e.name+">.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter."},buildAlternationPrefixAmbiguityError:function(e){var t=(0,a.map)(e.prefixPath,function(e){return(0,n.tokenLabel)(e)}).join(", "),r=0===e.alternation.idx?"":e.alternation.idx;return"Ambiguous alternatives: <"+e.ambiguityIndices.join(" ,")+"> due to common lookahead prefix\n"+("in <OR"+r)+"> inside <"+e.topLevelRule.name+"> Rule,\n<"+t+"> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details."},buildAlternationAmbiguityError:function(e){var t=(0,a.map)(e.prefixPath,function(e){return(0,n.tokenLabel)(e)}).join(", "),r=0===e.alternation.idx?"":e.alternation.idx;return"Ambiguous Alternatives Detected: <"+e.ambiguityIndices.join(" ,")+"> in <OR"+r+"> inside <"+e.topLevelRule.name+"> Rule,\n<"+t+"> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details."},buildEmptyRepetitionError:function(e){var t=(0,l.getProductionDslName)(e.repetition);return 0!==e.repetition.idx&&(t+=e.repetition.idx),"The repetition <"+t+"> within Rule <"+e.topLevelRule.name+"> can never consume any tokens.\nThis could lead to an infinite loop."},buildTokenNameError:function(e){return"deprecated"},buildEmptyAlternationError:function(e){return"Ambiguous empty alternative: <"+(e.emptyChoiceIdx+1)+">"+(" in <OR"+e.alternation.idx)+"> inside <"+e.topLevelRule.name+"> Rule.\nOnly the last alternative may be an empty alternative."},buildTooManyAlternativesError:function(e){return"An Alternation cannot have more than 256 alternatives:\n"+("<OR"+e.alternation.idx+"> inside <"+e.topLevelRule.name)+"> Rule.\n has "+(e.alternation.definition.length+1)+" alternatives."},buildLeftRecursionError:function(e){var t=e.topLevelRule.name,r=t+" --> "+i.map(e.leftRecursionPath,function(e){return e.name}).concat([t]).join(" --> ");return"Left Recursion found in grammar.\nrule: <"+t+"> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n "+r+"\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring."},buildInvalidRuleNameError:function(e){return"deprecated"},buildDuplicateRuleNameError:function(e){return"Duplicate definition, rule: ->"+(e.topLevelRule instanceof s.Rule?e.topLevelRule.name:e.topLevelRule)+"<- is already defined in the grammar: ->"+e.grammarName+"<-"}}},60193:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.EarlyExitException=t.NotAllInputParsedException=t.NoViableAltException=t.MismatchedTokenException=t.isRecognitionException=void 0;var a=r(91433),s="MismatchedTokenException",l="NoViableAltException",u="EarlyExitException",d="NotAllInputParsedException",f=[s,l,u,d];function isRecognitionException(e){return(0,a.contains)(f,e.name)}Object.freeze(f),t.isRecognitionException=isRecognitionException;var p=function(e){function RecognitionException(t,r){var n=this.constructor,i=e.call(this,t)||this;return i.token=r,i.resyncedTokens=[],Object.setPrototypeOf(i,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,i.constructor),i}return i(RecognitionException,e),RecognitionException}(Error),g=function(e){function MismatchedTokenException(t,r,n){var i=e.call(this,t,r)||this;return i.previousToken=n,i.name=s,i}return i(MismatchedTokenException,e),MismatchedTokenException}(p);t.MismatchedTokenException=g;var m=function(e){function NoViableAltException(t,r,n){var i=e.call(this,t,r)||this;return i.previousToken=n,i.name=l,i}return i(NoViableAltException,e),NoViableAltException}(p);t.NoViableAltException=m;var y=function(e){function NotAllInputParsedException(t,r){var n=e.call(this,t,r)||this;return n.name=d,n}return i(NotAllInputParsedException,e),NotAllInputParsedException}(p);t.NotAllInputParsedException=y;var v=function(e){function EarlyExitException(t,r,n){var i=e.call(this,t,r)||this;return i.previousToken=n,i.name=u,i}return i(EarlyExitException,e),EarlyExitException}(p);t.EarlyExitException=v},6678:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.checkPrefixAlternativesAmbiguities=t.validateSomeNonEmptyLookaheadPath=t.validateTooManyAlts=t.RepetionCollector=t.validateAmbiguousAlternationAlternatives=t.validateEmptyOrAlternative=t.getFirstNoneTerminal=t.validateNoLeftRecursion=t.validateRuleIsOverridden=t.validateRuleDoesNotAlreadyExist=t.OccurrenceValidationCollector=t.identifyProductionForDuplicates=t.validateGrammar=void 0;var a=r(91433),s=r(91433),l=r(72092),u=r(48527),d=r(61054),f=r(2717),p=r(84925),g=r(17884);function validateGrammar(e,t,r,n,i){var l=a.map(e,function(e){return validateDuplicateProductions(e,n)}),u=a.map(e,function(e){return validateNoLeftRecursion(e,e,n)}),d=[],f=[],p=[];(0,s.every)(u,s.isEmpty)&&(d=(0,s.map)(e,function(e){return validateEmptyOrAlternative(e,n)}),f=(0,s.map)(e,function(e){return validateAmbiguousAlternationAlternatives(e,t,n)}),p=validateSomeNonEmptyLookaheadPath(e,t,n));var g=checkTerminalAndNoneTerminalsNameSpace(e,r,n),m=(0,s.map)(e,function(e){return validateTooManyAlts(e,n)}),y=(0,s.map)(e,function(t){return validateRuleDoesNotAlreadyExist(t,e,i,n)});return a.flatten(l.concat(p,u,d,f,g,m,y))}function validateDuplicateProductions(e,t){var r=new m;e.accept(r);var n=r.allProductions,i=a.groupBy(n,identifyProductionForDuplicates),s=a.pick(i,function(e){return e.length>1});return a.map(a.values(s),function(r){var n=a.first(r),i=t.buildDuplicateFoundError(e,r),s=(0,u.getProductionDslName)(n),d={message:i,type:l.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:s,occurrence:n.idx},f=getExtraProductionArgument(n);return f&&(d.parameter=f),d})}function identifyProductionForDuplicates(e){return(0,u.getProductionDslName)(e)+"_#_"+e.idx+"_#_"+getExtraProductionArgument(e)}function getExtraProductionArgument(e){return e instanceof p.Terminal?e.terminalType.name:e instanceof p.NonTerminal?e.nonTerminalName:""}t.validateGrammar=validateGrammar,t.identifyProductionForDuplicates=identifyProductionForDuplicates;var m=function(e){function OccurrenceValidationCollector(){var t=null!==e&&e.apply(this,arguments)||this;return t.allProductions=[],t}return i(OccurrenceValidationCollector,e),OccurrenceValidationCollector.prototype.visitNonTerminal=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitOption=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitRepetitionWithSeparator=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitRepetitionMandatory=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitRepetition=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitAlternation=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitTerminal=function(e){this.allProductions.push(e)},OccurrenceValidationCollector}(g.GAstVisitor);function validateRuleDoesNotAlreadyExist(e,t,r,n){var i=[];if((0,s.reduce)(t,function(t,r){return r.name===e.name?t+1:t},0)>1){var a=n.buildDuplicateRuleNameError({topLevelRule:e,grammarName:r});i.push({message:a,type:l.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:e.name})}return i}function validateRuleIsOverridden(e,t,r){var n=[];return a.contains(t,e)||n.push({message:"Invalid rule override, rule: ->"+e+"<- cannot be overridden in the grammar: ->"+r+"<-as it is not defined in any of the super grammars ",type:l.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:e}),n}function validateNoLeftRecursion(e,t,r,n){void 0===n&&(n=[]);var i=[],s=getFirstNoneTerminal(t.definition);if(a.isEmpty(s))return[];var u=e.name;a.contains(s,e)&&i.push({message:r.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:n}),type:l.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:u});var d=a.difference(s,n.concat([e])),f=a.map(d,function(t){var i=a.cloneArr(n);return i.push(t),validateNoLeftRecursion(e,t,r,i)});return i.concat(a.flatten(f))}function getFirstNoneTerminal(e){var t=[];if(a.isEmpty(e))return t;var r=a.first(e);if(r instanceof p.NonTerminal)t.push(r.referencedRule);else if(r instanceof p.Alternative||r instanceof p.Option||r instanceof p.RepetitionMandatory||r instanceof p.RepetitionMandatoryWithSeparator||r instanceof p.RepetitionWithSeparator||r instanceof p.Repetition)t=t.concat(getFirstNoneTerminal(r.definition));else if(r instanceof p.Alternation)t=a.flatten(a.map(r.definition,function(e){return getFirstNoneTerminal(e.definition)}));else if(r instanceof p.Terminal);else throw Error("non exhaustive match");var n=(0,u.isOptionalProd)(r),i=e.length>1;if(!n||!i)return t;var s=a.drop(e);return t.concat(getFirstNoneTerminal(s))}t.OccurrenceValidationCollector=m,t.validateRuleDoesNotAlreadyExist=validateRuleDoesNotAlreadyExist,t.validateRuleIsOverridden=validateRuleIsOverridden,t.validateNoLeftRecursion=validateNoLeftRecursion,t.getFirstNoneTerminal=getFirstNoneTerminal;var y=function(e){function OrCollector(){var t=null!==e&&e.apply(this,arguments)||this;return t.alternations=[],t}return i(OrCollector,e),OrCollector.prototype.visitAlternation=function(e){this.alternations.push(e)},OrCollector}(g.GAstVisitor);function validateEmptyOrAlternative(e,t){var r=new y;e.accept(r);var n=r.alternations;return a.reduce(n,function(r,n){var i=a.dropRight(n.definition),s=a.map(i,function(r,i){var s=(0,f.nextPossibleTokensAfter)([r],[],null,1);return a.isEmpty(s)?{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:n,emptyChoiceIdx:i}),type:l.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:n.idx,alternative:i+1}:null});return r.concat(a.compact(s))},[])}function validateAmbiguousAlternationAlternatives(e,t,r){var n=new y;e.accept(n);var i=n.alternations;return i=(0,s.reject)(i,function(e){return!0===e.ignoreAmbiguities}),a.reduce(i,function(n,i){var a=i.idx,s=i.maxLookahead||t,l=(0,d.getLookaheadPathsForOr)(a,e,s,i),u=checkAlternativesAmbiguities(l,i,e,r),f=checkPrefixAlternativesAmbiguities(l,i,e,r);return n.concat(u,f)},[])}t.validateEmptyOrAlternative=validateEmptyOrAlternative,t.validateAmbiguousAlternationAlternatives=validateAmbiguousAlternationAlternatives;var v=function(e){function RepetionCollector(){var t=null!==e&&e.apply(this,arguments)||this;return t.allProductions=[],t}return i(RepetionCollector,e),RepetionCollector.prototype.visitRepetitionWithSeparator=function(e){this.allProductions.push(e)},RepetionCollector.prototype.visitRepetitionMandatory=function(e){this.allProductions.push(e)},RepetionCollector.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.allProductions.push(e)},RepetionCollector.prototype.visitRepetition=function(e){this.allProductions.push(e)},RepetionCollector}(g.GAstVisitor);function validateTooManyAlts(e,t){var r=new y;e.accept(r);var n=r.alternations;return a.reduce(n,function(r,n){return n.definition.length>255&&r.push({message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:n}),type:l.ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:e.name,occurrence:n.idx}),r},[])}function validateSomeNonEmptyLookaheadPath(e,t,r){var n=[];return(0,s.forEach)(e,function(e){var i=new v;e.accept(i);var a=i.allProductions;(0,s.forEach)(a,function(i){var a=(0,d.getProdType)(i),u=i.maxLookahead||t,f=i.idx,p=(0,d.getLookaheadPathsForOptionalProd)(f,e,a,u)[0];if((0,s.isEmpty)((0,s.flatten)(p))){var g=r.buildEmptyRepetitionError({topLevelRule:e,repetition:i});n.push({message:g,type:l.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:e.name})}})}),n}function checkAlternativesAmbiguities(e,t,r,n){var i=[],u=(0,s.reduce)(e,function(r,n,a){return!0===t.definition[a].ignoreAmbiguities||(0,s.forEach)(n,function(n){var l=[a];(0,s.forEach)(e,function(e,r){a!==r&&(0,d.containsPath)(e,n)&&!0!==t.definition[r].ignoreAmbiguities&&l.push(r)}),l.length>1&&!(0,d.containsPath)(i,n)&&(i.push(n),r.push({alts:l,path:n}))}),r},[]);return a.map(u,function(e){var i=(0,s.map)(e.alts,function(e){return e+1});return{message:n.buildAlternationAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:l.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:t.idx,alternatives:[e.alts]}})}function checkPrefixAlternativesAmbiguities(e,t,r,n){var i=[],a=(0,s.reduce)(e,function(e,t,r){var n=(0,s.map)(t,function(e){return{idx:r,path:e}});return e.concat(n)},[]);return(0,s.forEach)(a,function(e){if(!0!==t.definition[e.idx].ignoreAmbiguities){var u=e.idx,f=e.path,p=(0,s.findAll)(a,function(e){return!0!==t.definition[e.idx].ignoreAmbiguities&&e.idx<u&&(0,d.isStrictPrefixOfPath)(e.path,f)}),g=(0,s.map)(p,function(e){var i=[e.idx+1,u+1],a=0===t.idx?"":t.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:l.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:a,alternatives:i}});i=i.concat(g)}}),i}function checkTerminalAndNoneTerminalsNameSpace(e,t,r){var n=[],i=(0,s.map)(t,function(e){return e.name});return(0,s.forEach)(e,function(e){var t=e.name;if((0,s.contains)(i,t)){var a=r.buildNamespaceConflictError(e);n.push({message:a,type:l.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:t})}}),n}t.RepetionCollector=v,t.validateTooManyAlts=validateTooManyAlts,t.validateSomeNonEmptyLookaheadPath=validateSomeNonEmptyLookaheadPath,t.checkPrefixAlternativesAmbiguities=checkPrefixAlternativesAmbiguities},75910:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firstForTerminal=t.firstForBranching=t.firstForSequence=t.first=void 0;var n=r(91433),i=r(84925),a=r(48527);function first(e){if(e instanceof i.NonTerminal)return first(e.referencedRule);if(e instanceof i.Terminal)return firstForTerminal(e);if((0,a.isSequenceProd)(e))return firstForSequence(e);if((0,a.isBranchingProd)(e))return firstForBranching(e);throw Error("non exhaustive match")}function firstForSequence(e){for(var t,r=[],i=e.definition,s=0,l=i.length>s,u=!0;l&&u;)t=i[s],u=(0,a.isOptionalProd)(t),r=r.concat(first(t)),s+=1,l=i.length>s;return(0,n.uniq)(r)}function firstForBranching(e){var t=(0,n.map)(e.definition,function(e){return first(e)});return(0,n.uniq)((0,n.flatten)(t))}function firstForTerminal(e){return[e.terminalType]}t.first=first,t.firstForSequence=firstForSequence,t.firstForBranching=firstForBranching,t.firstForTerminal=firstForTerminal},40291:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.buildInProdFollowPrefix=t.buildBetweenProdsFollowPrefix=t.computeAllProdsFollows=t.ResyncFollowsWalker=void 0;var a=r(48589),s=r(75910),l=r(91433),u=r(2786),d=r(84925),f=function(e){function ResyncFollowsWalker(t){var r=e.call(this)||this;return r.topProd=t,r.follows={},r}return i(ResyncFollowsWalker,e),ResyncFollowsWalker.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},ResyncFollowsWalker.prototype.walkTerminal=function(e,t,r){},ResyncFollowsWalker.prototype.walkProdRef=function(e,t,r){var n=buildBetweenProdsFollowPrefix(e.referencedRule,e.idx)+this.topProd.name,i=t.concat(r),a=new d.Alternative({definition:i}),l=(0,s.first)(a);this.follows[n]=l},ResyncFollowsWalker}(a.RestWalker);function computeAllProdsFollows(e){var t={};return(0,l.forEach)(e,function(e){var r=new f(e).startWalking();(0,l.assign)(t,r)}),t}function buildBetweenProdsFollowPrefix(e,t){return e.name+t+u.IN}function buildInProdFollowPrefix(e){return e.terminalType.name+e.idx+u.IN}t.ResyncFollowsWalker=f,t.computeAllProdsFollows=computeAllProdsFollows,t.buildBetweenProdsFollowPrefix=buildBetweenProdsFollowPrefix,t.buildInProdFollowPrefix=buildInProdFollowPrefix},48527:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.collectMethods=t.DslMethodsCollectorVisitor=t.getProductionDslName=t.isBranchingProd=t.isOptionalProd=t.isSequenceProd=void 0;var a=r(91433),s=r(84925),l=r(17884);function isSequenceProd(e){return e instanceof s.Alternative||e instanceof s.Option||e instanceof s.Repetition||e instanceof s.RepetitionMandatory||e instanceof s.RepetitionMandatoryWithSeparator||e instanceof s.RepetitionWithSeparator||e instanceof s.Terminal||e instanceof s.Rule}function isOptionalProd(e,t){return void 0===t&&(t=[]),e instanceof s.Option||e instanceof s.Repetition||e instanceof s.RepetitionWithSeparator||(e instanceof s.Alternation?(0,a.some)(e.definition,function(e){return isOptionalProd(e,t)}):!(e instanceof s.NonTerminal&&(0,a.contains)(t,e))&&e instanceof s.AbstractProduction&&(e instanceof s.NonTerminal&&t.push(e),(0,a.every)(e.definition,function(e){return isOptionalProd(e,t)})))}function isBranchingProd(e){return e instanceof s.Alternation}function getProductionDslName(e){if(e instanceof s.NonTerminal)return"SUBRULE";if(e instanceof s.Option)return"OPTION";if(e instanceof s.Alternation)return"OR";if(e instanceof s.RepetitionMandatory)return"AT_LEAST_ONE";if(e instanceof s.RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(e instanceof s.RepetitionWithSeparator)return"MANY_SEP";if(e instanceof s.Repetition)return"MANY";else if(e instanceof s.Terminal)return"CONSUME";else throw Error("non exhaustive match")}t.isSequenceProd=isSequenceProd,t.isOptionalProd=isOptionalProd,t.isBranchingProd=isBranchingProd,t.getProductionDslName=getProductionDslName;var u=function(e){function DslMethodsCollectorVisitor(){var t=null!==e&&e.apply(this,arguments)||this;return t.separator="-",t.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},t}return i(DslMethodsCollectorVisitor,e),DslMethodsCollectorVisitor.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},DslMethodsCollectorVisitor.prototype.visitTerminal=function(e){var t=e.terminalType.name+this.separator+"Terminal";(0,a.has)(this.dslMethods,t)||(this.dslMethods[t]=[]),this.dslMethods[t].push(e)},DslMethodsCollectorVisitor.prototype.visitNonTerminal=function(e){var t=e.nonTerminalName+this.separator+"Terminal";(0,a.has)(this.dslMethods,t)||(this.dslMethods[t]=[]),this.dslMethods[t].push(e)},DslMethodsCollectorVisitor.prototype.visitOption=function(e){this.dslMethods.option.push(e)},DslMethodsCollectorVisitor.prototype.visitRepetitionWithSeparator=function(e){this.dslMethods.repetitionWithSeparator.push(e)},DslMethodsCollectorVisitor.prototype.visitRepetitionMandatory=function(e){this.dslMethods.repetitionMandatory.push(e)},DslMethodsCollectorVisitor.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)},DslMethodsCollectorVisitor.prototype.visitRepetition=function(e){this.dslMethods.repetition.push(e)},DslMethodsCollectorVisitor.prototype.visitAlternation=function(e){this.dslMethods.alternation.push(e)},DslMethodsCollectorVisitor}(l.GAstVisitor);t.DslMethodsCollectorVisitor=u;var d=new u;function collectMethods(e){d.reset(),e.accept(d);var t=d.dslMethods;return d.reset(),t}t.collectMethods=collectMethods},84925:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.serializeProduction=t.serializeGrammar=t.Terminal=t.Alternation=t.RepetitionWithSeparator=t.Repetition=t.RepetitionMandatoryWithSeparator=t.RepetitionMandatory=t.Option=t.Alternative=t.Rule=t.NonTerminal=t.AbstractProduction=void 0;var a=r(91433),s=r(40711),l=function(){function AbstractProduction(e){this._definition=e}return Object.defineProperty(AbstractProduction.prototype,"definition",{get:function(){return this._definition},set:function(e){this._definition=e},enumerable:!1,configurable:!0}),AbstractProduction.prototype.accept=function(e){e.visit(this),(0,a.forEach)(this.definition,function(t){t.accept(e)})},AbstractProduction}();t.AbstractProduction=l;var u=function(e){function NonTerminal(t){var r=e.call(this,[])||this;return r.idx=1,(0,a.assign)(r,(0,a.pick)(t,function(e){return void 0!==e})),r}return i(NonTerminal,e),Object.defineProperty(NonTerminal.prototype,"definition",{get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(e){},enumerable:!1,configurable:!0}),NonTerminal.prototype.accept=function(e){e.visit(this)},NonTerminal}(l);t.NonTerminal=u;var d=function(e){function Rule(t){var r=e.call(this,t.definition)||this;return r.orgText="",(0,a.assign)(r,(0,a.pick)(t,function(e){return void 0!==e})),r}return i(Rule,e),Rule}(l);t.Rule=d;var f=function(e){function Alternative(t){var r=e.call(this,t.definition)||this;return r.ignoreAmbiguities=!1,(0,a.assign)(r,(0,a.pick)(t,function(e){return void 0!==e})),r}return i(Alternative,e),Alternative}(l);t.Alternative=f;var p=function(e){function Option(t){var r=e.call(this,t.definition)||this;return r.idx=1,(0,a.assign)(r,(0,a.pick)(t,function(e){return void 0!==e})),r}return i(Option,e),Option}(l);t.Option=p;var g=function(e){function RepetitionMandatory(t){var r=e.call(this,t.definition)||this;return r.idx=1,(0,a.assign)(r,(0,a.pick)(t,function(e){return void 0!==e})),r}return i(RepetitionMandatory,e),RepetitionMandatory}(l);t.RepetitionMandatory=g;var m=function(e){function RepetitionMandatoryWithSeparator(t){var r=e.call(this,t.definition)||this;return r.idx=1,(0,a.assign)(r,(0,a.pick)(t,function(e){return void 0!==e})),r}return i(RepetitionMandatoryWithSeparator,e),RepetitionMandatoryWithSeparator}(l);t.RepetitionMandatoryWithSeparator=m;var y=function(e){function Repetition(t){var r=e.call(this,t.definition)||this;return r.idx=1,(0,a.assign)(r,(0,a.pick)(t,function(e){return void 0!==e})),r}return i(Repetition,e),Repetition}(l);t.Repetition=y;var v=function(e){function RepetitionWithSeparator(t){var r=e.call(this,t.definition)||this;return r.idx=1,(0,a.assign)(r,(0,a.pick)(t,function(e){return void 0!==e})),r}return i(RepetitionWithSeparator,e),RepetitionWithSeparator}(l);t.RepetitionWithSeparator=v;var x=function(e){function Alternation(t){var r=e.call(this,t.definition)||this;return r.idx=1,r.ignoreAmbiguities=!1,r.hasPredicates=!1,(0,a.assign)(r,(0,a.pick)(t,function(e){return void 0!==e})),r}return i(Alternation,e),Object.defineProperty(Alternation.prototype,"definition",{get:function(){return this._definition},set:function(e){this._definition=e},enumerable:!1,configurable:!0}),Alternation}(l);t.Alternation=x;var b=function(){function Terminal(e){this.idx=1,(0,a.assign)(this,(0,a.pick)(e,function(e){return void 0!==e}))}return Terminal.prototype.accept=function(e){e.visit(this)},Terminal}();function serializeGrammar(e){return(0,a.map)(e,serializeProduction)}function serializeProduction(e){function convertDefinition(e){return(0,a.map)(e,serializeProduction)}if(e instanceof u){var t={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return(0,a.isString)(e.label)&&(t.label=e.label),t}if(e instanceof f)return{type:"Alternative",definition:convertDefinition(e.definition)};if(e instanceof p)return{type:"Option",idx:e.idx,definition:convertDefinition(e.definition)};if(e instanceof g)return{type:"RepetitionMandatory",idx:e.idx,definition:convertDefinition(e.definition)};if(e instanceof m)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:serializeProduction(new b({terminalType:e.separator})),definition:convertDefinition(e.definition)};if(e instanceof v)return{type:"RepetitionWithSeparator",idx:e.idx,separator:serializeProduction(new b({terminalType:e.separator})),definition:convertDefinition(e.definition)};if(e instanceof y)return{type:"Repetition",idx:e.idx,definition:convertDefinition(e.definition)};else if(e instanceof x)return{type:"Alternation",idx:e.idx,definition:convertDefinition(e.definition)};else if(e instanceof b){var r={type:"Terminal",name:e.terminalType.name,label:(0,s.tokenLabel)(e.terminalType),idx:e.idx};(0,a.isString)(e.label)&&(r.terminalLabel=e.label);var n=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(r.pattern=(0,a.isRegExp)(n)?n.source:n),r}else if(e instanceof d)return{type:"Rule",name:e.name,orgText:e.orgText,definition:convertDefinition(e.definition)};else throw Error("non exhaustive match")}t.Terminal=b,t.serializeGrammar=serializeGrammar,t.serializeProduction=serializeProduction},70108:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateGrammar=t.resolveGrammar=void 0;var n=r(91433),i=r(45738),a=r(6678),s=r(23566);function resolveGrammar(e){e=(0,n.defaults)(e,{errMsgProvider:s.defaultGrammarResolverErrorProvider});var t={};return(0,n.forEach)(e.rules,function(e){t[e.name]=e}),(0,i.resolveGrammar)(t,e.errMsgProvider)}function validateGrammar(e){return e=(0,n.defaults)(e,{errMsgProvider:s.defaultGrammarValidatorErrorProvider}),(0,a.validateGrammar)(e.rules,e.maxLookahead,e.tokenTypes,e.errMsgProvider,e.grammarName)}t.resolveGrammar=resolveGrammar,t.validateGrammar=validateGrammar},17884:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GAstVisitor=void 0;var n=r(84925),i=function(){function GAstVisitor(){}return GAstVisitor.prototype.visit=function(e){switch(e.constructor){case n.NonTerminal:return this.visitNonTerminal(e);case n.Alternative:return this.visitAlternative(e);case n.Option:return this.visitOption(e);case n.RepetitionMandatory:return this.visitRepetitionMandatory(e);case n.RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(e);case n.RepetitionWithSeparator:return this.visitRepetitionWithSeparator(e);case n.Repetition:return this.visitRepetition(e);case n.Alternation:return this.visitAlternation(e);case n.Terminal:return this.visitTerminal(e);case n.Rule:return this.visitRule(e);default:throw Error("non exhaustive match")}},GAstVisitor.prototype.visitNonTerminal=function(e){},GAstVisitor.prototype.visitAlternative=function(e){},GAstVisitor.prototype.visitOption=function(e){},GAstVisitor.prototype.visitRepetition=function(e){},GAstVisitor.prototype.visitRepetitionMandatory=function(e){},GAstVisitor.prototype.visitRepetitionMandatoryWithSeparator=function(e){},GAstVisitor.prototype.visitRepetitionWithSeparator=function(e){},GAstVisitor.prototype.visitAlternation=function(e){},GAstVisitor.prototype.visitTerminal=function(e){},GAstVisitor.prototype.visitRule=function(e){},GAstVisitor}();t.GAstVisitor=i},2717:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.nextPossibleTokensAfter=t.possiblePathsFrom=t.NextTerminalAfterAtLeastOneSepWalker=t.NextTerminalAfterAtLeastOneWalker=t.NextTerminalAfterManySepWalker=t.NextTerminalAfterManyWalker=t.AbstractNextTerminalAfterProductionWalker=t.NextAfterTokenWalker=t.AbstractNextPossibleTokensWalker=void 0;var a=r(48589),s=r(91433),l=r(75910),u=r(84925),d=function(e){function AbstractNextPossibleTokensWalker(t,r){var n=e.call(this)||this;return n.topProd=t,n.path=r,n.possibleTokTypes=[],n.nextProductionName="",n.nextProductionOccurrence=0,n.found=!1,n.isAtEndOfPath=!1,n}return i(AbstractNextPossibleTokensWalker,e),AbstractNextPossibleTokensWalker.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=(0,s.cloneArr)(this.path.ruleStack).reverse(),this.occurrenceStack=(0,s.cloneArr)(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},AbstractNextPossibleTokensWalker.prototype.walk=function(t,r){void 0===r&&(r=[]),this.found||e.prototype.walk.call(this,t,r)},AbstractNextPossibleTokensWalker.prototype.walkProdRef=function(e,t,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){var n=t.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,n)}},AbstractNextPossibleTokensWalker.prototype.updateExpectedNext=function(){(0,s.isEmpty)(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},AbstractNextPossibleTokensWalker}(a.RestWalker);t.AbstractNextPossibleTokensWalker=d;var f=function(e){function NextAfterTokenWalker(t,r){var n=e.call(this,t,r)||this;return n.path=r,n.nextTerminalName="",n.nextTerminalOccurrence=0,n.nextTerminalName=n.path.lastTok.name,n.nextTerminalOccurrence=n.path.lastTokOccurrence,n}return i(NextAfterTokenWalker,e),NextAfterTokenWalker.prototype.walkTerminal=function(e,t,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){var n=t.concat(r),i=new u.Alternative({definition:n});this.possibleTokTypes=(0,l.first)(i),this.found=!0}},NextAfterTokenWalker}(d);t.NextAfterTokenWalker=f;var p=function(e){function AbstractNextTerminalAfterProductionWalker(t,r){var n=e.call(this)||this;return n.topRule=t,n.occurrence=r,n.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},n}return i(AbstractNextTerminalAfterProductionWalker,e),AbstractNextTerminalAfterProductionWalker.prototype.startWalking=function(){return this.walk(this.topRule),this.result},AbstractNextTerminalAfterProductionWalker}(a.RestWalker);t.AbstractNextTerminalAfterProductionWalker=p;var g=function(e){function NextTerminalAfterManyWalker(){return null!==e&&e.apply(this,arguments)||this}return i(NextTerminalAfterManyWalker,e),NextTerminalAfterManyWalker.prototype.walkMany=function(t,r,n){if(t.idx===this.occurrence){var i=(0,s.first)(r.concat(n));this.result.isEndOfRule=void 0===i,i instanceof u.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkMany.call(this,t,r,n)},NextTerminalAfterManyWalker}(p);t.NextTerminalAfterManyWalker=g;var m=function(e){function NextTerminalAfterManySepWalker(){return null!==e&&e.apply(this,arguments)||this}return i(NextTerminalAfterManySepWalker,e),NextTerminalAfterManySepWalker.prototype.walkManySep=function(t,r,n){if(t.idx===this.occurrence){var i=(0,s.first)(r.concat(n));this.result.isEndOfRule=void 0===i,i instanceof u.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkManySep.call(this,t,r,n)},NextTerminalAfterManySepWalker}(p);t.NextTerminalAfterManySepWalker=m;var y=function(e){function NextTerminalAfterAtLeastOneWalker(){return null!==e&&e.apply(this,arguments)||this}return i(NextTerminalAfterAtLeastOneWalker,e),NextTerminalAfterAtLeastOneWalker.prototype.walkAtLeastOne=function(t,r,n){if(t.idx===this.occurrence){var i=(0,s.first)(r.concat(n));this.result.isEndOfRule=void 0===i,i instanceof u.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkAtLeastOne.call(this,t,r,n)},NextTerminalAfterAtLeastOneWalker}(p);t.NextTerminalAfterAtLeastOneWalker=y;var v=function(e){function NextTerminalAfterAtLeastOneSepWalker(){return null!==e&&e.apply(this,arguments)||this}return i(NextTerminalAfterAtLeastOneSepWalker,e),NextTerminalAfterAtLeastOneSepWalker.prototype.walkAtLeastOneSep=function(t,r,n){if(t.idx===this.occurrence){var i=(0,s.first)(r.concat(n));this.result.isEndOfRule=void 0===i,i instanceof u.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkAtLeastOneSep.call(this,t,r,n)},NextTerminalAfterAtLeastOneSepWalker}(p);function possiblePathsFrom(e,t,r){void 0===r&&(r=[]),r=(0,s.cloneArr)(r);var n=[],i=0;function remainingPathWith(t){return t.concat((0,s.drop)(e,i+1))}function getAlternativesForProd(e){var i=possiblePathsFrom(remainingPathWith(e),t,r);return n.concat(i)}for(;r.length<t&&i<e.length;){var a=e[i];if(a instanceof u.Alternative||a instanceof u.NonTerminal)return getAlternativesForProd(a.definition);if(a instanceof u.Option)n=getAlternativesForProd(a.definition);else if(a instanceof u.RepetitionMandatory){var l=a.definition.concat([new u.Repetition({definition:a.definition})]);return getAlternativesForProd(l)}else if(a instanceof u.RepetitionMandatoryWithSeparator){var l=[new u.Alternative({definition:a.definition}),new u.Repetition({definition:[new u.Terminal({terminalType:a.separator})].concat(a.definition)})];return getAlternativesForProd(l)}else if(a instanceof u.RepetitionWithSeparator){var l=a.definition.concat([new u.Repetition({definition:[new u.Terminal({terminalType:a.separator})].concat(a.definition)})]);n=getAlternativesForProd(l)}else if(a instanceof u.Repetition){var l=a.definition.concat([new u.Repetition({definition:a.definition})]);n=getAlternativesForProd(l)}else if(a instanceof u.Alternation)return(0,s.forEach)(a.definition,function(e){!1===(0,s.isEmpty)(e.definition)&&(n=getAlternativesForProd(e.definition))}),n;else if(a instanceof u.Terminal)r.push(a.terminalType);else throw Error("non exhaustive match");i++}return n.push({partialPath:r,suffixDef:(0,s.drop)(e,i)}),n}function nextPossibleTokensAfter(e,t,r,n){var i="EXIT_NONE_TERMINAL",a=[i],l="EXIT_ALTERNATIVE",d=!1,f=t.length,p=f-n-1,g=[],m=[];for(m.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!(0,s.isEmpty)(m);){var y=m.pop();if(y===l){d&&(0,s.last)(m).idx<=p&&m.pop();continue}var v=y.def,x=y.idx,b=y.ruleStack,O=y.occurrenceStack;if(!(0,s.isEmpty)(v)){var R=v[0];if(R===i){var _={idx:x,def:(0,s.drop)(v),ruleStack:(0,s.dropRight)(b),occurrenceStack:(0,s.dropRight)(O)};m.push(_)}else if(R instanceof u.Terminal){if(x<f-1){var A=x+1;if(r(t[A],R.terminalType)){var _={idx:A,def:(0,s.drop)(v),ruleStack:b,occurrenceStack:O};m.push(_)}}else if(x===f-1)g.push({nextTokenType:R.terminalType,nextTokenOccurrence:R.idx,ruleStack:b,occurrenceStack:O}),d=!0;else throw Error("non exhaustive match")}else if(R instanceof u.NonTerminal){var C=(0,s.cloneArr)(b);C.push(R.nonTerminalName);var k=(0,s.cloneArr)(O);k.push(R.idx);var _={idx:x,def:R.definition.concat(a,(0,s.drop)(v)),ruleStack:C,occurrenceStack:k};m.push(_)}else if(R instanceof u.Option){var P={idx:x,def:(0,s.drop)(v),ruleStack:b,occurrenceStack:O};m.push(P),m.push(l);var N={idx:x,def:R.definition.concat((0,s.drop)(v)),ruleStack:b,occurrenceStack:O};m.push(N)}else if(R instanceof u.RepetitionMandatory){var L=new u.Repetition({definition:R.definition,idx:R.idx}),M=R.definition.concat([L],(0,s.drop)(v)),_={idx:x,def:M,ruleStack:b,occurrenceStack:O};m.push(_)}else if(R instanceof u.RepetitionMandatoryWithSeparator){var F=new u.Terminal({terminalType:R.separator}),L=new u.Repetition({definition:[F].concat(R.definition),idx:R.idx}),M=R.definition.concat([L],(0,s.drop)(v)),_={idx:x,def:M,ruleStack:b,occurrenceStack:O};m.push(_)}else if(R instanceof u.RepetitionWithSeparator){var P={idx:x,def:(0,s.drop)(v),ruleStack:b,occurrenceStack:O};m.push(P),m.push(l);var F=new u.Terminal({terminalType:R.separator}),D=new u.Repetition({definition:[F].concat(R.definition),idx:R.idx}),M=R.definition.concat([D],(0,s.drop)(v)),N={idx:x,def:M,ruleStack:b,occurrenceStack:O};m.push(N)}else if(R instanceof u.Repetition){var P={idx:x,def:(0,s.drop)(v),ruleStack:b,occurrenceStack:O};m.push(P),m.push(l);var D=new u.Repetition({definition:R.definition,idx:R.idx}),M=R.definition.concat([D],(0,s.drop)(v)),N={idx:x,def:M,ruleStack:b,occurrenceStack:O};m.push(N)}else if(R instanceof u.Alternation)for(var j=R.definition.length-1;j>=0;j--){var B={idx:x,def:R.definition[j].definition.concat((0,s.drop)(v)),ruleStack:b,occurrenceStack:O};m.push(B),m.push(l)}else if(R instanceof u.Alternative)m.push({idx:x,def:R.definition.concat((0,s.drop)(v)),ruleStack:b,occurrenceStack:O});else if(R instanceof u.Rule)m.push(expandTopLevelRule(R,x,b,O));else throw Error("non exhaustive match")}}return g}function expandTopLevelRule(e,t,r,n){var i=(0,s.cloneArr)(r);i.push(e.name);var a=(0,s.cloneArr)(n);return a.push(1),{idx:t,def:e.definition,ruleStack:i,occurrenceStack:a}}t.NextTerminalAfterAtLeastOneSepWalker=v,t.possiblePathsFrom=possiblePathsFrom,t.nextPossibleTokensAfter=nextPossibleTokensAfter},61729:function(e,t){"use strict";function getKeyForAutomaticLookahead(e,t,r){return r|t|e}Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyForAutomaticLookahead=t.AT_LEAST_ONE_SEP_IDX=t.MANY_SEP_IDX=t.AT_LEAST_ONE_IDX=t.MANY_IDX=t.OPTION_IDX=t.OR_IDX=t.BITS_FOR_ALT_IDX=t.BITS_FOR_RULE_IDX=t.BITS_FOR_OCCURRENCE_IDX=t.BITS_FOR_METHOD_TYPE=void 0,t.BITS_FOR_METHOD_TYPE=4,t.BITS_FOR_OCCURRENCE_IDX=8,t.BITS_FOR_RULE_IDX=12,t.BITS_FOR_ALT_IDX=8,t.OR_IDX=1<<t.BITS_FOR_OCCURRENCE_IDX,t.OPTION_IDX=2<<t.BITS_FOR_OCCURRENCE_IDX,t.MANY_IDX=3<<t.BITS_FOR_OCCURRENCE_IDX,t.AT_LEAST_ONE_IDX=4<<t.BITS_FOR_OCCURRENCE_IDX,t.MANY_SEP_IDX=5<<t.BITS_FOR_OCCURRENCE_IDX,t.AT_LEAST_ONE_SEP_IDX=6<<t.BITS_FOR_OCCURRENCE_IDX,t.getKeyForAutomaticLookahead=getKeyForAutomaticLookahead,t.BITS_FOR_ALT_IDX},61054:function(e,t,r){"use strict";var n,i,a,s=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.areTokenCategoriesNotUsed=t.isStrictPrefixOfPath=t.containsPath=t.getLookaheadPathsForOptionalProd=t.getLookaheadPathsForOr=t.lookAheadSequenceFromAlternatives=t.buildSingleAlternativeLookaheadFunction=t.buildAlternativesLookAheadFunc=t.buildLookaheadFuncForOptionalProd=t.buildLookaheadFuncForOr=t.getProdType=t.PROD_TYPE=void 0;var l=r(91433),u=r(2717),d=r(48589),f=r(91122),p=r(84925),g=r(17884);function getProdType(e){if(e instanceof p.Option)return a.OPTION;if(e instanceof p.Repetition)return a.REPETITION;if(e instanceof p.RepetitionMandatory)return a.REPETITION_MANDATORY;if(e instanceof p.RepetitionMandatoryWithSeparator)return a.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof p.RepetitionWithSeparator)return a.REPETITION_WITH_SEPARATOR;if(e instanceof p.Alternation)return a.ALTERNATION;throw Error("non exhaustive match")}function buildLookaheadFuncForOr(e,t,r,n,i,a){var s=getLookaheadPathsForOr(e,t,r),l=areTokenCategoriesNotUsed(s)?f.tokenStructuredMatcherNoCategories:f.tokenStructuredMatcher;return a(s,n,l,i)}function buildLookaheadFuncForOptionalProd(e,t,r,n,i,a){var s=getLookaheadPathsForOptionalProd(e,t,i,r),l=areTokenCategoriesNotUsed(s)?f.tokenStructuredMatcherNoCategories:f.tokenStructuredMatcher;return a(s[0],l,n)}function buildAlternativesLookAheadFunc(e,t,r,n){var i=e.length,a=(0,l.every)(e,function(e){return(0,l.every)(e,function(e){return 1===e.length})});if(t)return function(t){for(var n=(0,l.map)(t,function(e){return e.GATE}),a=0;a<i;a++){var s=e[a],u=s.length,d=n[a];if(void 0===d||!1!==d.call(this))e:for(var f=0;f<u;f++){for(var p=s[f],g=p.length,m=0;m<g;m++)if(!1===r(this.LA(m+1),p[m]))continue e;return a}}};if(!a||n)return function(){for(var t=0;t<i;t++){var n=e[t],a=n.length;e:for(var s=0;s<a;s++){for(var l=n[s],u=l.length,d=0;d<u;d++)if(!1===r(this.LA(d+1),l[d]))continue e;return t}}};var s=(0,l.map)(e,function(e){return(0,l.flatten)(e)}),u=(0,l.reduce)(s,function(e,t,r){return(0,l.forEach)(t,function(t){(0,l.has)(e,t.tokenTypeIdx)||(e[t.tokenTypeIdx]=r),(0,l.forEach)(t.categoryMatches,function(t){(0,l.has)(e,t)||(e[t]=r)})}),e},[]);return function(){return u[this.LA(1).tokenTypeIdx]}}function buildSingleAlternativeLookaheadFunction(e,t,r){var n=(0,l.every)(e,function(e){return 1===e.length}),i=e.length;if(!n||r)return function(){e:for(var r=0;r<i;r++){for(var n=e[r],a=n.length,s=0;s<a;s++)if(!1===t(this.LA(s+1),n[s]))continue e;return!0}return!1};var a=(0,l.flatten)(e);if(1===a.length&&(0,l.isEmpty)(a[0].categoryMatches)){var s=a[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===s}}var u=(0,l.reduce)(a,function(e,t,r){return e[t.tokenTypeIdx]=!0,(0,l.forEach)(t.categoryMatches,function(t){e[t]=!0}),e},[]);return function(){return!0===u[this.LA(1).tokenTypeIdx]}}(n=a=t.PROD_TYPE||(t.PROD_TYPE={}))[n.OPTION=0]="OPTION",n[n.REPETITION=1]="REPETITION",n[n.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",n[n.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",n[n.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",n[n.ALTERNATION=5]="ALTERNATION",t.getProdType=getProdType,t.buildLookaheadFuncForOr=buildLookaheadFuncForOr,t.buildLookaheadFuncForOptionalProd=buildLookaheadFuncForOptionalProd,t.buildAlternativesLookAheadFunc=buildAlternativesLookAheadFunc,t.buildSingleAlternativeLookaheadFunction=buildSingleAlternativeLookaheadFunction;var m=function(e){function RestDefinitionFinderWalker(t,r,n){var i=e.call(this)||this;return i.topProd=t,i.targetOccurrence=r,i.targetProdType=n,i}return s(RestDefinitionFinderWalker,e),RestDefinitionFinderWalker.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},RestDefinitionFinderWalker.prototype.checkIsTarget=function(e,t,r,n){return e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.restDef=r.concat(n),!0)},RestDefinitionFinderWalker.prototype.walkOption=function(t,r,n){this.checkIsTarget(t,a.OPTION,r,n)||e.prototype.walkOption.call(this,t,r,n)},RestDefinitionFinderWalker.prototype.walkAtLeastOne=function(t,r,n){this.checkIsTarget(t,a.REPETITION_MANDATORY,r,n)||e.prototype.walkOption.call(this,t,r,n)},RestDefinitionFinderWalker.prototype.walkAtLeastOneSep=function(t,r,n){this.checkIsTarget(t,a.REPETITION_MANDATORY_WITH_SEPARATOR,r,n)||e.prototype.walkOption.call(this,t,r,n)},RestDefinitionFinderWalker.prototype.walkMany=function(t,r,n){this.checkIsTarget(t,a.REPETITION,r,n)||e.prototype.walkOption.call(this,t,r,n)},RestDefinitionFinderWalker.prototype.walkManySep=function(t,r,n){this.checkIsTarget(t,a.REPETITION_WITH_SEPARATOR,r,n)||e.prototype.walkOption.call(this,t,r,n)},RestDefinitionFinderWalker}(d.RestWalker),y=function(e){function InsideDefinitionFinderVisitor(t,r,n){var i=e.call(this)||this;return i.targetOccurrence=t,i.targetProdType=r,i.targetRef=n,i.result=[],i}return s(InsideDefinitionFinderVisitor,e),InsideDefinitionFinderVisitor.prototype.checkIsTarget=function(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(void 0===this.targetRef||e===this.targetRef)&&(this.result=e.definition)},InsideDefinitionFinderVisitor.prototype.visitOption=function(e){this.checkIsTarget(e,a.OPTION)},InsideDefinitionFinderVisitor.prototype.visitRepetition=function(e){this.checkIsTarget(e,a.REPETITION)},InsideDefinitionFinderVisitor.prototype.visitRepetitionMandatory=function(e){this.checkIsTarget(e,a.REPETITION_MANDATORY)},InsideDefinitionFinderVisitor.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.checkIsTarget(e,a.REPETITION_MANDATORY_WITH_SEPARATOR)},InsideDefinitionFinderVisitor.prototype.visitRepetitionWithSeparator=function(e){this.checkIsTarget(e,a.REPETITION_WITH_SEPARATOR)},InsideDefinitionFinderVisitor.prototype.visitAlternation=function(e){this.checkIsTarget(e,a.ALTERNATION)},InsideDefinitionFinderVisitor}(g.GAstVisitor);function initializeArrayOfArrays(e){for(var t=Array(e),r=0;r<e;r++)t[r]=[];return t}function pathToHashKeys(e){for(var t=[""],r=0;r<e.length;r++){for(var n=e[r],i=[],a=0;a<t.length;a++){var s=t[a];i.push(s+"_"+n.tokenTypeIdx);for(var l=0;l<n.categoryMatches.length;l++){var u="_"+n.categoryMatches[l];i.push(s+u)}}t=i}return t}function isUniquePrefixHash(e,t,r){for(var n=0;n<e.length;n++)if(n!==r){for(var i=e[n],a=0;a<t.length;a++)if(!0===i[t[a]])return!1}return!0}function lookAheadSequenceFromAlternatives(e,t){for(var r=(0,l.map)(e,function(e){return(0,u.possiblePathsFrom)([e],1)}),n=initializeArrayOfArrays(r.length),i=(0,l.map)(r,function(e){var t={};return(0,l.forEach)(e,function(e){var r=pathToHashKeys(e.partialPath);(0,l.forEach)(r,function(e){t[e]=!0})}),t}),a=r,s=1;s<=t;s++){var d=a;a=initializeArrayOfArrays(d.length);for(var _loop_1=function(e){for(var r=d[e],f=0;f<r.length;f++){var p=r[f].partialPath,g=r[f].suffixDef,m=pathToHashKeys(p);if(isUniquePrefixHash(i,m,e)||(0,l.isEmpty)(g)||p.length===t){var y=n[e];if(!1===containsPath(y,p)){y.push(p);for(var v=0;v<m.length;v++){var x=m[v];i[e][x]=!0}}}else{var b=(0,u.possiblePathsFrom)(g,s+1,p);a[e]=a[e].concat(b),(0,l.forEach)(b,function(t){var r=pathToHashKeys(t.partialPath);(0,l.forEach)(r,function(t){i[e][t]=!0})})}}},f=0;f<d.length;f++)_loop_1(f)}return n}function getLookaheadPathsForOr(e,t,r,n){var i=new y(e,a.ALTERNATION,n);return t.accept(i),lookAheadSequenceFromAlternatives(i.result,r)}function getLookaheadPathsForOptionalProd(e,t,r,n){var i=new y(e,r);t.accept(i);var a=i.result,s=new m(t,e,r).startWalking();return lookAheadSequenceFromAlternatives([new p.Alternative({definition:a}),new p.Alternative({definition:s})],n)}function containsPath(e,t){t:for(var r=0;r<e.length;r++){var n=e[r];if(n.length===t.length){for(var i=0;i<n.length;i++){var a=t[i],s=n[i];if(!1==(a===s||void 0!==s.categoryMatchesMap[a.tokenTypeIdx]))continue t}return!0}}return!1}function isStrictPrefixOfPath(e,t){return e.length<t.length&&(0,l.every)(e,function(e,r){var n=t[r];return e===n||n.categoryMatchesMap[e.tokenTypeIdx]})}function areTokenCategoriesNotUsed(e){return(0,l.every)(e,function(e){return(0,l.every)(e,function(e){return(0,l.every)(e,function(e){return(0,l.isEmpty)(e.categoryMatches)})})})}t.lookAheadSequenceFromAlternatives=lookAheadSequenceFromAlternatives,t.getLookaheadPathsForOr=getLookaheadPathsForOr,t.getLookaheadPathsForOptionalProd=getLookaheadPathsForOptionalProd,t.containsPath=containsPath,t.isStrictPrefixOfPath=isStrictPrefixOfPath,t.areTokenCategoriesNotUsed=areTokenCategoriesNotUsed},45738:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.GastRefResolverVisitor=t.resolveGrammar=void 0;var a=r(72092),s=r(91433),l=r(17884);function resolveGrammar(e,t){var r=new u(e,t);return r.resolveRefs(),r.errors}t.resolveGrammar=resolveGrammar;var u=function(e){function GastRefResolverVisitor(t,r){var n=e.call(this)||this;return n.nameToTopRule=t,n.errMsgProvider=r,n.errors=[],n}return i(GastRefResolverVisitor,e),GastRefResolverVisitor.prototype.resolveRefs=function(){var e=this;(0,s.forEach)((0,s.values)(this.nameToTopRule),function(t){e.currTopLevel=t,t.accept(e)})},GastRefResolverVisitor.prototype.visitNonTerminal=function(e){var t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{var r=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:r,type:a.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}},GastRefResolverVisitor}(l.GAstVisitor);t.GastRefResolverVisitor=u},48589:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestWalker=void 0;var n=r(91433),i=r(84925),a=function(){function RestWalker(){}return RestWalker.prototype.walk=function(e,t){var r=this;void 0===t&&(t=[]),(0,n.forEach)(e.definition,function(a,s){var l=(0,n.drop)(e.definition,s+1);if(a instanceof i.NonTerminal)r.walkProdRef(a,l,t);else if(a instanceof i.Terminal)r.walkTerminal(a,l,t);else if(a instanceof i.Alternative)r.walkFlat(a,l,t);else if(a instanceof i.Option)r.walkOption(a,l,t);else if(a instanceof i.RepetitionMandatory)r.walkAtLeastOne(a,l,t);else if(a instanceof i.RepetitionMandatoryWithSeparator)r.walkAtLeastOneSep(a,l,t);else if(a instanceof i.RepetitionWithSeparator)r.walkManySep(a,l,t);else if(a instanceof i.Repetition)r.walkMany(a,l,t);else if(a instanceof i.Alternation)r.walkOr(a,l,t);else throw Error("non exhaustive match")})},RestWalker.prototype.walkTerminal=function(e,t,r){},RestWalker.prototype.walkProdRef=function(e,t,r){},RestWalker.prototype.walkFlat=function(e,t,r){var n=t.concat(r);this.walk(e,n)},RestWalker.prototype.walkOption=function(e,t,r){var n=t.concat(r);this.walk(e,n)},RestWalker.prototype.walkAtLeastOne=function(e,t,r){var n=[new i.Option({definition:e.definition})].concat(t,r);this.walk(e,n)},RestWalker.prototype.walkAtLeastOneSep=function(e,t,r){var n=restForRepetitionWithSeparator(e,t,r);this.walk(e,n)},RestWalker.prototype.walkMany=function(e,t,r){var n=[new i.Option({definition:e.definition})].concat(t,r);this.walk(e,n)},RestWalker.prototype.walkManySep=function(e,t,r){var n=restForRepetitionWithSeparator(e,t,r);this.walk(e,n)},RestWalker.prototype.walkOr=function(e,t,r){var a=this,s=t.concat(r);(0,n.forEach)(e.definition,function(e){var t=new i.Alternative({definition:[e]});a.walk(t,s)})},RestWalker}();function restForRepetitionWithSeparator(e,t,r){return[new i.Option({definition:[new i.Terminal({terminalType:e.separator})].concat(e.definition)})].concat(t,r)}t.RestWalker=a},72092:function(e,t,r){"use strict";var n,i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedActionsParser=t.CstParser=t.Parser=t.EMPTY_ALT=t.ParserDefinitionErrorType=t.DEFAULT_RULE_CONFIG=t.DEFAULT_PARSER_CONFIG=t.END_OF_FILE=void 0;var s=r(91433),l=r(40291),u=r(40711),d=r(23566),f=r(70108),p=r(8133),g=r(4966),m=r(57745),y=r(55453),v=r(54154),x=r(60586),b=r(94442),O=r(54480),R=r(21798),_=r(21270),A=r(46657);function EMPTY_ALT(e){return void 0===e&&(e=void 0),function(){return e}}t.END_OF_FILE=(0,u.createTokenInstance)(u.EOF,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(t.END_OF_FILE),t.DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:d.defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),t.DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0}),(n=t.ParserDefinitionErrorType||(t.ParserDefinitionErrorType={}))[n.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",n[n.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",n[n.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",n[n.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",n[n.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",n[n.LEFT_RECURSION=5]="LEFT_RECURSION",n[n.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",n[n.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",n[n.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",n[n.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",n[n.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",n[n.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",n[n.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t.EMPTY_ALT=EMPTY_ALT;var C=function(){function Parser(e,r){if(this.definitionErrors=[],this.selfAnalysisDone=!1,this.initErrorHandler(r),this.initLexerAdapter(),this.initLooksAhead(r),this.initRecognizerEngine(e,r),this.initRecoverable(r),this.initTreeBuilder(r),this.initContentAssist(),this.initGastRecorder(r),this.initPerformanceTracer(r),(0,s.has)(r,"ignoredIssues"))throw Error("The <ignoredIssues> IParserConfig property has been deprecated.\n	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n	For further details.");this.skipValidations=(0,s.has)(r,"skipValidations")?r.skipValidations:t.DEFAULT_PARSER_CONFIG.skipValidations}return Parser.performSelfAnalysis=function(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")},Parser.prototype.performSelfAnalysis=function(){var e=this;this.TRACE_INIT("performSelfAnalysis",function(){e.selfAnalysisDone=!0;var t=e.className;e.TRACE_INIT("toFastProps",function(){(0,s.toFastProperties)(e)}),e.TRACE_INIT("Grammar Recording",function(){try{e.enableRecording(),(0,s.forEach)(e.definedRulesNames,function(t){var r=e[t].originalGrammarAction,n=void 0;e.TRACE_INIT(t+" Rule",function(){n=e.topLevelRuleRecord(t,r)}),e.gastProductionsCache[t]=n})}finally{e.disableRecording()}});var r=[];if(e.TRACE_INIT("Grammar Resolving",function(){r=(0,f.resolveGrammar)({rules:(0,s.values)(e.gastProductionsCache)}),e.definitionErrors=e.definitionErrors.concat(r)}),e.TRACE_INIT("Grammar Validations",function(){if((0,s.isEmpty)(r)&&!1===e.skipValidations){var n=(0,f.validateGrammar)({rules:(0,s.values)(e.gastProductionsCache),maxLookahead:e.maxLookahead,tokenTypes:(0,s.values)(e.tokensMap),errMsgProvider:d.defaultGrammarValidatorErrorProvider,grammarName:t});e.definitionErrors=e.definitionErrors.concat(n)}}),(0,s.isEmpty)(e.definitionErrors)&&(e.recoveryEnabled&&e.TRACE_INIT("computeAllProdsFollows",function(){var t=(0,l.computeAllProdsFollows)((0,s.values)(e.gastProductionsCache));e.resyncFollows=t}),e.TRACE_INIT("ComputeLookaheadFunctions",function(){e.preComputeLookaheadFunctions((0,s.values)(e.gastProductionsCache))})),!Parser.DEFER_DEFINITION_ERRORS_HANDLING&&!(0,s.isEmpty)(e.definitionErrors))throw Error("Parser Definition Errors detected:\n "+(0,s.map)(e.definitionErrors,function(e){return e.message}).join("\n-------------------------------\n"))})},Parser.DEFER_DEFINITION_ERRORS_HANDLING=!1,Parser}();t.Parser=C,(0,A.applyMixins)(C,[p.Recoverable,g.LooksAhead,m.TreeBuilder,y.LexerAdapter,x.RecognizerEngine,v.RecognizerApi,b.ErrorHandler,O.ContentAssist,R.GastRecorder,_.PerformanceTracer]);var k=function(e){function CstParser(r,n){void 0===n&&(n=t.DEFAULT_PARSER_CONFIG);var i=(0,s.cloneObj)(n);return i.outputCst=!0,e.call(this,r,i)||this}return a(CstParser,e),CstParser}(C);t.CstParser=k;var P=function(e){function EmbeddedActionsParser(r,n){void 0===n&&(n=t.DEFAULT_PARSER_CONFIG);var i=(0,s.cloneObj)(n);return i.outputCst=!1,e.call(this,r,i)||this}return a(EmbeddedActionsParser,e),EmbeddedActionsParser}(C);t.EmbeddedActionsParser=P},54480:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentAssist=void 0;var n=r(2717),i=r(91433),a=function(){function ContentAssist(){}return ContentAssist.prototype.initContentAssist=function(){},ContentAssist.prototype.computeContentAssist=function(e,t){var r=this.gastProductionsCache[e];if((0,i.isUndefined)(r))throw Error("Rule ->"+e+"<- does not exist in this grammar.");return(0,n.nextPossibleTokensAfter)([r],t,this.tokenMatcher,this.maxLookahead)},ContentAssist.prototype.getNextPossibleTokenTypes=function(e){var t=(0,i.first)(e.ruleStack),r=this.getGAstProductions()[t];return new n.NextAfterTokenWalker(r,e).startWalking()},ContentAssist}();t.ContentAssist=a},94442:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorHandler=void 0;var n=r(60193),i=r(91433),a=r(61054),s=r(72092),l=function(){function ErrorHandler(){}return ErrorHandler.prototype.initErrorHandler=function(e){this._errors=[],this.errorMessageProvider=(0,i.has)(e,"errorMessageProvider")?e.errorMessageProvider:s.DEFAULT_PARSER_CONFIG.errorMessageProvider},ErrorHandler.prototype.SAVE_ERROR=function(e){if((0,n.isRecognitionException)(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:(0,i.cloneArr)(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(ErrorHandler.prototype,"errors",{get:function(){return(0,i.cloneArr)(this._errors)},set:function(e){this._errors=e},enumerable:!1,configurable:!0}),ErrorHandler.prototype.raiseEarlyExitException=function(e,t,r){for(var i=this.getCurrRuleFullName(),s=this.getGAstProductions()[i],l=(0,a.getLookaheadPathsForOptionalProd)(e,s,t,this.maxLookahead)[0],u=[],d=1;d<=this.maxLookahead;d++)u.push(this.LA(d));var f=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:l,actual:u,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new n.EarlyExitException(f,this.LA(1),this.LA(0)))},ErrorHandler.prototype.raiseNoAltException=function(e,t){for(var r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],s=(0,a.getLookaheadPathsForOr)(e,i,this.maxLookahead),l=[],u=1;u<=this.maxLookahead;u++)l.push(this.LA(u));var d=this.LA(0),f=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:l,previous:d,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new n.NoViableAltException(f,this.LA(1),d))},ErrorHandler}();t.ErrorHandler=l},21798:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GastRecorder=void 0;var n=r(91433),i=r(84925),a=r(80593),s=r(91122),l=r(40711),u=r(72092),d=r(61729),f={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(f);var p=Math.pow(2,d.BITS_FOR_OCCURRENCE_IDX)-1,g=(0,l.createToken)({name:"RECORDING_PHASE_TOKEN",pattern:a.Lexer.NA});(0,s.augmentTokenTypes)([g]);var m=(0,l.createTokenInstance)(g,"This IToken indicates the Parser is in Recording Phase\n	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(m);var y={name:"This CSTNode indicates the Parser is in Recording Phase\n	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}},v=function(){function GastRecorder(){}return GastRecorder.prototype.initGastRecorder=function(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1},GastRecorder.prototype.enableRecording=function(){var e=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",function(){for(var _loop_1=function(t){var r=t>0?t:"";e["CONSUME"+r]=function(e,r){return this.consumeInternalRecord(e,t,r)},e["SUBRULE"+r]=function(e,r){return this.subruleInternalRecord(e,t,r)},e["OPTION"+r]=function(e){return this.optionInternalRecord(e,t)},e["OR"+r]=function(e){return this.orInternalRecord(e,t)},e["MANY"+r]=function(e){this.manyInternalRecord(t,e)},e["MANY_SEP"+r]=function(e){this.manySepFirstInternalRecord(t,e)},e["AT_LEAST_ONE"+r]=function(e){this.atLeastOneInternalRecord(t,e)},e["AT_LEAST_ONE_SEP"+r]=function(e){this.atLeastOneSepFirstInternalRecord(t,e)}},t=0;t<10;t++)_loop_1(t);e.consume=function(e,t,r){return this.consumeInternalRecord(t,e,r)},e.subrule=function(e,t,r){return this.subruleInternalRecord(t,e,r)},e.option=function(e,t){return this.optionInternalRecord(t,e)},e.or=function(e,t){return this.orInternalRecord(t,e)},e.many=function(e,t){this.manyInternalRecord(e,t)},e.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},e.ACTION=e.ACTION_RECORD,e.BACKTRACK=e.BACKTRACK_RECORD,e.LA=e.LA_RECORD})},GastRecorder.prototype.disableRecording=function(){var e=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",function(){for(var t=0;t<10;t++){var r=t>0?t:"";delete e["CONSUME"+r],delete e["SUBRULE"+r],delete e["OPTION"+r],delete e["OR"+r],delete e["MANY"+r],delete e["MANY_SEP"+r],delete e["AT_LEAST_ONE"+r],delete e["AT_LEAST_ONE_SEP"+r]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})},GastRecorder.prototype.ACTION_RECORD=function(e){},GastRecorder.prototype.BACKTRACK_RECORD=function(e,t){return function(){return!0}},GastRecorder.prototype.LA_RECORD=function(e){return u.END_OF_FILE},GastRecorder.prototype.topLevelRuleRecord=function(e,t){try{var r=new i.Rule({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),t.call(this),this.recordingProdStack.pop(),r}catch(e){if(!0!==e.KNOWN_RECORDER_ERROR)try{e.message=e.message+'\n	 This error was thrown during the "grammar recording phase" For more info see:\n	https://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch(t){throw e}throw e}},GastRecorder.prototype.optionInternalRecord=function(e,t){return recordProd.call(this,i.Option,e,t)},GastRecorder.prototype.atLeastOneInternalRecord=function(e,t){recordProd.call(this,i.RepetitionMandatory,t,e)},GastRecorder.prototype.atLeastOneSepFirstInternalRecord=function(e,t){recordProd.call(this,i.RepetitionMandatoryWithSeparator,t,e,!0)},GastRecorder.prototype.manyInternalRecord=function(e,t){recordProd.call(this,i.Repetition,t,e)},GastRecorder.prototype.manySepFirstInternalRecord=function(e,t){recordProd.call(this,i.RepetitionWithSeparator,t,e,!0)},GastRecorder.prototype.orInternalRecord=function(e,t){return recordOrProd.call(this,e,t)},GastRecorder.prototype.subruleInternalRecord=function(e,t,r){if(assertMethodIdxIsValid(t),!e||!1===(0,n.has)(e,"ruleName")){var a=Error("<SUBRULE"+getIdxSuffix(t)+"> argument is invalid expecting a Parser method reference but got: <"+JSON.stringify(e)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw a.KNOWN_RECORDER_ERROR=!0,a}var s=(0,n.peek)(this.recordingProdStack),l=e.ruleName,u=new i.NonTerminal({idx:t,nonTerminalName:l,label:null==r?void 0:r.LABEL,referencedRule:void 0});return s.definition.push(u),this.outputCst?y:f},GastRecorder.prototype.consumeInternalRecord=function(e,t,r){if(assertMethodIdxIsValid(t),!(0,s.hasShortKeyProperty)(e)){var a=Error("<CONSUME"+getIdxSuffix(t)+"> argument is invalid expecting a TokenType reference but got: <"+JSON.stringify(e)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw a.KNOWN_RECORDER_ERROR=!0,a}var l=(0,n.peek)(this.recordingProdStack),u=new i.Terminal({idx:t,terminalType:e,label:null==r?void 0:r.LABEL});return l.definition.push(u),m},GastRecorder}();function recordProd(e,t,r,i){void 0===i&&(i=!1),assertMethodIdxIsValid(r);var a=(0,n.peek)(this.recordingProdStack),s=(0,n.isFunction)(t)?t:t.DEF,l=new e({definition:[],idx:r});return i&&(l.separator=t.SEP),(0,n.has)(t,"MAX_LOOKAHEAD")&&(l.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(l),s.call(this),a.definition.push(l),this.recordingProdStack.pop(),f}function recordOrProd(e,t){var r=this;assertMethodIdxIsValid(t);var a=(0,n.peek)(this.recordingProdStack),s=!1===(0,n.isArray)(e),l=!1===s?e:e.DEF,u=new i.Alternation({definition:[],idx:t,ignoreAmbiguities:s&&!0===e.IGNORE_AMBIGUITIES});(0,n.has)(e,"MAX_LOOKAHEAD")&&(u.maxLookahead=e.MAX_LOOKAHEAD);var d=(0,n.some)(l,function(e){return(0,n.isFunction)(e.GATE)});return u.hasPredicates=d,a.definition.push(u),(0,n.forEach)(l,function(e){var t=new i.Alternative({definition:[]});u.definition.push(t),(0,n.has)(e,"IGNORE_AMBIGUITIES")?t.ignoreAmbiguities=e.IGNORE_AMBIGUITIES:(0,n.has)(e,"GATE")&&(t.ignoreAmbiguities=!0),r.recordingProdStack.push(t),e.ALT.call(r),r.recordingProdStack.pop()}),f}function getIdxSuffix(e){return 0===e?"":""+e}function assertMethodIdxIsValid(e){if(e<0||e>p){var t=Error("Invalid DSL Method idx value: <"+e+">\n	Idx value must be a none negative value smaller than "+(p+1));throw t.KNOWN_RECORDER_ERROR=!0,t}}t.GastRecorder=v},55453:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LexerAdapter=void 0;var n=r(72092),i=function(){function LexerAdapter(){}return LexerAdapter.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(LexerAdapter.prototype,"input",{get:function(){return this.tokVector},set:function(e){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length},enumerable:!1,configurable:!0}),LexerAdapter.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):n.END_OF_FILE},LexerAdapter.prototype.LA=function(e){var t=this.currIdx+e;return t<0||this.tokVectorLength<=t?n.END_OF_FILE:this.tokVector[t]},LexerAdapter.prototype.consumeToken=function(){this.currIdx++},LexerAdapter.prototype.exportLexerState=function(){return this.currIdx},LexerAdapter.prototype.importLexerState=function(e){this.currIdx=e},LexerAdapter.prototype.resetLexerState=function(){this.currIdx=-1},LexerAdapter.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},LexerAdapter.prototype.getLexerPosition=function(){return this.exportLexerState()},LexerAdapter}();t.LexerAdapter=i},4966:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LooksAhead=void 0;var n=r(61054),i=r(91433),a=r(72092),s=r(61729),l=r(48527),u=function(){function LooksAhead(){}return LooksAhead.prototype.initLooksAhead=function(e){this.dynamicTokensEnabled=(0,i.has)(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:a.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=(0,i.has)(e,"maxLookahead")?e.maxLookahead:a.DEFAULT_PARSER_CONFIG.maxLookahead,this.lookAheadFuncsCache=(0,i.isES2015MapSupported)()?new Map:[],(0,i.isES2015MapSupported)()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},LooksAhead.prototype.preComputeLookaheadFunctions=function(e){var t=this;(0,i.forEach)(e,function(e){t.TRACE_INIT(e.name+" Rule Lookahead",function(){var r=(0,l.collectMethods)(e),a=r.alternation,u=r.repetition,d=r.option,f=r.repetitionMandatory,p=r.repetitionMandatoryWithSeparator,g=r.repetitionWithSeparator;(0,i.forEach)(a,function(r){var i=0===r.idx?"":r.idx;t.TRACE_INIT(""+(0,l.getProductionDslName)(r)+i,function(){var i=(0,n.buildLookaheadFuncForOr)(r.idx,e,r.maxLookahead||t.maxLookahead,r.hasPredicates,t.dynamicTokensEnabled,t.lookAheadBuilderForAlternatives),a=(0,s.getKeyForAutomaticLookahead)(t.fullRuleNameToShort[e.name],s.OR_IDX,r.idx);t.setLaFuncCache(a,i)})}),(0,i.forEach)(u,function(r){t.computeLookaheadFunc(e,r.idx,s.MANY_IDX,n.PROD_TYPE.REPETITION,r.maxLookahead,(0,l.getProductionDslName)(r))}),(0,i.forEach)(d,function(r){t.computeLookaheadFunc(e,r.idx,s.OPTION_IDX,n.PROD_TYPE.OPTION,r.maxLookahead,(0,l.getProductionDslName)(r))}),(0,i.forEach)(f,function(r){t.computeLookaheadFunc(e,r.idx,s.AT_LEAST_ONE_IDX,n.PROD_TYPE.REPETITION_MANDATORY,r.maxLookahead,(0,l.getProductionDslName)(r))}),(0,i.forEach)(p,function(r){t.computeLookaheadFunc(e,r.idx,s.AT_LEAST_ONE_SEP_IDX,n.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,r.maxLookahead,(0,l.getProductionDslName)(r))}),(0,i.forEach)(g,function(r){t.computeLookaheadFunc(e,r.idx,s.MANY_SEP_IDX,n.PROD_TYPE.REPETITION_WITH_SEPARATOR,r.maxLookahead,(0,l.getProductionDslName)(r))})})})},LooksAhead.prototype.computeLookaheadFunc=function(e,t,r,i,a,l){var u=this;this.TRACE_INIT(""+l+(0===t?"":t),function(){var l=(0,n.buildLookaheadFuncForOptionalProd)(t,e,a||u.maxLookahead,u.dynamicTokensEnabled,i,u.lookAheadBuilderForOptional),d=(0,s.getKeyForAutomaticLookahead)(u.fullRuleNameToShort[e.name],r,t);u.setLaFuncCache(d,l)})},LooksAhead.prototype.lookAheadBuilderForOptional=function(e,t,r){return(0,n.buildSingleAlternativeLookaheadFunction)(e,t,r)},LooksAhead.prototype.lookAheadBuilderForAlternatives=function(e,t,r,i){return(0,n.buildAlternativesLookAheadFunc)(e,t,r,i)},LooksAhead.prototype.getKeyForAutomaticLookahead=function(e,t){var r=this.getLastExplicitRuleShortName();return(0,s.getKeyForAutomaticLookahead)(r,e,t)},LooksAhead.prototype.getLaFuncFromCache=function(e){},LooksAhead.prototype.getLaFuncFromMap=function(e){return this.lookAheadFuncsCache.get(e)},LooksAhead.prototype.getLaFuncFromObj=function(e){return this.lookAheadFuncsCache[e]},LooksAhead.prototype.setLaFuncCache=function(e,t){},LooksAhead.prototype.setLaFuncCacheUsingMap=function(e,t){this.lookAheadFuncsCache.set(e,t)},LooksAhead.prototype.setLaFuncUsingObj=function(e,t){this.lookAheadFuncsCache[e]=t},LooksAhead}();t.LooksAhead=u},21270:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceTracer=void 0;var n=r(91433),i=r(72092),a=function(){function PerformanceTracer(){}return PerformanceTracer.prototype.initPerformanceTracer=function(e){if((0,n.has)(e,"traceInitPerf")){var t=e.traceInitPerf,r="number"==typeof t;this.traceInitMaxIdent=r?t:1/0,this.traceInitPerf=r?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=i.DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1},PerformanceTracer.prototype.TRACE_INIT=function(e,t){if(!0!==this.traceInitPerf)return t();this.traceInitIndent++;var r=Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(r+"--> <"+e+">");var i=(0,n.timer)(t),a=i.time,s=i.value,l=a>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(r+"<-- <"+e+"> time: "+a+"ms"),this.traceInitIndent--,s},PerformanceTracer}();t.PerformanceTracer=a},54154:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerApi=void 0;var n=r(91433),i=r(60193),a=r(72092),s=r(23566),l=r(6678),u=r(84925),d=function(){function RecognizerApi(){}return RecognizerApi.prototype.ACTION=function(e){return e.call(this)},RecognizerApi.prototype.consume=function(e,t,r){return this.consumeInternal(t,e,r)},RecognizerApi.prototype.subrule=function(e,t,r){return this.subruleInternal(t,e,r)},RecognizerApi.prototype.option=function(e,t){return this.optionInternal(t,e)},RecognizerApi.prototype.or=function(e,t){return this.orInternal(t,e)},RecognizerApi.prototype.many=function(e,t){return this.manyInternal(e,t)},RecognizerApi.prototype.atLeastOne=function(e,t){return this.atLeastOneInternal(e,t)},RecognizerApi.prototype.CONSUME=function(e,t){return this.consumeInternal(e,0,t)},RecognizerApi.prototype.CONSUME1=function(e,t){return this.consumeInternal(e,1,t)},RecognizerApi.prototype.CONSUME2=function(e,t){return this.consumeInternal(e,2,t)},RecognizerApi.prototype.CONSUME3=function(e,t){return this.consumeInternal(e,3,t)},RecognizerApi.prototype.CONSUME4=function(e,t){return this.consumeInternal(e,4,t)},RecognizerApi.prototype.CONSUME5=function(e,t){return this.consumeInternal(e,5,t)},RecognizerApi.prototype.CONSUME6=function(e,t){return this.consumeInternal(e,6,t)},RecognizerApi.prototype.CONSUME7=function(e,t){return this.consumeInternal(e,7,t)},RecognizerApi.prototype.CONSUME8=function(e,t){return this.consumeInternal(e,8,t)},RecognizerApi.prototype.CONSUME9=function(e,t){return this.consumeInternal(e,9,t)},RecognizerApi.prototype.SUBRULE=function(e,t){return this.subruleInternal(e,0,t)},RecognizerApi.prototype.SUBRULE1=function(e,t){return this.subruleInternal(e,1,t)},RecognizerApi.prototype.SUBRULE2=function(e,t){return this.subruleInternal(e,2,t)},RecognizerApi.prototype.SUBRULE3=function(e,t){return this.subruleInternal(e,3,t)},RecognizerApi.prototype.SUBRULE4=function(e,t){return this.subruleInternal(e,4,t)},RecognizerApi.prototype.SUBRULE5=function(e,t){return this.subruleInternal(e,5,t)},RecognizerApi.prototype.SUBRULE6=function(e,t){return this.subruleInternal(e,6,t)},RecognizerApi.prototype.SUBRULE7=function(e,t){return this.subruleInternal(e,7,t)},RecognizerApi.prototype.SUBRULE8=function(e,t){return this.subruleInternal(e,8,t)},RecognizerApi.prototype.SUBRULE9=function(e,t){return this.subruleInternal(e,9,t)},RecognizerApi.prototype.OPTION=function(e){return this.optionInternal(e,0)},RecognizerApi.prototype.OPTION1=function(e){return this.optionInternal(e,1)},RecognizerApi.prototype.OPTION2=function(e){return this.optionInternal(e,2)},RecognizerApi.prototype.OPTION3=function(e){return this.optionInternal(e,3)},RecognizerApi.prototype.OPTION4=function(e){return this.optionInternal(e,4)},RecognizerApi.prototype.OPTION5=function(e){return this.optionInternal(e,5)},RecognizerApi.prototype.OPTION6=function(e){return this.optionInternal(e,6)},RecognizerApi.prototype.OPTION7=function(e){return this.optionInternal(e,7)},RecognizerApi.prototype.OPTION8=function(e){return this.optionInternal(e,8)},RecognizerApi.prototype.OPTION9=function(e){return this.optionInternal(e,9)},RecognizerApi.prototype.OR=function(e){return this.orInternal(e,0)},RecognizerApi.prototype.OR1=function(e){return this.orInternal(e,1)},RecognizerApi.prototype.OR2=function(e){return this.orInternal(e,2)},RecognizerApi.prototype.OR3=function(e){return this.orInternal(e,3)},RecognizerApi.prototype.OR4=function(e){return this.orInternal(e,4)},RecognizerApi.prototype.OR5=function(e){return this.orInternal(e,5)},RecognizerApi.prototype.OR6=function(e){return this.orInternal(e,6)},RecognizerApi.prototype.OR7=function(e){return this.orInternal(e,7)},RecognizerApi.prototype.OR8=function(e){return this.orInternal(e,8)},RecognizerApi.prototype.OR9=function(e){return this.orInternal(e,9)},RecognizerApi.prototype.MANY=function(e){this.manyInternal(0,e)},RecognizerApi.prototype.MANY1=function(e){this.manyInternal(1,e)},RecognizerApi.prototype.MANY2=function(e){this.manyInternal(2,e)},RecognizerApi.prototype.MANY3=function(e){this.manyInternal(3,e)},RecognizerApi.prototype.MANY4=function(e){this.manyInternal(4,e)},RecognizerApi.prototype.MANY5=function(e){this.manyInternal(5,e)},RecognizerApi.prototype.MANY6=function(e){this.manyInternal(6,e)},RecognizerApi.prototype.MANY7=function(e){this.manyInternal(7,e)},RecognizerApi.prototype.MANY8=function(e){this.manyInternal(8,e)},RecognizerApi.prototype.MANY9=function(e){this.manyInternal(9,e)},RecognizerApi.prototype.MANY_SEP=function(e){this.manySepFirstInternal(0,e)},RecognizerApi.prototype.MANY_SEP1=function(e){this.manySepFirstInternal(1,e)},RecognizerApi.prototype.MANY_SEP2=function(e){this.manySepFirstInternal(2,e)},RecognizerApi.prototype.MANY_SEP3=function(e){this.manySepFirstInternal(3,e)},RecognizerApi.prototype.MANY_SEP4=function(e){this.manySepFirstInternal(4,e)},RecognizerApi.prototype.MANY_SEP5=function(e){this.manySepFirstInternal(5,e)},RecognizerApi.prototype.MANY_SEP6=function(e){this.manySepFirstInternal(6,e)},RecognizerApi.prototype.MANY_SEP7=function(e){this.manySepFirstInternal(7,e)},RecognizerApi.prototype.MANY_SEP8=function(e){this.manySepFirstInternal(8,e)},RecognizerApi.prototype.MANY_SEP9=function(e){this.manySepFirstInternal(9,e)},RecognizerApi.prototype.AT_LEAST_ONE=function(e){this.atLeastOneInternal(0,e)},RecognizerApi.prototype.AT_LEAST_ONE1=function(e){return this.atLeastOneInternal(1,e)},RecognizerApi.prototype.AT_LEAST_ONE2=function(e){this.atLeastOneInternal(2,e)},RecognizerApi.prototype.AT_LEAST_ONE3=function(e){this.atLeastOneInternal(3,e)},RecognizerApi.prototype.AT_LEAST_ONE4=function(e){this.atLeastOneInternal(4,e)},RecognizerApi.prototype.AT_LEAST_ONE5=function(e){this.atLeastOneInternal(5,e)},RecognizerApi.prototype.AT_LEAST_ONE6=function(e){this.atLeastOneInternal(6,e)},RecognizerApi.prototype.AT_LEAST_ONE7=function(e){this.atLeastOneInternal(7,e)},RecognizerApi.prototype.AT_LEAST_ONE8=function(e){this.atLeastOneInternal(8,e)},RecognizerApi.prototype.AT_LEAST_ONE9=function(e){this.atLeastOneInternal(9,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP=function(e){this.atLeastOneSepFirstInternal(0,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP1=function(e){this.atLeastOneSepFirstInternal(1,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP2=function(e){this.atLeastOneSepFirstInternal(2,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP3=function(e){this.atLeastOneSepFirstInternal(3,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP4=function(e){this.atLeastOneSepFirstInternal(4,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP5=function(e){this.atLeastOneSepFirstInternal(5,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP6=function(e){this.atLeastOneSepFirstInternal(6,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP7=function(e){this.atLeastOneSepFirstInternal(7,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP8=function(e){this.atLeastOneSepFirstInternal(8,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP9=function(e){this.atLeastOneSepFirstInternal(9,e)},RecognizerApi.prototype.RULE=function(e,t,r){if(void 0===r&&(r=a.DEFAULT_RULE_CONFIG),(0,n.contains)(this.definedRulesNames,e)){var i={message:s.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:a.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(i)}this.definedRulesNames.push(e);var l=this.defineRule(e,t,r);return this[e]=l,l},RecognizerApi.prototype.OVERRIDE_RULE=function(e,t,r){void 0===r&&(r=a.DEFAULT_RULE_CONFIG);var n=[];n=n.concat((0,l.validateRuleIsOverridden)(e,this.definedRulesNames,this.className)),this.definitionErrors=this.definitionErrors.concat(n);var i=this.defineRule(e,t,r);return this[e]=i,i},RecognizerApi.prototype.BACKTRACK=function(e,t){return function(){this.isBackTrackingStack.push(1);var r=this.saveRecogState();try{return e.apply(this,t),!0}catch(e){if((0,i.isRecognitionException)(e))return!1;throw e}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}},RecognizerApi.prototype.getGAstProductions=function(){return this.gastProductionsCache},RecognizerApi.prototype.getSerializedGastProductions=function(){return(0,u.serializeGrammar)((0,n.values)(this.gastProductionsCache))},RecognizerApi}();t.RecognizerApi=d},60586:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerEngine=void 0;var n=r(91433),i=r(61729),a=r(60193),s=r(61054),l=r(2717),u=r(72092),d=r(8133),f=r(40711),p=r(91122),g=r(98543),m=function(){function RecognizerEngine(){}return RecognizerEngine.prototype.initRecognizerEngine=function(e,t){if(this.className=(0,g.classNameFromInstance)(this),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=p.tokenStructuredMatcherNoCategories,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},(0,n.has)(t,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n	For Further details.");if((0,n.isArray)(e)){if((0,n.isEmpty)(e))throw Error("A Token Vocabulary cannot be empty.\n	Note that the first argument for the parser constructor\n	is no longer a Token vector (since v4.0).");if("number"==typeof e[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n	For Further details.")}if((0,n.isArray)(e))this.tokensMap=(0,n.reduce)(e,function(e,t){return e[t.name]=t,e},{});else if((0,n.has)(e,"modes")&&(0,n.every)((0,n.flatten)((0,n.values)(e.modes)),p.isTokenType)){var r=(0,n.flatten)((0,n.values)(e.modes)),i=(0,n.uniq)(r);this.tokensMap=(0,n.reduce)(i,function(e,t){return e[t.name]=t,e},{})}else if((0,n.isObject)(e))this.tokensMap=(0,n.cloneObj)(e);else throw Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=f.EOF;var a=(0,n.every)((0,n.values)(e),function(e){return(0,n.isEmpty)(e.categoryMatches)});this.tokenMatcher=a?p.tokenStructuredMatcherNoCategories:p.tokenStructuredMatcher,(0,p.augmentTokenTypes)((0,n.values)(this.tokensMap))},RecognizerEngine.prototype.defineRule=function(e,t,r){if(this.selfAnalysisDone)throw Error("Grammar rule <"+e+"> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.");var a=(0,n.has)(r,"resyncEnabled")?r.resyncEnabled:u.DEFAULT_RULE_CONFIG.resyncEnabled,s=(0,n.has)(r,"recoveryValueFunc")?r.recoveryValueFunc:u.DEFAULT_RULE_CONFIG.recoveryValueFunc,l=this.ruleShortNameIdx<<i.BITS_FOR_METHOD_TYPE+i.BITS_FOR_OCCURRENCE_IDX;function invokeRuleWithTry(e){try{if(!0!==this.outputCst)return t.apply(this,e);t.apply(this,e);var r=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(r),r}catch(e){return this.invokeRuleCatch(e,a,s)}finally{this.ruleFinallyStateUpdate()}}this.ruleShortNameIdx++,this.shortRuleNameToFull[l]=e,this.fullRuleNameToShort[e]=l;var wrappedGrammarRule=function(t,r){return void 0===t&&(t=0),this.ruleInvocationStateUpdate(l,e,t),invokeRuleWithTry.call(this,r)};return wrappedGrammarRule.ruleName=e,wrappedGrammarRule.originalGrammarAction=t,wrappedGrammarRule},RecognizerEngine.prototype.invokeRuleCatch=function(e,t,r){var n=1===this.RULE_STACK.length,i=t&&!this.isBackTracking()&&this.recoveryEnabled;if((0,a.isRecognitionException)(e)){if(i){var s=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(s)){if(e.resyncedTokens=this.reSyncTo(s),!this.outputCst)return r();var l=this.CST_STACK[this.CST_STACK.length-1];return l.recoveredNode=!0,l}if(this.outputCst){var l=this.CST_STACK[this.CST_STACK.length-1];l.recoveredNode=!0,e.partialCstResult=l}throw e}if(n)return this.moveToTerminatedState(),r()}throw e},RecognizerEngine.prototype.optionInternal=function(e,t){var r=this.getKeyForAutomaticLookahead(i.OPTION_IDX,t);return this.optionInternalLogic(e,t,r)},RecognizerEngine.prototype.optionInternalLogic=function(e,t,r){var n,i,a=this,s=this.getLaFuncFromCache(r);if(void 0!==e.DEF){if(n=e.DEF,void 0!==(i=e.GATE)){var l=s;s=function(){return i.call(a)&&l.call(a)}}}else n=e;if(!0===s.call(this))return n.call(this)},RecognizerEngine.prototype.atLeastOneInternal=function(e,t){var r=this.getKeyForAutomaticLookahead(i.AT_LEAST_ONE_IDX,e);return this.atLeastOneInternalLogic(e,t,r)},RecognizerEngine.prototype.atLeastOneInternalLogic=function(e,t,r){var n,a,u=this,d=this.getLaFuncFromCache(r);if(void 0!==t.DEF){if(n=t.DEF,void 0!==(a=t.GATE)){var f=d;d=function(){return a.call(u)&&f.call(u)}}}else n=t;if(!0===d.call(this))for(var p=this.doSingleRepetition(n);!0===d.call(this)&&!0===p;)p=this.doSingleRepetition(n);else throw this.raiseEarlyExitException(e,s.PROD_TYPE.REPETITION_MANDATORY,t.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],d,i.AT_LEAST_ONE_IDX,e,l.NextTerminalAfterAtLeastOneWalker)},RecognizerEngine.prototype.atLeastOneSepFirstInternal=function(e,t){var r=this.getKeyForAutomaticLookahead(i.AT_LEAST_ONE_SEP_IDX,e);this.atLeastOneSepFirstInternalLogic(e,t,r)},RecognizerEngine.prototype.atLeastOneSepFirstInternalLogic=function(e,t,r){var n=this,a=t.DEF,u=t.SEP;if(!0===this.getLaFuncFromCache(r).call(this)){a.call(this);for(var separatorLookAheadFunc=function(){return n.tokenMatcher(n.LA(1),u)};!0===this.tokenMatcher(this.LA(1),u);)this.CONSUME(u),a.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,u,separatorLookAheadFunc,a,l.NextTerminalAfterAtLeastOneSepWalker],separatorLookAheadFunc,i.AT_LEAST_ONE_SEP_IDX,e,l.NextTerminalAfterAtLeastOneSepWalker)}else throw this.raiseEarlyExitException(e,s.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG)},RecognizerEngine.prototype.manyInternal=function(e,t){var r=this.getKeyForAutomaticLookahead(i.MANY_IDX,e);return this.manyInternalLogic(e,t,r)},RecognizerEngine.prototype.manyInternalLogic=function(e,t,r){var n,a,s=this,u=this.getLaFuncFromCache(r);if(void 0!==t.DEF){if(n=t.DEF,void 0!==(a=t.GATE)){var d=u;u=function(){return a.call(s)&&d.call(s)}}}else n=t;for(var f=!0;!0===u.call(this)&&!0===f;)f=this.doSingleRepetition(n);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],u,i.MANY_IDX,e,l.NextTerminalAfterManyWalker,f)},RecognizerEngine.prototype.manySepFirstInternal=function(e,t){var r=this.getKeyForAutomaticLookahead(i.MANY_SEP_IDX,e);this.manySepFirstInternalLogic(e,t,r)},RecognizerEngine.prototype.manySepFirstInternalLogic=function(e,t,r){var n=this,a=t.DEF,s=t.SEP;if(!0===this.getLaFuncFromCache(r).call(this)){a.call(this);for(var separatorLookAheadFunc=function(){return n.tokenMatcher(n.LA(1),s)};!0===this.tokenMatcher(this.LA(1),s);)this.CONSUME(s),a.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,separatorLookAheadFunc,a,l.NextTerminalAfterManySepWalker],separatorLookAheadFunc,i.MANY_SEP_IDX,e,l.NextTerminalAfterManySepWalker)}},RecognizerEngine.prototype.repetitionSepSecondInternal=function(e,t,r,n,a){for(;r();)this.CONSUME(t),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,r,n,a],r,i.AT_LEAST_ONE_SEP_IDX,e,a)},RecognizerEngine.prototype.doSingleRepetition=function(e){var t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t},RecognizerEngine.prototype.orInternal=function(e,t){var r=this.getKeyForAutomaticLookahead(i.OR_IDX,t),a=(0,n.isArray)(e)?e:e.DEF,s=this.getLaFuncFromCache(r).call(this,a);if(void 0!==s)return a[s].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)},RecognizerEngine.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){var e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new a.NotAllInputParsedException(t,e))}},RecognizerEngine.prototype.subruleInternal=function(e,t,r){var n;try{var i=void 0!==r?r.ARGS:void 0;return n=e.call(this,t,i),this.cstPostNonTerminal(n,void 0!==r&&void 0!==r.LABEL?r.LABEL:e.ruleName),n}catch(t){this.subruleInternalError(t,r,e.ruleName)}},RecognizerEngine.prototype.subruleInternalError=function(e,t,r){throw(0,a.isRecognitionException)(e)&&void 0!==e.partialCstResult&&(this.cstPostNonTerminal(e.partialCstResult,void 0!==t&&void 0!==t.LABEL?t.LABEL:r),delete e.partialCstResult),e},RecognizerEngine.prototype.consumeInternal=function(e,t,r){var n;try{var i=this.LA(1);!0===this.tokenMatcher(i,e)?(this.consumeToken(),n=i):this.consumeInternalError(e,i,r)}catch(r){n=this.consumeInternalRecovery(e,t,r)}return this.cstPostTerminal(void 0!==r&&void 0!==r.LABEL?r.LABEL:e.name,n),n},RecognizerEngine.prototype.consumeInternalError=function(e,t,r){var n,i=this.LA(0);throw n=void 0!==r&&r.ERR_MSG?r.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new a.MismatchedTokenException(n,t,i))},RecognizerEngine.prototype.consumeInternalRecovery=function(e,t,r){if(this.recoveryEnabled&&"MismatchedTokenException"===r.name&&!this.isBackTracking()){var n=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,n)}catch(e){if(e.name===d.IN_RULE_RECOVERY_EXCEPTION)throw r;throw e}}else throw r},RecognizerEngine.prototype.saveRecogState=function(){var e=this.errors,t=(0,n.cloneArr)(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}},RecognizerEngine.prototype.reloadRecogState=function(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK},RecognizerEngine.prototype.ruleInvocationStateUpdate=function(e,t,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t,e)},RecognizerEngine.prototype.isBackTracking=function(){return 0!==this.isBackTrackingStack.length},RecognizerEngine.prototype.getCurrRuleFullName=function(){var e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]},RecognizerEngine.prototype.shortRuleNameToFullName=function(e){return this.shortRuleNameToFull[e]},RecognizerEngine.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),f.EOF)},RecognizerEngine.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},RecognizerEngine}();t.RecognizerEngine=m},8133:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attemptInRepetitionRecovery=t.Recoverable=t.InRuleRecoveryException=t.IN_RULE_RECOVERY_EXCEPTION=t.EOF_FOLLOW_KEY=void 0;var n=r(40711),i=r(91433),a=r(60193),s=r(2786),l=r(72092);function InRuleRecoveryException(e){this.name=t.IN_RULE_RECOVERY_EXCEPTION,this.message=e}t.EOF_FOLLOW_KEY={},t.IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException",t.InRuleRecoveryException=InRuleRecoveryException,InRuleRecoveryException.prototype=Error.prototype;var u=function(){function Recoverable(){}return Recoverable.prototype.initRecoverable=function(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=(0,i.has)(e,"recoveryEnabled")?e.recoveryEnabled:l.DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=attemptInRepetitionRecovery)},Recoverable.prototype.getTokenToInsert=function(e){var t=(0,n.createTokenInstance)(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t},Recoverable.prototype.canTokenTypeBeInsertedInRecovery=function(e){return!0},Recoverable.prototype.tryInRepetitionRecovery=function(e,t,r,n){for(var s=this,l=this.findReSyncTokenType(),u=this.exportLexerState(),d=[],f=!1,p=this.LA(1),g=this.LA(1),generateErrorMessage=function(){var e=s.LA(0),t=s.errorMessageProvider.buildMismatchTokenMessage({expected:n,actual:p,previous:e,ruleName:s.getCurrRuleFullName()}),r=new a.MismatchedTokenException(t,p,s.LA(0));r.resyncedTokens=(0,i.dropRight)(d),s.SAVE_ERROR(r)};!f;){if(this.tokenMatcher(g,n)){generateErrorMessage();return}if(r.call(this)){generateErrorMessage(),e.apply(this,t);return}this.tokenMatcher(g,l)?f=!0:(g=this.SKIP_TOKEN(),this.addToResyncTokens(g,d))}this.importLexerState(u)},Recoverable.prototype.shouldInRepetitionRecoveryBeTried=function(e,t,r){return!(!1===r||void 0===e||void 0===t||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))},Recoverable.prototype.getFollowsForInRuleRecovery=function(e,t){var r=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(r)},Recoverable.prototype.tryInRuleRecovery=function(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){var r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new InRuleRecoveryException("sad sad panda")},Recoverable.prototype.canPerformInRuleRecovery=function(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)},Recoverable.prototype.canRecoverWithSingleTokenInsertion=function(e,t){var r=this;if(!this.canTokenTypeBeInsertedInRecovery(e)||(0,i.isEmpty)(t))return!1;var n=this.LA(1);return void 0!==(0,i.find)(t,function(e){return r.tokenMatcher(n,e)})},Recoverable.prototype.canRecoverWithSingleTokenDeletion=function(e){return this.tokenMatcher(this.LA(2),e)},Recoverable.prototype.isInCurrentRuleReSyncSet=function(e){var t=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(t);return(0,i.contains)(r,e)},Recoverable.prototype.findReSyncTokenType=function(){for(var e=this.flattenFollowSet(),t=this.LA(1),r=2;;){var n=t.tokenType;if((0,i.contains)(e,n))return n;t=this.LA(r),r++}},Recoverable.prototype.getCurrFollowKey=function(){if(1===this.RULE_STACK.length)return t.EOF_FOLLOW_KEY;var e=this.getLastExplicitRuleShortName(),r=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:r,inRule:this.shortRuleNameToFullName(n)}},Recoverable.prototype.buildFullFollowKeyStack=function(){var e=this,r=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return(0,i.map)(r,function(i,a){return 0===a?t.EOF_FOLLOW_KEY:{ruleName:e.shortRuleNameToFullName(i),idxInCallingRule:n[a],inRule:e.shortRuleNameToFullName(r[a-1])}})},Recoverable.prototype.flattenFollowSet=function(){var e=this,t=(0,i.map)(this.buildFullFollowKeyStack(),function(t){return e.getFollowSetFromFollowKey(t)});return(0,i.flatten)(t)},Recoverable.prototype.getFollowSetFromFollowKey=function(e){if(e===t.EOF_FOLLOW_KEY)return[n.EOF];var r=e.ruleName+e.idxInCallingRule+s.IN+e.inRule;return this.resyncFollows[r]},Recoverable.prototype.addToResyncTokens=function(e,t){return this.tokenMatcher(e,n.EOF)||t.push(e),t},Recoverable.prototype.reSyncTo=function(e){for(var t=[],r=this.LA(1);!1===this.tokenMatcher(r,e);)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,t);return(0,i.dropRight)(t)},Recoverable.prototype.attemptInRepetitionRecovery=function(e,t,r,n,i,a,s){},Recoverable.prototype.getCurrentGrammarPath=function(e,t){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:(0,i.cloneArr)(this.RULE_OCCURRENCE_STACK),lastTok:e,lastTokOccurrence:t}},Recoverable.prototype.getHumanReadableRuleStack=function(){var e=this;return(0,i.map)(this.RULE_STACK,function(t){return e.shortRuleNameToFullName(t)})},Recoverable}();function attemptInRepetitionRecovery(e,t,r,i,a,s,l){var u=this.getKeyForAutomaticLookahead(i,a),d=this.firstAfterRepMap[u];if(void 0===d){var f=this.getCurrRuleFullName();d=new s(this.getGAstProductions()[f],a).startWalking(),this.firstAfterRepMap[u]=d}var p=d.token,g=d.occurrence,m=d.isEndOfRule;1===this.RULE_STACK.length&&m&&void 0===p&&(p=n.EOF,g=1),this.shouldInRepetitionRecoveryBeTried(p,g,l)&&this.tryInRepetitionRecovery(e,t,r,p)}t.Recoverable=u,t.attemptInRepetitionRecovery=attemptInRepetitionRecovery},57745:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreeBuilder=void 0;var n=r(40886),i=r(91433),a=r(25980),s=r(72092),l=function(){function TreeBuilder(){}return TreeBuilder.prototype.initTreeBuilder=function(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=(0,i.has)(e,"nodeLocationTracking")?e.nodeLocationTracking:s.DEFAULT_PARSER_CONFIG.nodeLocationTracking,this.outputCst){if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=n.setNodeLocationFull,this.setNodeLocationFromNode=n.setNodeLocationFull,this.cstPostRule=i.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=i.NOOP,this.setNodeLocationFromNode=i.NOOP,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=n.setNodeLocationOnlyOffset,this.setNodeLocationFromNode=n.setNodeLocationOnlyOffset,this.cstPostRule=i.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=i.NOOP,this.setNodeLocationFromNode=i.NOOP,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=i.NOOP,this.setNodeLocationFromNode=i.NOOP,this.cstPostRule=i.NOOP,this.setInitialNodeLocation=i.NOOP;else throw Error('Invalid <nodeLocationTracking> config option: "'+e.nodeLocationTracking+'"')}else this.cstInvocationStateUpdate=i.NOOP,this.cstFinallyStateUpdate=i.NOOP,this.cstPostTerminal=i.NOOP,this.cstPostNonTerminal=i.NOOP,this.cstPostRule=i.NOOP},TreeBuilder.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(e){e.location={startOffset:NaN,endOffset:NaN}},TreeBuilder.prototype.setInitialNodeLocationOnlyOffsetRegular=function(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},TreeBuilder.prototype.setInitialNodeLocationFullRecovery=function(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},TreeBuilder.prototype.setInitialNodeLocationFullRegular=function(e){var t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},TreeBuilder.prototype.cstInvocationStateUpdate=function(e,t){var r={name:e,children:{}};this.setInitialNodeLocation(r),this.CST_STACK.push(r)},TreeBuilder.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},TreeBuilder.prototype.cstPostRuleFull=function(e){var t=this.LA(0),r=e.location;r.startOffset<=t.startOffset==!0?(r.endOffset=t.endOffset,r.endLine=t.endLine,r.endColumn=t.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)},TreeBuilder.prototype.cstPostRuleOnlyOffset=function(e){var t=this.LA(0),r=e.location;r.startOffset<=t.startOffset==!0?r.endOffset=t.endOffset:r.startOffset=NaN},TreeBuilder.prototype.cstPostTerminal=function(e,t){var r=this.CST_STACK[this.CST_STACK.length-1];(0,n.addTerminalToCst)(r,t,e),this.setNodeLocationFromToken(r.location,t)},TreeBuilder.prototype.cstPostNonTerminal=function(e,t){var r=this.CST_STACK[this.CST_STACK.length-1];(0,n.addNoneTerminalToCst)(r,t,e),this.setNodeLocationFromNode(r.location,e.location)},TreeBuilder.prototype.getBaseCstVisitorConstructor=function(){if((0,i.isUndefined)(this.baseCstVisitorConstructor)){var e=(0,a.createBaseSemanticVisitorConstructor)(this.className,(0,i.keys)(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor},TreeBuilder.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if((0,i.isUndefined)(this.baseCstVisitorWithDefaultsConstructor)){var e=(0,a.createBaseVisitorConstructorWithDefaults)(this.className,(0,i.keys)(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor},TreeBuilder.prototype.getLastExplicitRuleShortName=function(){var e=this.RULE_STACK;return e[e.length-1]},TreeBuilder.prototype.getPreviousExplicitRuleShortName=function(){var e=this.RULE_STACK;return e[e.length-2]},TreeBuilder.prototype.getLastExplicitRuleOccurrenceIndex=function(){var e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]},TreeBuilder}();t.TreeBuilder=l},46657:function(e,t){"use strict";function applyMixins(e,t){t.forEach(function(t){var r=t.prototype;Object.getOwnPropertyNames(r).forEach(function(n){if("constructor"!==n){var i=Object.getOwnPropertyDescriptor(r,n);i&&(i.get||i.set)?Object.defineProperty(e.prototype,n,i):e.prototype[n]=t.prototype[n]}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.applyMixins=void 0,t.applyMixins=applyMixins},91536:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.charCodeToOptimizedIndex=t.minOptimizationVal=t.buildLineBreakIssueMessage=t.LineTerminatorOptimizedTester=t.isShortPattern=t.isCustomPattern=t.cloneEmptyGroups=t.performWarningRuntimeChecks=t.performRuntimeChecks=t.addStickyFlag=t.addStartOfInput=t.findUnreachablePatterns=t.findModesThatDoNotExist=t.findInvalidGroupType=t.findDuplicatePatterns=t.findUnsupportedFlags=t.findStartOfInputAnchor=t.findEmptyMatchRegExps=t.findEndOfInputAnchor=t.findInvalidPatterns=t.findMissingPatterns=t.validatePatterns=t.analyzeTokenTypes=t.enableSticky=t.disableSticky=t.SUPPORT_STICKY=t.MODES=t.DEFAULT_MODE=void 0;var a=r(50272),s=r(80593),l=r(91433),u=r(34704),d=r(73228),f="PATTERN";function disableSticky(){t.SUPPORT_STICKY=!1}function enableSticky(){t.SUPPORT_STICKY=!0}function analyzeTokenTypes(e,r){var n,i,a,d,p,g,m,y,v,x,b,O,R=(r=(0,l.defaults)(r,{useSticky:t.SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:function(e,t){return t()}})).tracer;R("initCharCodeToOptimizedIndexMap",function(){initCharCodeToOptimizedIndexMap()}),R("Reject Lexer.NA",function(){n=(0,l.reject)(e,function(e){return e[f]===s.Lexer.NA})});var _=!1;R("Transform Patterns",function(){_=!1,i=(0,l.map)(n,function(e){var t=e[f];if((0,l.isRegExp)(t)){var n=t.source;return 1!==n.length||"^"===n||"$"===n||"."===n||t.ignoreCase?2!==n.length||"\\"!==n[0]||(0,l.contains)(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],n[1])?r.useSticky?addStickyFlag(t):addStartOfInput(t):n[1]:n}if((0,l.isFunction)(t))return _=!0,{exec:t};if((0,l.has)(t,"exec"))return _=!0,t;if("string"==typeof t){if(1===t.length)return t;var i=new RegExp(t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"));return r.useSticky?addStickyFlag(i):addStartOfInput(i)}throw Error("non exhaustive match")})}),R("misc mapping",function(){a=(0,l.map)(n,function(e){return e.tokenTypeIdx}),d=(0,l.map)(n,function(e){var t=e.GROUP;if(t!==s.Lexer.SKIPPED){if((0,l.isString)(t))return t;if((0,l.isUndefined)(t))return!1;throw Error("non exhaustive match")}}),p=(0,l.map)(n,function(e){var t=e.LONGER_ALT;if(t)return(0,l.isArray)(t)?(0,l.map)(t,function(e){return(0,l.indexOf)(n,e)}):[(0,l.indexOf)(n,t)]}),g=(0,l.map)(n,function(e){return e.PUSH_MODE}),m=(0,l.map)(n,function(e){return(0,l.has)(e,"POP_MODE")})}),R("Line Terminator Handling",function(){var e=getCharCodes(r.lineTerminatorCharacters);y=(0,l.map)(n,function(e){return!1}),"onlyOffset"!==r.positionTracking&&(y=(0,l.map)(n,function(t){return(0,l.has)(t,"LINE_BREAKS")?t.LINE_BREAKS:!1===checkLineBreaksIssues(t,e)?(0,u.canMatchCharCode)(e,t.PATTERN):void 0}))}),R("Misc Mapping #2",function(){v=(0,l.map)(n,isCustomPattern),x=(0,l.map)(i,isShortPattern),b=(0,l.reduce)(n,function(e,t){var r=t.GROUP;return(0,l.isString)(r)&&r!==s.Lexer.SKIPPED&&(e[r]=[]),e},{}),O=(0,l.map)(i,function(e,t){return{pattern:i[t],longerAlt:p[t],canLineTerminator:y[t],isCustom:v[t],short:x[t],group:d[t],push:g[t],pop:m[t],tokenTypeIdx:a[t],tokenType:n[t]}})});var A=!0,C=[];return r.safeMode||R("First Char Optimization",function(){C=(0,l.reduce)(n,function(e,t,n){if("string"==typeof t.PATTERN){var i;addToMapOfArrays(e,charCodeToOptimizedIndex(t.PATTERN.charCodeAt(0)),O[n])}else if((0,l.isArray)(t.START_CHARS_HINT))(0,l.forEach)(t.START_CHARS_HINT,function(t){var r=charCodeToOptimizedIndex("string"==typeof t?t.charCodeAt(0):t);i!==r&&(i=r,addToMapOfArrays(e,r,O[n]))});else if((0,l.isRegExp)(t.PATTERN)){if(t.PATTERN.unicode)A=!1,r.ensureOptimizations&&(0,l.PRINT_ERROR)(""+u.failedOptimizationPrefixMsg+"	Unable to analyze < "+t.PATTERN.toString()+" > pattern.\n	The regexp unicode flag is not currently supported by the regexp-to-ast library.\n	This will disable the lexer's first char optimizations.\n	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE");else{var a=(0,u.getOptimizedStartCodesIndices)(t.PATTERN,r.ensureOptimizations);(0,l.isEmpty)(a)&&(A=!1),(0,l.forEach)(a,function(t){addToMapOfArrays(e,t,O[n])})}}else r.ensureOptimizations&&(0,l.PRINT_ERROR)(""+u.failedOptimizationPrefixMsg+"	TokenType: <"+t.name+"> is using a custom token pattern without providing <start_chars_hint> parameter.\n	This will disable the lexer's first char optimizations.\n	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE"),A=!1;return e},[])}),R("ArrayPacking",function(){C=(0,l.packArray)(C)}),{emptyGroups:b,patternIdxToConfig:O,charCodeToPatternIdxToConfig:C,hasCustom:_,canBeOptimized:A}}function validatePatterns(e,t){var r=[],n=findMissingPatterns(e);r=r.concat(n.errors);var i=findInvalidPatterns(n.valid),a=i.valid;return(r=(r=(r=(r=r.concat(i.errors)).concat(validateRegExpPattern(a))).concat(findInvalidGroupType(a))).concat(findModesThatDoNotExist(a,t))).concat(findUnreachablePatterns(a))}function validateRegExpPattern(e){var t=[],r=(0,l.filter)(e,function(e){return(0,l.isRegExp)(e[f])});return(t=(t=(t=(t=t.concat(findEndOfInputAnchor(r))).concat(findStartOfInputAnchor(r))).concat(findUnsupportedFlags(r))).concat(findDuplicatePatterns(r))).concat(findEmptyMatchRegExps(r))}function findMissingPatterns(e){var t=(0,l.filter)(e,function(e){return!(0,l.has)(e,f)});return{errors:(0,l.map)(t,function(e){return{message:"Token Type: ->"+e.name+"<- missing static 'PATTERN' property",type:s.LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[e]}}),valid:(0,l.difference)(e,t)}}function findInvalidPatterns(e){var t=(0,l.filter)(e,function(e){var t=e[f];return!(0,l.isRegExp)(t)&&!(0,l.isFunction)(t)&&!(0,l.has)(t,"exec")&&!(0,l.isString)(t)});return{errors:(0,l.map)(t,function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:s.LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[e]}}),valid:(0,l.difference)(e,t)}}t.DEFAULT_MODE="defaultMode",t.MODES="modes",t.SUPPORT_STICKY="boolean"==typeof RegExp("(?:)").sticky,t.disableSticky=disableSticky,t.enableSticky=enableSticky,t.analyzeTokenTypes=analyzeTokenTypes,t.validatePatterns=validatePatterns,t.findMissingPatterns=findMissingPatterns,t.findInvalidPatterns=findInvalidPatterns;var p=/[^\\][\$]/;function findEndOfInputAnchor(e){var t=function(e){function EndAnchorFinder(){var t=null!==e&&e.apply(this,arguments)||this;return t.found=!1,t}return i(EndAnchorFinder,e),EndAnchorFinder.prototype.visitEndAnchor=function(e){this.found=!0},EndAnchorFinder}(a.BaseRegExpVisitor),r=(0,l.filter)(e,function(e){var r=e[f];try{var n=(0,d.getRegExpAst)(r),i=new t;return i.visit(n),i.found}catch(e){return p.test(r.source)}});return(0,l.map)(r,function(e){return{message:"Unexpected RegExp Anchor Error:\n	Token Type: ->"+e.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.",type:s.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[e]}})}function findEmptyMatchRegExps(e){var t=(0,l.filter)(e,function(e){return e[f].test("")});return(0,l.map)(t,function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' must not match an empty string",type:s.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[e]}})}t.findEndOfInputAnchor=findEndOfInputAnchor,t.findEmptyMatchRegExps=findEmptyMatchRegExps;var g=/[^\\[][\^]|^\^/;function findStartOfInputAnchor(e){var t=function(e){function StartAnchorFinder(){var t=null!==e&&e.apply(this,arguments)||this;return t.found=!1,t}return i(StartAnchorFinder,e),StartAnchorFinder.prototype.visitStartAnchor=function(e){this.found=!0},StartAnchorFinder}(a.BaseRegExpVisitor),r=(0,l.filter)(e,function(e){var r=e[f];try{var n=(0,d.getRegExpAst)(r),i=new t;return i.visit(n),i.found}catch(e){return g.test(r.source)}});return(0,l.map)(r,function(e){return{message:"Unexpected RegExp Anchor Error:\n	Token Type: ->"+e.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.",type:s.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[e]}})}function findUnsupportedFlags(e){var t=(0,l.filter)(e,function(e){var t=e[f];return t instanceof RegExp&&(t.multiline||t.global)});return(0,l.map)(t,function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:s.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[e]}})}function findDuplicatePatterns(e){var t=[],r=(0,l.map)(e,function(r){return(0,l.reduce)(e,function(e,n){return r.PATTERN.source!==n.PATTERN.source||(0,l.contains)(t,n)||n.PATTERN===s.Lexer.NA||(t.push(n),e.push(n)),e},[])});r=(0,l.compact)(r);var n=(0,l.filter)(r,function(e){return e.length>1});return(0,l.map)(n,function(e){var t=(0,l.map)(e,function(e){return e.name});return{message:"The same RegExp pattern ->"+(0,l.first)(e).PATTERN+"<-has been used in all of the following Token Types: "+t.join(", ")+" <-",type:s.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:e}})}function findInvalidGroupType(e){var t=(0,l.filter)(e,function(e){if(!(0,l.has)(e,"GROUP"))return!1;var t=e.GROUP;return t!==s.Lexer.SKIPPED&&t!==s.Lexer.NA&&!(0,l.isString)(t)});return(0,l.map)(t,function(e){return{message:"Token Type: ->"+e.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:s.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[e]}})}function findModesThatDoNotExist(e,t){var r=(0,l.filter)(e,function(e){return void 0!==e.PUSH_MODE&&!(0,l.contains)(t,e.PUSH_MODE)});return(0,l.map)(r,function(e){return{message:"Token Type: ->"+e.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+e.PUSH_MODE+"<-which does not exist",type:s.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[e]}})}function findUnreachablePatterns(e){var t=[],r=(0,l.reduce)(e,function(e,t,r){var n=t.PATTERN;return n===s.Lexer.NA||((0,l.isString)(n)?e.push({str:n,idx:r,tokenType:t}):(0,l.isRegExp)(n)&&noMetaChar(n)&&e.push({str:n.source,idx:r,tokenType:t})),e},[]);return(0,l.forEach)(e,function(e,n){(0,l.forEach)(r,function(r){var i=r.str,a=r.idx,l=r.tokenType;if(n<a&&testTokenType(i,e.PATTERN)){var u="Token: ->"+l.name+"<- can never be matched.\nBecause it appears AFTER the Token Type ->"+e.name+"<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE";t.push({message:u,type:s.LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[e,l]})}})}),t}function testTokenType(e,t){if((0,l.isRegExp)(t)){var r=t.exec(e);return null!==r&&0===r.index}if((0,l.isFunction)(t))return t(e,0,[],{});if((0,l.has)(t,"exec"))return t.exec(e,0,[],{});if("string"==typeof t)return t===e;throw Error("non exhaustive match")}function noMetaChar(e){return void 0===(0,l.find)([".","\\","[","]","|","^","$","(",")","?","*","+","{"],function(t){return -1!==e.source.indexOf(t)})}function addStartOfInput(e){var t=e.ignoreCase?"i":"";return RegExp("^(?:"+e.source+")",t)}function addStickyFlag(e){var t=e.ignoreCase?"iy":"y";return RegExp(""+e.source,t)}function performRuntimeChecks(e,r,n){var i=[];return(0,l.has)(e,t.DEFAULT_MODE)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+t.DEFAULT_MODE+"> property in its definition\n",type:s.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),(0,l.has)(e,t.MODES)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+t.MODES+"> property in its definition\n",type:s.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),(0,l.has)(e,t.MODES)&&(0,l.has)(e,t.DEFAULT_MODE)&&!(0,l.has)(e.modes,e.defaultMode)&&i.push({message:"A MultiMode Lexer cannot be initialized with a "+t.DEFAULT_MODE+": <"+e.defaultMode+">which does not exist\n",type:s.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),(0,l.has)(e,t.MODES)&&(0,l.forEach)(e.modes,function(e,t){(0,l.forEach)(e,function(e,r){(0,l.isUndefined)(e)&&i.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:<"+t+"> at index: <"+r+">\n",type:s.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),i}function performWarningRuntimeChecks(e,t,r){var n=[],i=!1,a=(0,l.compact)((0,l.flatten)((0,l.mapValues)(e.modes,function(e){return e}))),d=(0,l.reject)(a,function(e){return e[f]===s.Lexer.NA}),p=getCharCodes(r);return t&&(0,l.forEach)(d,function(e){var t=checkLineBreaksIssues(e,p);if(!1!==t){var r={message:buildLineBreakIssueMessage(e,t),type:t.issue,tokenType:e};n.push(r)}else(0,l.has)(e,"LINE_BREAKS")?!0===e.LINE_BREAKS&&(i=!0):(0,u.canMatchCharCode)(p,e.PATTERN)&&(i=!0)}),t&&!i&&n.push({message:"Warning: No LINE_BREAKS Found.\n	This Lexer has been defined to track line and column information,\n	But none of the Token Types can be identified as matching a line terminator.\n	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n	for details.",type:s.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),n}function cloneEmptyGroups(e){var t={},r=(0,l.keys)(e);return(0,l.forEach)(r,function(r){var n=e[r];if((0,l.isArray)(n))t[r]=[];else throw Error("non exhaustive match")}),t}function isCustomPattern(e){var t=e.PATTERN;if((0,l.isRegExp)(t))return!1;if((0,l.isFunction)(t)||(0,l.has)(t,"exec"))return!0;if((0,l.isString)(t))return!1;throw Error("non exhaustive match")}function isShortPattern(e){return!!(0,l.isString)(e)&&1===e.length&&e.charCodeAt(0)}function checkLineBreaksIssues(e,t){if((0,l.has)(e,"LINE_BREAKS"))return!1;if((0,l.isRegExp)(e.PATTERN)){try{(0,u.canMatchCharCode)(t,e.PATTERN)}catch(e){return{issue:s.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:e.message}}return!1}if((0,l.isString)(e.PATTERN))return!1;if(isCustomPattern(e))return{issue:s.LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function buildLineBreakIssueMessage(e,t){if(t.issue===s.LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return"Warning: unable to identify line terminator usage in pattern.\n	The problem is in the <"+e.name+"> Token Type\n	 Root cause: "+t.errMsg+".\n	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(t.issue===s.LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return"Warning: A Custom Token Pattern should specify the <line_breaks> option.\n	The problem is in the <"+e.name+"> Token Type\n	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}function getCharCodes(e){return(0,l.map)(e,function(e){return(0,l.isString)(e)&&e.length>0?e.charCodeAt(0):e})}function addToMapOfArrays(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}t.findStartOfInputAnchor=findStartOfInputAnchor,t.findUnsupportedFlags=findUnsupportedFlags,t.findDuplicatePatterns=findDuplicatePatterns,t.findInvalidGroupType=findInvalidGroupType,t.findModesThatDoNotExist=findModesThatDoNotExist,t.findUnreachablePatterns=findUnreachablePatterns,t.addStartOfInput=addStartOfInput,t.addStickyFlag=addStickyFlag,t.performRuntimeChecks=performRuntimeChecks,t.performWarningRuntimeChecks=performWarningRuntimeChecks,t.cloneEmptyGroups=cloneEmptyGroups,t.isCustomPattern=isCustomPattern,t.isShortPattern=isShortPattern,t.LineTerminatorOptimizedTester={test:function(e){for(var t=e.length,r=this.lastIndex;r<t;r++){var n=e.charCodeAt(r);if(10===n)return this.lastIndex=r+1,!0;if(13===n)return 10===e.charCodeAt(r+1)?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1},lastIndex:0},t.buildLineBreakIssueMessage=buildLineBreakIssueMessage,t.minOptimizationVal=256;var m=[];function charCodeToOptimizedIndex(e){return e<t.minOptimizationVal?e:m[e]}function initCharCodeToOptimizedIndexMap(){if((0,l.isEmpty)(m)){m=Array(65536);for(var e=0;e<65536;e++)m[e]=e>255?255+~~(e/255):e}}t.charCodeToOptimizedIndex=charCodeToOptimizedIndex},65389:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultLexerErrorProvider=void 0,t.defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(e){return"Unable to pop Lexer Mode after encountering Token ->"+e.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(e,t,r,n,i){return"unexpected character: ->"+e.charAt(t)+"<- at offset: "+t+", skipped "+r+" characters."}}},80593:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lexer=t.LexerDefinitionErrorType=void 0;var n,i=r(91536),a=r(91433),s=r(91122),l=r(65389),u=r(73228);(n=t.LexerDefinitionErrorType||(t.LexerDefinitionErrorType={}))[n.MISSING_PATTERN=0]="MISSING_PATTERN",n[n.INVALID_PATTERN=1]="INVALID_PATTERN",n[n.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",n[n.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",n[n.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",n[n.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",n[n.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",n[n.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",n[n.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",n[n.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",n[n.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",n[n.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",n[n.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",n[n.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",n[n.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",n[n.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",n[n.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK";var d={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:l.defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1};Object.freeze(d);var f=function(){function Lexer(e,t){var r=this;if(void 0===t&&(t=d),this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},"boolean"==typeof t)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=(0,a.merge)(d,t);var n=this.config.traceInitPerf;!0===n?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof n&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",function(){var n,l=!0;r.TRACE_INIT("Lexer Config handling",function(){if(r.config.lineTerminatorsPattern===d.lineTerminatorsPattern)r.config.lineTerminatorsPattern=i.LineTerminatorOptimizedTester;else if(r.config.lineTerminatorCharacters===d.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');r.trackStartLines=/full|onlyStart/i.test(r.config.positionTracking),r.trackEndLines=/full/i.test(r.config.positionTracking),(0,a.isArray)(e)?((n={modes:{}}).modes[i.DEFAULT_MODE]=(0,a.cloneArr)(e),n[i.DEFAULT_MODE]=i.DEFAULT_MODE):(l=!1,n=(0,a.cloneObj)(e))}),!1===r.config.skipValidations&&(r.TRACE_INIT("performRuntimeChecks",function(){r.lexerDefinitionErrors=r.lexerDefinitionErrors.concat((0,i.performRuntimeChecks)(n,r.trackStartLines,r.config.lineTerminatorCharacters))}),r.TRACE_INIT("performWarningRuntimeChecks",function(){r.lexerDefinitionWarning=r.lexerDefinitionWarning.concat((0,i.performWarningRuntimeChecks)(n,r.trackStartLines,r.config.lineTerminatorCharacters))})),n.modes=n.modes?n.modes:{},(0,a.forEach)(n.modes,function(e,t){n.modes[t]=(0,a.reject)(e,function(e){return(0,a.isUndefined)(e)})});var f=(0,a.keys)(n.modes);if((0,a.forEach)(n.modes,function(e,n){r.TRACE_INIT("Mode: <"+n+"> processing",function(){if(r.modes.push(n),!1===r.config.skipValidations&&r.TRACE_INIT("validatePatterns",function(){r.lexerDefinitionErrors=r.lexerDefinitionErrors.concat((0,i.validatePatterns)(e,f))}),(0,a.isEmpty)(r.lexerDefinitionErrors)){var l;(0,s.augmentTokenTypes)(e),r.TRACE_INIT("analyzeTokenTypes",function(){l=(0,i.analyzeTokenTypes)(e,{lineTerminatorCharacters:r.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:r.TRACE_INIT.bind(r)})}),r.patternIdxToConfig[n]=l.patternIdxToConfig,r.charCodeToPatternIdxToConfig[n]=l.charCodeToPatternIdxToConfig,r.emptyGroups=(0,a.merge)(r.emptyGroups,l.emptyGroups),r.hasCustom=l.hasCustom||r.hasCustom,r.canModeBeOptimized[n]=l.canBeOptimized}})}),r.defaultMode=n.defaultMode,!(0,a.isEmpty)(r.lexerDefinitionErrors)&&!r.config.deferDefinitionErrorsHandling)throw Error("Errors detected in definition of Lexer:\n"+(0,a.map)(r.lexerDefinitionErrors,function(e){return e.message}).join("-----------------------\n"));(0,a.forEach)(r.lexerDefinitionWarning,function(e){(0,a.PRINT_WARNING)(e.message)}),r.TRACE_INIT("Choosing sub-methods implementations",function(){if(i.SUPPORT_STICKY?(r.chopInput=a.IDENTITY,r.match=r.matchWithTest):(r.updateLastIndex=a.NOOP,r.match=r.matchWithExec),l&&(r.handleModes=a.NOOP),!1===r.trackStartLines&&(r.computeNewColumn=a.IDENTITY),!1===r.trackEndLines&&(r.updateTokenEndLineColumnLocation=a.NOOP),/full/i.test(r.config.positionTracking))r.createTokenInstance=r.createFullToken;else if(/onlyStart/i.test(r.config.positionTracking))r.createTokenInstance=r.createStartOnlyToken;else if(/onlyOffset/i.test(r.config.positionTracking))r.createTokenInstance=r.createOffsetOnlyToken;else throw Error('Invalid <positionTracking> config option: "'+r.config.positionTracking+'"');r.hasCustom?(r.addToken=r.addTokenUsingPush,r.handlePayload=r.handlePayloadWithCustom):(r.addToken=r.addTokenUsingMemberAccess,r.handlePayload=r.handlePayloadNoCustom)}),r.TRACE_INIT("Failed Optimization Warnings",function(){var e=(0,a.reduce)(r.canModeBeOptimized,function(e,t,r){return!1===t&&e.push(r),e},[]);if(t.ensureOptimizations&&!(0,a.isEmpty)(e))throw Error("Lexer Modes: < "+e.join(", ")+' > cannot be optimized.\n	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n	 Or inspect the console log for details on how to resolve these issues.')}),r.TRACE_INIT("clearRegExpParserCache",function(){(0,u.clearRegExpParserCache)()}),r.TRACE_INIT("toFastProperties",function(){(0,a.toFastProperties)(r)})})}return Lexer.prototype.tokenize=function(e,t){if(void 0===t&&(t=this.defaultMode),!(0,a.isEmpty)(this.lexerDefinitionErrors))throw Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+(0,a.map)(this.lexerDefinitionErrors,function(e){return e.message}).join("-----------------------\n"));return this.tokenizeInternal(e,t)},Lexer.prototype.tokenizeInternal=function(e,t){var r,n,s,l,u,d,f,p,g,m,y,v,x,b,O,R,_=this,A=e,C=A.length,k=0,P=0,N=Array(this.hasCustom?0:Math.floor(e.length/10)),L=[],M=this.trackStartLines?1:void 0,F=this.trackStartLines?1:void 0,D=(0,i.cloneEmptyGroups)(this.emptyGroups),j=this.trackStartLines,B=this.config.lineTerminatorsPattern,z=0,W=[],G=[],Z=[],q=[];Object.freeze(q);var $=void 0;function getPossiblePatternsSlow(){return W}function getPossiblePatternsOptimized(e){var t=G[(0,i.charCodeToOptimizedIndex)(e)];return void 0===t?q:t}var pop_mode=function(e){if(1===Z.length&&void 0===e.tokenType.PUSH_MODE){var t=_.config.errorMessageProvider.buildUnableToPopLexerModeMessage(e);L.push({offset:e.startOffset,line:void 0!==e.startLine?e.startLine:void 0,column:void 0!==e.startColumn?e.startColumn:void 0,length:e.image.length,message:t})}else{Z.pop();var r=(0,a.last)(Z);W=_.patternIdxToConfig[r],G=_.charCodeToPatternIdxToConfig[r],z=W.length;var n=_.canModeBeOptimized[r]&&!1===_.config.safeMode;$=G&&n?getPossiblePatternsOptimized:getPossiblePatternsSlow}};function push_mode(e){Z.push(e),G=this.charCodeToPatternIdxToConfig[e],z=(W=this.patternIdxToConfig[e]).length,z=W.length;var t=this.canModeBeOptimized[e]&&!1===this.config.safeMode;$=G&&t?getPossiblePatternsOptimized:getPossiblePatternsSlow}for(push_mode.call(this,t);k<C;){d=null;var Y=A.charCodeAt(k),X=$(Y),Q=X.length;for(r=0;r<Q;r++){var ee=(R=X[r]).pattern;f=null;var et=R.short;if(!1!==et?Y===et&&(d=ee):!0===R.isCustom?null!==(O=ee.exec(A,k,N,D))?(d=O[0],void 0!==O.payload&&(f=O.payload)):d=null:(this.updateLastIndex(ee,k),d=this.match(ee,e,k)),null!==d){if(void 0!==(u=R.longerAlt)){var er=u.length;for(s=0;s<er;s++){var en=W[u[s]],ei=en.pattern;if(p=null,!0===en.isCustom?null!==(O=ei.exec(A,k,N,D))?(l=O[0],void 0!==O.payload&&(p=O.payload)):l=null:(this.updateLastIndex(ei,k),l=this.match(ei,e,k)),l&&l.length>d.length){d=l,f=p,R=en;break}}}break}}if(null!==d){if(g=d.length,void 0!==(m=R.group)&&(y=R.tokenTypeIdx,v=this.createTokenInstance(d,k,y,R.tokenType,M,F,g),this.handlePayload(v,f),!1===m?P=this.addToken(N,P,v):D[m].push(v)),e=this.chopInput(e,g),k+=g,F=this.computeNewColumn(F,g),!0===j&&!0===R.canLineTerminator){var eo=0,ea=void 0,es=void 0;B.lastIndex=0;do!0===(ea=B.test(d))&&(es=B.lastIndex-1,eo++);while(!0===ea);0!==eo&&(M+=eo,F=g-es,this.updateTokenEndLineColumnLocation(v,m,es,eo,M,F,g))}this.handleModes(R,pop_mode,push_mode,v)}else{for(var ec=k,el=M,eu=F,ed=!1;!ed&&k<C;)for(A.charCodeAt(k),e=this.chopInput(e,1),k++,n=0;n<z;n++){var ef=W[n],ee=ef.pattern,et=ef.short;if(!1!==et?A.charCodeAt(k)===et&&(ed=!0):!0===ef.isCustom?ed=null!==ee.exec(A,k,N,D):(this.updateLastIndex(ee,k),ed=null!==ee.exec(e)),!0===ed)break}x=k-ec,b=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(A,ec,x,el,eu),L.push({offset:ec,line:el,column:eu,length:x,message:b})}}return this.hasCustom||(N.length=P),{tokens:N,groups:D,errors:L}},Lexer.prototype.handleModes=function(e,t,r,n){if(!0===e.pop){var i=e.push;t(n),void 0!==i&&r.call(this,i)}else void 0!==e.push&&r.call(this,e.push)},Lexer.prototype.chopInput=function(e,t){return e.substring(t)},Lexer.prototype.updateLastIndex=function(e,t){e.lastIndex=t},Lexer.prototype.updateTokenEndLineColumnLocation=function(e,t,r,n,i,a,s){var l,u;void 0===t||(u=(l=r===s-1)?-1:0,1===n&&!0===l||(e.endLine=i+u,e.endColumn=a-1+-u))},Lexer.prototype.computeNewColumn=function(e,t){return e+t},Lexer.prototype.createTokenInstance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return null},Lexer.prototype.createOffsetOnlyToken=function(e,t,r,n){return{image:e,startOffset:t,tokenTypeIdx:r,tokenType:n}},Lexer.prototype.createStartOnlyToken=function(e,t,r,n,i,a){return{image:e,startOffset:t,startLine:i,startColumn:a,tokenTypeIdx:r,tokenType:n}},Lexer.prototype.createFullToken=function(e,t,r,n,i,a,s){return{image:e,startOffset:t,endOffset:t+s-1,startLine:i,endLine:i,startColumn:a,endColumn:a+s-1,tokenTypeIdx:r,tokenType:n}},Lexer.prototype.addToken=function(e,t,r){return 666},Lexer.prototype.addTokenUsingPush=function(e,t,r){return e.push(r),t},Lexer.prototype.addTokenUsingMemberAccess=function(e,t,r){return e[t]=r,++t},Lexer.prototype.handlePayload=function(e,t){},Lexer.prototype.handlePayloadNoCustom=function(e,t){},Lexer.prototype.handlePayloadWithCustom=function(e,t){null!==t&&(e.payload=t)},Lexer.prototype.match=function(e,t,r){return null},Lexer.prototype.matchWithTest=function(e,t,r){return!0===e.test(t)?t.substring(r,e.lastIndex):null},Lexer.prototype.matchWithExec=function(e,t){var r=e.exec(t);return null!==r?r[0]:r},Lexer.prototype.TRACE_INIT=function(e,t){if(!0!==this.traceInitPerf)return t();this.traceInitIndent++;var r=Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(r+"--> <"+e+">");var n=(0,a.timer)(t),i=n.time,s=n.value,l=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(r+"<-- <"+e+"> time: "+i+"ms"),this.traceInitIndent--,s},Lexer.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",Lexer.NA=/NOT_APPLICABLE/,Lexer}();t.Lexer=f},34704:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.canMatchCharCode=t.firstCharOptimizedIndices=t.getOptimizedStartCodesIndices=t.failedOptimizationPrefixMsg=void 0;var a=r(50272),s=r(91433),l=r(73228),u=r(91536),d="Complement Sets are not supported for first char optimization";function getOptimizedStartCodesIndices(e,r){void 0===r&&(r=!1);try{var n=(0,l.getRegExpAst)(e);return firstCharOptimizedIndices(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===d)r&&(0,s.PRINT_WARNING)(""+t.failedOptimizationPrefixMsg+"	Unable to optimize: < "+e.toString()+" >\n	Complement Sets cannot be automatically optimized.\n	This will disable the lexer's first char optimizations.\n	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.");else{var i="";r&&(i="\n	This will disable the lexer's first char optimizations.\n	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),(0,s.PRINT_ERROR)(t.failedOptimizationPrefixMsg+"\n	Failed parsing: < "+e.toString()+" >\n	Using the regexp-to-ast library version: "+a.VERSION+"\n	Please open an issue at: https://github.com/bd82/regexp-to-ast/issues"+i)}}return[]}function firstCharOptimizedIndices(e,t,r){switch(e.type){case"Disjunction":for(var n=0;n<e.value.length;n++)firstCharOptimizedIndices(e.value[n],t,r);break;case"Alternative":for(var i=e.value,n=0;n<i.length;n++){var a=i[n];switch(a.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}switch(a.type){case"Character":addOptimizedIdxToResult(a.value,t,r);break;case"Set":if(!0===a.complement)throw Error(d);(0,s.forEach)(a.value,function(e){if("number"==typeof e)addOptimizedIdxToResult(e,t,r);else if(!0===r)for(var n=e.from;n<=e.to;n++)addOptimizedIdxToResult(n,t,r);else{for(var n=e.from;n<=e.to&&n<u.minOptimizationVal;n++)addOptimizedIdxToResult(n,t,r);if(e.to>=u.minOptimizationVal)for(var i=e.from>=u.minOptimizationVal?e.from:u.minOptimizationVal,a=e.to,s=(0,u.charCodeToOptimizedIndex)(i),l=(0,u.charCodeToOptimizedIndex)(a),d=s;d<=l;d++)t[d]=d}});break;case"Group":firstCharOptimizedIndices(a.value,t,r);break;default:throw Error("Non Exhaustive Match")}var l=void 0!==a.quantifier&&0===a.quantifier.atLeast;if("Group"===a.type&&!1===isWholeOptional(a)||"Group"!==a.type&&!1===l)break}break;default:throw Error("non exhaustive match!")}return(0,s.values)(t)}function addOptimizedIdxToResult(e,t,r){var n=(0,u.charCodeToOptimizedIndex)(e);t[n]=n,!0===r&&handleIgnoreCase(e,t)}function handleIgnoreCase(e,t){var r=String.fromCharCode(e),n=r.toUpperCase();if(n!==r){var i=(0,u.charCodeToOptimizedIndex)(n.charCodeAt(0));t[i]=i}else{var a=r.toLowerCase();if(a!==r){var i=(0,u.charCodeToOptimizedIndex)(a.charCodeAt(0));t[i]=i}}}function findCode(e,t){return(0,s.find)(e.value,function(e){return"number"==typeof e?(0,s.contains)(t,e):void 0!==(0,s.find)(t,function(t){return e.from<=t&&t<=e.to})})}function isWholeOptional(e){return!!e.quantifier&&0===e.quantifier.atLeast||!!e.value&&((0,s.isArray)(e.value)?(0,s.every)(e.value,isWholeOptional):isWholeOptional(e.value))}t.failedOptimizationPrefixMsg='Unable to use "first char" lexer optimizations:\n',t.getOptimizedStartCodesIndices=getOptimizedStartCodesIndices,t.firstCharOptimizedIndices=firstCharOptimizedIndices;var f=function(e){function CharCodeFinder(t){var r=e.call(this)||this;return r.targetCharCodes=t,r.found=!1,r}return i(CharCodeFinder,e),CharCodeFinder.prototype.visitChildren=function(t){if(!0!==this.found){switch(t.type){case"Lookahead":this.visitLookahead(t);return;case"NegativeLookahead":this.visitNegativeLookahead(t);return}e.prototype.visitChildren.call(this,t)}},CharCodeFinder.prototype.visitCharacter=function(e){(0,s.contains)(this.targetCharCodes,e.value)&&(this.found=!0)},CharCodeFinder.prototype.visitSet=function(e){e.complement?void 0===findCode(e,this.targetCharCodes)&&(this.found=!0):void 0!==findCode(e,this.targetCharCodes)&&(this.found=!0)},CharCodeFinder}(a.BaseRegExpVisitor);function canMatchCharCode(e,t){if(!(t instanceof RegExp))return void 0!==(0,s.find)(t,function(t){return(0,s.contains)(e,t.charCodeAt(0))});var r=(0,l.getRegExpAst)(t),n=new f(e);return n.visit(r),n.found}t.canMatchCharCode=canMatchCharCode},73228:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearRegExpParserCache=t.getRegExpAst=void 0;var n=r(50272),i={},a=new n.RegExpParser;function getRegExpAst(e){var t=e.toString();if(i.hasOwnProperty(t))return i[t];var r=a.pattern(t);return i[t]=r,r}function clearRegExpParserCache(){i={}}t.getRegExpAst=getRegExpAst,t.clearRegExpParserCache=clearRegExpParserCache},91122:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTokenType=t.hasExtendingTokensTypesMapProperty=t.hasExtendingTokensTypesProperty=t.hasCategoriesProperty=t.hasShortKeyProperty=t.singleAssignCategoriesToksMap=t.assignCategoriesMapProp=t.assignCategoriesTokensProp=t.assignTokenDefaultProps=t.expandCategories=t.augmentTokenTypes=t.tokenIdxToClass=t.tokenShortNameIdx=t.tokenStructuredMatcherNoCategories=t.tokenStructuredMatcher=void 0;var n=r(91433);function tokenStructuredMatcher(e,t){var r=e.tokenTypeIdx;return r===t.tokenTypeIdx||!0===t.isParent&&!0===t.categoryMatchesMap[r]}function tokenStructuredMatcherNoCategories(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}function augmentTokenTypes(e){var t=expandCategories(e);assignTokenDefaultProps(t),assignCategoriesMapProp(t),assignCategoriesTokensProp(t),(0,n.forEach)(t,function(e){e.isParent=e.categoryMatches.length>0})}function expandCategories(e){for(var t=(0,n.cloneArr)(e),r=e,i=!0;i;){r=(0,n.compact)((0,n.flatten)((0,n.map)(r,function(e){return e.CATEGORIES})));var a=(0,n.difference)(r,t);t=t.concat(a),(0,n.isEmpty)(a)?i=!1:r=a}return t}function assignTokenDefaultProps(e){(0,n.forEach)(e,function(e){hasShortKeyProperty(e)||(t.tokenIdxToClass[t.tokenShortNameIdx]=e,e.tokenTypeIdx=t.tokenShortNameIdx++),hasCategoriesProperty(e)&&!(0,n.isArray)(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),hasCategoriesProperty(e)||(e.CATEGORIES=[]),hasExtendingTokensTypesProperty(e)||(e.categoryMatches=[]),hasExtendingTokensTypesMapProperty(e)||(e.categoryMatchesMap={})})}function assignCategoriesTokensProp(e){(0,n.forEach)(e,function(e){e.categoryMatches=[],(0,n.forEach)(e.categoryMatchesMap,function(r,n){e.categoryMatches.push(t.tokenIdxToClass[n].tokenTypeIdx)})})}function assignCategoriesMapProp(e){(0,n.forEach)(e,function(e){singleAssignCategoriesToksMap([],e)})}function singleAssignCategoriesToksMap(e,t){(0,n.forEach)(e,function(e){t.categoryMatchesMap[e.tokenTypeIdx]=!0}),(0,n.forEach)(t.CATEGORIES,function(r){var i=e.concat(t);(0,n.contains)(i,r)||singleAssignCategoriesToksMap(i,r)})}function hasShortKeyProperty(e){return(0,n.has)(e,"tokenTypeIdx")}function hasCategoriesProperty(e){return(0,n.has)(e,"CATEGORIES")}function hasExtendingTokensTypesProperty(e){return(0,n.has)(e,"categoryMatches")}function hasExtendingTokensTypesMapProperty(e){return(0,n.has)(e,"categoryMatchesMap")}function isTokenType(e){return(0,n.has)(e,"tokenTypeIdx")}t.tokenStructuredMatcher=tokenStructuredMatcher,t.tokenStructuredMatcherNoCategories=tokenStructuredMatcherNoCategories,t.tokenShortNameIdx=1,t.tokenIdxToClass={},t.augmentTokenTypes=augmentTokenTypes,t.expandCategories=expandCategories,t.assignTokenDefaultProps=assignTokenDefaultProps,t.assignCategoriesTokensProp=assignCategoriesTokensProp,t.assignCategoriesMapProp=assignCategoriesMapProp,t.singleAssignCategoriesToksMap=singleAssignCategoriesToksMap,t.hasShortKeyProperty=hasShortKeyProperty,t.hasCategoriesProperty=hasCategoriesProperty,t.hasExtendingTokensTypesProperty=hasExtendingTokensTypesProperty,t.hasExtendingTokensTypesMapProperty=hasExtendingTokensTypesMapProperty,t.isTokenType=isTokenType},40711:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tokenMatcher=t.createTokenInstance=t.EOF=t.createToken=t.hasTokenLabel=t.tokenName=t.tokenLabel=void 0;var n=r(91433),i=r(80593),a=r(91122);function tokenLabel(e){return hasTokenLabel(e)?e.LABEL:e.name}function tokenName(e){return e.name}function hasTokenLabel(e){return(0,n.isString)(e.LABEL)&&""!==e.LABEL}t.tokenLabel=tokenLabel,t.tokenName=tokenName,t.hasTokenLabel=hasTokenLabel;var s="categories",l="label",u="group",d="push_mode",f="pop_mode",p="longer_alt",g="line_breaks",m="start_chars_hint";function createToken(e){return createTokenInternal(e)}function createTokenInternal(e){var t=e.pattern,r={};if(r.name=e.name,(0,n.isUndefined)(t)||(r.PATTERN=t),(0,n.has)(e,"parent"))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";return(0,n.has)(e,s)&&(r.CATEGORIES=e[s]),(0,a.augmentTokenTypes)([r]),(0,n.has)(e,l)&&(r.LABEL=e[l]),(0,n.has)(e,u)&&(r.GROUP=e[u]),(0,n.has)(e,f)&&(r.POP_MODE=e[f]),(0,n.has)(e,d)&&(r.PUSH_MODE=e[d]),(0,n.has)(e,p)&&(r.LONGER_ALT=e[p]),(0,n.has)(e,g)&&(r.LINE_BREAKS=e[g]),(0,n.has)(e,m)&&(r.START_CHARS_HINT=e[m]),r}function createTokenInstance(e,t,r,n,i,a,s,l){return{image:t,startOffset:r,endOffset:n,startLine:i,endLine:a,startColumn:s,endColumn:l,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function tokenMatcher(e,t){return(0,a.tokenStructuredMatcher)(e,t)}t.createToken=createToken,t.EOF=createTokenInternal({name:"EOF",pattern:i.Lexer.NA}),(0,a.augmentTokenTypes)([t.EOF]),t.createTokenInstance=createTokenInstance,t.tokenMatcher=tokenMatcher},62839:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="9.1.0"},93847:function(e,t,r){let n=r(65412),i={};for(let e of Object.keys(n))i[n[e]]=e;let a={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(let t of(e.exports=a,Object.keys(a))){if(!("channels"in a[t]))throw Error("missing channels property: "+t);if(!("labels"in a[t]))throw Error("missing channel labels property: "+t);if(a[t].labels.length!==a[t].channels)throw Error("channel and label counts mismatch: "+t);let{channels:e,labels:r}=a[t];delete a[t].channels,delete a[t].labels,Object.defineProperty(a[t],"channels",{value:e}),Object.defineProperty(a[t],"labels",{value:r})}function comparativeDistance(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}a.rgb.hsl=function(e){let t;let r=e[0]/255,n=e[1]/255,i=e[2]/255,a=Math.min(r,n,i),s=Math.max(r,n,i),l=s-a;s===a?t=0:r===s?t=(n-i)/l:n===s?t=2+(i-r)/l:i===s&&(t=4+(r-n)/l),(t=Math.min(60*t,360))<0&&(t+=360);let u=(a+s)/2;return[t,100*(s===a?0:u<=.5?l/(s+a):l/(2-s-a)),100*u]},a.rgb.hsv=function(e){let t,r,n,i,a;let s=e[0]/255,l=e[1]/255,u=e[2]/255,d=Math.max(s,l,u),f=d-Math.min(s,l,u),diffc=function(e){return(d-e)/6/f+.5};return 0===f?(i=0,a=0):(a=f/d,t=diffc(s),r=diffc(l),n=diffc(u),s===d?i=n-r:l===d?i=1/3+t-n:u===d&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*a,100*d]},a.rgb.hwb=function(e){let t=e[0],r=e[1],n=e[2],i=a.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,n));return[i,100*s,100*(n=1-1/255*Math.max(t,Math.max(r,n)))]},a.rgb.cmyk=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(1-t,1-r,1-n);return[100*((1-t-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*i]},a.rgb.keyword=function(e){let t;let r=i[e];if(r)return r;let a=1/0;for(let r of Object.keys(n)){let i=n[r],s=comparativeDistance(e,i);s<a&&(a=s,t=r)}return t},a.keyword.rgb=function(e){return n[e]},a.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;let i=.4124*t+.3576*r+.1805*n,a=.2126*t+.7152*r+.0722*n,s=.0193*t+.1192*r+.9505*n;return[100*i,100*a,100*s]},a.rgb.lab=function(e){let t=a.rgb.xyz(e),r=t[0],n=t[1],i=t[2];r/=95.047,n/=100,i/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let s=116*n-16,l=500*(r-n),u=200*(n-i);return[s,l,u]},a.hsl.rgb=function(e){let t,r,n;let i=e[0]/360,a=e[1]/100,s=e[2]/100;if(0===a)return[n=255*s,n,n];t=s<.5?s*(1+a):s+a-s*a;let l=2*s-t,u=[0,0,0];for(let e=0;e<3;e++)(r=i+-(1/3*(e-1)))<0&&r++,r>1&&r--,n=6*r<1?l+(t-l)*6*r:2*r<1?t:3*r<2?l+(t-l)*(2/3-r)*6:l,u[e]=255*n;return u},a.hsl.hsv=function(e){let t=e[0],r=e[1]/100,n=e[2]/100,i=r,a=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=a<=1?a:2-a;let s=(n+r)/2,l=0===n?2*i/(a+i):2*r/(n+r);return[t,100*l,100*s]},a.hsv.rgb=function(e){let t=e[0]/60,r=e[1]/100,n=e[2]/100,i=t-Math.floor(t),a=255*n*(1-r),s=255*n*(1-r*i),l=255*n*(1-r*(1-i));switch(n*=255,Math.floor(t)%6){case 0:return[n,l,a];case 1:return[s,n,a];case 2:return[a,n,l];case 3:return[a,s,n];case 4:return[l,a,n];case 5:return[n,a,s]}},a.hsv.hsl=function(e){let t,r;let n=e[0],i=e[1]/100,a=e[2]/100,s=Math.max(a,.01);r=(2-i)*a;let l=(2-i)*s;return[n,100*(i*s/(l<=1?l:2-l)||0),100*(r/=2)]},a.hwb.rgb=function(e){let t,r,n,i;let a=e[0]/360,s=e[1]/100,l=e[2]/100,u=s+l;u>1&&(s/=u,l/=u);let d=Math.floor(6*a),f=1-l;t=6*a-d,(1&d)!=0&&(t=1-t);let p=s+t*(f-s);switch(d){default:case 6:case 0:r=f,n=p,i=s;break;case 1:r=p,n=f,i=s;break;case 2:r=s,n=f,i=p;break;case 3:r=s,n=p,i=f;break;case 4:r=p,n=s,i=f;break;case 5:r=f,n=s,i=p}return[255*r,255*n,255*i]},a.cmyk.rgb=function(e){let t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},a.xyz.rgb=function(e){let t,r,n;let i=e[0]/100,a=e[1]/100,s=e[2]/100;return t=(t=3.2406*i+-1.5372*a+-.4986*s)>.0031308?1.055*t**(1/2.4)-.055:12.92*t,r=(r=-.9689*i+1.8758*a+.0415*s)>.0031308?1.055*r**(1/2.4)-.055:12.92*r,n=(n=.0557*i+-.204*a+1.057*s)>.0031308?1.055*n**(1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},a.xyz.lab=function(e){let t=e[0],r=e[1],n=e[2];t/=95.047,r/=100,n/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let i=116*r-16,a=500*(t-r),s=200*(r-n);return[i,a,s]},a.lab.xyz=function(e){let t,r,n;let i=e[0],a=e[1],s=e[2];t=a/500+(r=(i+16)/116),n=r-s/200;let l=r**3,u=t**3,d=n**3;return r=(l>.008856?l:(r-16/116)/7.787)*100,[t=(u>.008856?u:(t-16/116)/7.787)*95.047,r,n=(d>.008856?d:(n-16/116)/7.787)*108.883]},a.lab.lch=function(e){let t;let r=e[0],n=e[1],i=e[2];return(t=360*Math.atan2(i,n)/2/Math.PI)<0&&(t+=360),[r,Math.sqrt(n*n+i*i),t]},a.lch.lab=function(e){let t=e[0],r=e[1],n=e[2],i=n/360*2*Math.PI;return[t,r*Math.cos(i),r*Math.sin(i)]},a.rgb.ansi16=function(e,t=null){let[r,n,i]=e,s=null===t?a.rgb.hsv(e)[2]:t;if(0===(s=Math.round(s/50)))return 30;let l=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return 2===s&&(l+=60),l},a.hsv.ansi16=function(e){return a.rgb.ansi16(a.hsv.rgb(e),e[2])},a.rgb.ansi256=function(e){let t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},a.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];let r=(~~(e>50)+1)*.5,n=(1&t)*r*255,i=(t>>1&1)*r*255,a=(t>>2&1)*r*255;return[n,i,a]},a.ansi256.rgb=function(e){let t;if(e>=232){let t=(e-232)*10+8;return[t,t,t]}e-=16;let r=Math.floor(e/36)/5*255,n=Math.floor((t=e%36)/6)/5*255;return[r,n,t%6/5*255]},a.rgb.hex=function(e){let t=((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2])),r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r},a.hex.rgb=function(e){let t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];3===t[0].length&&(r=r.split("").map(e=>e+e).join(""));let n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},a.rgb.hcg=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(Math.max(t,r),n),a=Math.min(Math.min(t,r),n),s=i-a;return[360*((s<=0?0:i===t?(r-n)/s%6:i===r?2+(n-t)/s:4+(t-r)/s)/6%1),100*s,100*(s<1?a/(1-s):0)]},a.hsl.hcg=function(e){let t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r),i=0;return n<1&&(i=(r-.5*n)/(1-n)),[e[0],100*n,100*i]},a.hsv.hcg=function(e){let t=e[1]/100,r=e[2]/100,n=t*r,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},a.hcg.rgb=function(e){let t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];let i=[0,0,0],a=t%1*6,s=a%1,l=1-s,u=0;switch(Math.floor(a)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=l,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=l,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=l}return u=(1-r)*n,[(r*i[0]+u)*255,(r*i[1]+u)*255,(r*i[2]+u)*255]},a.hcg.hsv=function(e){let t=e[1]/100,r=e[2]/100,n=t+r*(1-t),i=0;return n>0&&(i=t/n),[e[0],100*i,100*n]},a.hcg.hsl=function(e){let t=e[1]/100,r=e[2]/100,n=r*(1-t)+.5*t,i=0;return n>0&&n<.5?i=t/(2*n):n>=.5&&n<1&&(i=t/(2*(1-n))),[e[0],100*i,100*n]},a.hcg.hwb=function(e){let t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]},a.hwb.hcg=function(e){let t=e[1]/100,r=e[2]/100,n=1-r,i=n-t,a=0;return i<1&&(a=(n-i)/(1-i)),[e[0],100*i,100*a]},a.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},a.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},a.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},a.gray.hsl=function(e){return[0,0,e[0]]},a.gray.hsv=a.gray.hsl,a.gray.hwb=function(e){return[0,100,e[0]]},a.gray.cmyk=function(e){return[0,0,0,e[0]]},a.gray.lab=function(e){return[e[0],0,0]},a.gray.hex=function(e){let t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},a.rgb.gray=function(e){let t=(e[0]+e[1]+e[2])/3;return[t/255*100]}},42367:function(e,t,r){let n=r(93847),i=r(54038),a={},s=Object.keys(n);function wrapRaw(e){let wrappedFn=function(...t){let r=t[0];return null==r?r:(r.length>1&&(t=r),e(t))};return"conversion"in e&&(wrappedFn.conversion=e.conversion),wrappedFn}function wrapRounded(e){let wrappedFn=function(...t){let r=t[0];if(null==r)return r;r.length>1&&(t=r);let n=e(t);if("object"==typeof n)for(let e=n.length,t=0;t<e;t++)n[t]=Math.round(n[t]);return n};return"conversion"in e&&(wrappedFn.conversion=e.conversion),wrappedFn}s.forEach(e=>{a[e]={},Object.defineProperty(a[e],"channels",{value:n[e].channels}),Object.defineProperty(a[e],"labels",{value:n[e].labels});let t=i(e),r=Object.keys(t);r.forEach(r=>{let n=t[r];a[e][r]=wrapRounded(n),a[e][r].raw=wrapRaw(n)})}),e.exports=a},54038:function(e,t,r){let n=r(93847);function buildGraph(){let e={},t=Object.keys(n);for(let r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function deriveBFS(e){let t=buildGraph(),r=[e];for(t[e].distance=0;r.length;){let e=r.pop(),i=Object.keys(n[e]);for(let n=i.length,a=0;a<n;a++){let n=i[a],s=t[n];-1===s.distance&&(s.distance=t[e].distance+1,s.parent=e,r.unshift(n))}}return t}function link(e,t){return function(r){return t(e(r))}}function wrapConversion(e,t){let r=[t[e].parent,e],i=n[t[e].parent][e],a=t[e].parent;for(;t[a].parent;)r.unshift(t[a].parent),i=link(n[t[a].parent][a],i),a=t[a].parent;return i.conversion=r,i}e.exports=function(e){let t=deriveBFS(e),r={},n=Object.keys(t);for(let e=n.length,i=0;i<e;i++){let e=n[i],a=t[e];null!==a.parent&&(r[e]=wrapConversion(e,t))}return r}},65412:function(e){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},48497:function(e,t,r){var n=r(65412),i=r(79571),a=Object.hasOwnProperty,s=Object.create(null);for(var l in n)a.call(n,l)&&(s[n[l]]=l);var u=e.exports={to:{},get:{}};function clamp(e,t,r){return Math.min(Math.max(t,e),r)}function hexDouble(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}u.get=function(e){var t,r;switch(e.substring(0,3).toLowerCase()){case"hsl":t=u.get.hsl(e),r="hsl";break;case"hwb":t=u.get.hwb(e),r="hwb";break;default:t=u.get.rgb(e),r="rgb"}return t?{model:r,value:t}:null},u.get.rgb=function(e){if(!e)return null;var t,r,i,s=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=0,i=t[2],t=t[1];r<3;r++){var l=2*r;s[r]=parseInt(t.slice(l,l+2),16)}i&&(s[3]=parseInt(i,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(r=0,i=(t=t[1])[3];r<3;r++)s[r]=parseInt(t[r]+t[r],16);i&&(s[3]=parseInt(i+i,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(r=0;r<3;r++)s[r]=parseInt(t[r+1],0);t[4]&&(t[5]?s[3]=.01*parseFloat(t[4]):s[3]=parseFloat(t[4]))}else if(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(r=0;r<3;r++)s[r]=Math.round(2.55*parseFloat(t[r+1]));t[4]&&(t[5]?s[3]=.01*parseFloat(t[4]):s[3]=parseFloat(t[4]))}else if(!(t=e.match(/^(\w+)$/)))return null;else return"transparent"===t[1]?[0,0,0,0]:a.call(n,t[1])?((s=n[t[1]])[3]=1,s):null;for(r=0;r<3;r++)s[r]=clamp(s[r],0,255);return s[3]=clamp(s[3],0,1),s},u.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,clamp(parseFloat(t[2]),0,100),clamp(parseFloat(t[3]),0,100),clamp(isNaN(r)?1:r,0,1)]}return null},u.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,clamp(parseFloat(t[2]),0,100),clamp(parseFloat(t[3]),0,100),clamp(isNaN(r)?1:r,0,1)]}return null},u.to.hex=function(){var e=i(arguments);return"#"+hexDouble(e[0])+hexDouble(e[1])+hexDouble(e[2])+(e[3]<1?hexDouble(Math.round(255*e[3])):"")},u.to.rgb=function(){var e=i(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},u.to.rgb.percent=function(){var e=i(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"},u.to.hsl=function(){var e=i(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},u.to.hwb=function(){var e=i(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},u.to.keyword=function(e){return s[e.slice(0,3)]}},60523:function(e,t,r){let n=r(48497),i=r(42367),a=["keyword","gray","hex"],s={};for(let e of Object.keys(i))s[[...i[e].labels].sort().join("")]=e;let l={};function Color(e,t){let r,u;if(!(this instanceof Color))return new Color(e,t);if(t&&t in a&&(t=null),t&&!(t in i))throw Error("Unknown model: "+t);if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof Color)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if("string"==typeof e){let t=n.get(e);if(null===t)throw Error("Unable to parse color from string: "+e);this.model=t.model,u=i[this.model].channels,this.color=t.value.slice(0,u),this.valpha="number"==typeof t.value[u]?t.value[u]:1}else if(e.length>0){this.model=t||"rgb",u=i[this.model].channels;let r=Array.prototype.slice.call(e,0,u);this.color=zeroArray(r,u),this.valpha="number"==typeof e[u]?e[u]:1}else if("number"==typeof e)this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;let t=Object.keys(e);"alpha"in e&&(t.splice(t.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);let n=t.sort().join("");if(!(n in s))throw Error("Unable to parse color from object: "+JSON.stringify(e));this.model=s[n];let{labels:a}=i[this.model],l=[];for(r=0;r<a.length;r++)l.push(e[a[r]]);this.color=zeroArray(l)}if(l[this.model])for(r=0,u=i[this.model].channels;r<u;r++){let e=l[this.model][r];e&&(this.color[r]=e(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}for(let e of(Color.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in n.to?this:this.rgb();t=t.round("number"==typeof e?e:1);let r=1===t.valpha?t.color:[...t.color,this.valpha];return n.to[t.model](r)},percentString(e){let t=this.rgb().round("number"==typeof e?e:1),r=1===t.valpha?t.color:[...t.color,this.valpha];return n.to.rgb.percent(r)},array(){return 1===this.valpha?[...this.color]:[...this.color,this.valpha]},object(){let e={},{channels:t}=i[this.model],{labels:r}=i[this.model];for(let n=0;n<t;n++)e[r[n]]=this.color[n];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray(){let e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject(){let e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new Color([...this.color.map(roundToPlace(e)),this.valpha],this.model)},alpha(e){return void 0!==e?new Color([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:getset("rgb",0,maxfn(255)),green:getset("rgb",1,maxfn(255)),blue:getset("rgb",2,maxfn(255)),hue:getset(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:getset("hsl",1,maxfn(100)),lightness:getset("hsl",2,maxfn(100)),saturationv:getset("hsv",1,maxfn(100)),value:getset("hsv",2,maxfn(100)),chroma:getset("hcg",1,maxfn(100)),gray:getset("hcg",2,maxfn(100)),white:getset("hwb",1,maxfn(100)),wblack:getset("hwb",2,maxfn(100)),cyan:getset("cmyk",0,maxfn(100)),magenta:getset("cmyk",1,maxfn(100)),yellow:getset("cmyk",2,maxfn(100)),black:getset("cmyk",3,maxfn(100)),x:getset("xyz",0,maxfn(95.047)),y:getset("xyz",1,maxfn(100)),z:getset("xyz",2,maxfn(108.833)),l:getset("lab",0,maxfn(100)),a:getset("lab",1),b:getset("lab",2),keyword(e){return void 0!==e?new Color(e):i[this.model].keyword(this.color)},hex(e){return void 0!==e?new Color(e):n.to.hex(this.rgb().round().color)},hexa(e){if(void 0!==e)return new Color(e);let t=this.rgb().round().color,r=Math.round(255*this.valpha).toString(16).toUpperCase();return 1===r.length&&(r="0"+r),n.to.hex(t)+r},rgbNumber(){let e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity(){let e=this.rgb().color,t=[];for(let[r,n]of e.entries()){let e=n/255;t[r]=e<=.04045?e/12.92:((e+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){let t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level(e){let t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){let e=this.rgb().color,t=(2126*e[0]+7152*e[1]+722*e[2])/1e4;return t<128},isLight(){return!this.isDark()},negate(){let e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){let t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){let t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){let t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){let t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){let t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){let t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){let e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return Color.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){let t=this.hsl(),r=t.color[0];return r=(r=(r+e)%360)<0?360+r:r,t.color[0]=r,t},mix(e,t){if(!e||!e.rgb)throw Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);let r=e.rgb(),n=this.rgb(),i=void 0===t?.5:t,a=2*i-1,s=r.alpha()-n.alpha(),l=((a*s==-1?a:(a+s)/(1+a*s))+1)/2,u=1-l;return Color.rgb(l*r.red()+u*n.red(),l*r.green()+u*n.green(),l*r.blue()+u*n.blue(),r.alpha()*i+n.alpha()*(1-i))}},Object.keys(i))){if(a.includes(e))continue;let{channels:t}=i[e];Color.prototype[e]=function(...t){return this.model===e?new Color(this):t.length>0?new Color(t,e):new Color([...assertArray(i[this.model][e].raw(this.color)),this.valpha],e)},Color[e]=function(...r){let n=r[0];return"number"==typeof n&&(n=zeroArray(r,t)),new Color(n,e)}}function roundTo(e,t){return Number(e.toFixed(t))}function roundToPlace(e){return function(t){return roundTo(t,e)}}function getset(e,t,r){for(let n of e=Array.isArray(e)?e:[e])(l[n]||(l[n]=[]))[t]=r;return e=e[0],function(n){let i;return void 0!==n?(r&&(n=r(n)),(i=this[e]()).color[t]=n):(i=this[e]().color[t],r&&(i=r(i))),i}}function maxfn(e){return function(t){return Math.max(0,Math.min(e,t))}}function assertArray(e){return Array.isArray(e)?e:[e]}function zeroArray(e,t){for(let r=0;r<t;r++)"number"!=typeof e[r]&&(e[r]=0);return e}e.exports=Color},30321:function(e){"use strict";function dedent(e){var t=void 0;t="string"==typeof e?[e]:e.raw;for(var r="",n=0;n<t.length;n++)r+=t[n].replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`"),n<(arguments.length<=1?0:arguments.length-1)&&(r+=arguments.length<=n+1?void 0:arguments[n+1]);var i=r.split("\n"),a=null;return i.forEach(function(e){var t=e.match(/^(\s+)\S+/);if(t){var r=t[1].length;a=a?Math.min(a,r):r}}),null!==a&&(r=i.map(function(e){return" "===e[0]?e.slice(a):e}).join("\n")),(r=r.trim()).replace(/\\n/g,"\n")}e.exports=dedent},80884:function(e){"use strict";function FastBitSet(e){if(this.words=[],e){if(Symbol&&Symbol.iterator&&void 0!==e[Symbol.iterator]){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.add(r.value),r=t.next()}else for(let t=0;t<e.length;t++)this.add(e[t])}}FastBitSet.fromWords=function(e){let t=Object.create(FastBitSet.prototype);return t.words=e,t},FastBitSet.prototype.add=function(e){this.resize(e),this.words[e>>>5]|=1<<e},FastBitSet.prototype.flip=function(e){this.resize(e),this.words[e>>>5]^=1<<e},FastBitSet.prototype.clear=function(){this.words.length=0},FastBitSet.prototype.remove=function(e){this.resize(e),this.words[e>>>5]&=~(1<<e)},FastBitSet.prototype.isEmpty=function(e){let t=this.words.length;for(let e=0;e<t;e++)if(0!==this.words[e])return!1;return!0},FastBitSet.prototype.has=function(e){return(this.words[e>>>5]&1<<e)!=0},FastBitSet.prototype.checkedAdd=function(e){this.resize(e);let t=this.words[e>>>5],r=t|1<<e;return this.words[e>>>5]=r,(r^t)>>>e},FastBitSet.prototype.trim=function(e){let t=this.words.length;for(;t>0&&0===this.words[t-1];)t--;this.words.length=t},FastBitSet.prototype.resize=function(e){let t=e+32>>>5;for(let e=this.words.length;e<t;e++)this.words[e]=0},FastBitSet.prototype.hammingWeight=function(e){return e-=e>>>1&1431655765,((e=(858993459&e)+(e>>>2&858993459))+(e>>>4)&252645135)*16843009>>>24},FastBitSet.prototype.hammingWeight4=function(e,t,r,n){return e-=e>>>1&1431655765,t-=t>>>1&1431655765,r-=r>>>1&1431655765,n-=n>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),t=(858993459&t)+(t>>>2&858993459),r=(858993459&r)+(r>>>2&858993459),n=(858993459&n)+(n>>>2&858993459),e=e+(e>>>4)&252645135,t=t+(t>>>4)&252645135,r=r+(r>>>4)&252645135,n=n+(n>>>4)&252645135,(e+t+r+n)*16843009>>>24},FastBitSet.prototype.size=function(){let e=0,t=this.words.length,r=this.words;for(let n=0;n<t;n++)e+=this.hammingWeight(r[n]);return e},FastBitSet.prototype.array=function(){let e=Array(this.size()),t=0,r=this.words.length;for(let n=0;n<r;++n){let r=this.words[n];for(;0!=r;){let i=r&-r;e[t++]=(n<<5)+this.hammingWeight(i-1|0),r^=i}}return e},FastBitSet.prototype.forEach=function(e){let t=this.words.length;for(let r=0;r<t;++r){let t=this.words[r];for(;0!=t;){let n=t&-t;e((r<<5)+this.hammingWeight(n-1|0)),t^=n}}},FastBitSet.prototype[Symbol.iterator]=function(){let e=this.words.length,t=0,r=this.words[t],n=this.hammingWeight,i=this.words;return{[Symbol.iterator](){return this},next(){for(;t<e;){if(0!==r){let e=r&-r,i=(t<<5)+n(e-1|0);return r^=e,{done:!1,value:i}}++t<e&&(r=i[t])}return{done:!0,value:void 0}}}},FastBitSet.prototype.clone=function(){let e=Object.create(FastBitSet.prototype);return e.words=this.words.slice(),e},FastBitSet.prototype.intersects=function(e){let t=Math.min(this.words.length,e.words.length);for(let r=0;r<t;++r)if((this.words[r]&e.words[r])!=0)return!0;return!1},FastBitSet.prototype.intersection=function(e){let t=Math.min(this.words.length,e.words.length),r=0;for(;r+7<t;r+=8)this.words[r]&=e.words[r],this.words[r+1]&=e.words[r+1],this.words[r+2]&=e.words[r+2],this.words[r+3]&=e.words[r+3],this.words[r+4]&=e.words[r+4],this.words[r+5]&=e.words[r+5],this.words[r+6]&=e.words[r+6],this.words[r+7]&=e.words[r+7];for(;r<t;++r)this.words[r]&=e.words[r];let n=this.words.length;for(r=t;r<n;++r)this.words[r]=0;return this},FastBitSet.prototype.intersection_size=function(e){let t=Math.min(this.words.length,e.words.length),r=0;for(let n=0;n<t;++n)r+=this.hammingWeight(this.words[n]&e.words[n]);return r},FastBitSet.prototype.new_intersection=function(e){let t=Object.create(FastBitSet.prototype),r=Math.min(this.words.length,e.words.length);t.words=Array(r);let n=0;for(;n+7<r;n+=8)t.words[n]=this.words[n]&e.words[n],t.words[n+1]=this.words[n+1]&e.words[n+1],t.words[n+2]=this.words[n+2]&e.words[n+2],t.words[n+3]=this.words[n+3]&e.words[n+3],t.words[n+4]=this.words[n+4]&e.words[n+4],t.words[n+5]=this.words[n+5]&e.words[n+5],t.words[n+6]=this.words[n+6]&e.words[n+6],t.words[n+7]=this.words[n+7]&e.words[n+7];for(;n<r;++n)t.words[n]=this.words[n]&e.words[n];return t},FastBitSet.prototype.equals=function(e){let t=Math.min(this.words.length,e.words.length);for(let r=0;r<t;++r)if(this.words[r]!=e.words[r])return!1;if(this.words.length<e.words.length){let t=e.words.length;for(let r=this.words.length;r<t;++r)if(0!=e.words[r])return!1}else if(e.words.length<this.words.length){let t=this.words.length;for(let r=e.words.length;r<t;++r)if(0!=this.words[r])return!1}return!0},FastBitSet.prototype.difference=function(e){let t=Math.min(this.words.length,e.words.length),r=0;for(;r+7<t;r+=8)this.words[r]&=~e.words[r],this.words[r+1]&=~e.words[r+1],this.words[r+2]&=~e.words[r+2],this.words[r+3]&=~e.words[r+3],this.words[r+4]&=~e.words[r+4],this.words[r+5]&=~e.words[r+5],this.words[r+6]&=~e.words[r+6],this.words[r+7]&=~e.words[r+7];for(;r<t;++r)this.words[r]&=~e.words[r];return this},FastBitSet.prototype.new_difference=function(e){return this.clone().difference(e)},FastBitSet.prototype.difference2=function(e){let t=Math.min(this.words.length,e.words.length),r=0;for(;r+7<t;r+=8)e.words[r]=this.words[r]&~e.words[r],e.words[r+1]=this.words[r+1]&~e.words[r+1],e.words[r+2]=this.words[r+2]&~e.words[r+2],e.words[r+3]=this.words[r+3]&~e.words[r+3],e.words[r+4]=this.words[r+4]&~e.words[r+4],e.words[r+5]=this.words[r+5]&~e.words[r+5],e.words[r+6]=this.words[r+6]&~e.words[r+6],e.words[r+7]=this.words[r+7]&~e.words[r+7];for(;r<t;++r)e.words[r]=this.words[r]&~e.words[r];for(r=this.words.length-1;r>=t;--r)e.words[r]=this.words[r];return e.words.length=this.words.length,e},FastBitSet.prototype.difference_size=function(e){let t=Math.min(this.words.length,e.words.length),r=0,n=0;for(;n<t;++n)r+=this.hammingWeight(this.words[n]&~e.words[n]);let i=this.words.length;for(;n<i;++n)r+=this.hammingWeight(this.words[n]);return r},FastBitSet.prototype.change=function(e){let t=Math.min(this.words.length,e.words.length),r=0;for(;r+7<t;r+=8)this.words[r]^=e.words[r],this.words[r+1]^=e.words[r+1],this.words[r+2]^=e.words[r+2],this.words[r+3]^=e.words[r+3],this.words[r+4]^=e.words[r+4],this.words[r+5]^=e.words[r+5],this.words[r+6]^=e.words[r+6],this.words[r+7]^=e.words[r+7];for(;r<t;++r)this.words[r]^=e.words[r];for(r=e.words.length-1;r>=t;--r)this.words[r]=e.words[r];return this},FastBitSet.prototype.new_change=function(e){let t=Object.create(FastBitSet.prototype),r=Math.max(this.words.length,e.words.length);t.words=Array(r);let n=Math.min(this.words.length,e.words.length),i=0;for(;i+7<n;i+=8)t.words[i]=this.words[i]^e.words[i],t.words[i+1]=this.words[i+1]^e.words[i+1],t.words[i+2]=this.words[i+2]^e.words[i+2],t.words[i+3]=this.words[i+3]^e.words[i+3],t.words[i+4]=this.words[i+4]^e.words[i+4],t.words[i+5]=this.words[i+5]^e.words[i+5],t.words[i+6]=this.words[i+6]^e.words[i+6],t.words[i+7]=this.words[i+7]^e.words[i+7];for(;i<n;++i)t.words[i]=this.words[i]^e.words[i];let a=this.words.length;for(i=n;i<a;++i)t.words[i]=this.words[i];let s=e.words.length;for(i=n;i<s;++i)t.words[i]=e.words[i];return t},FastBitSet.prototype.change_size=function(e){let t=Math.min(this.words.length,e.words.length),r=0,n=0;for(;n<t;++n)r+=this.hammingWeight(this.words[n]^e.words[n]);let i=this.words.length>e.words.length?this:e,a=i.words.length;for(;n<a;++n)r+=this.hammingWeight(i.words[n]);return r},FastBitSet.prototype.toString=function(){return"{"+this.array().join(",")+"}"},FastBitSet.prototype.union=function(e){let t=Math.min(this.words.length,e.words.length),r=0;for(;r+7<t;r+=8)this.words[r]|=e.words[r],this.words[r+1]|=e.words[r+1],this.words[r+2]|=e.words[r+2],this.words[r+3]|=e.words[r+3],this.words[r+4]|=e.words[r+4],this.words[r+5]|=e.words[r+5],this.words[r+6]|=e.words[r+6],this.words[r+7]|=e.words[r+7];for(;r<t;++r)this.words[r]|=e.words[r];if(this.words.length<e.words.length){this.resize((e.words.length<<5)-1);let r=e.words.length;for(let n=t;n<r;++n)this.words[n]=e.words[n]}return this},FastBitSet.prototype.new_union=function(e){let t=Object.create(FastBitSet.prototype),r=Math.max(this.words.length,e.words.length);t.words=Array(r);let n=Math.min(this.words.length,e.words.length),i=0;for(;i+7<n;i+=8)t.words[i]=this.words[i]|e.words[i],t.words[i+1]=this.words[i+1]|e.words[i+1],t.words[i+2]=this.words[i+2]|e.words[i+2],t.words[i+3]=this.words[i+3]|e.words[i+3],t.words[i+4]=this.words[i+4]|e.words[i+4],t.words[i+5]=this.words[i+5]|e.words[i+5],t.words[i+6]=this.words[i+6]|e.words[i+6],t.words[i+7]=this.words[i+7]|e.words[i+7];for(;i<n;++i)t.words[i]=this.words[i]|e.words[i];let a=this.words.length;for(i=n;i<a;++i)t.words[i]=this.words[i];let s=e.words.length;for(i=n;i<s;++i)t.words[i]=e.words[i];return t},FastBitSet.prototype.union_size=function(e){let t=Math.min(this.words.length,e.words.length),r=0;for(let n=0;n<t;++n)r+=this.hammingWeight(this.words[n]|e.words[n]);if(this.words.length<e.words.length){let t=e.words.length;for(let n=this.words.length;n<t;++n)r+=this.hammingWeight(0|e.words[n])}else{let t=this.words.length;for(let n=e.words.length;n<t;++n)r+=this.hammingWeight(0|this.words[n])}return r},e.exports=FastBitSet},14311:function(e,t){var r;/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/!function(n){"use strict";var i={s:1,n:0,d:1};function assign(e,t){if(isNaN(e=parseInt(e,10)))throw Fraction.InvalidParameter;return e*t}function newFraction(e,t){if(0===t)throw Fraction.DivisionByZero;var r=Object.create(Fraction.prototype);r.s=e<0?-1:1;var n=gcd(e=e<0?-e:e,t);return r.n=e/n,r.d=t/n,r}function factorize(e){for(var t={},r=e,n=2,i=4;i<=r;){for(;r%n==0;)r/=n,t[n]=(t[n]||0)+1;i+=1+2*n++}return r!==e?r>1&&(t[r]=(t[r]||0)+1):t[e]=(t[e]||0)+1,t}var parse=function(e,t){var r,n=0,a=1,s=1,l=0,u=0,d=0,f=1,p=1,g=0,m=1,y=1,v=1;if(null==e);else if(void 0!==t){if(s=(n=e)*(a=t),n%1!=0||a%1!=0)throw Fraction.NonIntegerParameter}else switch(typeof e){case"object":if("d"in e&&"n"in e)n=e.n,a=e.d,"s"in e&&(n*=e.s);else if(0 in e)n=e[0],1 in e&&(a=e[1]);else throw Fraction.InvalidParameter;s=n*a;break;case"number":if(e<0&&(s=e,e=-e),e%1==0)n=e;else if(e>0){for(e>=1&&(p=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)),e/=p);m<=1e7&&v<=1e7;){if(e===(r=(g+y)/(m+v))){m+v<=1e7?(n=g+y,a=m+v):v>m?(n=y,a=v):(n=g,a=m);break}e>r?(g+=y,m+=v):(y+=g,v+=m),m>1e7?(n=y,a=v):(n=g,a=m)}n*=p}else(isNaN(e)||isNaN(t))&&(a=n=NaN);break;case"string":if(null===(m=e.match(/\d+|./g)))throw Fraction.InvalidParameter;if("-"===m[g]?(s=-1,g++):"+"===m[g]&&g++,m.length===g+1?u=assign(m[g++],s):"."===m[g+1]||"."===m[g]?("."!==m[g]&&(l=assign(m[g++],s)),(++g+1===m.length||"("===m[g+1]&&")"===m[g+3]||"'"===m[g+1]&&"'"===m[g+3])&&(u=assign(m[g],s),f=Math.pow(10,m[g].length),g++),("("===m[g]&&")"===m[g+2]||"'"===m[g]&&"'"===m[g+2])&&(d=assign(m[g+1],s),p=Math.pow(10,m[g+1].length)-1,g+=3)):"/"===m[g+1]||":"===m[g+1]?(u=assign(m[g],s),f=assign(m[g+2],1),g+=3):"/"===m[g+3]&&" "===m[g+1]&&(l=assign(m[g],s),u=assign(m[g+2],s),f=assign(m[g+4],1),g+=5),m.length<=g){s=n=d+(a=f*p)*l+p*u;break}default:throw Fraction.InvalidParameter}if(0===a)throw Fraction.DivisionByZero;i.s=s<0?-1:1,i.n=Math.abs(n),i.d=Math.abs(a)};function modpow(e,t,r){for(var n=1;t>0;e=e*e%r,t>>=1)1&t&&(n=n*e%r);return n}function cycleLen(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var r=10%t,n=1;1!==r;n++)if(r=10*r%t,n>2e3)return 0;return n}function cycleStart(e,t,r){for(var n=1,i=modpow(10,r,t),a=0;a<300;a++){if(n===i)return a;n=10*n%t,i=10*i%t}return 0}function gcd(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function Fraction(e,t){if(parse(e,t),!(this instanceof Fraction))return newFraction(i.s*i.n,i.d);e=gcd(i.d,i.n),this.s=i.s,this.n=i.n/e,this.d=i.d/e}Fraction.DivisionByZero=Error("Division by Zero"),Fraction.InvalidParameter=Error("Invalid argument"),Fraction.NonIntegerParameter=Error("Parameters must be integer"),Fraction.prototype={s:1,n:0,d:1,abs:function(){return newFraction(this.n,this.d)},neg:function(){return newFraction(-this.s*this.n,this.d)},add:function(e,t){return parse(e,t),newFraction(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(e,t){return parse(e,t),newFraction(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(e,t){return parse(e,t),newFraction(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(e,t){return parse(e,t),newFraction(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return newFraction(this.s*this.n,this.d)},mod:function(e,t){if(isNaN(this.n)||isNaN(this.d))return new Fraction(NaN);if(void 0===e)return newFraction(this.s*this.n%this.d,1);if(parse(e,t),0===i.n&&0===this.d)throw Fraction.DivisionByZero;return newFraction(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(e,t){return parse(e,t),newFraction(gcd(i.n,this.n)*gcd(i.d,this.d),i.d*this.d)},lcm:function(e,t){return(parse(e,t),0===i.n&&0===this.n)?newFraction(0,1):newFraction(i.n*this.n,gcd(i.n,this.n)*gcd(i.d,this.d))},ceil:function(e){return(e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d))?new Fraction(NaN):newFraction(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return(e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d))?new Fraction(NaN):newFraction(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return(e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d))?new Fraction(NaN):newFraction(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return newFraction(this.s*this.d,this.n)},pow:function(e,t){if(parse(e,t),1===i.d)return i.s<0?newFraction(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):newFraction(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var r=factorize(this.n),n=factorize(this.d),a=1,s=1;for(var l in r)if("1"!==l){if("0"===l){a=0;break}if(r[l]*=i.n,r[l]%i.d!=0)return null;r[l]/=i.d,a*=Math.pow(l,r[l])}for(var l in n)if("1"!==l){if(n[l]*=i.n,n[l]%i.d!=0)return null;n[l]/=i.d,s*=Math.pow(l,n[l])}return i.s<0?newFraction(s,a):newFraction(a,s)},equals:function(e,t){return parse(e,t),this.s*this.n*i.d==i.s*i.n*this.d},compare:function(e,t){parse(e,t);var r=this.s*this.n*i.d-i.s*i.n*this.d;return(0<r)-(r<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;e=e||.001;for(var t=this.abs(),r=t.toContinued(),n=1;n<r.length;n++){for(var i=newFraction(r[n-1],1),a=n-2;a>=0;a--)i=i.inverse().add(r[a]);if(i.sub(t).abs().valueOf()<e)return i.mul(this.s)}return this},divisible:function(e,t){return parse(e,t),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,r="",n=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=n:(e&&(t=Math.floor(n/i))>0&&(r+=t+" ",n%=i),r+=n+"/"+i),r},toLatex:function(e){var t,r="",n=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=n:(e&&(t=Math.floor(n/i))>0&&(r+=t,n%=i),r+="\\frac{"+n+"}{"+i+"}"),r},toContinued:function(){var e,t=this.n,r=this.d,n=[];if(isNaN(t)||isNaN(r))return n;do n.push(Math.floor(t/r)),e=t%r,t=r,r=e;while(1!==t);return n},toString:function(e){var t=this.n,r=this.d;if(isNaN(t)||isNaN(r))return"NaN";e=e||15;var n=cycleLen(t,r),i=cycleStart(t,r,n),a=this.s<0?"-":"";if(a+=t/r|0,t%=r,(t*=10)&&(a+="."),n){for(var s=i;s--;)a+=t/r|0,t%=r,t*=10;a+="(";for(var s=n;s--;)a+=t/r|0,t%=r,t*=10;a+=")"}else for(var s=e;t&&s--;)a+=t/r|0,t%=r,t*=10;return a}},void 0!==(r=(function(){return Fraction}).apply(t,[]))&&(e.exports=r)}(0)},43557:function(e){e.exports=function(e){return!!e&&"string"!=typeof e&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},44453:function(e,t,r){var n,i=1/0,a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),l="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,u="object"==typeof self&&self&&self.Object===Object&&self,d=l||u||Function("return this")(),f=(n={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},function(e){return null==n?void 0:n[e]}),p=Object.prototype.toString,g=d.Symbol,m=g?g.prototype:void 0,y=m?m.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isSymbol(e))return y?y.call(e):"";var t=e+"";return"0"==t&&1/e==-i?"-0":t}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&"[object Symbol]"==p.call(e)}function toString(e){return null==e?"":baseToString(e)}function deburr(e){return(e=toString(e))&&e.replace(a,f).replace(s,"")}e.exports=deburr},94850:function(e,t,r){"use strict";var n,i;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(i=r.g.process)?void 0:i.env)?r.g.process:r(73079)},73079:function(e){!function(){var t={229:function(e){var t,r,n,i=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}function runClearTimeout(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var a=[],s=!1,l=-1;function cleanUpNextTick(){s&&n&&(s=!1,n.length?a=n.concat(a):l=-1,a.length&&drainQueue())}function drainQueue(){if(!s){var e=runTimeout(cleanUpNextTick);s=!0;for(var t=a.length;t;){for(n=a,a=[];++l<t;)n&&n[l].run();l=-1,t=a.length}n=null,s=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];a.push(new Item(e,t)),1!==a.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=noop,i.addListener=noop,i.once=noop,i.off=noop,i.removeListener=noop,i.removeAllListeners=noop,i.emit=noop,i.prependListener=noop,i.prependOnceListener=noop,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},r={};function __nccwpck_require__(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}},a=!0;try{t[e](i,i.exports,__nccwpck_require__),a=!1}finally{a&&delete r[e]}return i.exports}__nccwpck_require__.ab="//";var n=__nccwpck_require__(229);e.exports=n}()},4782:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(36068),i=r(7653),a=n.__importDefault(r(65596));t.default=function(e){var t=i.useRef(0),r=i.useState({width:0,height:0,top:0,left:0,bottom:0,right:0}),n=r[0],s=r[1],l=i.useState(function(){return new a.default(function(r){var n=r[0];n&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(function(){e.current&&s(n.contentRect)}))})})[0];return i.useEffect(function(){l.disconnect(),e.current&&l.observe(e.current)},[e]),n}},50272:function(e,t){var r,n;"undefined"!=typeof self&&self,void 0!==(n="function"==typeof(r=function(){function RegExpParser(){}RegExpParser.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},RegExpParser.prototype.restoreState=function(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx},RegExpParser.prototype.pattern=function(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");var t=this.disjunction();this.consumeChar("/");for(var r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":addFlag(r,"global");break;case"i":addFlag(r,"ignoreCase");break;case"m":addFlag(r,"multiLine");break;case"u":addFlag(r,"unicode");break;case"y":addFlag(r,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:t,loc:this.loc(0)}},RegExpParser.prototype.disjunction=function(){var e=[],t=this.idx;for(e.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}},RegExpParser.prototype.alternative=function(){for(var e=[],t=this.idx;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}},RegExpParser.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},RegExpParser.prototype.assertion=function(){var e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":switch(this.consumeChar("?"),this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead"}ASSERT_EXISTS(t);var t,r=this.disjunction();return this.consumeChar(")"),{type:t,value:r,loc:this.loc(e)}}ASSERT_NEVER_REACH_HERE()},RegExpParser.prototype.quantifier=function(e){var t=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:1/0};break;case"+":r={atLeast:1,atMost:1/0};break;case"?":r={atLeast:0,atMost:1};break;case"{":var r,n=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:n,atMost:n};break;case",":r=this.isDigit()?{atLeast:n,atMost:this.integerIncludingZero()}:{atLeast:n,atMost:1/0},this.consumeChar("}")}if(!0===e&&void 0===r)return;ASSERT_EXISTS(r)}if(!0!==e||void 0!==r)return ASSERT_EXISTS(r),"?"===this.peekChar(0)?(this.consumeChar("?"),r.greedy=!1):r.greedy=!0,r.type="Quantifier",r.loc=this.loc(t),r},RegExpParser.prototype.atom=function(){var e,t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group()}return void 0===e&&this.isPatternCharacter()&&(e=this.patternCharacter()),ASSERT_EXISTS(e),e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e},RegExpParser.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[cc("\n"),cc("\r"),cc("\u2028"),cc("\u2029")]}},RegExpParser.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},RegExpParser.prototype.decimalEscapeAtom=function(){return{type:"GroupBackReference",value:this.positiveInteger()}},RegExpParser.prototype.characterClassEscape=function(){var e,t=!1;switch(this.popChar()){case"d":e=i;break;case"D":e=i,t=!0;break;case"s":e=s;break;case"S":e=s,t=!0;break;case"w":e=a;break;case"W":e=a,t=!0}return ASSERT_EXISTS(e),{type:"Set",value:e,complement:t}},RegExpParser.prototype.controlEscapeAtom=function(){var e;switch(this.popChar()){case"f":e=cc("\f");break;case"n":e=cc("\n");break;case"r":e=cc("\r");break;case"t":e=cc("	");break;case"v":e=cc("\v")}return ASSERT_EXISTS(e),{type:"Character",value:e}},RegExpParser.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var e=this.popChar();if(!1===/[a-zA-Z]/.test(e))throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}},RegExpParser.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:cc("\x00")}},RegExpParser.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},RegExpParser.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},RegExpParser.prototype.identityEscapeAtom=function(){return{type:"Character",value:cc(this.popChar())}},RegExpParser.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:cc(this.popChar())}}},RegExpParser.prototype.characterClass=function(){var e=[],t=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),t=!0);this.isClassAtom();){var r=this.classAtom();if("Character"===r.type&&this.isRangeDash()){this.consumeChar("-");var n=this.classAtom();if("Character"===n.type){if(n.value<r.value)throw Error("Range out of order in character class");e.push({from:r.value,to:n.value})}else insertToSet(r.value,e),e.push(cc("-")),insertToSet(n.value,e)}else insertToSet(r.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}},RegExpParser.prototype.classAtom=function(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},RegExpParser.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:cc("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},RegExpParser.prototype.group=function(){var e=!0;(this.consumeChar("("),"?"===this.peekChar(0))?(this.consumeChar("?"),this.consumeChar(":"),e=!1):this.groupIdx++;var t=this.disjunction();this.consumeChar(")");var r={type:"Group",capturing:e,value:t};return e&&(r.idx=this.groupIdx),r},RegExpParser.prototype.positiveInteger=function(){var e=this.popChar();if(!1===n.test(e))throw Error("Expecting a positive integer");for(;r.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)},RegExpParser.prototype.integerIncludingZero=function(){var e=this.popChar();if(!1===r.test(e))throw Error("Expecting an integer");for(;r.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)},RegExpParser.prototype.patternCharacter=function(){var e=this.popChar();switch(e){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:cc(e)}}},RegExpParser.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},RegExpParser.prototype.isRangeDash=function(){return"-"===this.peekChar()&&this.isClassAtom(1)},RegExpParser.prototype.isDigit=function(){return r.test(this.peekChar(0))},RegExpParser.prototype.isClassAtom=function(e){switch(void 0===e&&(e=0),this.peekChar(e)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},RegExpParser.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},RegExpParser.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},RegExpParser.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}},RegExpParser.prototype.isQuantifier=function(){var e=this.saveState();try{return void 0!==this.quantifier(!0)}catch(e){return!1}finally{this.restoreState(e)}},RegExpParser.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},RegExpParser.prototype.parseHexDigits=function(e){for(var r="",n=0;n<e;n++){var i=this.popChar();if(!1===t.test(i))throw Error("Expecting a HexDecimal digits");r+=i}return{type:"Character",value:parseInt(r,16)}},RegExpParser.prototype.peekChar=function(e){return void 0===e&&(e=0),this.input[this.idx+e]},RegExpParser.prototype.popChar=function(){var e=this.peekChar(0);return this.consumeChar(),e},RegExpParser.prototype.consumeChar=function(e){if(void 0!==e&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},RegExpParser.prototype.loc=function(e){return{begin:e,end:this.idx}};var e,t=/[0-9a-fA-F]/,r=/[0-9]/,n=/[1-9]/;function cc(e){return e.charCodeAt(0)}function insertToSet(e,t){void 0!==e.length?e.forEach(function(e){t.push(e)}):t.push(e)}function addFlag(e,t){if(!0===e[t])throw"duplicate flag "+t;e[t]=!0}function ASSERT_EXISTS(e){if(void 0===e)throw Error("Internal Error - Should never get here!")}function ASSERT_NEVER_REACH_HERE(){throw Error("Internal Error - Should never get here!")}var i=[];for(e=cc("0");e<=cc("9");e++)i.push(e);var a=[cc("_")].concat(i);for(e=cc("a");e<=cc("z");e++)a.push(e);for(e=cc("A");e<=cc("Z");e++)a.push(e);var s=[cc(" "),cc("\f"),cc("\n"),cc("\r"),cc("	"),cc("\v"),cc("	"),cc("\xa0"),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc("\u2028"),cc("\u2029"),cc(" "),cc(" "),cc("　"),cc("\uFEFF")];function BaseRegExpVisitor(){}return BaseRegExpVisitor.prototype.visitChildren=function(e){for(var t in e){var r=e[t];e.hasOwnProperty(t)&&(void 0!==r.type?this.visit(r):Array.isArray(r)&&r.forEach(function(e){this.visit(e)},this))}},BaseRegExpVisitor.prototype.visit=function(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e)}this.visitChildren(e)},BaseRegExpVisitor.prototype.visitPattern=function(e){},BaseRegExpVisitor.prototype.visitFlags=function(e){},BaseRegExpVisitor.prototype.visitDisjunction=function(e){},BaseRegExpVisitor.prototype.visitAlternative=function(e){},BaseRegExpVisitor.prototype.visitStartAnchor=function(e){},BaseRegExpVisitor.prototype.visitEndAnchor=function(e){},BaseRegExpVisitor.prototype.visitWordBoundary=function(e){},BaseRegExpVisitor.prototype.visitNonWordBoundary=function(e){},BaseRegExpVisitor.prototype.visitLookahead=function(e){},BaseRegExpVisitor.prototype.visitNegativeLookahead=function(e){},BaseRegExpVisitor.prototype.visitCharacter=function(e){},BaseRegExpVisitor.prototype.visitSet=function(e){},BaseRegExpVisitor.prototype.visitGroup=function(e){},BaseRegExpVisitor.prototype.visitGroupBackReference=function(e){},BaseRegExpVisitor.prototype.visitQuantifier=function(e){},{RegExpParser:RegExpParser,BaseRegExpVisitor:BaseRegExpVisitor,VERSION:"0.5.0"}})?r.apply(t,[]):r)&&(e.exports=n)},65596:function(e,t,r){"use strict";r.r(t);var n=function(){if("undefined"!=typeof Map)return Map;function getIndex(e,t){var r=-1;return e.some(function(e,n){return e[0]===t&&(r=n,!0)}),r}return function(){function class_1(){this.__entries__=[]}return Object.defineProperty(class_1.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),class_1.prototype.get=function(e){var t=getIndex(this.__entries__,e),r=this.__entries__[t];return r&&r[1]},class_1.prototype.set=function(e,t){var r=getIndex(this.__entries__,e);~r?this.__entries__[r][1]=t:this.__entries__.push([e,t])},class_1.prototype.delete=function(e){var t=this.__entries__,r=getIndex(t,e);~r&&t.splice(r,1)},class_1.prototype.has=function(e){return!!~getIndex(this.__entries__,e)},class_1.prototype.clear=function(){this.__entries__.splice(0)},class_1.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,n=this.__entries__;r<n.length;r++){var i=n[r];e.call(t,i[1],i[0])}},class_1}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,a=void 0!==r.g&&r.g.Math===Math?r.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),s="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(a):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)};function throttle(e,t){var r=!1,n=!1,i=0;function resolvePending(){r&&(r=!1,e()),n&&proxy()}function timeoutCallback(){s(resolvePending)}function proxy(){var e=Date.now();if(r){if(e-i<2)return;n=!0}else r=!0,n=!1,setTimeout(timeoutCallback,t);i=e}return proxy}var l=["top","right","bottom","left","width","height","size","weight"],u="undefined"!=typeof MutationObserver,d=function(){function ResizeObserverController(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=throttle(this.refresh.bind(this),20)}return ResizeObserverController.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},ResizeObserverController.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},ResizeObserverController.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},ResizeObserverController.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},ResizeObserverController.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},ResizeObserverController.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},ResizeObserverController.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=void 0===t?"":t;l.some(function(e){return!!~r.indexOf(e)})&&this.refresh()},ResizeObserverController.getInstance=function(){return this.instance_||(this.instance_=new ResizeObserverController),this.instance_},ResizeObserverController.instance_=null,ResizeObserverController}(),defineConfigurable=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},getWindowOf=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||a},f=createRectInit(0,0,0,0);function toFloat(e){return parseFloat(e)||0}function getBordersSize(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(t,r){return t+toFloat(e["border-"+r+"-width"])},0)}function getPaddings(e){for(var t={},r=0,n=["top","right","bottom","left"];r<n.length;r++){var i=n[r],a=e["padding-"+i];t[i]=toFloat(a)}return t}function getSVGContentRect(e){var t=e.getBBox();return createRectInit(0,0,t.width,t.height)}function getHTMLElementContentRect(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return f;var n=getWindowOf(e).getComputedStyle(e),i=getPaddings(n),a=i.left+i.right,s=i.top+i.bottom,l=toFloat(n.width),u=toFloat(n.height);if("border-box"===n.boxSizing&&(Math.round(l+a)!==t&&(l-=getBordersSize(n,"left","right")+a),Math.round(u+s)!==r&&(u-=getBordersSize(n,"top","bottom")+s)),!isDocumentElement(e)){var d=Math.round(l+a)-t,p=Math.round(u+s)-r;1!==Math.abs(d)&&(l-=d),1!==Math.abs(p)&&(u-=p)}return createRectInit(i.left,i.top,l,u)}var p="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof getWindowOf(e).SVGGraphicsElement}:function(e){return e instanceof getWindowOf(e).SVGElement&&"function"==typeof e.getBBox};function isDocumentElement(e){return e===getWindowOf(e).document.documentElement}function getContentRect(e){return i?p(e)?getSVGContentRect(e):getHTMLElementContentRect(e):f}function createReadOnlyRect(e){var t=e.x,r=e.y,n=e.width,i=e.height,a=Object.create(("undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object).prototype);return defineConfigurable(a,{x:t,y:r,width:n,height:i,top:r,right:t+n,bottom:i+r,left:t}),a}function createRectInit(e,t,r,n){return{x:e,y:t,width:r,height:n}}var g=function(){function ResizeObservation(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=e}return ResizeObservation.prototype.isActive=function(){var e=getContentRect(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},ResizeObservation.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},ResizeObservation}(),ResizeObserverEntry=function(e,t){defineConfigurable(this,{target:e,contentRect:createReadOnlyRect(t)})},m=function(){function ResizeObserverSPI(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return ResizeObserverSPI.prototype.observe=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof getWindowOf(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new g(e)),this.controller_.addObserver(this),this.controller_.refresh())}},ResizeObserverSPI.prototype.unobserve=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof getWindowOf(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},ResizeObserverSPI.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},ResizeObserverSPI.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},ResizeObserverSPI.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new ResizeObserverEntry(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)},ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0},ResizeObserverSPI}(),y="undefined"!=typeof WeakMap?new WeakMap:new n,v=function(){function ResizeObserver(e){if(!(this instanceof ResizeObserver))throw TypeError("Cannot call a class as a function.");if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");var t=new m(e,d.getInstance(),this);y.set(this,t)}return ResizeObserver}();["observe","unobserve","disconnect"].forEach(function(e){v.prototype[e]=function(){var t;return(t=y.get(this))[e].apply(t,arguments)}});var x=void 0!==a.ResizeObserver?a.ResizeObserver:v;t.default=x},97437:function(e,t){"use strict";if("object"==typeof performance&&"function"==typeof performance.now){var r,n,i,a,s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var d=null,f=null,w=function(){if(null!==d)try{var e=t.unstable_now();d(!0,e),d=null}catch(e){throw setTimeout(w,0),e}};r=function(e){null!==d?setTimeout(r,0,e):(d=e,setTimeout(w,0))},n=function(e,t){f=setTimeout(e,t)},i=function(){clearTimeout(f)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,g=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var y=!1,v=null,x=-1,b=5,O=0;t.unstable_shouldYield=function(){return t.unstable_now()>=O},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5};var R=new MessageChannel,_=R.port2;R.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();O=e+b;try{v(!0,e)?_.postMessage(null):(y=!1,v=null)}catch(e){throw _.postMessage(null),e}}else y=!1},r=function(e){v=e,y||(y=!0,_.postMessage(null))},n=function(e,r){x=p(function(){e(t.unstable_now())},r)},i=function(){g(x),x=-1}}function H(e,t){var r=e.length;for(e.push(t);;){var n=r-1>>>1,i=e[n];if(void 0!==i&&0<I(i,t))e[n]=t,e[r]=i,r=n;else break}}function J(e){return void 0===(e=e[0])?null:e}function K(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;for(var n=0,i=e.length;n<i;){var a=2*(n+1)-1,s=e[a],l=a+1,u=e[l];if(void 0!==s&&0>I(s,r))void 0!==u&&0>I(u,s)?(e[n]=u,e[l]=r,n=l):(e[n]=s,e[a]=r,n=a);else if(void 0!==u&&0>I(u,r))e[n]=u,e[l]=r,n=l;else break}}return t}return null}function I(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}var A=[],C=[],k=1,P=null,N=3,L=!1,M=!1,F=!1;function T(e){for(var t=J(C);null!==t;){if(null===t.callback)K(C);else if(t.startTime<=e)K(C),t.sortIndex=t.expirationTime,H(A,t);else break;t=J(C)}}function U(e){if(F=!1,T(e),!M){if(null!==J(A))M=!0,r(V);else{var t=J(C);null!==t&&n(U,t.startTime-e)}}}function V(e,r){M=!1,F&&(F=!1,i()),L=!0;var a=N;try{for(T(r),P=J(A);null!==P&&(!(P.expirationTime>r)||e&&!t.unstable_shouldYield());){var s=P.callback;if("function"==typeof s){P.callback=null,N=P.priorityLevel;var l=s(P.expirationTime<=r);r=t.unstable_now(),"function"==typeof l?P.callback=l:P===J(A)&&K(A),T(r)}else K(A);P=J(A)}if(null!==P)var u=!0;else{var d=J(C);null!==d&&n(U,d.startTime-r),u=!1}return u}finally{P=null,N=a,L=!1}}var D=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){M||L||(M=!0,r(V))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return J(A)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var r=N;N=t;try{return e()}finally{N=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=D,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=N;N=e;try{return t()}finally{N=r}},t.unstable_scheduleCallback=function(e,a,s){var l=t.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?l+s:l,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return u=s+u,e={id:k++,callback:a,priorityLevel:e,startTime:s,expirationTime:u,sortIndex:-1},s>l?(e.sortIndex=s,H(C,e),null===J(A)&&e===J(C)&&(F?i():F=!0,n(U,s-l))):(e.sortIndex=u,H(A,e),M||L||(M=!0,r(V))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var r=N;N=t;try{return e.apply(this,arguments)}finally{N=r}}}},1372:function(e,t,r){"use strict";e.exports=r(97437)},79571:function(e,t,r){"use strict";var n=r(43557),i=Array.prototype.concat,a=Array.prototype.slice,s=e.exports=function(e){for(var t=[],r=0,s=e.length;r<s;r++){var l=e[r];n(l)?t=i.call(t,a.call(l)):t.push(l)}return t};s.wrap=function(e){return function(){return e(s(arguments))}}},36068:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return __assign},__asyncDelegator:function(){return __asyncDelegator},__asyncGenerator:function(){return __asyncGenerator},__asyncValues:function(){return __asyncValues},__await:function(){return __await},__awaiter:function(){return __awaiter},__classPrivateFieldGet:function(){return __classPrivateFieldGet},__classPrivateFieldIn:function(){return __classPrivateFieldIn},__classPrivateFieldSet:function(){return __classPrivateFieldSet},__createBinding:function(){return n},__decorate:function(){return __decorate},__esDecorate:function(){return __esDecorate},__exportStar:function(){return __exportStar},__extends:function(){return __extends},__generator:function(){return __generator},__importDefault:function(){return __importDefault},__importStar:function(){return __importStar},__makeTemplateObject:function(){return __makeTemplateObject},__metadata:function(){return __metadata},__param:function(){return __param},__propKey:function(){return __propKey},__read:function(){return __read},__rest:function(){return __rest},__runInitializers:function(){return __runInitializers},__setFunctionName:function(){return __setFunctionName},__spread:function(){return __spread},__spreadArray:function(){return __spreadArray},__spreadArrays:function(){return __spreadArrays},__values:function(){return __values}});var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function __rest(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function __decorate(e,t,r,n){var i,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(s=(a<3?i(s):a>3?i(t,r,s):i(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s}function __param(e,t){return function(r,n){t(r,n,e)}}function __esDecorate(e,t,r,n,i,a){function accept(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var s,l=n.kind,u="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?n.static?e:e.prototype:null,f=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),p=!1,g=r.length-1;g>=0;g--){var m={};for(var y in n)m[y]="access"===y?{}:n[y];for(var y in n.access)m.access[y]=n.access[y];m.addInitializer=function(e){if(p)throw TypeError("Cannot add initializers after decoration has completed");a.push(accept(e||null))};var v=(0,r[g])("accessor"===l?{get:f.get,set:f.set}:f[u],m);if("accessor"===l){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw TypeError("Object expected");(s=accept(v.get))&&(f.get=s),(s=accept(v.set))&&(f.set=s),(s=accept(v.init))&&i.push(s)}else(s=accept(v))&&("field"===l?i.push(s):f[u]=s)}d&&Object.defineProperty(d,n.name,f),p=!0}function __runInitializers(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function __propKey(e){return"symbol"==typeof e?e:"".concat(e)}function __setFunctionName(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})}function __generator(e,t){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(l){if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,n=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){s=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){s.label=l[1];break}if(6===l[0]&&s.label<i[1]){s.label=i[1],i=l;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(l);break}i[2]&&s.ops.pop(),s.trys.pop();continue}l=t.call(e,s)}catch(e){l=[6,e],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var n=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function __exportStar(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],s=0,l=a.length;s<l;s++,i++)n[i]=a[s];return n}function __spreadArray(e,t,r){if(r||2==arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),a=[];return n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n;function verb(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){a.push([e,t,r,n])>1||resume(e,t)})})}function resume(e,t){try{step(i[e](t))}catch(e){settle(a[0][3],e)}}function step(e){e.value instanceof __await?Promise.resolve(e.value.v).then(fulfill,reject):settle(a[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),a.shift(),a.length&&resume(a[0][0],a[0][1])}}function __asyncDelegator(e){var t,r;return t={},verb("next"),verb("throw",function(e){throw e}),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:__await(e[n](t)),done:!1}:i?i(t):t}:i}}function __asyncValues(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=__values(e),t={},verb("next"),verb("throw"),verb("return"),t[Symbol.asyncIterator]=function(){return this},t);function verb(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){settle(n,i,(t=e[r](t)).done,t.value)})}}function settle(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var i=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function __classPrivateFieldSet(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function __classPrivateFieldIn(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}},75394:function(e,t,r){"use strict";r.d(t,{b:function(){return CircuitWires}});var n,i=r(63939),a=r(29518),s=r(69651),l=r(47528),u=r(12758),d=r(514),f=r(91360),_setToPairs=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r},p=(n=r(68332).Z,function(e){var t,r=(0,d.Z)(e);return"[object Map]"==r?(0,f.Z)(e):"[object Set]"==r?_setToPairs(e):(t=n(e),(0,u.Z)(t,function(t){return[t,e[t]]}))}),g=r(64130),m=r(22360),y=r(76159),v=r(55984),x=r(90154),b=r(80884);let CircuitWires=class CircuitWires{constructor(e){this.program=e;let t=0;for(let r of(this.registers=(0,v.E8)(e),this.registers))"quantum"===r.type&&(this.offsets[r.id]=t,t+=r.size,this.sizes[r.id]=r.size);for(let e of this.registers)"classical"===e.type&&(void 0===this.firstClassicalWire&&(this.firstClassicalWire=t),this.offsets[e.id]=t,t+=e.size,this.sizes[e.id]=e.size)}sizes={};offsets={};registers;firstClassicalWire;getRegisterWires({id:e,index:t}){return void 0!==t?[this.offsets[e]+t]:(0,i.Z)(this.offsets[e],this.offsets[e]+this.sizes[e])}getOperationConnectedWires(e){var t;return(t=(0,x.ap)(e).flatMap(e=>this.getRegisterWires(e)))&&t.length?(0,a.Z)(t):[]}getOperationConnectedWiresBitSet(e){let t=(0,x.ap)(e),r=new b;for(let e of t){let{id:t,index:n}=e;if(void 0!==n)r.add(this.offsets[t]+n);else for(let e=this.offsets[t];e<=this.offsets[t]+this.sizes[t];e++)r.add(e)}return r}getOperationOverlapWires(e){let t=this.getOperationConnectedWires(e),r=(0,s.Z)(t)??0,n=(0,l.Z)(t)??0;return(0,i.Z)(r,n+1)}getOperationOverlapWiresBitSet(e){let t=this.getOperationConnectedWires(e),r=(0,s.Z)(t)??0,n=(0,l.Z)(t)??0,i=new b;for(let e=r;e<=n;e++)i.add(e);return i}getOperationsOverlapWires(e){let t=e.flatMap(e=>this.getOperationConnectedWires(e)),r=(0,s.Z)(t)??0,n=(0,l.Z)(t)??0;return(0,i.Z)(r,n+1)}getOperationFirstWire(e){return(0,s.Z)(this.getOperationConnectedWires(e))}getRegisterAtWire(e){let t;for(let[r,n]of p(this.offsets))if(n<=e)t=r;else break;if(!t)return;let r=this.registers.find(e=>e.id===t);return r}getRegisterAccessAtWire(e){let t=this.getRegisterAtWire(e);if(!t)return;let r=this.offsets[t.id],n=e-r;return{id:t.id,index:n}}getWireType(e){return void 0===this.firstClassicalWire?"quantum":e>=this.firstClassicalWire?"classical":"quantum"}wires(){var e;return(0,i.Z)(0,(e=(0,y.Z)(this.sizes))&&e.length?(0,g.Z)(e,m.Z):0)}quantumWires(){return void 0===this.firstClassicalWire?this.wires():(0,i.Z)(0,this.firstClassicalWire)}classicalWires(){return void 0===this.firstClassicalWire?[]:this.wires().slice(this.firstClassicalWire)}operationsOverlap(e){let t=e.flatMap(e=>this.getOperationOverlapWires(e)),r=new Set(t);return t.length!==r.size}}},37197:function(e,t,r){"use strict";let n;r.d(t,{q:function(){return t7}});var i,a,s,l=r(27573),u=r(88614),d=r(7653),f=r.t(d,2);let p=(0,d.createContext)(u.Q);function useTheme(){return(0,d.useContext)(p)}function ThemeContextProvider(e){return(0,l.jsx)(p.Provider,{value:e.theme,children:e.children})}var g=r(72938),m=r(75394),y=r(47528),v=r(98975),x=r(57847),b=r(55984);function buildSingleGridOperationsLayout(e){let{theme:t,groupClassicalRegisters:r,program:n}=e,i=(0,b.E8)(n),a=getColumns(e),s=getRows({theme:t,groupClassicalRegisters:r,registers:i}),l=getWidth({columns:a}),u=getHeight({rows:s,theme:t});return{columns:a,width:l,rows:s,height:u}}function getColumns(e){let{operationsByColumns:t,theme:r,expandDefinitionNodeIds:n,program:i}=e,a=new Set(n),s=t.map(e=>(0,y.Z)(e.map(e=>{if(a.has(e.meta.id)){let t=(0,x.ck)(i,"left",e);if(t){let e=(0,g.n)(t,"left"),n=buildSingleGridOperationsLayout({program:t,operationsByColumns:e,expandDefinitionNodeIds:[],groupClassicalRegisters:!1,theme:r});return Math.ceil(n.width+20)}}return Math.ceil(r.Operations.width(e))}))??r.Operations.emptyColumnsWidth),l=[0];for(let e=0;e<s.length-1;e++)l.push((0,v.Z)(l)+s[e]+r.Operations.gapX);let u=s.map((e,r)=>({width:e,x:l[r],operations:t[r]}));return u}function getWidth(e){let{columns:t}=e,r=(0,v.Z)(t);return r?r.x+r.width:0}function getRows(e){let{registers:t,groupClassicalRegisters:r,theme:n}=e,{qubitsGapY:i,registersGapY:a}=n.Wires,s=n.Operations.singleQubitHeight,l=[],u=s/2+0;for(let e of t)if("quantum"===e.type){for(let t=0;t<e.size;t++)l.push(u),u+=s+i;u+=a-i}for(let e of t)if("classical"===e.type){for(let t=0;t<e.size;t++)l.push(u),r||(u+=s+i);r?u+=s+a-i:u+=a-i}let d=l.map(e=>({y:e-n.Operations.singleQubitHeight/2,height:n.Operations.singleQubitHeight}));return d}function getHeight(e){let{rows:t,theme:r}=e,n=(0,v.Z)(t);return n?n.y+n.height+r.Wires.registersGapY:0}var O=r(10361),R=r(34530),_=r(63779),A=r(68332),C=(i=O.Z,function(e,t,r){var n=Object(e);if(!(0,_.Z)(e)){var a=(0,R.Z)(t,3);e=(0,A.Z)(e),t=function(e){return a(n[e],e,n)}}var s=i(e,t,r);return s>-1?n[a?e[s]:s]:void 0}),k=r(97572),P=r(91864),N=r(40437),L=r(992),M=r(20276),F=r(76159),D=Math.max,lodash_es_includes=function(e,t,r,n){e=(0,_.Z)(e)?e:(0,F.Z)(e),r=r&&!n?(0,M.Z)(r):0;var i,a=e.length;return r<0&&(r=D(a+r,0)),"string"==typeof(i=e)||!(0,N.Z)(i)&&(0,L.Z)(i)&&"[object String]"==(0,P.Z)(i)?r<=a&&e.indexOf(t,r)>-1:!!a&&(0,k.Z)(e,t,r)>-1},j=r(69651),B=r(52218),z=r(57812),_baseFilter=function(e,t){var r=[];return(0,z.Z)(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},lodash_es_filter=function(e,t){return((0,N.Z)(e)?B.Z:_baseFilter)(e,(0,R.Z)(t,3))},W=r(12758),G=r(58373),Z=r(39708),q=r(20585),$=r(86956),Y=r(63016),X=Math.min,_baseIntersection=function(e,t,r){for(var n=r?q.Z:Z.Z,i=e[0].length,a=e.length,s=a,l=Array(a),u=1/0,d=[];s--;){var f=e[s];s&&t&&(f=(0,W.Z)(f,(0,$.Z)(t))),u=X(f.length,u),l[s]=!r&&(t||i>=120&&f.length>=120)?new G.Z(s&&f):void 0}f=e[0];var p=-1,g=l[0];r:for(;++p<i&&d.length<u;){var m=f[p],y=t?t(m):m;if(m=r||0!==m?m:0,!(g?(0,Y.Z)(g,y):n(d,y,r))){for(s=a;--s;){var v=l[s];if(!(v?(0,Y.Z)(v,y):n(e[s],y,r)))continue r}g&&g.push(y),d.push(m)}}return d},Q=r(26641),ee=r(71160),_castArrayLikeObject=function(e){return(0,ee.Z)(e)?e:[]},et=(0,Q.Z)(function(e){var t=(0,W.Z)(e,_castArrayLikeObject);return t.length&&t[0]===e[0]?_baseIntersection(t):[]}),lodash_es_head=function(e){return e&&e.length?e[0]:void 0};function rectCenter(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function rectFromPoints(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),width:Math.abs(t.x-e.x),height:Math.abs(t.y-e.y)}}function rectToPoints(e){return{p1:{x:e.x,y:e.y},p2:{x:e.x+e.width,y:e.y+e.height}}}function rectUnion(e){if(!e)return;let t=e.flatMap(e=>{let{p1:t,p2:r}=rectToPoints(e);return[t,r]}),r=t.map(e=>e.x),n=t.map(e=>e.y),i=(0,j.Z)(r),a=(0,j.Z)(n),s=(0,y.Z)(r),l=(0,y.Z)(n);return rectFromPoints({x:i,y:a},{x:s,y:l})}function rectIntersects(e,t){return e.x<=t.x+t.width&&t.x<=e.x+e.width&&e.y<=t.y+t.height&&t.y<=e.y+e.height}function subtractBorder(e,t){return{x:e.x+t,y:e.y+t,width:e.width-2*t,height:e.height-2*t}}let MultiGridOperationsLayout=class MultiGridOperationsLayout{grids;x;y;width;maxGridWidth;height;columns;wires;theme;constructor(e){this.wires=e.wires,this.x=e.x,this.y=e.y,this.maxGridWidth=e.maxGridWidth,this.theme=e.theme;let{singleGridLayout:t,maxGridWidth:r,theme:n,x:i,y:a}=e;if(this.columns=e.singleGridLayout.columns.map(e=>e.operations),t.width<=r){this.grids=[{rows:t.rows.map(e=>({...e,y:e.y+a})),columns:t.columns.map(e=>({...e,x:e.x+i}))}],this.fillLastGridWithEmptyColumns(),this.width=t.width,this.height=t.height;return}let s=[],l={x:i,y:a},u={rows:[...t.rows.map(e=>({...e,y:a+e.y}))],columns:[]};for(let e of t.columns)l.x+e.width<i+r?(u.columns.push({...e,x:l.x}),l.x+=e.width+n.Operations.gapX):(s.push(u),l={x:i+e.width+n.Operations.gapX,y:l.y+t.height+n.Grid.gapY},u={rows:t.rows.map(e=>({...e,y:l.y+e.y})),columns:[{...e,x:i}]});u.columns.length>0&&s.push(u),this.fillLastGridWithEmptyColumns();let d=t.height*s.length+(0,y.Z)([s.length-1,0])*n.Grid.gapY;this.grids=s,this.width=r,this.height=d}fillLastGridWithEmptyColumns(){let e=(0,v.Z)(this.grids);if(!e)return;let t=(0,v.Z)(e.columns),r=t?t.x+t.width+this.theme.Operations.gapX:0;for(;r<this.maxGridWidth;){let t=r,n=Math.min(this.theme.Operations.emptyColumnsWidth,this.maxGridWidth-t);e.columns.push({x:t,width:n,operations:[]}),r=t+n+this.theme.Operations.gapX}}getAbsoluteColumnIndex(e){let t=0;for(let r=0;r<e.grid;r++)t+=this.grids[r].columns.length;return t+e.column}getIndexAtPosition(e){for(let[t,r]of this.grids.entries()){let n=this.findGridRowIndex(r,e),i=(0,O.Z)(r.columns,t=>e.x>=t.x&&e.x<=t.x+t.width);if(-1!==n&&-1!==i)return{grid:t,row:n,column:i}}}getContinuosRowIndexPosition(e){for(let t of this.grids){let r=this.findGridRowIndex(t,e);if(-1!==r)return r}}getContinuosIndexPosition(e){for(let[t,r]of this.grids.entries()){let n=this.findGridRowIndex(r,e),i=r.columns.map((e,t)=>{let n=r.columns[t-1],i=n?n.x+n.width:e.x;return{x:i,width:e.width+(e.x-i)}}),a=(0,O.Z)(i,t=>e.x>=t.x&&e.x<t.x+t.width);if(-1!==n&&-1!==a)return{grid:t,row:n,column:a}}}getOperationAtPosition(e){let t=this.getIndexAtPosition(e);if(t){let r=this.grids[t.grid],n=r.columns[t.column];return C(n.operations,n=>{let i=this.wires.getOperationOverlapWires(n);if(!lodash_es_includes(i,t.row))return!1;let a=r.rows[(0,j.Z)(i)],s=r.rows[(0,y.Z)(i)];return e.y>=a.y&&e.y<=s.y+s.height})}}getOperationsAtRect(e){let t=[];for(let r of this.grids){let n=lodash_es_filter([...r.rows.entries()],([t,n])=>rectIntersects(this.rowRect(r,n),e)),i=n.map(([e])=>e),a=lodash_es_filter(r.columns,t=>rectIntersects(this.columnRect(r,t),e));for(let e of a)for(let r of e.operations){let e=this.wires.getOperationOverlapWires(r),n=et(e,i).length>0;n&&t.push(r)}}return t}getOperationCells(e){for(let t of this.grids){let r=t.columns.find(t=>t.operations.includes(e));if(r){let n=this.wires.getOperationOverlapWires(e),i=n.map(e=>t.rows[e]),a=i.map(e=>({y:e.y,height:e.height,x:r.x,width:r.width}));return a}}}gridRect(e){let t=lodash_es_head(e.columns)?.x??this.x,r=this.width,n=lodash_es_head(e.rows)?.y??this.y,i=(0,v.Z)(e.rows),a=(i?.y??n)+(i?.height??0);return{x:t,y:n,width:r,height:a}}rowRect(e,t){let r=this.gridRect(e);return{x:r.x,width:r.width,y:t.y,height:t.height}}columnRect(e,t){let r=this.gridRect(e);return{x:t.x,width:t.width,y:r.y,height:r.height}}findGridRowIndex(e,t){return(0,O.Z)(e.rows,(r,n)=>{let i=n>0?e.rows[n-1]:void 0,a=n<e.rows.length-1?e.rows[n+1]:void 0,s=i?i.y+i.height:0,l=(r.y-s)/2,u=r.y-l,d=r.y+r.height,f=a?(a.y-d)/2:0;return t.y>=u&&t.y<=d+f})}};function Box(e){let{x:t,y:r,children:n}=e;return(0,l.jsx)("g",{transform:translate({x:t,y:r}),children:n})}function translate({x:e,y:t}){return void 0!==e&&void 0!==t?`translate(${e}, ${t})`:void 0!==e?`translate(${e}, 0)`:void 0!==t?`translate(0, ${t})`:void 0}var er=r(14311);function polarToCartesian(e){return{x:Math.cos(e),y:Math.sin(e)}}function getPurity(e,t,r){let n=Math.sqrt(e*e+t*t+r*r);return .5*(1+n*n)}var en=r(97157);function PhaseDiskHoverCardContent(e){let{qubit:t,data:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-4 p-16",children:[(0,l.jsxs)("div",{className:"font-600",children:[t.id,"[",t.index,"]"]}),(0,l.jsxs)("div",{className:"flex items-baseline gap-4",children:[(0,l.jsx)(PhaseAngleIcons,{size:12}),(0,l.jsx)("div",{children:"Phase \uD835\uDF11:"}),(0,l.jsx)("div",{className:"font-600",children:formatRadiansLabel(r.phase)})]}),(0,l.jsxs)("div",{className:"flex flex-col ml-16 border-solid border-0 border-l border-skeleton-element",children:[(0,l.jsxs)("div",{className:"flex pl-8 gap-4",children:[(0,l.jsxs)("div",{className:"flex items-baseline",children:["Re[",(0,l.jsx)(PhaseDiskEquation,{className:"inline"}),"]:"]}),(0,l.jsx)("div",{className:"font-600",children:r.x})]}),(0,l.jsxs)("div",{className:"flex pl-8 gap-4",children:[(0,l.jsxs)("div",{className:"flex items-baseline",children:["Im[",(0,l.jsx)(PhaseDiskEquation,{}),"]:"]}),(0,l.jsx)("div",{className:"font-600",children:r.y})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(Circle,{className:"bg-cyan-40"})," ",(0,l.jsxs)("div",{children:["Prob of ","∣","1","⟩",":"]}),(0,l.jsxs)("div",{className:"font-600",children:[-(100*((r.z-1)/2)),"%"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(Circle,{className:"border border-solid border-border-inverse"}),(0,l.jsx)("div",{children:"Purity of reduced state:"}),(0,l.jsx)("div",{className:"font-600",children:getPurity(r.x,r.y,r.z)})]})]})}function Circle(e){return(0,l.jsx)("div",{className:(0,en.W)("w-8 h-8 rounded-full",e.className)})}function PhaseAngleIcons(e){let{size:t,className:r}=e;return(0,l.jsxs)("svg",{className:r,width:t,height:t-1,viewBox:"0 0 10 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M9 8.19995H1",strokeLinecap:"round",className:"stroke-text-placeholder"}),(0,l.jsx)("path",{d:"M3 5C5 5.4 5 7 5 8.2",className:"stroke-text-placeholder"}),(0,l.jsx)("path",{d:"M5.8 1L1 8.2",className:"stroke-text-helper",strokeLinecap:"round"})]})}function PhaseDiskEquation(e){return(0,l.jsxs)("svg",{className:e.className,xmlns:"http://www.w3.org/2000/svg",width:22.984,height:16.136,viewBox:"0 -880.4 1269.8 891.4",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,l.jsxs)("defs",{children:[(0,l.jsx)("path",{id:"prefix__a",d:"M39 168q0 57 19 104t49 78 67 52 70 31 63 9h3q45 0 78-22t33-65q0-90-111-118-49-13-134-14-37 0-38-2 0-2-6-35t-7-58q0-47 21-74t63-28 93 19 92 66q9 10 12 10 4 0 13-9t10-14-9-16-30-27-46-31-63-25-76-10q-79 0-122 53T39 168zm334 185q-6 52-68 52-33 0-61-14t-45-34-29-41-16-36-5-19q0-1 20-1 113 0 158 24t46 69z"}),(0,l.jsx)("path",{id:"prefix__b",d:"M297 596q0 31 21 48t43 17q17 0 28-10t14-28q0-28-19-47t-44-19q-18 0-30 10t-13 29zm-9-220q0 29-26 29-22 0-42-12t-35-31-24-37-17-32l-7-14q-2-1-16-1h-14q-6 6-6 8t4 13q21 49 59 92t88 50h8q7 0 12 1 24-1 44-10 25-14 38-31t13-53v-16l-49-199Q267-67 264-75q-18-50-70-89T75-204q-50 0-68 21t-19 46q0 27 19 46t46 20q17 0 29-10t13-31q0-36-32-55 6-1 14-1 34 0 62 28t43 66l11 42q11 43 26 104t32 125 27 111 11 57q0 7-1 11z"}),(0,l.jsx)("path",{id:"prefix__c",d:"M92 210q0-34 14-61t36-41 43-23 35-13l15-2 2 1 13 41q18 58 33 99t39 88 48 76 59 48 73 19q45 0 80-32t36-108q0-78-43-150T457 35 299-10q-26 0-26-2l-7-36q-6-35-14-77t-11-54q-5-24-26-33-11-6-25-6-31 3-31 33 0 10 55 183l-5 2q-5 2-14 5t-22 9-26 14-27 18-26 25-23 32-15 39-6 48q0 48 26 121t73 120h13q21 0 21-8 0-6-8-14-41-48-61-109t-22-90zm482 68q0 42-24 66t-64 25q-49 0-92-40t-71-111q-14-34-28-109l-9-45q18-2 20-2 117 0 192 69t76 147z"})]}),(0,l.jsx)("g",{"data-mml-node":"math",stroke:"currentColor",fill:"currentColor",strokeWidth:0,children:(0,l.jsxs)("g",{"data-mml-node":"msup",children:[(0,l.jsx)("use",{xlinkHref:"#prefix__a","data-mml-node":"mi",transform:"scale(1 -1)"}),(0,l.jsxs)("g",{"data-mml-node":"TeXAtom",children:[(0,l.jsx)("use",{xlinkHref:"#prefix__b","data-mml-node":"mi",transform:"matrix(.707 0 0 -.707 466 -413)"}),(0,l.jsx)("use",{xlinkHref:"#prefix__c","data-mml-node":"mi",transform:"matrix(.707 0 0 -.707 757.284 -413)"})]})]})})]})}function formatRadiansLabel(e){let t;let r=new er(e/Math.PI);return r.n.toString().length>3||r.d.toString().length>3?parseFloat(e.toFixed(4)).toString():(t=0===r.n?"0":1===r.n?r.d>1?`π/${r.d}`:"π":1===r.d?`${r.n}π`:`${r.n}π/${r.d}`,-1===r.s?`-${t}`:t)}let ei=(null==globalThis?void 0:globalThis.document)?d.useLayoutEffect:()=>{},eo=f["useId".toString()]||(()=>{}),ea=0;function useId(e){let[t,r]=d.useState(eo());return ei(()=>{e||r(e=>null!=e?e:String(ea++))},[e]),e||(t?`radix-${t}`:"")}function usePrevious(e){var t=(0,d.useRef)();return(0,d.useEffect)(function(){t.current=e}),t.current}var es=r(27198),ec=r(84989),el=r(74618),eu=r(86475),ed=r(42033),ef=r(43506),eh=r(87166),ep=r(87482),eg=r(54834),em=r(48820);let ey="HoverCard",[ev,ex]=(0,el.b)(ey,[ef.D7]),eb=(0,ef.D7)(),[eE,eT]=ev(ey),eO=(0,d.forwardRef)((e,t)=>{let{__scopeHoverCard:r,...n}=e,i=eT("HoverCardTrigger",r),a=eb(r);return(0,d.createElement)(ef.ee,(0,es.Z)({asChild:!0},a),(0,d.createElement)(eg.WV.a,(0,es.Z)({"data-state":i.open?"open":"closed"},n,{ref:t,onPointerEnter:(0,ec.M)(e.onPointerEnter,$cef8881cdc69808e$var$excludeTouch(i.onOpen)),onPointerLeave:(0,ec.M)(e.onPointerLeave,$cef8881cdc69808e$var$excludeTouch(i.onClose)),onFocus:(0,ec.M)(e.onFocus,i.onOpen),onBlur:(0,ec.M)(e.onBlur,i.onClose),onTouchStart:(0,ec.M)(e.onTouchStart,e=>e.preventDefault())})))}),eR="HoverCardPortal",[e_,eA]=ev(eR,{forceMount:void 0}),eS="HoverCardContent",eC=(0,d.forwardRef)((e,t)=>{let r=eA(eS,e.__scopeHoverCard),{forceMount:n=r.forceMount,...i}=e,a=eT(eS,e.__scopeHoverCard);return(0,d.createElement)(ep.z,{present:n||a.open},(0,d.createElement)(ek,(0,es.Z)({"data-state":a.open?"open":"closed"},i,{onPointerEnter:(0,ec.M)(e.onPointerEnter,$cef8881cdc69808e$var$excludeTouch(a.onOpen)),onPointerLeave:(0,ec.M)(e.onPointerLeave,$cef8881cdc69808e$var$excludeTouch(a.onClose)),ref:t})))}),ek=(0,d.forwardRef)((e,t)=>{let{__scopeHoverCard:r,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:l,...u}=e,f=eT(eS,r),p=eb(r),g=(0,d.useRef)(null),m=(0,ed.e)(t,g),[y,v]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{if(y){let e=document.body;return n=e.style.userSelect||e.style.webkitUserSelect,e.style.userSelect="none",e.style.webkitUserSelect="none",()=>{e.style.userSelect=n,e.style.webkitUserSelect=n}}},[y]),(0,d.useEffect)(()=>{if(g.current){let handlePointerUp=()=>{v(!1),f.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var e;let t=(null===(e=document.getSelection())||void 0===e?void 0:e.toString())!=="";t&&(f.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",handlePointerUp),()=>{document.removeEventListener("pointerup",handlePointerUp),f.hasSelectionRef.current=!1,f.isPointerDownOnContentRef.current=!1}}},[f.isPointerDownOnContentRef,f.hasSelectionRef]),(0,d.useEffect)(()=>{if(g.current){let e=$cef8881cdc69808e$var$getTabbableNodes(g.current);e.forEach(e=>e.setAttribute("tabindex","-1"))}}),(0,d.createElement)(em.XB,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:l,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:(0,ec.M)(s,e=>{e.preventDefault()}),onDismiss:f.onDismiss},(0,d.createElement)(ef.VY,(0,es.Z)({},p,u,{onPointerDown:(0,ec.M)(u.onPointerDown,e=>{e.currentTarget.contains(e.target)&&v(!0),f.hasSelectionRef.current=!1,f.isPointerDownOnContentRef.current=!0}),ref:m,style:{...u.style,userSelect:y?"text":void 0,WebkitUserSelect:y?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})))}),eI=(0,d.forwardRef)((e,t)=>{let{__scopeHoverCard:r,...n}=e,i=eb(r);return(0,d.createElement)(ef.Eh,(0,es.Z)({},i,n,{ref:t}))});function $cef8881cdc69808e$var$excludeTouch(e){return t=>"touch"===t.pointerType?void 0:e()}function $cef8881cdc69808e$var$getTabbableNodes(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;r.nextNode();)t.push(r.currentNode);return t}var ew=r(89203);let HoverCard=e=>{let{__scopeHoverCard:t,children:r,open:n,defaultOpen:i,onOpenChange:a,openDelay:s=700,closeDelay:l=300}=e,u=eb(t),f=(0,d.useRef)(0),p=(0,d.useRef)(0),g=(0,d.useRef)(!1),m=(0,d.useRef)(!1),[y=!1,v]=(0,eu.T)({prop:n,defaultProp:i,onChange:a}),x=(0,d.useCallback)(()=>{clearTimeout(p.current),f.current=window.setTimeout(()=>v(!0),s)},[s,v]),b=(0,d.useCallback)(()=>{clearTimeout(f.current),g.current||m.current||(p.current=window.setTimeout(()=>v(!1),l))},[l,v]),O=(0,d.useCallback)(()=>v(!1),[v]);return(0,d.useEffect)(()=>()=>{clearTimeout(f.current),clearTimeout(p.current)},[]),(0,d.createElement)(eE,{scope:t,open:y,onOpenChange:v,onOpen:x,onClose:b,onDismiss:O,hasSelectionRef:g,isPointerDownOnContentRef:m},(0,d.createElement)(ef.fC,u,r))},HoverCardPortal=e=>{let{__scopeHoverCard:t,forceMount:r,children:n,container:i}=e,a=eT(eR,t);return(0,d.createElement)(e_,{scope:t,forceMount:r},(0,d.createElement)(ep.z,{present:r||a.open},(0,d.createElement)(eh.h,{asChild:!0,container:i},n)))},eP=(0,ew.B)(eI,"HoverCardArrow"),eN=(0,ew.A)((0,ew.B)(eC,"HoverCardContent"));function withRoot(e){let t=(0,d.forwardRef)((t,r)=>(0,d.createElement)(e,{ref:r,...t,className:(0,en.W)("composer",t.className)}));return t.displayName=e.displayName??"withRoot",t}function useThemeHoverCard(){let e=useTheme();return(0,d.useMemo)(()=>({HoverCard:e.Components?.HoverCard??HoverCard,HoverCardArrow:e.Components?.HoverCardArrow??eP,HoverCardContent:e.Components?.HoverCardContent??withRoot(eN),HoverCardPortal:e.Components?.HoverCardPortal??HoverCardPortal,HoverCardTrigger:e.Components?.HoverCardTrigger??eO}),[e])}let eL=(0,d.memo)(function(e){let{data:t,x:r,y:n,qubit:i}=e,a=useTheme(),{HoverCard:s,HoverCardArrow:u,HoverCardPortal:d,HoverCardTrigger:f,HoverCardContent:p}=useThemeHoverCard(),g=useId(),m=useDelayedTooltipOpen(e.tooltipOpen),y=e.size??a.Operations.singleQubitHeight,v={x:y/2,y:y/2},x=y/2,b=2*x,O=b-b*Math.abs(-((1-t.z)/2)),R=getPurity(t.x,t.y,t.z);return(0,l.jsxs)("g",{"data-testid":`phaseDisk-${i.id}[${i.index}]`,children:[(0,l.jsxs)(Box,{x:r,y:n,children:[(0,l.jsx)("defs",{children:(0,l.jsx)("clipPath",{id:g,children:(0,l.jsx)("circle",{cx:v.x,cy:v.y,r:x})})}),(0,l.jsxs)("g",{children:[(0,l.jsx)("circle",{cx:v.x,cy:v.y,r:x,fill:a.PhaseDisk.bg}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("g",{clipPath:`url(#${g})`,children:[(0,l.jsx)("rect",{x:0,y:O,width:b,height:b-O,fill:a.PhaseDisk.color}),(0,l.jsx)("rect",{x:0,y:0,width:b,height:O,fill:a.PhaseDisk.bg})]}),(0,l.jsx)("circle",{cx:v.x,cy:v.y,r:Math.max(x*R,1)-.75,fill:"none",stroke:a.PhaseDisk.border,strokeWidth:1.5}),(0,l.jsx)("line",{stroke:a.PhaseDisk.border,strokeWidth:2,x1:v.x,y1:v.y,x2:polarToCartesian(-t.phase).x*x+v.x,y2:polarToCartesian(-t.phase).y*x+v.y})]})]})]}),(0,l.jsxs)(s,{closeDelay:0,open:m,children:[(0,l.jsx)(f,{asChild:!0,children:(0,l.jsx)("rect",{width:y,height:y,y:n,x:r,style:{fill:"transparent"}})}),(0,l.jsx)(d,{children:(0,l.jsxs)(p,{sideOffset:5,side:"right",className:"z-50",children:[(0,l.jsx)(PhaseDiskHoverCardContent,{qubit:i,data:t}),(0,l.jsx)(u,{})]})})]})]})});function useDelayedTooltipOpen(e){let t=usePrevious(e),[r,n]=(0,d.useState)(e),i=(0,d.useRef)();return((0,d.useEffect)(()=>(e&&!t?i.current=setTimeout(()=>{n(!0)},700):n(e),()=>{i.current&&clearTimeout(i.current)}),[t,e]),e)?r:e}function PhaseDisksFallback(e){let{x:t,registers:r,registerPositions:n}=e;return(0,l.jsx)(l.Fragment,{children:r.map((e,r)=>{let i=n.get(e);return(0,l.jsx)(PhaseDiskFallback,{x:i.x+t,y:i.y},r)})})}function PhaseDiskFallback(e){let{x:t,y:r}=e,n=useTheme(),i=n.Operations.singleQubitHeight,a={x:i/2,y:i/2};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("circle",{cx:t+a.x,cy:r+a.y,r:i/2-.75,fill:n.PhaseDisk.bg,stroke:n.PhaseDisk.border,strokeWidth:1.5})})}async function getPhaseDiskData(e){let{get_phase_disk_data:t}=await r.e(249).then(r.bind(r,99249));return t(e)}function usePhaseDiskQuery(e){let[t,r]=(0,d.useState)({data:null,error:null});return(0,d.useEffect)(()=>{let t=!1;return async function(){if(r({data:null,error:null}),e)try{let n=await getPhaseDiskData(e);t||r({data:n,error:null})}catch(e){t||r({data:null,error:e})}}(),()=>{t=!0}},[e]),t}function PhaseDisks(e){let{x:t,program:r,registers:n,registerPositions:i,openTooltipIndex:a,stateVector:s}=e,u=(0,d.useMemo)(()=>new m.b(r),[r]),f=usePhaseDiskQuery(s);return(0,l.jsx)(l.Fragment,{children:n.map((e,r)=>{let n=i.get(e),s=u.getRegisterWires(e)[0],d=`phase-disk-wire-${e.id}[${e.index}]`,p=f.data?.[s];return p?(0,l.jsx)(eL,{x:n.x+t,y:n.y,qubit:e,data:p,tooltipOpen:void 0===a?void 0:r===a},d):(0,l.jsx)(PhaseDiskFallback,{x:n.x+t,y:n.y},d)})})}var eM=r(1372),eF=r(3458);r(94850);let eD=Symbol(),ej=Symbol(),eU="undefined"==typeof window||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?d.useEffect:d.useLayoutEffect,eB=eM.unstable_runWithPriority?e=>(0,eM.unstable_runWithPriority)(eM.unstable_NormalPriority,e):e=>e();function E(e){var t;let r=(0,d.createContext)({[eD]:{v:{current:e},n:{current:-1},l:new Set,u:e=>e()}});return r[ej]=r.Provider,r.Provider=(t=r.Provider,({value:e,children:r})=>{let n=(0,d.useRef)(e),i=(0,d.useRef)(0),[a,s]=(0,d.useState)(null);a&&(a(e),s(null));let l=(0,d.useRef)();if(!l.current){let e=new Set;l.current={[eD]:{v:n,n:i,l:e,u:(t,r)=>{(0,eF.unstable_batchedUpdates)(()=>{i.current+=1;let n={n:i.current};null!=r&&r.suspense&&(n.n*=-1,n.p=new Promise(e=>{s(()=>t=>{n.v=t,delete n.p,e(t)})})),e.forEach(e=>e(n)),t()})}}}}return eU(()=>{n.current=e,i.current+=1,eB(()=>{l.current[eD].l.forEach(t=>{t({n:i.current,v:e})})})},[e]),(0,d.createElement)(t,{value:l.current},r)}),delete r.Consumer,r}function h(e,t){let r=(0,d.useContext)(e)[eD],{v:{current:n},n:{current:i},l:a}=r,s=t(n),[l,u]=(0,d.useReducer)((e,r)=>{if(!r)return[n,s];if("p"in r)throw r.p;if(r.n===i)return Object.is(e[1],s)?e:[n,s];try{if("v"in r){if(Object.is(e[0],r.v))return e;let n=t(r.v);return Object.is(e[1],n)?e:[r.v,n]}}catch(e){}return[...e]},[n,s]);return Object.is(l[1],s)||u(),eU(()=>(a.add(u),()=>{a.delete(u)}),[a]),l[1]}let ez=E(null),eW=ez.Provider;function useComposerContextSelector(e){return h(ez,t=>{if(null===t)throw Error("ComposerContextProvider not found");return e(t)})}function useComposerStateSelector(e){return h(ez,t=>{if(null===t)throw Error("ComposerContextProvider not found");return e(t.state)})}function PhaseDiskAnnotation(e){let{operation:t,modifiers:r,registerPositions:n,columnsMode:i}=e,a=useComposerStateSelector(e=>e.hover),s=useComposerStateSelector(e=>e.wireHover),u=useTheme(),f=useComposerStateSelector(e=>e.program),p=useComposerContextSelector(e=>e.stateVectors),g=(0,d.useMemo)(()=>{let e=(0,b.Vn)(f),r=e.findIndex(e=>e.meta.id===t.meta.id);return r>=0?p?.[r]:void 0},[p,f,t.meta.id]),m=(0,d.useMemo)(()=>r.dragging||a[0]!==t.meta.id?-1:s??-1,[a,r.dragging,t.meta.id,s]),y=(0,d.useMemo)(()=>r.dragging||r.floating?[]:(0,x.Oc)(f,i,t.meta.id),[r.dragging,r.floating,f,i,t.meta.id]),v=u.Operations.background(t,void 0,r),O=u.Operations.width(t),R=t.registers.map(e=>n.get(e)),_=u.Operations.singleQubitHeight,A=rectCenter(R[0]).x-O/2;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(l.Fragment,{children:R.map(e=>{let t=e.y+e.height/2;return(0,l.jsxs)(Box,{y:t,x:A+8,children:[(0,l.jsx)("line",{x1:0,y1:-_/2,x2:0,y2:-2,style:{strokeWidth:1,stroke:v}}),(0,l.jsx)("line",{x1:0,y1:2,x2:0,y2:_/2,style:{strokeWidth:1,stroke:v}})]},t)})}),r?.inspect==="not-executed"&&(0,l.jsx)(PhaseDisksFallback,{x:17,registers:t.registers,registerPositions:n}),r?.inspect!=="not-executed"&&(0,l.jsx)(PhaseDisks,{x:17,registers:t.registers,registerPositions:n,program:y,openTooltipIndex:m,stateVector:g})]})}var lodash_es_compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var a=e[t];a&&(i[n++]=a)}return i};let eG=(0,d.memo)(e=>{let{gridsLayout:t,hover:r,theme:n}=e;if(0===r.length)return null;let i=lodash_es_compact(r.map(e=>{let r=t.getOperationCells(e);if(r)return rectUnion(r)}));return(0,l.jsx)("g",{children:i.map(e=>(0,l.jsx)("rect",{x:e.x-2,y:e.y-2,width:e.width+4,height:e.height+4,style:{stroke:n.Selection.hover,fill:"transparent",strokeWidth:1}},`${e.x}_${e.y}`))})});function OperationsSelection(e){let t;let{gridsLayout:r,selection:n}=e,i=useTheme();if(0===n.length)return null;let a=lodash_es_compact(n.map(e=>{let t=r.getOperationCells(e);if(t)return rectUnion(t)}));return a.length>1&&(t=rectUnion(a)),(0,l.jsxs)("g",{children:[t&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("rect",{x:t.x-6,y:t.y-6,width:t.width+12,height:t.height+12,style:{stroke:i.Selection.selectionGroup,fill:"transparent",strokeWidth:1,strokeDasharray:"4"}})}),a.map(e=>(0,l.jsx)("rect",{x:e.x-2,y:e.y-2,width:e.width+4,height:e.height+4,style:{stroke:i.Selection.selection,fill:"transparent",strokeWidth:1}},`${e.x}_${e.y}`))]})}function Text(e){let{dominantBaseline:t,...r}=e;return(0,l.jsx)("text",{...r,dy:"middle"===t?".3em":0})}function BitLabel(e){let{rect:t,theme:r,bit:n}=e,i=e.showBitIndex??!0;return(0,l.jsx)(Text,{x:t.x+t.width,y:t.y,dominantBaseline:"middle",style:{fill:r.RegisterLabels.text,fontFamily:"IBM Plex Mono, monospace",fontWeight:400,textAnchor:"end",fontSize:14},children:(0,l.jsxs)("tspan",{children:[n.id,i&&(0,l.jsxs)(l.Fragment,{children:["[",n.index,"]"]})]})})}function RegisterLabel(e){let{rect:t,theme:r,register:n}=e;return(0,l.jsxs)(Text,{x:t.x+t.width,y:t.y,dominantBaseline:"middle",style:{fill:r.RegisterLabels.text,fontFamily:"IBM Plex Mono, monospace",fontWeight:400,textAnchor:"end",fontSize:14},children:[n.id,n.size]})}function Wire(e){let{x1:t,x2:r,y1:n,y2:i,kind:a,color:s}=e,u={fill:"none",stroke:s,strokeWidth:1,strokeLinecap:"round"};return"quantum"===a?(0,l.jsx)("line",{x1:t,x2:r,y1:n,y2:i,style:u}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("line",{x1:t,x2:r,y1:n-2,y2:i-2,style:u}),(0,l.jsx)("line",{x1:t,x2:r,y1:n+2,y2:i+2,style:u})]})}function CCXGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),a=r.OperationsCatalog.itemHeight,s=r.OperationsCatalog.itemWidth(t),u=s/6.5,d=s<=32?2:3,f={x:s/2,y:a/2};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("circle",{cx:f.x,cy:4+d,r:d,style:{fill:i}}),(0,l.jsx)("circle",{cx:f.x,cy:f.y-(u-d),r:d,style:{fill:i}}),(0,l.jsx)("circle",{cx:f.x,cy:a-4-u,r:u,style:{stroke:i,fill:"none",strokeWidth:1.25}}),(0,l.jsx)("line",{x1:f.x-u,x2:f.x+u,y1:a-4-u,y2:a-4-u,style:{stroke:i,strokeWidth:1.25}}),(0,l.jsx)("line",{x1:f.x,x2:f.x,y1:4,y2:a-4,style:{stroke:i,strokeWidth:1.25}})]})}function CSwapGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),a=r.OperationsCatalog.itemHeight,s=r.OperationsCatalog.itemWidth(t),u={x:s/2,y:a/2},d=s/5,f=s<=32?2:3;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("circle",{cx:u.x,cy:4+f,r:f,style:{fill:i}}),(0,l.jsx)(CrossSymbol,{x:u.x,y:u.y,width:d,color:i}),(0,l.jsx)(CrossSymbol,{x:u.x,y:a-4-d/2,width:d,color:i}),(0,l.jsx)("line",{x1:u.x,x2:u.x,y1:4+d/2,y2:a-4-d/2,style:{stroke:i,strokeWidth:1.5}})]})}function CrossSymbol(e){let{x:t,y:r,width:n,color:i}=e;return(0,l.jsxs)(Box,{y:r,x:t,children:[(0,l.jsx)("line",{x1:-n/2,y1:-n/2,x2:n/2,y2:n/2,style:{strokeWidth:1.5,stroke:i}}),(0,l.jsx)("line",{x1:n/2,y1:-n/2,x2:-n/2,y2:n/2,style:{strokeWidth:1.5,stroke:i}})]})}function CXGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),a=r.OperationsCatalog.itemHeight,s=r.OperationsCatalog.itemWidth(t),u=s/6,d=s<=32?2:4,f={x:s/2};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("circle",{cx:f.x,cy:6+d,r:d,style:{fill:i}}),(0,l.jsx)("circle",{cx:f.x,cy:a-6-u,r:u,style:{stroke:i,fill:"none",strokeWidth:1.25}}),(0,l.jsx)("line",{x1:f.x-u,x2:f.x+u,y1:a-6-u,y2:a-6-u,style:{stroke:i,strokeWidth:1.25}}),(0,l.jsx)("line",{x1:f.x,x2:f.x,y1:6,y2:a-6,style:{stroke:i,strokeWidth:1.25}})]})}function CZGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),a=r.OperationsCatalog.itemHeight,s=r.OperationsCatalog.itemWidth(t),u=s<=32?3:4,d={x:s/2};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("circle",{cx:d.x,cy:4+u,r:u,style:{fill:i}}),(0,l.jsx)("circle",{cx:d.x,cy:a-4-u,r:u,style:{fill:i}}),(0,l.jsx)("line",{x1:d.x,x2:d.x,y1:4,y2:a-4,style:{stroke:i,strokeWidth:"1.5"}})]})}function Dagger(e){return(0,l.jsx)("path",{transform:`translate(${e.gateCx-25.45}, ${e.gateCy-12.675})`,d:"M25.45 12.675V16.125L26 17.125L26.55 16.125V12.675H28V11.575H26.55V10.125H25.45V11.575H24V12.675H25.45Z",fill:e.color})}function DaggerCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemLabel(t.definition),a=r.OperationsCatalog.itemText(t,{disabled:n}),s=r.OperationsCatalog.itemWidth(t),u=r.OperationsCatalog.itemHeight,d={x:s/2,y:u/2};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Dagger,{color:a,gateCy:d.y-6,gateCx:d.x+8}),(0,l.jsx)(Text,{x:s/2,y:u/2,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:a,fontWeight:400,textAnchor:"middle"},children:i})]})}function DefaultGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemLabel(t.definition),a=r.OperationsCatalog.itemText(t,{disabled:n}),s=r.OperationsCatalog.itemWidth(t),u=r.OperationsCatalog.itemHeight;return(0,l.jsx)(Text,{x:s/2,y:u/2,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:a,fontWeight:400,textAnchor:"middle"},children:i})}function NotGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),a=r.OperationsCatalog.itemHeight,s=r.OperationsCatalog.itemWidth(t),u=s/4,d={x:s/2,y:a/2};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("circle",{cx:d.x,cy:d.y,r:u,style:{stroke:i,fill:"none",strokeWidth:1.25}}),(0,l.jsx)("line",{x1:d.x-u,x2:d.x+u,y1:d.y,y2:d.y,style:{stroke:i,strokeWidth:1.25}}),(0,l.jsx)("line",{x1:d.x,x2:d.x,y1:d.y-u,y2:d.y+u,style:{stroke:i,strokeWidth:1.25}})]})}function SwapGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),a=r.OperationsCatalog.itemHeight,s=r.OperationsCatalog.itemWidth(t),u={x:s/2},d=s/5;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(SwapGateCatalogSymbol_CrossSymbol,{x:u.x,y:6+d/2,width:d,color:i}),(0,l.jsx)(SwapGateCatalogSymbol_CrossSymbol,{x:u.x,y:a-6-d/2,width:d,color:i}),(0,l.jsx)("line",{x1:u.x,x2:u.x,y1:6+d/2,y2:a-6-d/2,style:{stroke:i,strokeWidth:1.25}})]})}function SwapGateCatalogSymbol_CrossSymbol(e){let{x:t,y:r,width:n,color:i}=e;return(0,l.jsxs)(Box,{y:r,x:t,children:[(0,l.jsx)("line",{x1:-n/2,y1:-n/2,x2:n/2,y2:n/2,style:{strokeWidth:1.25,stroke:i}}),(0,l.jsx)("line",{x1:n/2,y1:-n/2,x2:-n/2,y2:n/2,style:{strokeWidth:1.25,stroke:i}})]})}function SXGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),a=r.OperationsCatalog.itemHeight,s=r.OperationsCatalog.itemWidth(t);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4344 8H25.5V9.25H13.5656L12.0656 24.25H8.92123L8.42123 17.75H7V16.5H9.57877L10.0788 23H10.9344L12.4344 8Z",fill:i}),(0,l.jsx)(Text,{x:s/2+3,y:a/2+1,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:i,fontWeight:400,textAnchor:"middle"},children:"X"})]})}function SXDGGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),a=r.OperationsCatalog.itemHeight,s=r.OperationsCatalog.itemWidth(t),u={x:s/2,y:a/2};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Dagger,{color:i,gateCy:u.y-4,gateCx:u.x+10}),(0,l.jsx)("path",{d:"M10.4344 8H23.5V9.25H11.5656L10.0656 24.25H6.92123L6.42123 17.75H5V16.5H7.57877L8.07877 23H8.93438L10.4344 8Z",fill:i}),(0,l.jsx)(Text,{x:s/2+2,y:a/2+1,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:i,fontWeight:400,textAnchor:"middle"},children:"X"})]})}function parseBorder(e){let t=e.match(/(\d*\.?\d+)px\s+(solid)\s+([^ ]*)/);if(!t)throw Error("Invalid format");return{width:Number(t[1]),style:t[2],color:t[3]}}function parseBorderOrDefault(e){return e?parseBorder(e):{width:0,style:"solid",color:"transparent"}}function borderToStroke(e){return e?{strokeWidth:2*e.width,stroke:e.color,paintOrder:"stroke"}:{}}function C3XGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),a=r.OperationsCatalog.itemHeight,s=r.OperationsCatalog.itemWidth(t),u=s/7,d=s<=32?2:3,f={x:s/2};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("circle",{cx:f.x,cy:2+d,r:d,style:{fill:i}}),(0,l.jsx)("circle",{cx:f.x,cy:3*d+3,r:d,style:{fill:i}}),(0,l.jsx)("circle",{cx:f.x,cy:5*d+4,r:d,style:{fill:i}}),(0,l.jsx)("circle",{cx:f.x,cy:a-2-u,r:u,style:{stroke:i,fill:"none",strokeWidth:"1.5"}}),(0,l.jsx)("line",{x1:f.x-u,x2:f.x+u,y1:a-2-u,y2:a-2-u,style:{stroke:i,strokeWidth:"1.5"}}),(0,l.jsx)("line",{x1:f.x,x2:f.x,y1:2,y2:a-2,style:{stroke:i,strokeWidth:"1.5"}})]})}function C4XGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),a=r.OperationsCatalog.itemHeight,s=r.OperationsCatalog.itemWidth(t),u=s/8,d={x:s/2};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("circle",{cx:d.x,cy:4,r:2,style:{fill:i}}),(0,l.jsx)("circle",{cx:d.x,cy:9,r:2,style:{fill:i}}),(0,l.jsx)("circle",{cx:d.x,cy:14,r:2,style:{fill:i}}),(0,l.jsx)("circle",{cx:d.x,cy:19,r:2,style:{fill:i}}),(0,l.jsx)("circle",{cx:d.x,cy:a-2-u,r:u,style:{stroke:i,fill:"none",strokeWidth:"1.5"}}),(0,l.jsx)("line",{x1:d.x-u,x2:d.x+u,y1:a-2-u,y2:a-2-u,style:{stroke:i,strokeWidth:"1.5"}}),(0,l.jsx)("line",{x1:d.x,x2:d.x,y1:2,y2:a-2,style:{stroke:i,strokeWidth:"1.5"}})]})}function GateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemBackground(t,{disabled:n}),a=r.OperationsCatalog.itemHeight,s=r.OperationsCatalog.itemWidth(t),u=parseBorderOrDefault(r.OperationsCatalog.border?.(t,{disabled:n})),d=getSymbolComponent(t.definition);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("rect",{...subtractBorder({x:0,y:0,width:s,height:a},u.width),style:{fill:i,...borderToStroke(u)}}),(0,l.jsx)(d,{operation:t,disabled:n,theme:r})]})}function getSymbolComponent(e){if((0,x.aE)(e)||"built-in"===e.location.kind)switch(e.id){case"x":return NotGateCatalogSymbol;case"cx":case"CX":return CXGateCatalogSymbol;case"ccx":return CCXGateCatalogSymbol;case"c3x":return C3XGateCatalogSymbol;case"c4x":return C4XGateCatalogSymbol;case"cz":return CZGateCatalogSymbol;case"swap":return SwapGateCatalogSymbol;case"cswap":return CSwapGateCatalogSymbol;case"sdg":case"tdg":return DaggerCatalogSymbol;case"sx":return SXGateCatalogSymbol;case"sxdg":return SXDGGateCatalogSymbol}return DefaultGateCatalogSymbol}function MeasureCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemBackground(t,{disabled:n}),a=r.OperationsCatalog.itemText(t,{disabled:n}),s=r.OperationsCatalog.itemHeight,u=r.OperationsCatalog.itemWidth(t),d=parseBorderOrDefault(r.OperationsCatalog.border?.(t,{disabled:n}));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("rect",{...subtractBorder({x:0,y:0,width:u,height:s},d.width),style:{fill:i,...borderToStroke(d)}}),(0,l.jsx)("path",{d:"M25.2941 11.584H22.7981L25.2301 8.008V7H21.6141V8H23.9101L21.4861 11.576V12.584H25.2941V11.584ZM15.5662 23.4664C15.5662 24.0836 15.0658 24.584 14.4485 24.584C13.8313 24.584 13.3309 24.0836 13.3309 23.4664C13.3309 22.8621 13.8104 22.3699 14.4096 22.3494L17.1775 17.9208C16.3359 17.5757 15.4144 17.3855 14.4485 17.3855C10.4729 17.3855 7.25 20.6084 7.25 24.584H6C6 19.918 9.78254 16.1355 14.4485 16.1355C15.658 16.1355 16.8081 16.3896 17.8483 16.8474L19.5068 14.1939L20.5668 14.8564L18.9545 17.4361C21.3236 18.9327 22.8971 21.5746 22.8971 24.584H21.6471C21.6471 22.0216 20.3082 19.7719 18.2919 18.4962L15.4698 23.0116C15.5317 23.1505 15.5662 23.3044 15.5662 23.4664Z",fill:a})]})}function ResetCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemBackground(t,{disabled:n}),a=r.OperationsCatalog.itemText(t,{disabled:n}),s=parseBorderOrDefault(r.OperationsCatalog.border?.(t,{disabled:n})),u=r.OperationsCatalog.itemHeight,d=r.OperationsCatalog.itemWidth(t);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("rect",{...subtractBorder({x:0,y:0,width:d,height:u},s.width),style:{fill:i,...borderToStroke(s)}}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.1426 15.7872L20.0075 8.625L21.09 8L25.5847 15.785L21.091 23.6234L20.0065 23.0016L24.1426 15.7872ZM7 23.3125V8.3125H8.25V23.3125H7ZM13.9107 11.7054H15.8036C16.2178 11.7054 16.5536 12.0411 16.5536 12.4554V19.1696C16.5536 19.5839 16.2178 19.9196 15.8036 19.9196H13.9107C13.4965 19.9196 13.1607 19.5839 13.1607 19.1696V12.4554C13.1607 12.0411 13.4965 11.7054 13.9107 11.7054ZM11.9107 12.4554C11.9107 11.3508 12.8061 10.4554 13.9107 10.4554H15.8036C16.9081 10.4554 17.8036 11.3508 17.8036 12.4554V19.1696C17.8036 20.2742 16.9081 21.1696 15.8036 21.1696H13.9107C12.8061 21.1696 11.9107 20.2742 11.9107 19.1696V12.4554Z",fill:a})]})}function BarrierCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemBackground(t,{disabled:n}),a=r.OperationsCatalog.itemText(t,{disabled:n}),s=r.OperationsCatalog.itemHeight,u=r.OperationsCatalog.itemWidth(t),d=parseBorderOrDefault(r.OperationsCatalog.border?.(t,{disabled:n}));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("rect",{...subtractBorder({x:0,y:0,width:u,height:s},d.width),style:{fill:i,...borderToStroke(d)}}),(0,l.jsx)("path",{d:"M15 12V8H16.25V12H15ZM15 18V14H16.25V18H15ZM15 20V24H16.25V20H15Z",fill:a})]})}function ControlCatalogSymbol(e){let{theme:t,disabled:r}=e,n={kind:"control"},i=t.OperationsCatalog.itemBackground(n,{disabled:r}),a=t.OperationsCatalog.itemText(n,{disabled:r}),s=t.OperationsCatalog.itemHeight,u=t.OperationsCatalog.itemWidth(n),d=parseBorderOrDefault(t.OperationsCatalog.border?.(n,{disabled:r})),f={x:u/2,y:s/2};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("rect",{...subtractBorder({x:0,y:0,width:u,height:s},d.width),style:{fill:i,...borderToStroke(d)}}),(0,l.jsx)("circle",{cx:f.x,cy:f.y,r:5,style:{fill:a}})]})}function ConditionalCatalogSymbol(e){let{theme:t,disabled:r}=e,n={kind:"conditional"},i=t.OperationsCatalog.itemBackground(n,{disabled:r}),a=t.OperationsCatalog.itemText(n,{disabled:r}),s=t.OperationsCatalog.itemHeight,u=t.OperationsCatalog.itemWidth(n),d=parseBorderOrDefault(t.OperationsCatalog.border?.(n,{disabled:r})),f={x:u/2,y:s/2};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("rect",{...subtractBorder({x:0,y:0,width:u,height:s},d.width),style:{fill:i,...borderToStroke(d)}}),(0,l.jsx)(Text,{x:f.x,y:f.y,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:a,fontWeight:400,textAnchor:"middle"},children:"if"})]})}function PhaseDiskAnnotationCatalogSymbol(e){let{theme:t}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(eL,{x:0,y:0,data:{x:1,y:0,z:0,phase:Math.PI/2,norm:0},tooltipOpen:!1,qubit:{id:"q",index:0},size:t.OperationsCatalog.itemHeight})})}function CatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e;switch(t.kind){case"gate":return(0,l.jsx)(GateCatalogSymbol,{operation:t,theme:r,disabled:n});case"measure":return(0,l.jsx)(MeasureCatalogSymbol,{operation:t,theme:r,disabled:n});case"reset":return(0,l.jsx)(ResetCatalogSymbol,{operation:t,theme:r,disabled:n});case"barrier":return(0,l.jsx)(BarrierCatalogSymbol,{operation:t,theme:r,disabled:n});case"control":return(0,l.jsx)(ControlCatalogSymbol,{theme:r,disabled:n});case"conditional":return(0,l.jsx)(ConditionalCatalogSymbol,{theme:r,disabled:n});case"phaseDiskAnnotation":return(0,l.jsx)(PhaseDiskAnnotationCatalogSymbol,{operation:t,theme:r,disabled:n})}}function PlusCircle(e){let{bg:t,color:r,size:n,border:i,plusPadding:a=n/2}=e;return(0,l.jsxs)("g",{children:[(0,l.jsx)("circle",{cx:0,cy:0,r:n,style:{fill:t,...borderToStroke(i)}}),(0,l.jsx)("line",{x1:0,y1:-n+a,x2:0,y2:n-a,style:{strokeWidth:1.25,stroke:r}}),(0,l.jsx)("line",{x1:n-a,y1:0,x2:-n+a,y2:0,style:{strokeWidth:1.25,stroke:r}})]})}function GateNot(e){let{theme:t,operation:r,registerPositions:n,modifiers:i,definition:a}=e,s=r.registers.map(e=>n.get(e)),u=t.Operations.singleQubitHeight,d=t.Operations.background(r,a,i),f=t.Operations.text(r,i),p=parseBorderOrDefault(t.Operations.border?.(r,i)),g=rectCenter(s[0]).x,m=u/2-p.width;return(0,l.jsx)(Box,{y:rectCenter(s[0]).y,x:g,children:(0,l.jsx)(PlusCircle,{bg:d,color:f,size:m,border:p})})}function GateDefault(e){let{theme:t,operation:r,registerPositions:n,modifiers:i,definition:a}=e,s=t.Operations.background(r,a,i),u=t.Operations.text(r,i),d=t.Operations.width(r),f=parseBorderOrDefault(t.Operations.border?.(r,i)),p=r.registers.map(e=>n.get(e)),g=p.map(e=>rectCenter(e).y),m=(0,y.Z)(g)-(0,j.Z)(g)+t.Operations.singleQubitHeight,v=rectCenter(p[0]).x-d/2,x=(0,j.Z)(g)-t.Operations.singleQubitHeight/2,b=r.arguments.length>0,O=a.parameters.filter(e=>"quantum"===e.type);return(0,l.jsxs)(Box,{children:[(0,l.jsx)("rect",{...subtractBorder({x:v,y:x,width:d,height:m},f.width),style:{fill:s,...borderToStroke(f)}}),(0,l.jsx)(Text,{x:v+d/2,y:b?x+m/2-3:x+m/2,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:u,fontWeight:400,textAnchor:"middle"},children:t.Operations.label(r)}),b&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(Text,{x:v+d/2,y:x+m/2+10,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Mono, monospace",fontSize:8,fontStyle:"normal",fill:u,fontWeight:400,textAnchor:"middle"},children:["(",r.arguments.map(e=>e.expression).join(", "),")"]})}),p.length>1&&p.map((e,t)=>(0,l.jsx)(Text,{x:v+4,y:rectCenter(e).y,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Mono, monospace",fontSize:8,fontStyle:"normal",fill:u,fontWeight:400},children:O[t].id},e.y))]})}function GateSwap(e){let{theme:t,operation:r,registerPositions:n,modifiers:i,definition:a}=e,s=r.registers.map(e=>n.get(e)),u=t.Operations.background(r,a,i),d=parseBorderOrDefault(t.Operations.border?.(r,i)),f=d.width>0?d.color:u,p=rectCenter(s[0]).x,g=s.map(e=>rectCenter(e).y);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("line",{x1:p,y1:g[0],x2:p,y2:g[1],style:{strokeWidth:1,stroke:f}}),(0,l.jsxs)(Box,{y:g[0],x:p,children:[(0,l.jsx)("line",{x1:-8,y1:-8,x2:8,y2:8,style:{strokeWidth:1,stroke:f}}),(0,l.jsx)("line",{x1:8,y1:-8,x2:-8,y2:8,style:{strokeWidth:1,stroke:f}})]}),(0,l.jsxs)(Box,{y:g[1],x:p,children:[(0,l.jsx)("line",{x1:-8,y1:-8,x2:8,y2:8,style:{strokeWidth:1,stroke:f}}),(0,l.jsx)("line",{x1:8,y1:-8,x2:-8,y2:8,style:{strokeWidth:1,stroke:f}})]})]})}function GateTdg(e){let{theme:t,operation:r,registerPositions:n,modifiers:i}=e,a=t.Operations.text(r,i),s=r.registers.map(e=>n.get(e)),u=rectCenter(s[0]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(GateDefault,{...e}),(0,l.jsx)(Dagger,{color:a,gateCy:u.y-6,gateCx:u.x+7})]})}function GateSdg(e){let{theme:t,operation:r,registerPositions:n,modifiers:i}=e,a=r.registers.map(e=>n.get(e)),s=t.Operations.text(r,i),u=rectCenter(a[0]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(GateDefault,{...e}),(0,l.jsx)(Dagger,{color:s,gateCy:u.y-6,gateCx:u.x+6})]})}function GateSx(e){let{theme:t,operation:r,registerPositions:n,modifiers:i,definition:a}=e,s=r.registers.map(e=>n.get(e)),u=t.Operations.width(r),d=t.Operations.singleQubitHeight,f=rectCenter(s[0]).y-d/2,p=t.Operations.background(r,a,i),g=t.Operations.text(r,i),m=parseBorderOrDefault(t.Operations.border?.(r,i)),y=rectCenter(s[0]).x-u/2;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(Box,{y:f,x:y,children:[(0,l.jsx)("rect",{...subtractBorder({x:0,y:0,width:u,height:d},m.width),style:{fill:p,...borderToStroke(m)}}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4344 8H25.5V9.25H13.5656L12.0656 24.25H8.92123L8.42123 17.75H7V16.5H9.57877L10.0788 23H10.9344L12.4344 8Z",fill:g}),(0,l.jsx)(Text,{x:u/2+3,y:d/2+1,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:g,fontWeight:400,textAnchor:"middle"},children:"X"})]})})}function GateSxdg(e){let{theme:t,operation:r,registerPositions:n,modifiers:i,definition:a}=e,s=r.registers.map(e=>n.get(e)),u=t.Operations.width(r),d=t.Operations.singleQubitHeight,f=rectCenter(s[0]).y-d/2,p=t.Operations.background(r,a,i),g=t.Operations.text(r,i),m=parseBorderOrDefault(t.Operations.border?.(r,i)),y=rectCenter(s[0]).x-u/2;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(Box,{y:f,x:y,children:[(0,l.jsx)("rect",{...subtractBorder({x:0,y:0,width:u,height:d},m.width),style:{fill:p,...borderToStroke(m)}}),(0,l.jsx)(Dagger,{color:g,gateCy:u/2-4,gateCx:d/2+10}),(0,l.jsx)("path",{d:"M10.4344 8H23.5V9.25H11.5656L10.0656 24.25H6.92123L6.42123 17.75H5V16.5H7.57877L8.07877 23H8.93438L10.4344 8Z",fill:g}),(0,l.jsx)(Text,{x:u/2+2,y:d/2+1,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:g,fontWeight:400,textAnchor:"middle"},children:"X"})]})})}function GateRzz(e){let{theme:t,operation:r,registerPositions:n,modifiers:i,definition:a}=e,s=r.registers.map(e=>n.get(e)),u=t.Operations.width(r),d=t.Operations.background(r,a,i),f=t.Operations.text(r,i),p=parseBorderOrDefault(t.Operations.border?.(r,i)),g=p.width>0?p.color:d,m=s.map(e=>rectCenter(e).y),v=(0,j.Z)(m)-t.Operations.singleQubitHeight/2,x=(0,y.Z)(m)-(0,j.Z)(m)+t.Operations.singleQubitHeight,b=rectCenter(s[0]).x-u/2,O=b+10,R=O+8+10+(u-8-30)/2;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(Box,{x:O,children:[(0,l.jsx)("line",{x1:0,y1:m[0],x2:0,y2:m[1],style:{strokeWidth:1,stroke:g}}),(0,l.jsx)("circle",{r:4,style:{fill:g},cx:0,cy:m[0]}),(0,l.jsx)("circle",{r:4,style:{fill:g},cx:0,cy:m[1]})]}),(0,l.jsx)(Text,{x:R,y:v+x/2-3,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:f,fontWeight:400,textAnchor:"middle"},children:t.Operations.label(r)}),(0,l.jsxs)(Text,{x:R,y:v+x/2+10,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Mono, monospace",fontSize:8,fontStyle:"normal",fill:f,fontWeight:400,textAnchor:"middle"},children:["(",r.arguments.map(e=>e.expression).join(", "),")"]})]})}function Controls(e){let{theme:t,operation:r,controlRegisters:n,registerPositions:i,modifiers:a,definition:s}=e,u=t.Operations.background(r,s,a),d=parseBorderOrDefault(t.Operations.border?.(r,a)),f=d.width>0?d.color:u,p=r.registers.map(e=>i.get(e)),g=n.map(e=>i.get(e)),m=rectCenter(p[0]).x,v=p.map(e=>rectCenter(e).y);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("line",{x1:m,y1:(0,j.Z)(v),x2:m,y2:(0,y.Z)(v),style:{strokeWidth:1,stroke:f}}),g.map((e,t)=>(0,l.jsx)("circle",{r:4,cx:m,cy:rectCenter(e).y,style:{fill:f}},`${e.y}_${t}`))]})}function GateCz(e){let{theme:t,operation:r,registerPositions:n,modifiers:i,definition:a}=e,s=r.registers.map(e=>n.get(e)),u=t.Operations.background(r,a,i),d=parseBorderOrDefault(t.Operations.border?.(r,i)),f=d.width>0?d.color:u,p=rectCenter(s[0]).x;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(Box,{x:p,children:[(0,l.jsx)("line",{x1:0,y1:rectCenter(s[0]).y,x2:0,y2:rectCenter(s[1]).y,style:{strokeWidth:1,stroke:f}}),(0,l.jsx)("circle",{r:4,style:{fill:f},cx:0,cy:rectCenter(s[0]).y}),(0,l.jsx)("circle",{r:4,style:{fill:f},cx:0,cy:rectCenter(s[1]).y})]})})}eG.displayName="OperationsHover";var eH=r(73021),lodash_es_initial=function(e){return(null==e?0:e.length)?(0,eH.Z)(e,0,-1):[]},lodash_es_takeRight=function(e,t,r){var n=null==e?0:e.length;return n?(t=n-(t=r||void 0===t?1:(0,M.Z)(t)),(0,eH.Z)(e,t<0?0:t,n)):[]},lodash_es_tail=function(e){var t=null==e?0:e.length;return t?(0,eH.Z)(e,1,t):[]};let RegisterPositions=class RegisterPositions{constructor(e,t){if(this.registers=e,this.positions=t,e.length!==t.length)throw Error("Registers and positions must have the same length")}get(e){let t=this.registers.findIndex(t=>t.id===e.id&&t.index===(e.index??0));return this.positions[t]}getAll(e){let t=[];for(let[r,n]of this.registers.entries())n.id===e.id&&(void 0===e.index?t.push(this.positions[r]):e.index===n.index&&t.push(this.positions[r]));return t}};var eZ=r(36355),eV=r(29120);function buildModifiers(e){return{floating:!1,dragging:!1,inspect:void 0,expandDefinition:!1,disabled:!1,...e}}function GateExpandDefinition(e){let{theme:t,operation:r,registerPositions:n,definition:i,modifiers:a}=e,s=new m.b(e.program),u=t.Operations.background(r,i,a),f=t.Operations.text(r,a),p="left",v=(0,d.useMemo)(()=>(0,x.ck)(e.program,p,r)??[],[e.program,r]),b=(0,d.useMemo)(()=>(0,g.n)(v,p),[v,p]),O=(0,d.useMemo)(()=>new m.b(v),[v]),R=r.id,_=(0,eV.X)(R,"IBM Plex Sans",14),A=_+8,C=(0,d.useMemo)(()=>buildSingleGridOperationsLayout({program:v,operationsByColumns:b,theme:t,groupClassicalRegisters:!0,expandDefinitionNodeIds:[]}),[v,b,t,!0]),k=O.wires().map(e=>O.getRegisterAccessAtWire(e)),P=r.registers.map(e=>n.get(e)),N=P.map(e=>rectCenter(e).y),L=C.width+16+4,M=rectCenter(P[0]).x-L/2,F=(0,j.Z)(N)-t.Operations.singleQubitHeight/2,D=(0,y.Z)(N)-(0,j.Z)(N)+t.Operations.singleQubitHeight,B=(0,eZ.Z)(r.registers,e=>(0,j.Z)(s.getRegisterWires(e)));return(0,l.jsxs)(Box,{y:0,x:M,children:[(0,l.jsx)(Box,{x:20,children:C.columns.map((e,t)=>{let r=O.wires().map(t=>{let r=wireToCell(C.rows,e,t);return r.y=n.get(B[t]).y,r}),i=new RegisterPositions(k,r);return e.operations.map((e,r)=>(0,l.jsx)(Operation,{operation:e,definition:(0,x.ZN)(v,e),registerPositions:i,modifiers:buildModifiers(),program:v,columnsMode:p},`${t}_${r}_${e.kind}`))})}),(0,l.jsx)("rect",{x:-2,y:F-2,width:L+4,height:D+4,style:{stroke:u,fill:"transparent"}}),(0,l.jsx)(Box,{x:-2,y:F-2,children:(0,l.jsxs)("g",{transform:`translate(0, ${A}) rotate(-90)`,children:[(0,l.jsx)("rect",{x:0,y:0,width:A,height:16,style:{fill:u}}),(0,l.jsx)(Text,{x:4,y:8,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:14,fontStyle:"normal",fill:f,fontWeight:400,textAnchor:"start"},children:R})]})})]})}function wireToCell(e,t,r){let n=e[r];return{x:t.x,y:n.y,width:t.width,height:n.height}}function Gate(e){let{operation:t,theme:r,registerPositions:n,modifiers:i,definition:a}=e;if(i.expandDefinition)return(0,l.jsx)(GateExpandDefinition,{...e});switch(t.id){case"x":return(0,l.jsx)(GateNot,{...e});case"swap":return(0,l.jsx)(GateSwap,{...e});case"tdg":return(0,l.jsx)(GateTdg,{...e});case"sdg":return(0,l.jsx)(GateSdg,{...e});case"sx":return(0,l.jsx)(GateSx,{...e});case"sxdg":return(0,l.jsx)(GateSxdg,{...e});case"rzz":return(0,l.jsx)(GateRzz,{...e});case"cz":return(0,l.jsx)(GateCz,{...e});case"ch":case"cy":case"crx":case"cry":case"crz":case"cu1":case"cp":case"cu3":case"cu":return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Controls,{theme:e.theme,operation:e.operation,controlRegisters:lodash_es_initial(e.operation.registers),registerPositions:n,modifiers:i,definition:a}),(0,l.jsx)(GateDefault,{...e,operation:{...t,registers:lodash_es_takeRight(t.registers,1)}})]});case"cx":case"CX":case"ccx":case"c3x":case"c4x":return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Controls,{theme:r,operation:t,controlRegisters:lodash_es_initial(t.registers),registerPositions:n,modifiers:i,definition:a}),(0,l.jsx)(GateNot,{...e,operation:{...t,registers:lodash_es_takeRight(t.registers,1)}})]});case"csx":return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Controls,{theme:r,operation:t,controlRegisters:lodash_es_initial(t.registers),registerPositions:n,modifiers:i,definition:a}),(0,l.jsx)(GateSx,{...e,operation:{...t,registers:lodash_es_takeRight(t.registers,1)}})]});case"cswap":var s,u;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Controls,{theme:r,operation:t,controlRegisters:(s=t.registers,u=1,s&&s.length?(u=void 0===u?1:(0,M.Z)(u),(0,eH.Z)(s,0,u<0?0:u)):[]),registerPositions:n,modifiers:i,definition:a}),(0,l.jsx)(GateSwap,{...e,operation:{...t,registers:lodash_es_tail(t.registers)}}),";"]});default:return(0,l.jsx)(GateDefault,{...e})}}function Reset(e){let{theme:t,operation:r,registerPositions:n,modifiers:i}=e,a=r.registers.map(e=>n.get(e)),s=a.map(e=>rectCenter(e).y),u=t.Operations.width(r),d=(0,y.Z)(s)-(0,j.Z)(s)+t.Operations.singleQubitHeight,f=(0,j.Z)(s)-t.Operations.singleQubitHeight/2,p=t.Operations.background(r,void 0,i),g=t.Operations.text(r,i),m=parseBorderOrDefault(t.Operations.border?.(r,i)),v=rectCenter(a[0]).x-u/2;return(0,l.jsxs)(Box,{y:f,x:v,children:[(0,l.jsx)("rect",{...subtractBorder({x:0,y:0,width:u,height:d},m.width),style:{fill:p,...borderToStroke(m)}}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.1426 15.7872L20.0075 8.625L21.09 8L25.5847 15.785L21.091 23.6234L20.0065 23.0016L24.1426 15.7872ZM7 23.3125V8.3125H8.25V23.3125H7ZM13.9107 11.7054H15.8036C16.2178 11.7054 16.5536 12.0411 16.5536 12.4554V19.1696C16.5536 19.5839 16.2178 19.9196 15.8036 19.9196H13.9107C13.4965 19.9196 13.1607 19.5839 13.1607 19.1696V12.4554C13.1607 12.0411 13.4965 11.7054 13.9107 11.7054ZM11.9107 12.4554C11.9107 11.3508 12.8061 10.4554 13.9107 10.4554H15.8036C16.9081 10.4554 17.8036 11.3508 17.8036 12.4554V19.1696C17.8036 20.2742 16.9081 21.1696 15.8036 21.1696H13.9107C12.8061 21.1696 11.9107 20.2742 11.9107 19.1696V12.4554Z",fill:g})]})}function Measure(e){let{theme:t,operation:r,registerPositions:n,modifiers:i}=e,a=t.Operations.width(r),s=t.Operations.singleQubitHeight,u=[r.from,r.to].map(e=>n.get(e)),d=u.map(e=>rectCenter(e).y),f=d[0]-s/2,p=t.Operations.background(r,void 0,i),g=t.Operations.text(r,i),m=parseBorderOrDefault(t.Operations.border?.(r,i)),y=rectCenter(u[0]).x-a/2;return(0,l.jsxs)(Box,{x:y,children:[(0,l.jsx)("line",{x1:a/2,y1:d[0],x2:a/2,y2:d[1],style:{strokeWidth:1.5,stroke:t.Operations.qubitToBitWireColor,strokeDasharray:3}}),(0,l.jsx)(Box,{y:d[1]+2,x:a/2,children:(0,l.jsx)("path",{d:"M0,0 L8,0 L4,8 z",fill:t.Operations.qubitToBitWireColor,transform:"translate(-4, -8)"})}),(0,l.jsx)(Text,{x:a/2+8,y:d[1]-12,dy:".25em",dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:12,fill:t.Operations.qubitToBitWireText,fontWeight:700,textAnchor:"middle"},children:r.to.index}),(0,l.jsxs)(Box,{y:f,children:[(0,l.jsx)("rect",{...subtractBorder({x:0,y:0,width:a,height:s},m.width),style:{fill:p,...borderToStroke(m)}}),(0,l.jsx)("path",{d:"M25.2941 11.584H22.7981L25.2301 8.008V7H21.6141V8H23.9101L21.4861 11.576V12.584H25.2941V11.584ZM15.5662 23.4664C15.5662 24.0836 15.0658 24.584 14.4485 24.584C13.8313 24.584 13.3309 24.0836 13.3309 23.4664C13.3309 22.8621 13.8104 22.3699 14.4096 22.3494L17.1775 17.9208C16.3359 17.5757 15.4144 17.3855 14.4485 17.3855C10.4729 17.3855 7.25 20.6084 7.25 24.584H6C6 19.918 9.78254 16.1355 14.4485 16.1355C15.658 16.1355 16.8081 16.3896 17.8483 16.8474L19.5068 14.1939L20.5668 14.8564L18.9545 17.4361C21.3236 18.9327 22.8971 21.5746 22.8971 24.584H21.6471C21.6471 22.0216 20.3082 19.7719 18.2919 18.4962L15.4698 23.0116C15.5317 23.1505 15.5662 23.3044 15.5662 23.4664Z",fill:g})]})]})}var eq=r(90154);function If(e){let t;let{theme:r,operation:n,registerPositions:i,modifiers:a,definition:s,program:u}=e,{Gate:d,Reset:f,Measure:p}=useThemeOperations(),g=r.Operations.width(n),m=n.operation;"gate"===m.kind?t=(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(d,{operation:m,definition:s,theme:r,registerPositions:i,modifiers:a,program:u})}):"reset"===m.kind?t=(0,l.jsx)(f,{operation:m,theme:r,registerPositions:i,modifiers:a}):"measure"===m.kind&&(t=(0,l.jsx)(p,{operation:m,theme:r,registerPositions:i,modifiers:a}));let v=(0,eq.ap)(n.operation).map(e=>i.get(e)),x=rectCenter(v[0]).x-g/2,b=v.map(e=>e.y),O=i.getAll(n.condition.register).map(e=>rectCenter(e).y);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(Box,{x,children:[(0,l.jsx)("line",{x1:g/2,y1:(0,y.Z)(b),x2:g/2,y2:(0,y.Z)(O),style:{strokeWidth:1.5,stroke:r.Operations.qubitToBitWireColor}}),O.map((e,t)=>(0,l.jsx)("circle",{cx:g/2,cy:e,r:3,style:{stroke:r.Operations.qubitToBitWireColor,fill:r.Operations.qubitToBitWireColor}},`${e}_${t}`)),(0,l.jsxs)(Text,{x:g/2,y:(0,y.Z)(O)+12,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:12,fill:r.Operations.qubitToBitWireText,fontWeight:700,textAnchor:"middle"},children:[n.condition.operator," ",n.condition.value]})]}),t]})}function Barrier(e){let{theme:t,operation:r,registerPositions:n,modifiers:i}=e,a=t.Operations.background(r,void 0,i),s=t.Operations.singleQubitHeight,u=r.registers.map(e=>n.get(e)),d=rectCenter(u[0]).x;return(0,l.jsx)(l.Fragment,{children:u.map(e=>{let t=e.y+e.height/2;return(0,l.jsxs)(Box,{y:t,x:d,children:[(0,l.jsx)("line",{x1:0,y1:-s/2,x2:0,y2:-2,style:{strokeWidth:1,stroke:a}}),(0,l.jsx)("line",{x1:0,y1:2,x2:0,y2:s/2,style:{strokeWidth:1,stroke:a}})]},t)})})}let eK=(0,d.forwardRef)((e,t)=>{let{points:r,...n}=e;return(0,l.jsx)("polygon",{ref:t,points:r.map(e=>`${e.x},${e.y}`).join(" "),...n})});function GridContinuations(e){let{grids:t,gridIndex:r,wiresLayout:n}=e,i=useTheme(),a=t[r],s=r<t.length-1;return(0,l.jsxs)(l.Fragment,{children:[r>0&&(0,l.jsx)(l.Fragment,{children:a.rows.map((e,t)=>{let r=e.y+e.height/2,a=n.x-5,s=[{x:a,y:r-5},{x:a,y:r+5},{x:a+5,y:r}];return(0,l.jsx)(eK,{points:s,style:{fill:i.Wires.color}},t)})}),s&&(0,l.jsx)(l.Fragment,{children:a.rows.map((e,t)=>{let r=e.y+e.height/2,a=n.x+n.width,s=[{x:a,y:r-5},{x:a,y:r+5},{x:a+5,y:r}];return(0,l.jsx)(eK,{points:s,style:{fill:i.Wires.color}},t)})})]})}eK.displayName="Polygon";var e$=r(64130);let eY=(0,d.memo)(e=>{let{grids:t,gridIndex:r,operationsByLayersAndColumns:n,wiresLayout:i}=e,a=useTheme(),s=t[r],u=getVisibleLayersColumnsIndex({grids:t,gridIndex:r,operationsByLayersAndColumns:n});return(0,l.jsx)(l.Fragment,{children:u.map((e,t)=>{let r=s.columns[e.startColumnIndex],n=s.columns[e.endColumnIndex],u=lodash_es_head(s.rows),d=(0,v.Z)(s.rows),f=e.startOpen?i.x:r.x-a.Operations.gapX/2,p=e.endOpen?i.x+i.width:n.x+n.width+a.Operations.gapX/2,g=u.y,m=d.y+d.height,y=s.columns.length-1===e.endColumnIndex;return(0,l.jsxs)("g",{children:[!e.startOpen&&(0,l.jsx)("line",{x1:f,x2:f,y1:g,y2:m,style:{fill:"none",stroke:a.Wires.color,strokeWidth:1,strokeLinecap:"round"}}),!(e.endOpen||!y)&&(0,l.jsx)("line",{x1:p,x2:p,y1:g,y2:m,style:{fill:"none",stroke:a.Wires.color,strokeWidth:1,strokeLinecap:"round"}})]},t)})})});function getVisibleLayersColumnsIndex(e){var t;let{grids:r,gridIndex:n,operationsByLayersAndColumns:i}=e,a=r[n],s=(t=r.slice(0,n))&&t.length?(0,e$.Z)(t,(0,R.Z)(e=>e.columns.length,2)):0,l=s+a.columns.length-1,u=[],d=0;for(let e of i)u.push({startColumnOffset:d,endColumnOffset:d+e.length-1}),d+=e.length;let f=[];for(let e of u){if(e.startColumnOffset>l)break;if(e.startColumnOffset<=l&&e.endColumnOffset>=s){let t=e.startColumnOffset<s,r=e.endColumnOffset>l,n=(0,y.Z)([e.startColumnOffset,s]),i=(0,j.Z)([e.endColumnOffset,l]);f.push({startOpen:t,endOpen:r,startColumnIndex:n-s,endColumnIndex:i-s})}}return f}function useThemeOperations(){let e=useTheme();return(0,d.useMemo)(()=>({OperationsHover:e.Components?.OperationsHover??eG,OperationsSelection:e.Components?.OperationsSelection??OperationsSelection,GridContinuations:e.Components?.GridContinuations??GridContinuations,Layers:e.Components?.Layers??eY,BitLabel:e.Components?.BitLabel??BitLabel,RegisterLabel:e.Components?.RegisterLabel??RegisterLabel,Wire:e.Components?.Wire??Wire,CatalogSymbol:e.Components?.CatalogSymbol??CatalogSymbol,Gate:e.Components?.Gate??Gate,Reset:e.Components?.Reset??Reset,Measure:e.Components?.Measure??Measure,If:e.Components?.If??If,Barrier:e.Components?.Barrier??Barrier}),[e])}function Operation(e){let{operation:t,registerPositions:r,modifiers:n,definition:i,program:a,columnsMode:s}=e,u=useTheme(),{Gate:d,Reset:f,Barrier:p,If:g,Measure:m}=useThemeOperations();switch(t.kind){case"gate":return(0,l.jsx)(d,{operation:t,definition:i,theme:u,registerPositions:r,modifiers:n,program:a});case"reset":return(0,l.jsx)(f,{operation:t,theme:u,registerPositions:r,modifiers:n});case"measure":return(0,l.jsx)(m,{operation:t,theme:u,registerPositions:r,modifiers:n});case"if":return(0,l.jsx)(g,{operation:t,definition:i,theme:u,registerPositions:r,modifiers:n,program:a});case"barrier":return(0,l.jsx)(p,{operation:t,theme:u,registerPositions:r,modifiers:n});case"annotation":if("phaseDisk"===t.id)return(0,l.jsx)(PhaseDiskAnnotation,{operation:t,registerPositions:r,modifiers:n,columnsMode:s})}return null}eY.displayName="Layers";let eX=(0,d.memo)(function(e){let{grid:t,wires:r,movingNodeIds:n,program:i,mode:a,inspectingNodeId:s,addingNodes:u,addingModifier:f,columnsMode:p,expandDefinitionNodeIds:g,floating:m}=e,y=r.wires().map(e=>r.getRegisterAccessAtWire(e)),v=(0,d.useMemo)(()=>{if(m){let e=buildModifiers({floating:!0});return()=>e}if("edit"===a){if(f)return e=>(0,x.Fl)(f,i,e)?buildModifiers():buildModifiers({disabled:!0});let e=new Set(n??[]),t=new Set(u?.map(e=>e.meta.id)??[]),r=new Set(g);return n=>{let i=t.has(n.meta.id)||e.has(n.meta.id),a=r.has(n.meta.id);return i?buildModifiers({dragging:!0}):a?buildModifiers({expandDefinition:!0}):buildModifiers()}}if("inspect"===a){let e=new Map;for(let[t,r]of(0,x.T9)(i,p).entries())e.set(r.meta.id,t);return t=>{if(!s)return buildModifiers({inspect:"not-executed"});let r=e.get(s),n=e.get(t.meta.id);return void 0===r||void 0===n?buildModifiers({inspect:"not-executed"}):r===n?buildModifiers({inspect:"executing"}):r>n?buildModifiers({inspect:"executed"}):buildModifiers({inspect:"not-executed"})}}{let e=buildModifiers();return()=>e}},[m,a,f,n,u,g,i,p,s]);return(0,l.jsx)(l.Fragment,{children:t.columns.map((e,n)=>{let a=r.wires().map(r=>Operations_wireToCell(t.rows,e,r)),s=new RegisterPositions(y,a);return e.operations.map((e,t)=>(0,l.jsx)(Operation,{operation:e,definition:(0,x.ZN)(i,e),registerPositions:s,modifiers:v(e),program:i,columnsMode:p},`${n}_${t}_${e.kind}`))})})});function Operations_wireToCell(e,t,r){let n=e[r];return{x:t.x,y:n.y,width:t.width,height:n.height}}var eQ=r(63939);let eJ=(0,d.memo)(e=>{let{rows:t,registers:r,groupClassicalRegisters:n,x:i,width:a}=e,s=useTheme(),{Wire:u}=useThemeOperations(),d=r.filter(e=>"quantum"===e.type).flatMap(e=>(0,eQ.Z)(e.size).map(t=>({id:e.id,index:t}))),f=r.filter(e=>"classical"===e.type),p=f.flatMap(e=>(0,eQ.Z)(e.size).map(t=>({id:e.id,index:t}))),g=n?f.map(e=>({id:e.id,size:e.size})):p.map(e=>({id:`${e.id}_${e.index}`,size:1})),m=0,y=i+a;return(0,l.jsxs)("g",{children:[(0,l.jsx)("g",{children:d.map((e,r)=>{let n=t[m++],a=n.y+n.height/2;return(0,l.jsx)(u,{x1:i,x2:y,y1:a,y2:a,color:s.Wires.color,kind:"quantum"},`${e.id}_${r}`)})}),g.map(e=>{let r=t[m];m+=e.size;let n=r.y+r.height/2;return(0,l.jsx)(u,{x1:i,x2:y,y1:n,y2:n,color:s.Wires.color,kind:"classical"},e.id)})]})});function normalizePadding(e){if("number"==typeof e||(0,L.Z)(e)&&"[object Number]"==(0,P.Z)(e))return{top:e,right:e,bottom:e,left:e};if(2===e.length){let[t,r]=e;return{top:t,right:r,bottom:t,left:r}}let[t,r,n,i]=e;return{top:t,right:r,bottom:n,left:i}}function addPaddingX(e,t){let{left:r,right:n}=normalizePadding(t);return e+r+n}function addPaddingY(e,t){let{top:r,bottom:n}=normalizePadding(t);return e+r+n}function subtractPaddingX(e,t){let{left:r,right:n}=normalizePadding(t);return e-r-n}function RegisterLabels(e){let{registers:t,rows:r,width:n,groupClassicalRegisters:i,showBitIndex:a}=e,s=useTheme(),{BitLabel:u,RegisterLabel:d}=useThemeOperations(),f=t.filter(e=>"quantum"===e.type).flatMap(e=>(0,eQ.Z)(e.size).map(t=>({id:e.id,index:t,type:"quantum"}))),p=t.filter(e=>"classical"===e.type),g=p.flatMap(e=>(0,eQ.Z)(e.size).map(t=>({id:e.id,index:t,type:"classical"}))),m=normalizePadding(s.RegisterLabels.padding),y=0,v={x:0,y:0,width:n-m.right,height:s.Operations.singleQubitHeight};return(0,l.jsxs)("g",{children:[(0,l.jsx)("g",{children:f.map(e=>{let t=r[y++],n=t.y+t.height/2;return(0,l.jsx)(u,{rect:{...v,y:n},theme:s,bit:e,showBitIndex:a},`${e.id}_${e.index}`)})}),(0,l.jsxs)("g",{children:[i&&p.map(e=>{let t=r[y];y+=e.size;let n=t.y+t.height/2;return(0,l.jsx)(d,{rect:{...v,y:n},theme:s,register:e},`${e.id}`)}),!i&&g.map(e=>{let t=r[y++],n=t.y+t.height/2;return(0,l.jsx)(u,{rect:{...v,y:n},theme:s,bit:e,showBitIndex:a},`${e.id}_${e.index}`)})]})]})}eJ.displayName="Wires";let e0=(0,d.memo)((0,d.forwardRef)((e,t)=>{let{program:r,viewport:n,columnsMode:i,className:a}=e,s=e.showRegistersLabelBitIndex??!0,u=e.groupClassicalRegisters??!0,f=useTheme(),p=(0,d.useMemo)(()=>(0,g.n)(r,i),[r,i]),y=(0,d.useMemo)(()=>new m.b(r),[r]),v=(0,d.useMemo)(()=>buildSingleGridOperationsLayout({program:r,operationsByColumns:p,theme:f,groupClassicalRegisters:u,expandDefinitionNodeIds:[]}),[r,p,f,u]),x=useRegistersLayout(r,f),O=useWiresLayout(n,f,x,v),R=useOperationsLayout(O,f),_=(0,d.useMemo)(()=>(0,b.E8)(r),[r]),A=(0,d.useMemo)(()=>new MultiGridOperationsLayout({singleGridLayout:v,wires:y,theme:f,maxGridWidth:R.width,x:R.x,y:R.y}),[v,y,f,R.width,R.x,R.y]),C=useContainerLayout(n,A,f,x,O),k=(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",ref:t,className:a,style:{display:"block",userSelect:"none"},viewBox:`0 0 ${C.width} ${C.height}`,width:C.width,height:C.height,children:[(0,l.jsx)("rect",{x:0,y:0,width:C.width,height:C.height,style:{fill:f.Container.background}}),A.grids.map((e,t)=>(0,l.jsxs)(Box,{children:[n?.overflow!=="auto"&&(0,l.jsx)(Box,{x:x.x,children:(0,l.jsx)(RegisterLabels,{registers:_,rows:e.rows,width:x.width,groupClassicalRegisters:u,showBitIndex:s})}),(0,l.jsx)(eJ,{registers:_,rows:e.rows,x:O.x,width:O.width,groupClassicalRegisters:u}),(0,l.jsx)(eX,{program:r,grid:e,wires:y,groupClassicalRegisters:u,movingNodeIds:void 0,addingNodes:void 0,addingModifier:void 0,inspectingNodeId:void 0,mode:"edit",columnsMode:i,expandDefinitionNodeIds:[],floating:!1}),(0,l.jsx)(GridContinuations,{grids:A.grids,gridIndex:t,wiresLayout:O})]},t))]});return"auto"!==n.overflow?k:(0,l.jsxs)("div",{className:"overflow-auto scrollbar relative h-auto w-full",children:[(0,l.jsx)("div",{className:"sticky left-0",children:(0,l.jsx)("div",{className:"absolute top-0 left-0",children:(0,l.jsxs)("svg",{width:x.x+x.width,height:R.height+R.y,children:[(0,l.jsx)("rect",{width:x.x+x.width,height:R.height+R.y,style:{fill:f.Container.background}}),(0,l.jsx)(Box,{x:x.x,children:(0,l.jsx)(RegisterLabels,{registers:_,rows:A.grids[0].rows,width:x.width,groupClassicalRegisters:u})})]})})}),k]})}));function useContainerLayout(e,t,r,n,i){let a="width"in e?e.width:0;return(0,d.useMemo)(()=>{switch(e?.overflow){case"wrap":return{width:a,height:addPaddingY(t.height,r.Container.padding)};case"none":case"auto":{let e=addPaddingX(n.width+i.width,r.Container.padding),t=addPaddingY(i.height,r.Container.padding);return{width:e,height:t}}}},[e.overflow,a,t.height,r.Container.padding,n.width,i.width,i.height])}function useWiresLayout(e,t,r,n){let i="width"in e?e.width:0;return(0,d.useMemo)(()=>{let a;let s=normalizePadding(t.Container.padding),l=normalizePadding(t.Operations.padding);if("wrap"===e.overflow){let e=subtractPaddingX(i,t.Container.padding);a=e-r.width}else a=n.width+2*t.Operations.gapX;let u=addPaddingY(n.height,t.Operations.padding),d=r.width+s.left,f=s.top+l.top;return{width:a,x:d,height:u,y:f}},[r.width,n.height,n.width,t.Container.padding,t.Operations.gapX,t.Operations.padding,e.overflow,i])}function useRegistersLayout(e,t){return(0,d.useMemo)(()=>{let r=normalizePadding(t.Container.padding),n=normalizePadding(t.Operations.padding),i=(0,b.E8)(e),a=(0,y.Z)(i.map(e=>t.RegisterLabels.width(e)))??0,s=addPaddingX(a,t.RegisterLabels.padding),l=r.left,u=n.top+r.top;return{width:s,x:l,y:u}},[e,t.RegisterLabels,t.Operations.padding,t.Container.padding])}function useOperationsLayout(e,t){return(0,d.useMemo)(()=>{let r=e.width-2*t.Operations.gapX,n=e.height,i=normalizePadding(t.Operations.padding),a=e.x+i.left,s=e.y;return{width:r,height:n,x:a,y:s}},[t.Operations.gapX,t.Operations.padding,e.height,e.width,e.x,e.y])}var e1=r(13187),e2=r(11925),e5=(0,r(95349).Z)(function(e,t,r){(0,e2.Z)(e,r,t)}),e3=r(68449);function astToComposerQasmAst(e){let t=new ComposerQasmAstBuilder(e);return t.build()}let e4=new Map,e6=e3.z.number().int().array();let ComposerQasmAstBuilder=class ComposerQasmAstBuilder{constructor(e){this.program=e,this.registerById=e5(e1.E8(e),e=>e.id)}registerById;nodes=[];build(){let e;for(let t of this.program)this.nodes.push(...this.transformNode(t,e)),e=t;return this.nodes}transformNode(e,t){switch(e.kind){case"version":return[this.transformVersion(e,t)];case"include":return[this.transformInclude(e,t)];case"gateDefinition":return[this.transformGateDefinition(e,t)];case"opaqueGateDefinition":return[this.transformOpaqueGateDefinition(e,t)];case"comment":return[this.transformCommentOrAnnotation(e,t)];case"registerDefinition":return[this.transformRegisterDefinition(e,t)];case"gate":return this.transformGate(e,t);case"measure":return this.transformMeasure(e,t);case"reset":return this.transformReset(e,t);case"barrier":return this.transformBarrier(e,t);case"if":return this.transformIf(e,t)}}transformVersion(e,t){let r=nodeDistance(e,t);return{version:e.version,kind:e.kind,meta:{id:Symbol(),previousNodeDistance:r}}}transformInclude(e,t){let r=nodeDistance(e,t),n=e4.get("node.id");return n||(n=astToComposerQasmAst(e.program),e4.set(e.id,n)),{kind:e.kind,id:e.id,program:n,source:e.source,meta:{id:Symbol(),previousNodeDistance:r}}}transformGateDefinition(e,t){let r;let n=nodeDistance(e,t),i=[];for(let t of e.operations){let e=r?nodeDistance(t,r):{line:1,column:2};switch(t.kind){case"comment":{let r={kind:t.kind,content:t.content,meta:{id:Symbol(),previousNodeDistance:e}};i.push(r);break}case"barrier":{let r={kind:t.kind,registers:t.registers.map(e=>({id:e.id,index:e.index})),meta:{id:Symbol(),previousNodeDistance:e}};i.push(r);break}case"gate":{let r={kind:t.kind,id:t.id,registers:t.registers.map(e=>({id:e.id,index:e.index})),arguments:t.arguments.map(e=>({expression:e.expression,variables:e.variables.map(e=>({id:e.id}))})),meta:{id:Symbol(),previousNodeDistance:e}};i.push(r)}}r=t}return{id:e.id,kind:e.kind,parameters:e.parameters.map(e=>({id:e.id,type:e.type})),operations:i,meta:{id:Symbol(),previousNodeDistance:n}}}transformOpaqueGateDefinition(e,t){let r=nodeDistance(e,t);return{kind:e.kind,id:e.id,parameters:e.parameters.map(e=>({id:e.id,type:e.type})),meta:{id:Symbol(),previousNodeDistance:r}}}transformCommentOrAnnotation(e,t){for(let r of[this.columnsAnnotationMatcher,this.phaseDiskAnnotationMatcher]){let n=r(e,t);if(n)return n}return{kind:e.kind,content:e.content,meta:{id:Symbol(),previousNodeDistance:nodeDistance(e,t)}}}columnsAnnotationMatcher=(e,t)=>{let r=e.content.match(/^\s*@columns\s+(.*)$/);if(r)try{return{kind:"annotation",id:"columns",value:e6.parse(JSON.parse(r[1])),meta:{id:Symbol(),previousNodeDistance:nodeDistance(e,t)}}}catch(e){}};phaseDiskAnnotationMatcher=(e,t)=>{let r=e.content.match(/^\s*@phaseDisk\s*(.*)$/),n=(0,F.Z)(this.registerById).filter(e=>"quantum"===e.type).flatMap(e=>(0,eQ.Z)(e.size).map(t=>({id:e.id,index:t})));if(r){if(r[1].trim().length>0)return;let i=(0,v.Z)(this.nodes);if(!i||"barrier"!==i.kind||i.registers.length!==n.length||0!==nodeDistance(e,t).line)return;return this.nodes.pop(),{kind:"annotation",id:"phaseDisk",meta:{id:Symbol(),previousNodeDistance:i.meta.previousNodeDistance},registers:n}}};transformRegisterDefinition(e,t){let r=nodeDistance(e,t);return{kind:e.kind,id:e.id,type:e.type,size:e.size,meta:{id:Symbol(),previousNodeDistance:r}}}transformGate(e,t){let r=this.getUnrolledRegisters(e),n=r.length>1?e:void 0;return r.map((r,i)=>{let a=0===i?nodeDistance(e,t):{line:1,column:0};return{kind:e.kind,id:e.id,registers:r,arguments:e.arguments.map(e=>({expression:e.expression,variables:e.variables.map(e=>({id:e.id}))})),meta:{id:Symbol(),rolledNode:n,previousNodeDistance:a}}})}transformMeasure(e,t){let r=this.getUnrolledRegisters(e),n=r.length>1?e:void 0;return r.map((r,i)=>{let a=0===i?nodeDistance(e,t):{line:1,column:0};return{kind:e.kind,from:r[0],to:r[1],meta:{id:Symbol(),rolledNode:n,previousNodeDistance:a}}})}transformReset(e,t){let r=this.getUnrolledRegisters(e),n=r.length>1?e:void 0;return r.map((r,i)=>{let a=0===i?nodeDistance(e,t):{line:1,column:0};return{kind:e.kind,registers:r,meta:{id:Symbol(),rolledNode:n,previousNodeDistance:a}}})}transformBarrier(e,t){let r=nodeDistance(e,t),n=e.registers.find(e=>void 0===e.index)?e:void 0,i=e.registers.flatMap(e=>{if(void 0!==e.index)return[{id:e.id,index:e.index}];let t=this.registerById[e.id].size;return(0,eQ.Z)(t).map(t=>({index:t,id:e.id}))});return[{kind:e.kind,registers:i,meta:{id:Symbol(),rolledNode:n,previousNodeDistance:r}}]}transformIf(e,t){let r=this.getUnrolledRegisters(e),n=r.length>1?e:void 0;return r.map((r,i)=>{let a;let s=0===i?nodeDistance(e,t):{line:1,column:0};switch(e.operation.kind){case"gate":{let t={id:e.operation.id,kind:e.operation.kind,registers:r,arguments:e.operation.arguments.map(e=>({expression:e.expression,variables:e.variables.map(e=>({id:e.id}))})),meta:{id:Symbol(),previousNodeDistance:{line:0,column:1}}};a=t;break}case"measure":{let t={kind:e.operation.kind,from:r[0],to:r[1],meta:{id:Symbol(),previousNodeDistance:{line:0,column:1}}};a=t;break}case"reset":{let t={kind:e.operation.kind,registers:r,meta:{id:Symbol(),previousNodeDistance:{line:0,column:1}}};a=t}}return{kind:e.kind,condition:{operator:e.condition.operator,register:{id:e.condition.register.id,index:e.condition.register.index},value:e.condition.value},operation:a,meta:{id:Symbol(),previousNodeDistance:s,rolledNode:n}}})}getUnrolledRegisters(e){let t=getOperationUnrollableRegisters(e),r=C(t,e=>void 0===e.index);if(!r)return[t.map(e=>({id:e.id,index:e.index}))];let n=this.registerById[r.id].size;return(0,eQ.Z)(0,n).map(e=>t.map(t=>({id:t.id,index:t.index??e})))}};function getOperationUnrollableRegisters(e){switch(e.kind){case"gate":case"reset":case"barrier":return e.registers;case"measure":return[e.from,e.to];case"if":return getOperationUnrollableRegisters(e.operation)}}function nodeDistance(e,t){return t?t.range.end.line===e.range.start.line?{line:0,column:e.range.start.column-t.range.end.column-1}:{line:e.range.start.line-t.range.end.line,column:e.range.start.column-1}:{line:e.range.start.line-1,column:e.range.start.column-1}}var e8=r(54925);e8.ue,e8.r3,e8.wd,e8._o,e8.sd,e8.N7;let e7=e8.nu;e8.Mf;let e9=e8.hW;e8.Bw;let te=e8.P7,tt=e8.z5;e8.Sj,e8.Oq,e8.Wx,e8._b,e8.b4,e8.hI,e8.ej,e8.fK,e8.pT,e8.$9,e8.oI,e8.q4,e8.LK,e8.H7;let tr=e8.V3;e8.dK,e8.ZW,e8.Hs,e8.bS,e8.N$,e8.SE,e8.l$,e8.ol,e8.vA;let tn=tr({name:"Int",pattern:/\d+/}),ti=tr({name:"Real",pattern:/(\d*\.\d+([eE][-+]?\d+)?)|(\d+[eE][-+]?\d+)/}),to=tr({name:"Id",pattern:/[a-z][a-zA-Z0-9_]*/,label:"id"}),ta=tr({name:"MathFn",pattern:/sin|cos|tan|exp|ln|sqrt/,longer_alt:to}),ts=tr({name:"PlusGroup",pattern:e9.NA}),tc=tr({name:"+",pattern:"+",categories:ts}),tl=tr({name:"-",pattern:"-",categories:ts}),tu=tr({name:"MultGroup",pattern:e9.NA}),td=tr({name:"*",pattern:"*",categories:tu}),tf=tr({name:"/",pattern:"/",categories:tu}),th=tr({name:"^",pattern:"^",categories:tu}),tp=tr({name:"pi",pattern:"pi",longer_alt:to}),tg=tr({name:"built-in gate",pattern:/CX|U/,label:"CX, U"}),tm=tr({name:"ResetOp",pattern:/reset/,longer_alt:to,label:"reset"}),ty=tr({name:"Qreg",pattern:/qreg/,longer_alt:to,label:"qreg"}),tv=tr({name:"Creg",pattern:/creg /,longer_alt:to,label:"creg"}),tx=tr({name:"LSquare",pattern:/\[/,label:"["}),tb=tr({name:"RSquare",pattern:/]/,label:"]"}),tE=tr({name:"LParen",pattern:/\(/,label:"("}),tT=tr({name:"RParen",pattern:/\)/,label:")"}),tO=tr({name:"LCurly",pattern:/{/,label:"{"}),tR=tr({name:"RCurly",pattern:/}/,label:"}"}),t_=tr({name:"SemiColon",pattern:/;/,label:";"}),tA=tr({name:"Comma",pattern:/,/,label:","}),tS=tr({name:"Include",pattern:/include/,longer_alt:to,label:"include"}),tC=tr({name:"Measure",pattern:/measure/,longer_alt:to,label:"measure"}),tk=tr({name:"Barrier",pattern:/barrier/,longer_alt:to,label:"barrier"}),tI=tr({name:"Opaque",pattern:/opaque/,longer_alt:to,label:"opaque"}),tw=tr({name:"If",pattern:/if/,longer_alt:to,label:"if"}),tP=tr({name:"Equals",pattern:/=/,label:"="}),tN=tr({name:"Gate",pattern:/gate/,longer_alt:to,label:"gate"}),tL=tr({name:"Assign",pattern:/->/,label:"->"}),tM=tr({name:"StringLiteral",pattern:/"[^"]*"/,label:'""'}),tF=tr({name:"WhiteSpace",pattern:/\s+/,group:e9.SKIPPED}),tD=tr({name:"Version",pattern:/OPENQASM 2\.0/,label:"OPENQASM 2.0"}),tj=tr({name:"SingleLineComment",pattern:/\/\/.*/,label:"//"}),tU={WhiteSpace:tF,SingleLineComment:tj,Version:tD,Real:ti,Int:tn,BuiltInGate:tg,ResetOp:tm,Opaque:tI,If:tw,MathFn:ta,PlusGroup:ts,Plus:tc,Assign:tL,Minus:tl,MultGroup:tu,Mult:td,Div:tf,Equal:tP,Pow:th,Pi:tp,Qreg:ty,Creg:tv,LSquare:tx,RSquare:tb,SemiColon:t_,Comma:tA,LParen:tE,RParen:tT,LCurly:tO,RCurly:tR,Include:tS,Measure:tC,Barrier:tk,Gate:tN,StringLiteral:tM,Id:to},tB=Object.values(tU),tz=new e9(tB,{errorMessageProvider:{buildUnexpectedCharactersMessage:(e,t,r)=>`Unexpected '${e.slice(t,t+r)}'`,buildUnableToPopLexerModeMessage:e=>`Unexpected '${e.image}'`}});function lexer_tokenizeQasm(e){return tz.tokenize(e)}var tW=r(90315);function diagnostic_lexicalErrorsToDiagnostic(e){return e.map(e=>({severity:"error",message:e.message,range:{start:{line:e.line,column:e.column},end:{line:e.line,column:e.column}}}))}function diagnostic_gramaticalErrorsToDiagnostic(e,t){let r;return t.map(t=>{let n=(0,tW.Mc)(t.token);return!n&&(t instanceof te||t instanceof tt)&&(n=(0,tW.Mc)(t.previousToken)),n===tW.UM&&(r||(r=getLastPosition(e)),n=r),{severity:"error",message:t.message,range:n}})}function getLastPosition(e){let t=e.split("\n"),r=t.length,n=t[t.length-1].length;return{start:{line:r,column:n},end:{line:r,column:n}}}var tG=r(29518),lodash_es_uniqBy=function(e,t){return e&&e.length?(0,tG.Z)(e,(0,R.Z)(t,2)):[]},tH=r(25837);let tZ=new Uint32Array(65536),myers_32=(e,t)=>{let r=e.length,n=t.length,i=1<<r-1,a=-1,s=0,l=r,u=r;for(;u--;)tZ[e.charCodeAt(u)]|=1<<u;for(u=0;u<n;u++){let e=tZ[t.charCodeAt(u)],r=e|s;e|=(e&a)+a^a,s|=~(e|a),a&=e,s&i&&l++,a&i&&l--,a=a<<1|~(r|(s=s<<1|1)),s&=r}for(u=r;u--;)tZ[e.charCodeAt(u)]=0;return l},myers_x=(e,t)=>{let r=t.length,n=e.length,i=[],a=[],s=Math.ceil(r/32),l=Math.ceil(n/32);for(let e=0;e<s;e++)a[e]=-1,i[e]=0;let u=0;for(;u<l-1;u++){let s=0,l=-1,d=32*u,f=Math.min(32,n)+d;for(let t=d;t<f;t++)tZ[e.charCodeAt(t)]|=1<<t;for(let e=0;e<r;e++){let r=tZ[t.charCodeAt(e)],n=a[e/32|0]>>>e&1,u=i[e/32|0]>>>e&1,d=r|s,f=((r|u)&l)+l^l|r|u,p=s|~(f|l),g=l&f;p>>>31^n&&(a[e/32|0]^=1<<e),g>>>31^u&&(i[e/32|0]^=1<<e),p=p<<1|n,l=(g=g<<1|u)|~(d|p),s=p&d}for(let t=d;t<f;t++)tZ[e.charCodeAt(t)]=0}let d=0,f=-1,p=32*u,g=Math.min(32,n-p)+p;for(let t=p;t<g;t++)tZ[e.charCodeAt(t)]|=1<<t;let m=n;for(let e=0;e<r;e++){let r=tZ[t.charCodeAt(e)],s=a[e/32|0]>>>e&1,l=i[e/32|0]>>>e&1,u=r|d,p=((r|l)&f)+f^f|r|l,g=d|~(p|f),y=f&p;m+=g>>>n-1&1,m-=y>>>n-1&1,g>>>31^s&&(a[e/32|0]^=1<<e),y>>>31^l&&(i[e/32|0]^=1<<e),g=g<<1|s,f=(y=y<<1|l)|~(u|g),d=g&u}for(let t=p;t<g;t++)tZ[e.charCodeAt(t)]=0;return m},distance=(e,t)=>{if(e.length<t.length){let r=t;t=e,e=r}return 0===t.length?e.length:e.length<=32?myers_32(e,t):myers_x(e,t)};var tV=r(44453);let tq=((a={}).ALL_CLOSEST_MATCHES="all-closest-matches",a.ALL_MATCHES="all-matches",a.ALL_SORTED_MATCHES="all-sorted-matches",a.FIRST_CLOSEST_MATCH="first-closest-match",a.FIRST_MATCH="first-match",a),tK=((s={}).EDIT_DISTANCE="edit-distance",s.SIMILARITY="similarity",s),c=e=>{let t={caseSensitive:!1,deburr:!0,matchPath:[],returnType:tq.FIRST_CLOSEST_MATCH,thresholdType:tK.SIMILARITY,trimSpaces:!0,...e};if(!Object.values(tq).includes(t.returnType))throw TypeError("unknown returnType");if(!Object.values(tK).includes(t.thresholdType))throw TypeError("unknown thresholdType");switch(t.thresholdType){case tK.EDIT_DISTANCE:return{threshold:20,...t};case tK.SIMILARITY:return{threshold:.4,...t}}},o=(e,t)=>{if(!e||!t)return 0;if(e===t)return 1;let r=distance(e,t),n=Math.max(e.length,t.length);return(n-r)/n},dist_n=(e,t)=>{let r=e;return t.trimSpaces&&(r=r.trim().replaceAll(/\s+/g," ")),t.deburr&&(r=tV(r)),t.caseSensitive||(r=r.toLowerCase()),r},T=(e,t)=>{let{matchPath:r}=t,n=((e,t)=>{let r=t.length>0?t.reduce((e,t)=>e?.[t],e):e;return"string"!=typeof r?"":r})(e,r);return dist_n(n,t)},dist_a=(e,t,r)=>{switch(r){case tq.ALL_CLOSEST_MATCHES:case tq.ALL_MATCHES:case tq.ALL_SORTED_MATCHES:return t.map(t=>e[t]);case tq.FIRST_CLOSEST_MATCH:case tq.FIRST_MATCH:{let r=t[0];return void 0===r?null:e[r]}}};function S(e,t,r){let n,i;let a=c(r),{returnType:s,threshold:l,thresholdType:u}=a,d=dist_n(e,a);switch(u){case tK.EDIT_DISTANCE:n=e=>e<=l,i=e=>distance(d,T(e,a));break;case tK.SIMILARITY:n=e=>e>=l,i=e=>o(d,T(e,a))}let f=[];switch(s){case tq.ALL_CLOSEST_MATCHES:case tq.FIRST_CLOSEST_MATCH:{let e;let r=[];switch(u){case tK.EDIT_DISTANCE:for(let n of(e=Number.POSITIVE_INFINITY,t)){let t=i(n);e>t&&(e=t),r.push(t)}break;case tK.SIMILARITY:for(let n of(e=0,t)){let t=i(n);e<t&&(e=t),r.push(t)}}for(let[t,i]of r.entries())n(i)&&i===e&&f.push(t);break}case tq.ALL_MATCHES:for(let[e,r]of t.entries())n(i(r))&&f.push(e);break;case tq.ALL_SORTED_MATCHES:{let e=[];for(let[r,a]of t.entries()){let t=i(a);n(t)&&e.push({score:t,index:r})}switch(u){case tK.EDIT_DISTANCE:e.sort((e,t)=>e.score-t.score);break;case tK.SIMILARITY:e.sort((e,t)=>t.score-e.score)}for(let t of e)f.push(t.index);break}case tq.FIRST_MATCH:for(let[e,r]of t.entries())if(n(i(r))){f.push(e);break}}return dist_a(t,f,s)}function semanticParse(e){let t=new SemanticParser(e);return t.validate(),{diagnostics:t.diagnostics}}let SemanticParser=class SemanticParser{constructor(e){this.diagnostics=[],this.ast=e,this.gates=(0,tH.b)(e),this.gatesById=e5(lodash_es_uniqBy(this.gates,e=>e.id),e=>e.id);let t=(0,e1.E8)(e);this.registersById=e5(lodash_es_uniqBy(t,e=>e.id),e=>e.id),this.includes=(0,e1.ze)(e),this.quantumRegistersId=t.filter(e=>"quantum"===e.type).map(e=>e.id)}validate(){for(let e of(0,e1.G4)(this.ast))this.validateOperation(e);for(let e of(0,e1.Y7)(this.ast))for(let t of(this.validateGateIdIsUnique(e),e.operations))"comment"!==t.kind&&this.validateOperationInsideGateDefinition(t,e);for(let e of(0,e1._w)(this.ast))this.validateGateIdIsUnique(e);for(let e of(0,e1.E8)(this.ast))this.validateRegister(e);for(let e of this.includes)this.validateIncludeIsUnique(e)}validateOperationInsideGateDefinition(e,t){"gate"===e.kind&&(this.validateGateOperationIsDefined(e),this.validateGateOperationIsUsedBeforeDeclaration(e),this.validateGateOperationParameters(e),this.validateGateExpressionIds(e,t),this.validateGateOperationDoesNotCallItself(e,t),this.validateQuantumParameter(e.registers,t)),"barrier"===e.kind&&this.validateQuantumParameter(e.registers,t)}validateOperation(e){"gate"===e.kind&&(this.validateGateOperationIsDefined(e),this.validateGateOperationIsUsedBeforeDeclaration(e),this.validateGateOperationParameters(e),this.validateGateExpressionIds(e,void 0),this.validateQuantumRegistersOrQubit(e.registers),this.validateNotIndexedRegistersHasSameSize(e.registers),this.validateNotDuplicatedRegisters(e.registers)),"barrier"===e.kind&&this.validateQuantumRegistersOrQubit(e.registers),"if"===e.kind&&(this.validateOperation(e.operation),this.validateClassicalRegistersOrBit([e.condition.register]),this.validateIfCondition(e)),"reset"===e.kind&&this.validateQuantumRegistersOrQubit(e.registers),"measure"===e.kind&&(this.validateQuantumRegistersOrQubit([e.from]),this.validateClassicalRegistersOrBit([e.to]),this.validateMeasureRegisters(e))}validateGateOperationIsDefined(e){let t=this.gatesById[e.id];t||this.addError(e.range,`Gate '${e.id}' is not defined`)}validateGateOperationIsUsedBeforeDeclaration(e){let t=this.gatesById[e.id];if(t)switch(t.location.kind){case"program":isAfter(t.range,e.range)&&this.addError(e.range,`Gate '${e.id}' is used before declaration`);break;case"include":isAfter(t.location.include.range,e.range)&&this.addError(e.range,`Gate '${e.id}' is used before declaration`)}}validateGateOperationParameters(e){let t=this.gatesById[e.id];if(!t)return;let r=t.parameters.filter(e=>"quantum"===e.type),n=t.parameters.filter(e=>"classical"===e.type),i="gateDefinition"===t.kind?"Gate":"Opaque gate";n.length!==e.arguments.length&&this.addError(e.range,`${i} call to '${e.id}' uses ${e.arguments.length} parameters but is declared for ${n.length} parameters`),r.length!==e.registers.length&&this.addError(e.range,`${i} call to '${e.id}' uses ${e.registers.length} qubits but is declared for ${r.length} qubits`)}validateNotIndexedRegistersHasSameSize(e){let t;for(let r of e){if(void 0!==r.index)continue;let e=this.registersById[r.id];if(e){if(void 0===t){t=e.size;continue}t!==e.size&&this.addError(r.range,`Expected register of size ${t}`)}}}validateNotDuplicatedRegisters(e){for(let[t,r]of e.entries()){let n=e.slice(0,t);for(let e of n)r.id===e.id&&(r.index===e.index?this.addError(r.range,"Duplicated register"):void 0===e.index?this.addError(r.range,"Duplicated register"):void 0===r.index&&this.addError(r.range,"Duplicated register"))}}validateGateOperationDoesNotCallItself(e,t){e.id===t.id&&this.addError(e.range,"Subroutines cannot call themselves")}validateGateExpressionIds(e,t){let r=(t?.parameters??[]).map(e=>e.id),n=e5(t?.parameters??[],e=>e.id);for(let t of e.arguments)for(let e of t.variables)if(!n[e.id]){let t=S(e.id,r,{returnType:tq.FIRST_CLOSEST_MATCH}),n=t?`Argument '${e.id}' is not defined. Did you mean '${t}'?`:`Argument '${e.id}' is not defined`;this.addError(e.range,n)}}validateQuantumParameter(e,t){let r=t.parameters.filter(e=>"quantum"===e.type).map(e=>e.id);for(let n of e){let e=t.parameters?.find(e=>e.id===n.id);if(e){"quantum"!==e.type&&this.addError(n.range,`'${n.id}' must be a quantum parameter`),void 0!==n.index&&this.addError(n.range,"Quantum parameters cannot be indexed");continue}let i=S(n.id,r,{returnType:tq.FIRST_CLOSEST_MATCH}),a=i?`Quantum parameter '${n.id}' does not exists. Did you mean '${i}'?`:`Quantum parameter '${n.id}' does not exists`;this.addError(n.range,a)}}validateQuantumRegistersOrQubit(e){for(let t of e){let e=this.registersById[t.id];if(e){"quantum"!==e.type&&this.addError(t.range,`Register '${t.id}' must be a quantum register`);let r=void 0===t.index||t.index>=0&&t.index<e.size;r||this.addError(t.range,`Register index for '${t.id}' is out of bounds. Bound is 0 <= index < ${e.size}`);continue}let r=S(t.id,this.quantumRegistersId,{returnType:tq.FIRST_CLOSEST_MATCH}),n=r?`Register '${t.id}' does not exists. Did you mean '${r}'?`:`Register '${t.id}' does not exists`;this.addError(t.range,n)}}validateClassicalRegistersOrBit(e){for(let t of e){let e=this.registersById[t.id];if(e){"classical"!==e.type&&this.addError(t.range,`Register '${t.id}' must be a classical register`);let r=void 0===t.index||t.index>=0&&t.index<e.size;r||this.addError(t.range,`Register index for '${t.id}' is out of bounds. Bound is 0 <= index < ${e.size}`);continue}this.addError(t.range,`Register '${t.id}' does not exists`)}}validateMeasureRegisters(e){let{from:t,to:r}=e,n=this.registersById[t.id],i=this.registersById[r.id];n&&i&&(void 0===t.index&&void 0===r.index?n.size!==i.size&&this.addError(r.range,`Registers '${t.id}' and '${r.id}' must have the same size`):void 0===t.index&&void 0!==r.index?this.addError(r.range,"A classical register was expected but a bit was found"):void 0!==t.index&&void 0===r.index&&this.addError(r.range,"A bit was expected but a classical register was found"))}validateIfCondition(e){let{register:t,value:r}=e.condition,n=this.registersById[t.id];if(!n)return;let i=Math.pow(2,n.size);r>=i&&this.addError(e.range,`Condition is always false: ${r} < max register value (${i})`)}validateRegister(e){let t=this.registersById[e.id];isAfter(e.range,t.range)&&this.addError(e.range,`A register named '${e.id}' is already declared on line ${t.range.start.line} column ${t.range.start.column}`);let r=this.gatesById[e.id];r&&("program"===r.location.kind&&isAfter(e.range,r.range)&&this.addError(e.range,`A gate named '${e.id}' is already declared on line ${r.range.start.line} column ${r.range.start.column}`),"include"===r.location.kind&&isAfter(e.range,r.location.include.range)&&this.addError(e.range,`A gate named '${e.id}' is already declared on '${r.location.include.id}'`)),e.size<=0&&this.addError(e.range,"Register size must be greater than 0")}validateGateIdIsUnique(e){let t=this.gatesById[e.id];"include"===t.location.kind&&this.addError(e.idRange,`A gate named '${e.id}' is already declared on '${t.location.include.id}'`),"program"===t.location.kind&&t.idRange!==e.idRange&&this.addError(e.idRange,`A gate named '${e.id}' is already declared on line ${t.range.start.line} column ${t.range.start.column}`);let r=this.registersById[e.id];r&&isAfter(e.range,r.range)&&this.addError(e.idRange,`A register named '${e.id}' is already declared on line ${r.range.start.line} column ${r.range.start.column}`)}validateIncludeIsUnique(e){let t=this.includes.find(t=>t.id===e.id);t&&t!==e&&this.addError(e.range,`Duplicated include. Already declared on line ${t.range.start.line} column ${t.range.start.column}`)}addError(e,t){this.diagnostics.push({severity:"error",range:e,message:t})}};function isAfter(e,t){return e.start.line>t.start.line||!(t.start.line>e.start.line)&&e.start.column>t.start.column}var t$=r(22551),_baseReduce=function(e,t,r,n,i){return i(e,function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)}),r},lodash_es_reduce=function(e,t,r){var n=(0,N.Z)(e)?t$.Z:_baseReduce,i=arguments.length<3;return n(e,(0,R.Z)(t,4),r,i,z.Z)},tY=r(29607),tX=r(55424),lodash_es_flatMap=function(e,t){return(0,tY.Z)((0,tX.Z)(e,t),1)};let OpenQasm2Parser=class OpenQasm2Parser extends e7{constructor(){super(tB,{recoveryEnabled:!0,errorMessageProvider:tQ}),this.ast=[],this.program=this.RULE("program",()=>(this.ast=[],this.currentGateDefinition=void 0,this.SUBRULE(this.headers),this.SUBRULE(this.statements),this.ast),{recoveryValueFunc:()=>(this.currentGateDefinition&&this.ast.push(this.currentGateDefinition),this.ast)}),this.headers=this.RULE("headers",()=>{this.MANY(()=>{let e=this.SUBRULE(this.comment);this.ACTION(()=>{e&&this.addComment(this.ast,e)})});let e=this.CONSUME(tU.Version),t=this.CONSUME(tU.SemiColon);this.ast.push({kind:"version",range:(0,tW.g7)((0,tW.Mc)(e),(0,tW.Mc)(t)),version:"2.0"})}),this.statements=this.RULE("statements",()=>{this.MANY(()=>{this.OR([{ALT:()=>{let e=this.SUBRULE(this.comment);this.ACTION(()=>{e&&this.addComment(this.ast,e)})}},{ALT:()=>pushIfNotRecovery(this.ast,this.SUBRULE(this.include))},{ALT:()=>{let e=this.SUBRULE(this.gateDefinition);this.ACTION(()=>{e&&this.tryToAttachComment(this.ast,e),pushIfNotRecovery(this.ast,e)})}},{ALT:()=>{let e=this.SUBRULE(this.opaqueGateDefinition);this.ACTION(()=>{e&&this.tryToAttachComment(this.ast,e),pushIfNotRecovery(this.ast,e)})}},{ALT:()=>pushIfNotRecovery(this.ast,this.SUBRULE(this.resetOp))},{ALT:()=>pushIfNotRecovery(this.ast,this.SUBRULE(this.measure))},{ALT:()=>pushIfNotRecovery(this.ast,this.SUBRULE(this.barrier))},{ALT:()=>pushIfNotRecovery(this.ast,this.SUBRULE(this.registerDefinition))},{ALT:()=>pushIfNotRecovery(this.ast,this.SUBRULE(this.gate))},{ALT:()=>pushIfNotRecovery(this.ast,this.SUBRULE(this.ifOperation))}])})}),this.include=this.RULE("include",()=>{let e=this.CONSUME(tU.Include),t=this.CONSUME(tU.StringLiteral),r=this.CONSUME(tU.SemiColon);return this.ACTION(()=>({kind:"include",id:t.image.substr(1,t.image.length-2),range:(0,tW.g7)((0,tW.Mc)(e),(0,tW.Mc)(r)),idRange:(0,tW.Mc)(t),program:[],source:""}))}),this.ifOperation=this.RULE("ifOperation",()=>{let e=this.CONSUME(tU.If);this.CONSUME(tU.LParen);let t=this.CONSUME(tU.Id);this.CONSUME(tU.Equal),this.CONSUME2(tU.Equal);let r=this.CONSUME(tU.Int);this.CONSUME(tU.RParen);let n=this.OR([{ALT:()=>this.SUBRULE(this.resetOp)},{ALT:()=>this.SUBRULE(this.measure)},{ALT:()=>this.SUBRULE(this.gate)}]);return this.ACTION(()=>({kind:"if",condition:{register:{id:t.image,index:void 0,range:(0,tW.Mc)(t)},operator:"==",value:parseInt(r.image)},operation:n,range:(0,tW.g7)((0,tW.Mc)(e),n.range)}))}),this.registerDefinition=this.RULE("registerDefinition",()=>{let e;let t=this.OR([{ALT:()=>(e=this.CONSUME(tU.Qreg),"quantum")},{ALT:()=>(e=this.CONSUME(tU.Creg),"classical")}]),r=this.CONSUME(tU.Id);this.CONSUME(tU.LSquare);let n=this.CONSUME(tU.Int);this.CONSUME(tU.RSquare);let i=this.CONSUME(tU.SemiColon);return{kind:"registerDefinition",type:t,id:r.image,size:parseInt(n.image),range:(0,tW.g7)((0,tW.Mc)(e),(0,tW.Mc)(i)),idRange:(0,tW.Mc)(r)}}),this.quantumRegister=this.RULE("quantumRegister",()=>{let e,t;let r=this.CONSUME(tU.Id);return this.OPTION(()=>{this.CONSUME(tU.LSquare),e=this.CONSUME1(tU.Int),t=this.CONSUME(tU.RSquare)}),this.ACTION(()=>{if(r.isInsertedInRecovery)return;let n=t?(0,tW.g7)((0,tW.Mc)(r),(0,tW.Mc)(t)):(0,tW.Mc)(r);return{id:r.image,index:e?parseInt(e.image):void 0,range:n}})}),this.classicalRegister=this.RULE("classicalRegister",()=>{let e,t;let r=this.CONSUME(tU.Id);return this.OPTION(()=>{this.CONSUME(tU.LSquare),e=this.CONSUME1(tU.Int),t=this.CONSUME(tU.RSquare)}),this.ACTION(()=>{let n=t?(0,tW.g7)((0,tW.Mc)(r),(0,tW.Mc)(t)):(0,tW.Mc)(r);return{id:r.image,index:e?parseInt(e.image):void 0,range:n}})}),this.resetOp=this.RULE("resetOp",()=>{let e=this.CONSUME(tU.ResetOp),t=this.SUBRULE(this.quantumRegister),r=this.CONSUME(tU.SemiColon);return this.ACTION(()=>{if(!t)return;let n=(0,tW.g7)((0,tW.Mc)(e),(0,tW.Mc)(r));return{kind:"reset",registers:[t],range:n}})}),this.measure=this.RULE("measure",()=>{let e=this.CONSUME(tU.Measure),t=this.SUBRULE(this.quantumRegister);this.CONSUME(tU.Assign);let r=this.SUBRULE1(this.classicalRegister),n=this.CONSUME(tU.SemiColon);return this.ACTION(()=>{if(t&&r)return{kind:"measure",from:t,to:r,range:(0,tW.g7)((0,tW.Mc)(e),(0,tW.Mc)(n))}})}),this.barrier=this.RULE("barrier",()=>{let e=this.CONSUME1(tU.Barrier),t=[];this.AT_LEAST_ONE_SEP({SEP:tU.Comma,DEF:()=>pushIfNotRecovery(t,this.SUBRULE(this.quantumRegister))});let r=this.CONSUME1(tU.SemiColon);return this.ACTION(()=>{let n=(0,tW.g7)((0,tW.Mc)(e),(0,tW.Mc)(r));return{kind:"barrier",registers:t,range:n}})}),this.gate=this.RULE("gate",()=>{let e=this.OR([{ALT:()=>this.CONSUME(tU.BuiltInGate)},{ALT:()=>this.CONSUME(tU.Id)}]),t=[],r=[];this.OPTION(()=>{this.CONSUME(tU.LParen),this.MANY_SEP({SEP:tU.Comma,DEF:()=>pushIfNotRecovery(t,this.SUBRULE(this.expression))}),this.CONSUME(tU.RParen)}),this.MANY_SEP1({SEP:tU.Comma,DEF:()=>pushIfNotRecovery(r,this.SUBRULE(this.quantumRegister))});let n=this.CONSUME(tU.SemiColon);return this.ACTION(()=>{let i=(0,tW.g7)((0,tW.Mc)(e),(0,tW.Mc)(n));return{kind:"gate",id:e.image,registers:r,arguments:t,range:i}})}),this.opaqueGateDefinition=this.RULE("opaqueGateDefinition",()=>{let e=this.CONSUME(tU.Opaque),t=this.CONSUME(tU.Id),r=[];this.OPTION(()=>{this.CONSUME(tU.LParen),this.MANY_SEP({SEP:tU.Comma,DEF:()=>{let e=this.CONSUME1(tU.Id);this.ACTION(()=>{r.push({type:"classical",id:e.image,range:(0,tW.Mc)(e)})})}}),this.CONSUME(tU.RParen)}),this.AT_LEAST_ONE_SEP({SEP:tU.Comma,DEF:()=>{let e=this.CONSUME2(tU.Id);this.ACTION(()=>{r.push({type:"quantum",id:e.image,range:(0,tW.Mc)(e)})})}});let n=this.CONSUME(tU.SemiColon);return this.ACTION(()=>({kind:"opaqueGateDefinition",id:t.image,parameters:r,range:(0,tW.g7)((0,tW.Mc)(e),(0,tW.Mc)(n)),idRange:(0,tW.Mc)(t)}))}),this.gateDefinition=this.RULE("gateDefinition",()=>{let e=this.CONSUME(tU.Gate),t=this.CONSUME(tU.Id),r=[];this.OPTION(()=>{this.CONSUME(tU.LParen),this.MANY_SEP({SEP:tU.Comma,DEF:()=>{let e=this.CONSUME1(tU.Id);this.ACTION(()=>{r.push({type:"classical",id:e.image,range:(0,tW.Mc)(e)})})}}),this.CONSUME(tU.RParen)}),this.AT_LEAST_ONE_SEP({SEP:tU.Comma,DEF:()=>{let e=this.CONSUME2(tU.Id);this.ACTION(()=>{r.push({type:"quantum",id:e.image,range:(0,tW.Mc)(e)})})}});let n=this.CONSUME(tU.LCurly),i={kind:"gateDefinition",id:t.image,parameters:r,operations:[],idRange:(0,tW.Mc)(t),range:(0,tW.g7)((0,tW.Mc)(e),(0,tW.Mc)(n))};this.currentGateDefinition=i,this.MANY({DEF:()=>{this.OR([{ALT:()=>{let e=this.SUBRULE(this.comment);this.ACTION(()=>{e&&this.addComment(i.operations,e)})}},{ALT:()=>pushIfNotRecovery(i.operations,this.SUBRULE(this.gate))},{ALT:()=>pushIfNotRecovery(i.operations,this.SUBRULE(this.barrier))}])}});let a=this.CONSUME(tU.RCurly);return i.range=(0,tW.g7)((0,tW.Mc)(e),(0,tW.Mc)(a)),this.ACTION(()=>(this.currentGateDefinition=void 0,i))}),this.comment=this.RULE("comment",()=>{let e=this.CONSUME(tU.SingleLineComment),t=e.image.substring(2);return this.ACTION(()=>{let r={kind:"comment",content:t,range:(0,tW.Mc)(e)};return r})}),this.expression=this.RULE("expression",()=>this.SUBRULE(this.additionExpression)),this.additionExpression=this.RULE("additionExpression",()=>{let e=this.SUBRULE(this.multiplicationExpression);return this.MANY(()=>{let t=this.CONSUME(tU.PlusGroup),r=this.SUBRULE1(this.multiplicationExpression);this.ACTION(()=>{e&&r&&(e={expression:`${e.expression} ${t.image} ${r.expression}`,range:(0,tW.g7)(e.range,r.range),variables:[...e.variables,...r.variables]})})}),e}),this.multiplicationExpression=this.RULE("multiplicationExpression",()=>{let e=this.SUBRULE(this.atomicExpression);return this.MANY(()=>{let t=this.CONSUME(tU.MultGroup),r=this.SUBRULE1(this.atomicExpression);this.ACTION(()=>{e&&r&&(e={expression:`${e.expression} ${t.image} ${r.expression}`,range:(0,tW.g7)(e.range,r.range),variables:[...e.variables,...r.variables]})})}),e}),this.atomicExpression=this.RULE("atomicExpression",()=>this.OR([{ALT:()=>this.SUBRULE(this.parenthesisExpression)},{ALT:()=>this.SUBRULE(this.mathFunExpression)},{ALT:()=>this.SUBRULE(this.unaryExpression)},{ALT:()=>{let e=this.CONSUME(tU.Real);return this.ACTION(()=>({expression:e.image,range:(0,tW.Mc)(e),variables:[]}))}},{ALT:()=>{let e=this.CONSUME1(tU.Int);return this.ACTION(()=>({expression:e.image,range:(0,tW.Mc)(e),variables:[]}))}},{ALT:()=>{let e=this.CONSUME2(tU.Pi);return this.ACTION(()=>({expression:"pi",range:(0,tW.Mc)(e),variables:[]}))}},{ALT:()=>{let e=this.CONSUME3(tU.Id);return this.ACTION(()=>{let t=(0,tW.Mc)(e);return{expression:e.image,range:t,variables:[{id:e.image,range:t}]}})}}])),this.unaryExpression=this.RULE("unaryExpression",()=>{let e=this.CONSUME(tU.Minus),t=this.SUBRULE(this.expression);return this.ACTION(()=>{if(!t)return;let r=(0,tW.g7)((0,tW.Mc)(e),t.range);return{expression:`-${t.expression}`,range:r,variables:t.variables}})}),this.mathFunExpression=this.RULE("mathFunExpression",()=>{let e=this.CONSUME(tU.MathFn);this.CONSUME1(tU.LParen);let t=this.SUBRULE(this.expression),r=this.CONSUME2(tU.RParen);return this.ACTION(()=>{if(!t)return;let n=(0,tW.g7)((0,tW.Mc)(e),(0,tW.Mc)(r));return{expression:`${e.image}(${t.expression})`,range:n,variables:t.variables}})}),this.parenthesisExpression=this.RULE("parenthesisExpression",()=>{let e=this.CONSUME(tU.LParen),t=this.SUBRULE(this.expression),r=this.CONSUME1(tU.RParen);return this.ACTION(()=>{if(!t)return;let n=(0,tW.g7)((0,tW.Mc)(e),(0,tW.Mc)(r));return{expression:`(${t.expression})`,range:n,variables:t.variables}})}),this.performSelfAnalysis()}addComment(e,t){let r=this.findLastComment(e);r&&r.range.end.line===t.range.start.line-1?r.range.end.line===t.range.start.line-1&&Object.assign(r,{content:`${r.content}
${t.content}`,range:(0,tW.g7)(r.range,t.range)}):e.push(t)}findLastComment(e){let t=(0,v.Z)(e);if(t?.kind==="comment")return t}tryToAttachComment(e,t){let r=this.findLastComment(e);r&&r.range.end.line===t.range.start.line-1&&(t.comment=r)}};function parser_tokenLabel(e){return e.LABEL??e.name}let tQ={buildMismatchTokenMessage:({expected:e})=>`'${parser_tokenLabel(e)}' expected`,buildNotAllInputParsedMessage:({firstRedundant:e})=>`Unexpected '${e.image}'`,buildNoViableAltMessage({expectedPathsPerAlt:e}){let t=lodash_es_reduce(e,(e,t)=>e.concat(t),[]),r=lodash_es_flatMap(t,e=>e.map(e=>`'${parser_tokenLabel(e)}'`));return`${joinDisjunction(r)} expected`},buildEarlyExitMessage({expectedIterationPaths:e}){let t=lodash_es_flatMap(e,e=>e.map(e=>`'${parser_tokenLabel(e)}'`));return`${joinDisjunction(t)} expected`}};function joinDisjunction(e){let t=e.length-1;return e.reduce((e,r,n)=>e+(n<t?", ":" or ")+r)}function pushIfNotRecovery(e,t){void 0!==t&&e.push(t)}let tJ=new OpenQasm2Parser;var t0=r(30321);let t1={};function resolveIncludes(e){let t=[];for(let r of(0,e1.ze)(e)){if("qelib1.inc"!==r.id){t.push({severity:"error",range:r.range,message:`File "${r.id}" not found`});continue}if(t1[r.id])r.program=t1[r.id],r.source=t2;else{let e=lexer_tokenizeQasm(t2);tJ.input=e.tokens;let t=tJ.program();r.program=t,r.source=t2,t1[r.id]=t}}return{diagnostics:t}}let t2=t0`
OPENQASM 2.0;
// Quantum Experience (QE) Standard Header
// file: qelib1.inc

// --- QE Hardware primitives ---

// 3-parameter 2-pulse single qubit gate
gate u3(theta,phi,lambda) q { U(theta,phi,lambda) q; }
// 2-parameter 1-pulse single qubit gate
gate u2(phi,lambda) q { U(pi/2,phi,lambda) q; }
// 1-parameter 0-pulse single qubit gate
gate u1(lambda) q { U(0,0,lambda) q; }
// controlled-NOT
gate cx c,t { CX c,t; }
// idle gate (identity)
gate id a { U(0,0,0) a; }
// idle gate (identity) with length gamma*sqglen
gate u0 q { U(0,0,0) q; }

// --- QE Standard Gates ---

// generic single qubit gate
gate u(theta,phi,lambda) q { U(theta,phi,lambda) q; }
// phase gate
gate p(lambda) q { U(0,0,lambda) q; }
// Pauli gate: bit-flip
gate x a { u3(pi,0,pi) a; }
// Pauli gate: bit and phase flip
gate y a { u3(pi,pi/2,pi/2) a; }
// Pauli gate: phase flip
gate z a { u1(pi) a; }
// Clifford gate: Hadamard
gate h a { u2(0,pi) a; }
// Clifford gate: sqrt(Z) phase gate
gate s a { u1(pi/2) a; }
// Clifford gate: conjugate of sqrt(Z)
gate sdg a { u1(-pi/2) a; }
// C3 gate: sqrt(S) phase gate
gate t a { u1(pi/4) a; }
// C3 gate: conjugate of sqrt(S)
gate tdg a { u1(-pi/4) a; }

// --- Standard rotations ---
// Rotation around X-axis
gate rx(theta) a { u3(theta, -pi/2,pi/2) a; }
// rotation around Y-axis
gate ry(theta) a { u3(theta,0,0) a; }
// rotation around Z axis
gate rz(phi) a { u1(phi) a; }

// --- QE Standard User-Defined Gates  ---

// sqrt(X)
gate sx a { sdg a; h a; sdg a; }
// inverse sqrt(X)
gate sxdg a { s a; h a; s a; }
// controlled-Z
gate cz a,b { h b; cx a,b; h b; }
// controlled-Y
gate cy a,b { sdg b; cx a,b; s b; }
// swap
gate swap a,b { cx a,b; cx b,a; cx a,b; }
// controlled-H
gate ch a,b {
h b; sdg b;
cx a,b;
h b; t b;
cx a,b;
t b; h b; s b; x b; s a;
}
// C3 gate: Toffoli
gate ccx a,b,c
{
  h c;
  cx b,c; tdg c;
  cx a,c; t c;
  cx b,c; tdg c;
  cx a,c; t b; t c; h c;
  cx a,b; t a; tdg b;
  cx a,b;
}
// cswap (Fredkin)
gate cswap a,b,c
{
  cx c,b;
  ccx a,b,c;
  cx c,b;
}
// controlled rx rotation
gate crx(lambda) a,b
{
  u1(pi/2) b;
  cx a,b;
  u3(-lambda/2,0,0) b;
  cx a,b;
  u3(lambda/2,-pi/2,0) b;
}
// controlled ry rotation
gate cry(lambda) a,b
{
  u3(lambda/2,0,0) b;
  cx a,b;
  u3(-lambda/2,0,0) b;
  cx a,b;
}
// controlled rz rotation
gate crz(lambda) a,b
{
  u1(lambda/2) b;
  cx a,b;
  u1(-lambda/2) b;
  cx a,b;
}
// controlled phase rotation
gate cu1(lambda) a,b
{
  u1(lambda/2) a;
  cx a,b;
  u1(-lambda/2) b;
  cx a,b;
  u1(lambda/2) b;
}
// controlled-Phase
gate cp(lambda) a,b
{
  p(lambda/2) a;
  cx a,b;
  p(-lambda/2) b;
  cx a,b;
  p(lambda/2) b;
}
// controlled-U
gate cu3(theta,phi,lambda) c, t
{
  // implements controlled-U(theta,phi,lambda) with  target t and control c
  u1((lambda+phi)/2) c;
  u1((lambda-phi)/2) t;
  cx c,t;
  u3(-theta/2,0,-(phi+lambda)/2) t;
  cx c,t;
  u3(theta/2,phi,0) t;
}
// controlled-sqrt(X)
gate csx a,b { h b; cu1(pi/2) a,b; h b; }
// controlled-U gate
gate cu(theta,phi,lambda,gamma) c, t
{ p(gamma) c;
  p((lambda+phi)/2) c;
  p((lambda-phi)/2) t;
  cx c,t;
  u(-theta/2,0,-(phi+lambda)/2) t;
  cx c,t;
  u(theta/2,phi,0) t;
}
// two-qubit XX rotation
gate rxx(theta) a,b
{
  u3(pi/2, theta, 0) a;
  h b;
  cx a,b;
  u1(-theta) b;
  cx a,b;
  h b;
  u2(-pi, pi-theta) a;
}
// two-qubit ZZ rotation
gate rzz(theta) a,b
{
  cx a,b;
  u1(theta) b;
  cx a,b;
}
// relative-phase CCX
gate rccx a,b,c
{
  u2(0,pi) c;
  u1(pi/4) c;
  cx b, c;
  u1(-pi/4) c;
  cx a, c;
  u1(pi/4) c;
  cx b, c;
  u1(-pi/4) c;
  u2(0,pi) c;
}
// relative-phase 3-controlled X gate
gate rc3x a,b,c,d
{
  u2(0,pi) d;
  u1(pi/4) d;
  cx c,d;
  u1(-pi/4) d;
  u2(0,pi) d;
  cx a,d;
  u1(pi/4) d;
  cx b,d;
  u1(-pi/4) d;
  cx a,d;
  u1(pi/4) d;
  cx b,d;
  u1(-pi/4) d;
  u2(0,pi) d;
  u1(pi/4) d;
  cx c,d;
  u1(-pi/4) d;
  u2(0,pi) d;
}
// 3-controlled X gate
gate c3x a,b,c,d
{
    h d; cu1(-pi/4) a,d; h d;
    cx a,b;
    h d; cu1(pi/4) b,d; h d;
    cx a,b;
    h d; cu1(-pi/4) b,d; h d;
    cx b,c;
    h d; cu1(pi/4) c,d; h d;
    cx a,c;
    h d; cu1(-pi/4) c,d; h d;
    cx b,c;
    h d; cu1(pi/4) c,d; h d;
    cx a,c;
    h d; cu1(-pi/4) c,d; h d;
}
// 3-controlled sqrt(X) gate, this equals the C3X gate where the CU1 rotations are -pi/8 not -pi/4
gate c3sqrtx a,b,c,d
{
    h d; cu1(-pi/8) a,d; h d;
    cx a,b;
    h d; cu1(pi/8) b,d; h d;
    cx a,b;
    h d; cu1(-pi/8) b,d; h d;
    cx b,c;
    h d; cu1(pi/8) c,d; h d;
    cx a,c;
    h d; cu1(-pi/8) c,d; h d;
    cx b,c;
    h d; cu1(pi/8) c,d; h d;
    cx a,c;
    h d; cu1(-pi/8) c,d; h d;
}
// 4-controlled X gate
gate c4x a,b,c,d,f
{
    h f; cu1(-pi/2) d,f; h f;
    c3x a,b,c,d;
    h f; cu1(pi/2) d,f; h f;
    c3x a,b,c,d;
    c3sqrtx a,b,c,f;
}
// echoed RZX(pi/2) gate implemented using RZX(pi/4) and RZX(-pi/4)
gate ecr a, b {
  U(3*pi/2, pi, pi) a;
  U(pi/2, pi/2, 3*pi/2) b;
  CX a, b;
}
`;function parseQasm(e,t={semantic:!0}){let{tokens:r,errors:n}=lexer_tokenizeQasm(e);tJ.input=r;let i=tJ.program(),a=[...diagnostic_lexicalErrorsToDiagnostic(n),...diagnostic_gramaticalErrorsToDiagnostic(e,tJ.errors)],{diagnostics:s}=resolveIncludes(i);if(a.push(...s),t.semantic){let{diagnostics:e}=semanticParse(i);a.push(...e)}return{result:i,diagnostics:a}}var t5=r(16983);function composerStateInit(e){let t=e.columnsMode??((0,b.mB)(e.program)?"free":"left"),r=(0,t5.fp)(e.program,t);return{mode:"edit",program:r,dirtyProgram:void 0,movingNodeIds:void 0,focusNodeIds:[],selection:[],hover:[],wireHover:void 0,programPast:[],programFuture:[],clipboard:void 0,addingNodes:void 0,addingModifier:void 0,inspectingNodeId:void 0,breakpointNodeIds:[],showPhaseDiskAtEnd:e.showPhaseDiskAtEnd??!1,openDialog:void 0,leftPanel:void 0,expandDefinitionNodeIds:[],columnsMode:t}}var t3=r(87799),t4=r(4782);let t6=t4?.default||t4,noop=()=>{},t8=(0,d.forwardRef)((e,t)=>{let{program:r,groupClassicalRegisters:n,className:i}=e,a=e.theme??u.Q,s=(0,d.useMemo)(()=>composerStateInit({program:r}),[r]),f=(0,d.useMemo)(()=>({state:s,dispatch:noop,stateVectors:[],featuresSet:new Set([])}),[s]),p=(0,d.useRef)(null),{width:g=300}=t6(p),m=(0,d.useMemo)(()=>e.viewport?"wrap"===e.viewport.overflow?{overflow:"wrap",width:g}:e.viewport:{overflow:"none"},[e.viewport,g]),y="auto"===m.overflow||"wrap"===m.overflow,v=(0,l.jsx)(t3.pn,{children:(0,l.jsx)(ThemeContextProvider,{theme:a,children:(0,l.jsx)(eW,{value:f,children:(0,l.jsx)(e0,{ref:t,program:s.program,columnsMode:s.columnsMode,viewport:m,showRegistersLabelBitIndex:!0,className:y?void 0:(0,en.W)("composer",i),groupClassicalRegisters:n})})})});return y?(0,l.jsx)("div",{ref:p,className:(0,en.W)("composer",i),children:v}):v});t8.displayName="ComposerReadOnly";let t7=(0,d.forwardRef)((e,t)=>{let{qasm:r,...n}=e,i=(0,d.useMemo)(()=>{let{result:e,diagnostics:t}=parseQasm(r);return t.length>0?[]:astToComposerQasmAst(e)},[r]);return(0,l.jsx)(t8,{ref:t,program:i,...n})});t7.displayName="ComposerQasmReadOnly"},16983:function(e,t,r){"use strict";r.d(t,{QN:function(){return getRelativeColumnIndexByNodeId},nw:function(){return setFreeColumnsAnnotation},fp:function(){return verifyColumnsMode}});var n=r(55984),i=r(72938),a=r(63433),s=r(84062),l=r(58373),u=r(39708),d=r(20585),f=r(12758),p=r(86956),g=r(63016),_baseDifference=function(e,t,r,n){var i=-1,a=u.Z,s=!0,m=e.length,y=[],v=t.length;if(!m)return y;r&&(t=(0,f.Z)(t,(0,p.Z)(r))),n?(a=d.Z,s=!1):t.length>=200&&(a=g.Z,s=!1,t=new l.Z(t));r:for(;++i<m;){var x=e[i],b=null==r?x:r(x);if(x=n||0!==x?x:0,s&&b==b){for(var O=v;O--;)if(t[O]===b)continue r;y.push(x)}else a(t,b,n)||y.push(x)}return y},m=r(26641),y=r(71160),v=(0,m.Z)(function(e,t){return(0,y.Z)(e)?_baseDifference(e,t):[]}),x=r(69651),b=r(75394);function setFreeColumnsAnnotation(e,t){let r=(0,n.mB)(e);if(r){let n=r.value,i=t({columns:n});if(!(0,s.Z)(n,i)){let t={...r,value:i};e=[...v(e,r),t]}}else{let r=getColumnIndexByNodeId(e,"left"),i=(0,n.G4)(e).map(e=>r.get(e.meta.id)),s={kind:"annotation",id:"columns",meta:{id:Symbol()},value:t({columns:i})};e=[...e,s],e=(0,a.A7)(e,s.meta.id,{line:2,column:0})}return e}function getColumnIndexByNodeId(e,t){let r=(0,i.n)(e,t);return new Map(r.flatMap((e,t)=>e.map(e=>[e.meta.id,t])))}function getRelativeColumnIndexByNodeId(e,t,r){let n=getColumnIndexByNodeId(e,t),i=(0,x.Z)(r.map(e=>n.get(e)))??0;return new Map(r.map(e=>[e,n.get(e)-i]))}function verifyColumnsMode(e,t){if("left"===t||"layers-left"===t){let t=(0,n.mB)(e);return t?v(e,t):e}return validateFreeColumnsAnnotation(e)?e:setFreeColumnsAnnotationUsingLeftAlignment(e)}function setFreeColumnsAnnotationUsingLeftAlignment(e){let t=getColumnIndexByNodeId(e,"left"),r=(0,n.G4)(e).map(e=>t.get(e.meta.id));return setFreeColumnsAnnotation(e,()=>r)}function validateFreeColumnsAnnotation(e){let t=(0,n.G4)(e),r=(0,n.mB)(e);if(!r)return!1;let a=r.value;if(t.length!==a.length||!a.every(e=>e>=0))return!1;let s=(0,i.n)(e,"free"),l=new b.b(e);for(let e of s)if(l.operationsOverlap(e))return!1;return!0}},55984:function(e,t,r){"use strict";function isOperation(e){return"annotation"===e.kind&&"phaseDisk"===e.id||["if","measure","gate","reset","barrier"].includes(e.kind)}function findIncludes(e){return e.filter(e=>"include"===e.kind)}function findRegisters(e){return e.filter(e=>"registerDefinition"===e.kind)}function findGateAndOpaqueGateDefinitions(e){return[...findGateDefinitions(e),...findOpaqueGateDefinitions(e)]}function findGateDefinitions(e){return e.filter(e=>"gateDefinition"===e.kind)}function findOpaqueGateDefinitions(e){return e.filter(e=>"opaqueGateDefinition"===e.kind)}function findOperations(e){return e.filter(e=>isOperation(e))}function findColumnsAnnotation(e){return e.find(e=>"annotation"===e.kind&&"columns"===e.id)}function findPhaseDiskAnnotations(e){return e.filter(e=>"annotation"===e.kind&&"phaseDisk"===e.id)}r.d(t,{E8:function(){return findRegisters},G4:function(){return findOperations},NY:function(){return findGateAndOpaqueGateDefinitions},Vn:function(){return findPhaseDiskAnnotations},lr:function(){return isOperation},mB:function(){return findColumnsAnnotation},ze:function(){return findIncludes}})},90154:function(e,t,r){"use strict";r.d(t,{ap:function(){return getNodeRegisters}});var n=r(55984);function getNodeRegisters(e){if(!(0,n.lr)(e))return[];switch(e.kind){case"reset":case"gate":case"barrier":return e.registers;case"measure":return[e.from,e.to];case"if":return[e.condition.register,...getNodeRegisters(e.operation)];case"annotation":if("phaseDisk"===e.id)return e.registers}}},57847:function(e,t,r){"use strict";r.d(t,{Fl:function(){return canApplyModifier},Oc:function(){return getInspectingSubProgram},T9:function(){return sortOperationsVisually},ZN:function(){return findGateDefinition},aE:function(){return isFromQelib1},ck:function(){return getGateDefinitionCircuit}});var n=r(25837),i=r(54139),a=r(55424),s=r(36355),l=r(69651),u=r(72938),d=r(75394),f=r(55984),p=r(63433),g=r(16983);let m=new WeakMap;function findGateDefinition(e,t){return"gate"===t.kind||"gateDefinition"===t.kind?findGateDefinitionById(e,t.id):"if"===t.kind&&"gate"===t.operation.kind?findGateDefinitionById(e,t.operation.id):void 0}function findGateDefinitionById(e,t){let r=m.get(e);if(!r){let t=getAllGates(e),n=new Map;for(let e of t)n.set(e.id,e);m.set(e,n),r=n}return r.get(t)}function getAllGates(e){let t=(0,n.C)(),r=(0,f.ze)(e).flatMap(e=>{let t=(0,f.NY)(e.program??[]);return t.map(t=>({...t,location:{kind:"include",include:e}}))}),i=(0,f.NY)(e),a=[...t.map(t=>{let r={id:t.id,kind:t.kind,parameters:t.parameters.map(e=>({id:e.id,type:e.type})),meta:{id:Symbol()},location:{kind:"built-in"}};return(0,p.IJ)(e)&&(r.meta.previousNodeDistance={line:1,column:0}),r}),...r,...i.map(e=>({...e,location:{kind:"program"}}))];return a}function getSubprogram(e,t,r){let n=[],i=new Set(r),a=(0,p.IJ)(e),s=(0,g.QN)(e,t,r),l=[];for(let[t,r]of e.entries())switch(r.kind){case"version":case"include":case"gateDefinition":case"opaqueGateDefinition":case"registerDefinition":n.push(r);break;case"gate":case"measure":case"barrier":case"reset":case"if":i.has(r.meta.id)&&(n.push(r),l.push(s.get(r.meta.id)));break;case"comment":if(a&&t>0&&0===r.meta.previousNodeDistance.line){let a=e[t-1];i.has(a.meta.id)&&n.push(r)}break;case"annotation":"phaseDisk"===r.id&&i.has(r.meta.id)&&(n.push(r),l.push(s.get(r.meta.id)))}return"free"===t&&(n=(0,g.nw)(n,()=>l)),n}let y={u3:"cu3",u1:"cu1",cx:"ccx",u:"cu",p:"cp",x:"cx",y:"cy",z:"cz",h:"ch",rx:"crx",ry:"cry",rz:"crz",sx:"csx",swap:"cswap",ccx:"c3x",c3x:"c4x"};function getGateWithOneControlMore(e){return y[e]}function sortOperationsVisually(e,t){let r=(0,u.n)(e,t),n=new d.b(e),i=[];for(let e of r){let t=(0,s.Z)(e,e=>n.getOperationFirstWire(e));i.push(...t)}return i}function getGateDefinitionCircuit(e,t,r){let n="gate"===r.kind||"if"===r.kind&&"gate"===r.operation.kind;if(!n)return;let a=(0,p.IJ)(e),u=getSubprogram(e,t,[]).filter(e=>"registerDefinition"!==e.kind),f=findGateDefinition(e,r);if(!f||"opaqueGateDefinition"===f.kind)return;let g="gate"===r.kind?r:r.operation,m=new d.b(e),y=f.parameters.filter(e=>"quantum"===e.type),v=(0,s.Z)(y,e=>{let t=y.indexOf(e);return(0,l.Z)(m.getRegisterWires(g.registers[t]))});for(let e of v)if("quantum"===e.type){let t={kind:"registerDefinition",type:"quantum",id:e.id,size:1,meta:{id:Symbol()}};a&&(t.meta.previousNodeDistance={line:1,column:0}),u.push(t)}let x=(0,i.Z)(f.parameters.filter(e=>"classical"===e.type).map((e,t)=>[e.id,g.arguments[t]]));function mapArguments(e){let t=e.expression;for(let r of e.variables){let e=x[r.id];t=t.replace(RegExp(r.id,"g"),e.expression)}return{expression:t,variables:[]}}for(let e of f.operations)switch(e.kind){case"comment":{let t={kind:"comment",content:e.content,meta:{id:e.meta.id}};a&&(t.meta.previousNodeDistance={line:1,column:0}),u.push(t);break}case"gate":{let t={kind:"gate",id:e.id,arguments:e.arguments.map(mapArguments),registers:e.registers.map(e=>({id:e.id,index:0})),meta:{id:e.meta.id}};a&&(t.meta.previousNodeDistance={line:1,column:0}),u.push(t);break}case"barrier":{let t={kind:"barrier",registers:e.registers.map(e=>({id:e.id,index:0})),meta:{id:e.meta.id}};a&&(t.meta.previousNodeDistance={line:1,column:0}),u.push(t)}}return u}function isFromQelib1(e){return"include"===e.location.kind&&includeIsQelib1(e.location.include)}function includeIsQelib1(e){return"qelib1.inc"===e.id}function canApplyConditional(e,t){let r=new d.b(e);return 0!==r.classicalWires().length&&("measure"===t.kind||"gate"===t.kind||"reset"===t.kind)}function canApplyControl(e,t){let r=findGateDefinition(e,t);if(!r||!isFromQelib1(r))return!1;let n=getGateWithOneControlMore(r.id);if(!n)return!1;let i=findGateDefinitionById(e,n);if(!i)return!1;let a=new d.b(e),s=i.parameters.filter(e=>"quantum"===e.type);return s.length<=a.quantumWires().length}function canApplyModifier(e,t,r){return"control"===e.kind?canApplyControl(t,r):"conditional"===e.kind&&canApplyConditional(t,r)}function getInspectingSubProgram(e,t,r){let n=sortOperationsVisually(e,t),i=n.slice(0,n.findIndex(e=>e.meta.id===r)+1),a=getSubprogram(e,t,i.map(e=>e.meta.id));return a}(0,i.Z)((0,a.Z)(y,(e,t)=>[e,t]))},72938:function(e,t,r){"use strict";r.d(t,{n:function(){return groupByColumns}});var n=r(75394),i=r(72825),a=r(34530),s=r(20276),l=Math.max,u=Math.min,lodash_es_findLastIndex=function(e,t,r){var n=null==e?0:e.length;if(!n)return -1;var d=n-1;return void 0!==r&&(d=(0,s.Z)(r),d=r<0?l(n+d,0):u(d,n-1)),(0,i.Z)(e,(0,a.Z)(t,3),d,!0)},d=r(10361),f=r(36355),p=r(47528),g=r(63939),m=r(55984);function groupByLayers(e){let t=new ProgramLayerBuilder(e);return t.layers().map(e=>[...e.values()])}let ProgramLayerBuilder=class ProgramLayerBuilder{program;wires;inputs=new Map;outputs=new Map;constructor(e){this.program=e,this.wires=new n.b(e)}layers(){this.addRegisters(),this.addOperations();let e=this.iterateThreeCreatingLayers();return e}addRegisters(){for(let e of(0,m.E8)(this.program)){let t=this.wires.getRegisterWires({id:e.id,index:void 0});for(let r of t){let t=new DagNode(e),n=new DagNode(e);t.children.set(r,n),n.parents.set(r,t),this.inputs.set(r,t),this.outputs.set(r,n)}}}addOperations(){for(let e of(0,m.G4)(this.program)){let t=new DagNode(e);for(let r of this.wires.getOperationConnectedWires(e)){let e=this.outputs.get(r),n=e.parents.get(r);n.children.set(r,t),t.parents.set(r,n),e.parents.set(r,t),t.children.set(r,e)}}}iterateThreeCreatingLayers(){let e=[],t=new Set(this.inputs.values()),r=new Set;for(;0!==t.size;){let n=new Set;for(let e of t)for(let t of(r.add(e),e.children.values())){let e=[...t.parents.values()].filter(e=>!r.has(e));0===e.length&&isOperationNode(t)&&n.add(t)}if(t=n,n.size>0){let t=new Set;for(let e of n.values())isOperationNode(e)&&t.add(e.ref);e.push(t)}}return e}};let DagNode=class DagNode{ref;parents=new Map;children=new Map;constructor(e){this.ref=e}};function isOperationNode(e){return(0,m.lr)(e.ref)}var y=r(80884);function groupByColumns(e,t){return groupByLayerColumns(e,t).flat()}function groupByLayerColumns(e,t){switch(t){case"left":return[groupByColumnsLeftAligned(e)];case"layers-left":return groupByLayersLeftColumns(e);case"free":return[groupByFreeColumns(e)]}}function groupByColumnsLeftAligned(e){let t=groupByLayersLeftColumns(e).flat(),r=new n.b(e),i=[];for(let e of t)for(let t of e){let e=r.getOperationConnectedWiresBitSet(t),n=r.getOperationOverlapWiresBitSet(t),a=lodash_es_findLastIndex(i,t=>overlap(t.connectedWires,e)),s=(0,d.Z)(i,e=>!overlap(e.overlapWires,n),a+1);-1===s&&(s=i.length);let l=i[s];l||(i[s]={operations:[],connectedWires:new y,overlapWires:new y},l=i[s]),l.operations.push(t),l.connectedWires.union(e),l.overlapWires.union(n)}return i.map(e=>e.operations)}function groupByLayersLeftColumns(e){let t=groupByLayers(e),r=new n.b(e),i=[];for(let e of t){let t=[];for(let n of(0,f.Z)(e,e=>r.getOperationFirstWire(e))){let e;let i=r.getOperationOverlapWiresBitSet(n);for(let r of t)if(!overlap(i,r.visibleOffsets)){e=r;break}e?(e.operations.push(n),e.visibleOffsets.union(i)):t.push({operations:[n],visibleOffsets:i})}i.push(t.map(e=>e.operations))}return i}function groupByFreeColumns(e){let t=(0,m.G4)(e),r=(0,m.mB)(e),n=r?.value;if(!n)return groupByColumnsLeftAligned(e);let i=(0,p.Z)(r.value)??1,a=(0,g.Z)(0,i+1).map(()=>[]);for(let[e,n]of t.entries()){let t=r.value[e];a[t].push(n)}return a}function overlap(e,t){return 0!==e.intersection_size(t)}},63433:function(e,t,r){"use strict";r.d(t,{IJ:function(){return isQasmAst},A7:function(){return setPreviousNodeDistance}});var n=Object.prototype.hasOwnProperty,_baseHas=function(e,t){return null!=e&&n.call(e,t)},i=r(27864);function replaceItemAtIndex(e,t,r){return[...e.slice(0,t),r,...e.slice(t+1)]}function isQasmAst(e){return!(e.length>0)||isQasmAstNode(e[0])}function isQasmAstNode(e){var t;return null!=(t=e.meta)&&(0,i.Z)(t,"previousNodeDistance",_baseHas)}function setPreviousNodeDistance(e,t,r){if(!isQasmAst(e))return e;let n=e.findIndex(e=>e.meta.id===t);if(-1===n)return e;let i=e[n];return replaceItemAtIndex(e,n,{...i,meta:{...i.meta,previousNodeDistance:r}})}},88614:function(e,t,r){"use strict";r.d(t,{Q:function(){return tG}});var n,i,a,s,l,u=r(27573),d=r(47528),f=r(29120),p=r(57847),g=r(74569),m=r(61189),y=r(11925),v=r(95349),x=Object.prototype.hasOwnProperty,b=(0,v.Z)(function(e,t,r){x.call(e,r)?e[r].push(t):(0,y.Z)(e,r,[t])}),O=r(55424),R=r(53359),_=r(73021),_castSlice=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:(0,_.Z)(e,t,r)},A=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),_hasUnicode=function(e){return A.test(e)},C="\ud800-\udfff",k="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",P="\ud83c[\udffb-\udfff]",N="[^"+C+"]",L="(?:\ud83c[\udde6-\uddff]){2}",M="[\ud800-\udbff][\udc00-\udfff]",F="(?:"+k+"|"+P+")?",D="[\\ufe0e\\ufe0f]?",j="(?:\\u200d(?:"+[N,L,M].join("|")+")"+D+F+")*",B=RegExp(P+"(?="+P+")|(?:"+[N+k+"?",k,L,M,"["+C+"]"].join("|")+")"+(D+F+j),"g"),upperFirst=function(e){var t,r=_hasUnicode(e=(0,R.Z)(e))?_hasUnicode(t=e)?t.match(B)||[]:t.split(""):void 0,n=r?r[0]:e.charAt(0),i=r?_castSlice(r,1).join(""):e.slice(1);return n.toUpperCase()+i},z=r(22551),W=(n={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},function(e){return null==n?void 0:n[e]}),G=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Z=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),q=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Y="\ud800-\udfff",X="\\u2700-\\u27bf",Q="a-z\\xdf-\\xf6\\xf8-\\xff",ee="A-Z\\xc0-\\xd6\\xd8-\\xde",et="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",er="['’]",en="["+et+"]",ei="["+Q+"]",eo="[^"+Y+et+"\\d+"+X+Q+ee+"]",ea="(?:\ud83c[\udde6-\uddff]){2}",es="[\ud800-\udbff][\udc00-\udfff]",ec="["+ee+"]",el="(?:"+ei+"|"+eo+")",eu="(?:"+er+"(?:d|ll|m|re|s|t|ve))?",ed="(?:"+er+"(?:D|LL|M|RE|S|T|VE))?",ef="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\ud83c[\udffb-\udfff])?",eh="[\\ufe0e\\ufe0f]?",ep="(?:\\u200d(?:"+["[^"+Y+"]",ea,es].join("|")+")"+eh+ef+")*",eg="(?:"+["["+X+"]",ea,es].join("|")+")"+(eh+ef+ep),em=RegExp([ec+"?"+ei+"+"+eu+"(?="+[en,ec,"$"].join("|")+")","(?:"+ec+"|"+eo+")+"+ed+"(?="+[en,ec+el,"$"].join("|")+")",ec+"?"+el+"+"+eu,ec+"+"+ed,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",eg].join("|"),"g"),lodash_es_words=function(e,t,r){var n;return(e=(0,R.Z)(e),void 0===(t=r?void 0:t))?(n=e,$.test(n))?e.match(em)||[]:e.match(q)||[]:e.match(t)||[]},ey=RegExp("['’]","g"),_createCompounder=function(e){return function(t){var r;return(0,z.Z)(lodash_es_words((r=t,(r=(0,R.Z)(r))&&r.replace(G,W).replace(Z,"")).replace(ey,"")),e,"")}},ev=_createCompounder(function(e,t,r){var n;return t=t.toLowerCase(),e+(r?(n=t,upperFirst((0,R.Z)(n).toLowerCase())):t)}),ex=r(57566),eb=r(34530),lodash_es_mapValues=function(e,t){var r={};return t=(0,eb.Z)(t,3),(0,ex.Z)(e,function(e,n,i){(0,y.Z)(r,n,t(e,n,i))}),r},eE=r(12758),eT=r(32530),_arrayEach=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},eO=r(46178),eR=Object.prototype.hasOwnProperty,_assignValue=function(e,t,r){var n=e[t];eR.call(e,t)&&(0,eO.Z)(n,r)&&(void 0!==r||t in e)||(0,y.Z)(e,t,r)},_copyObject=function(e,t,r,n){var i=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var l=t[a],u=n?n(r[l],e[l],l,r,e):void 0;void 0===u&&(u=e[l]),i?(0,y.Z)(r,l,u):_assignValue(r,l,u)}return r},e_=r(68332),eA=r(90576),eS=r(20257),eC=r(72859),_nativeKeysIn=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},ek=Object.prototype.hasOwnProperty,_baseKeysIn=function(e){if(!(0,eS.Z)(e))return _nativeKeysIn(e);var t=(0,eC.Z)(e),r=[];for(var n in e)"constructor"==n&&(t||!ek.call(e,n))||r.push(n);return r},eI=r(63779),lodash_es_keysIn=function(e){return(0,eI.Z)(e)?(0,eA.Z)(e,!0):_baseKeysIn(e)},ew=r(70388),eP="object"==typeof exports&&exports&&!exports.nodeType&&exports,eN=eP&&"object"==typeof module&&module&&!module.nodeType&&module,eL=eN&&eN.exports===eP?ew.Z.Buffer:void 0,eM=eL?eL.allocUnsafe:void 0,_cloneBuffer=function(e,t){if(t)return e.slice();var r=e.length,n=eM?eM(r):new e.constructor(r);return e.copy(n),n},_copyArray=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},eF=r(59922),eD=r(54763),ej=(0,r(12951).Z)(Object.getPrototypeOf,Object),eU=r(91819),eB=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)(0,eD.Z)(t,(0,eF.Z)(e)),e=ej(e);return t}:eU.Z,ez=r(16140),eW=r(94299),_getAllKeysIn=function(e){return(0,eW.Z)(e,lodash_es_keysIn,eB)},eG=r(514),eH=Object.prototype.hasOwnProperty,_initCloneArray=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&eH.call(e,"index")&&(r.index=e.index,r.input=e.input),r},eZ=r(58274),_cloneArrayBuffer=function(e){var t=new e.constructor(e.byteLength);return new eZ.Z(t).set(new eZ.Z(e)),t},_cloneDataView=function(e,t){var r=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},eV=/\w*$/,_cloneRegExp=function(e){var t=new e.constructor(e.source,eV.exec(e));return t.lastIndex=e.lastIndex,t},eq=r(93623),eK=eq.Z?eq.Z.prototype:void 0,e$=eK?eK.valueOf:void 0,_cloneTypedArray=function(e,t){var r=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},_initCloneByTag=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return _cloneArrayBuffer(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return _cloneDataView(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return _cloneTypedArray(e,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return _cloneRegExp(e);case"[object Symbol]":return e$?Object(e$.call(e)):{}}},eY=Object.create,eX=function(){function object(){}return function(e){if(!(0,eS.Z)(e))return{};if(eY)return eY(e);object.prototype=e;var t=new object;return object.prototype=void 0,t}}(),eQ=r(40437),eJ=r(75307),e0=r(992),e1=r(86956),e2=r(91434),e5=e2.Z&&e2.Z.isMap,e3=e5?(0,e1.Z)(e5):function(e){return(0,e0.Z)(e)&&"[object Map]"==(0,eG.Z)(e)},e4=e2.Z&&e2.Z.isSet,e6=e4?(0,e1.Z)(e4):function(e){return(0,e0.Z)(e)&&"[object Set]"==(0,eG.Z)(e)},e8="[object Arguments]",e7="[object Function]",e9="[object Object]",te={};function baseClone(e,t,r,n,i,a){var s,l=1&t,u=2&t,d=4&t;if(r&&(s=i?r(e,n,i,a):r(e)),void 0!==s)return s;if(!(0,eS.Z)(e))return e;var f=(0,eQ.Z)(e);if(f){if(s=_initCloneArray(e),!l)return _copyArray(e,s)}else{var p,g,m,y,v=(0,eG.Z)(e),x=v==e7||"[object GeneratorFunction]"==v;if((0,eJ.Z)(e))return _cloneBuffer(e,l);if(v==e9||v==e8||x&&!i){if(s=u||x?{}:"function"!=typeof e.constructor||(0,eC.Z)(e)?{}:eX(ej(e)),!l)return u?(g=(p=s)&&_copyObject(e,lodash_es_keysIn(e),p),_copyObject(e,eB(e),g)):(y=(m=s)&&_copyObject(e,(0,e_.Z)(e),m),_copyObject(e,(0,eF.Z)(e),y))}else{if(!te[v])return i?e:{};s=_initCloneByTag(e,v,l)}}a||(a=new eT.Z);var b=a.get(e);if(b)return b;a.set(e,s),e6(e)?e.forEach(function(n){s.add(baseClone(n,t,r,n,e,a))}):e3(e)&&e.forEach(function(n,i){s.set(i,baseClone(n,t,r,i,e,a))});var O=d?u?_getAllKeysIn:ez.Z:u?lodash_es_keysIn:e_.Z,R=f?void 0:O(e);return _arrayEach(R||e,function(n,i){R&&(n=e[i=n]),_assignValue(s,i,baseClone(n,t,r,i,e,a))}),s}te[e8]=te["[object Array]"]=te["[object ArrayBuffer]"]=te["[object DataView]"]=te["[object Boolean]"]=te["[object Date]"]=te["[object Float32Array]"]=te["[object Float64Array]"]=te["[object Int8Array]"]=te["[object Int16Array]"]=te["[object Int32Array]"]=te["[object Map]"]=te["[object Number]"]=te[e9]=te["[object RegExp]"]=te["[object Set]"]=te["[object String]"]=te["[object Symbol]"]=te["[object Uint8Array]"]=te["[object Uint8ClampedArray]"]=te["[object Uint16Array]"]=te["[object Uint32Array]"]=!0,te["[object Error]"]=te[e7]=te["[object WeakMap]"]=!1;var tt=baseClone,tr=r(15604),tn=r(98975),ti=r(63099),to=r(20686),_baseUnset=function(e,t){var r,n;return t=(0,tr.Z)(t,e),null==(r=e,e=(n=t).length<2?r:(0,ti.Z)(r,(0,_.Z)(n,0,-1)))||delete e[to.Z(tn.Z(t))]},ta=r(91864),ts=Object.prototype,tc=Function.prototype.toString,tl=ts.hasOwnProperty,tu=tc.call(Object),lodash_es_isPlainObject=function(e){if(!(0,e0.Z)(e)||"[object Object]"!=(0,ta.Z)(e))return!1;var t=ej(e);if(null===t)return!0;var r=tl.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&tc.call(r)==tu},_customOmitClone=function(e){return lodash_es_isPlainObject(e)?void 0:e},td=r(29607),tf=r(79983),th=r(81411),tp=(i=function(e,t){var r={};if(null==e)return r;var n=!1;t=(0,eE.Z)(t,function(t){return t=(0,tr.Z)(t,e),n||(n=t.length>1),t}),_copyObject(e,_getAllKeysIn(e),r),n&&(r=tt(r,7,_customOmitClone));for(var i=t.length;i--;)_baseUnset(r,t[i]);return r},(0,th.Z)((0,tf.Z)(i,void 0,function(e){return(null==e?0:e.length)?(0,td.Z)(e,1):[]}),i+"")),tg=r(57812),tm=r(22360),lodash_es_forEach=function(e,t){return((0,eQ.Z)(e)?_arrayEach:tg.Z)(e,"function"==typeof t?t:tm.Z)},ty=r(7632),tv=r(27198);function _assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _isNativeFunction(e){return -1!==Function.toString.call(e).indexOf("[native code]")}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _construct(e,t,r){return(_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&_setPrototypeOf(i,r.prototype),i}).apply(null,arguments)}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,Wrapper)}function Wrapper(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,e)})(e)}var tx=function(e){function PolishedError(t){return _assertThisInitialized(e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this)}return _inheritsLoose(PolishedError,e),PolishedError}(_wrapNativeSuper(Error));function colorToInt(e){return Math.round(255*e)}function convertToInt(e,t,r){return colorToInt(e)+","+colorToInt(t)+","+colorToInt(r)}function hslToRgb(e,t,r,n){if(void 0===n&&(n=convertToInt),0===t)return n(r,r,r);var i=(e%360+360)%360/60,a=(1-Math.abs(2*r-1))*t,s=a*(1-Math.abs(i%2-1)),l=0,u=0,d=0;i>=0&&i<1?(l=a,u=s):i>=1&&i<2?(l=s,u=a):i>=2&&i<3?(u=a,d=s):i>=3&&i<4?(u=s,d=a):i>=4&&i<5?(l=s,d=a):i>=5&&i<6&&(l=a,d=s);var f=r-a/2;return n(l+f,u+f,d+f)}var tb={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function nameToHex(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return tb[t]?"#"+tb[t]:e}var tE=/^#[a-fA-F0-9]{6}$/,tT=/^#[a-fA-F0-9]{8}$/,tO=/^#[a-fA-F0-9]{3}$/,tR=/^#[a-fA-F0-9]{4}$/,t_=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,tA=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,tS=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,tC=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function parseToRgb(e){if("string"!=typeof e)throw new tx(3);var t=nameToHex(e);if(t.match(tE))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(tT)){var r=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:r}}if(t.match(tO))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(tR)){var n=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:n}}var i=t_.exec(t);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var a=tA.exec(t.substring(0,50));if(a)return{red:parseInt(""+a[1],10),green:parseInt(""+a[2],10),blue:parseInt(""+a[3],10),alpha:parseFloat(""+a[4])>1?parseFloat(""+a[4])/100:parseFloat(""+a[4])};var s=tS.exec(t);if(s){var l="rgb("+hslToRgb(parseInt(""+s[1],10),parseInt(""+s[2],10)/100,parseInt(""+s[3],10)/100)+")",u=t_.exec(l);if(!u)throw new tx(4,t,l);return{red:parseInt(""+u[1],10),green:parseInt(""+u[2],10),blue:parseInt(""+u[3],10)}}var d=tC.exec(t.substring(0,50));if(d){var f="rgb("+hslToRgb(parseInt(""+d[1],10),parseInt(""+d[2],10)/100,parseInt(""+d[3],10)/100)+")",p=t_.exec(f);if(!p)throw new tx(4,t,f);return{red:parseInt(""+p[1],10),green:parseInt(""+p[2],10),blue:parseInt(""+p[3],10),alpha:parseFloat(""+d[4])>1?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new tx(5)}function rgbToHsl(e){var t,r=e.red/255,n=e.green/255,i=e.blue/255,a=Math.max(r,n,i),s=Math.min(r,n,i),l=(a+s)/2;if(a===s)return void 0!==e.alpha?{hue:0,saturation:0,lightness:l,alpha:e.alpha}:{hue:0,saturation:0,lightness:l};var u=a-s,d=l>.5?u/(2-a-s):u/(a+s);switch(a){case r:t=(n-i)/u+(n<i?6:0);break;case n:t=(i-r)/u+2;break;default:t=(r-n)/u+4}return(t*=60,void 0!==e.alpha)?{hue:t,saturation:d,lightness:l,alpha:e.alpha}:{hue:t,saturation:d,lightness:l}}function parseToHsl(e){return rgbToHsl(parseToRgb(e))}var reduceHexValue$1=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function numberToHex(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function colorToHex(e){return numberToHex(Math.round(255*e))}function convertToHex(e,t,r){return reduceHexValue$1("#"+colorToHex(e)+colorToHex(t)+colorToHex(r))}function hsl(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return hslToRgb(e,t,r,convertToHex);if("object"==typeof e&&void 0===t&&void 0===r)return hslToRgb(e.hue,e.saturation,e.lightness,convertToHex);throw new tx(1)}function hsla(e,t,r,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof n)return n>=1?hslToRgb(e,t,r,convertToHex):"rgba("+hslToRgb(e,t,r)+","+n+")";if("object"==typeof e&&void 0===t&&void 0===r&&void 0===n)return e.alpha>=1?hslToRgb(e.hue,e.saturation,e.lightness,convertToHex):"rgba("+hslToRgb(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new tx(2)}function rgb(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return reduceHexValue$1("#"+numberToHex(e)+numberToHex(t)+numberToHex(r));if("object"==typeof e&&void 0===t&&void 0===r)return reduceHexValue$1("#"+numberToHex(e.red)+numberToHex(e.green)+numberToHex(e.blue));throw new tx(6)}function rgba(e,t,r,n){if("string"==typeof e&&"number"==typeof t){var i=parseToRgb(e);return"rgba("+i.red+","+i.green+","+i.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof n)return n>=1?rgb(e,t,r):"rgba("+e+","+t+","+r+","+n+")";if("object"==typeof e&&void 0===t&&void 0===r&&void 0===n)return e.alpha>=1?rgb(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new tx(7)}function toColorString(e){if("object"!=typeof e)throw new tx(8);if("number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha)return rgba(e);if("number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha))return rgb(e);if("number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha)return hsla(e);if("number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha))return hsl(e);throw new tx(8)}function curried(e,t,r){return function(){var n=r.concat(Array.prototype.slice.call(arguments));return n.length>=t?e.apply(this,n):curried(e,t,n)}}function curry(e){return curried(e,e.length,[])}function guard(e,t,r){return Math.max(e,Math.min(t,r))}var tk=curry(function(e,t){if("transparent"===t)return t;var r=parseToHsl(t);return toColorString((0,tv.Z)({},r,{lightness:guard(0,1,r.lightness+parseFloat(e))}))}),tI=curry(function(e,t){if("transparent"===t)return t;var r=parseToRgb(t),n="number"==typeof r.alpha?r.alpha:1;return rgba((0,tv.Z)({},r,{alpha:guard(0,1,+(100*n-100*parseFloat(e)).toFixed(2)/100)}))});let tw={background:ty.OQy,textPrimary:ty.YNN,iconPrimary:ty.YNN},tP={...tw,backgroundInverse:ty.YNN,backgroundActive:tI(.6,ty.VLu),backgroundHover:tI(.84,ty.VLu),backgroundInverseHover:ty.yGj,backgroundSelected:tI(.76,ty.VLu),backgroundSelectedHover:tI(.68,ty.VLu),layer01:ty.cEB,layerActive01:ty.MeK,layerHover01:ty.yyG,layerSelected01:ty.HEo,layerSelectedHover01:ty.Bpv,layer02:ty.HEo,layerActive02:ty.mUS,layerHover02:ty.Bpv,layerSelected02:ty.MeK,layerSelectedHover02:ty.YER,layer03:ty.MeK,layerActive03:ty.VLu,layerHover03:ty.YER,layerSelected03:ty.mUS,layerSelectedHover03:ty.xSj,layerSelectedInverse:ty.YNN,layerSelectedDisabled:ty.tLT,layerAccent01:ty.HEo,layerAccentActive01:ty.mUS,layerAccentHover01:ty.Bpv,layerAccent02:ty.MeK,layerAccentActive02:ty.VLu,layerAccentHover02:ty.YER,layerAccent03:ty.mUS,layerAccentActive03:ty.HEo,layerAccentHover03:ty.xSj,field01:ty.cEB,fieldHover01:ty.yyG,field02:ty.HEo,fieldHover02:ty.Bpv,field03:ty.MeK,fieldHover03:ty.YER,borderSubtle00:ty.HEo,borderSubtle01:ty.MeK,borderSubtleSelected01:ty.mUS,borderSubtle02:ty.mUS,borderSubtleSelected02:ty.VLu,borderSubtle03:ty.mUS,borderSubtleSelected03:ty.VLu,borderStrong01:ty.mUS,borderStrong02:ty.VLu,borderStrong03:ty.tLT,borderTile01:ty.MeK,borderTile02:ty.mUS,borderTile03:ty.VLu,borderInverse:ty.YNN,borderDisabled:tI(.5,ty.VLu),textSecondary:ty.roR,textPlaceholder:tI(.6,tw.textPrimary),textHelper:ty.tLT,textInverse:ty.OQy,textDisabled:tI(.75,tw.textPrimary),linkInverseActive:ty.OQy,iconSecondary:ty.roR,iconInverse:ty.OQy,iconDisabled:tI(.75,tw.iconPrimary),focusInset:ty.OQy,skeletonBackground:tk(.065,tw.background),skeletonElement:ty.HEo},tN={...m.RUb,...tP},tL={background:ty.cEB,textPrimary:ty.YNN,iconPrimary:ty.YNN},tM={...tL,backgroundInverse:ty.YNN,backgroundActive:tI(.6,ty.VLu),backgroundHover:tI(.84,ty.VLu),backgroundInverseHover:ty.yGj,backgroundSelected:tI(.76,ty.VLu),backgroundSelectedHover:tI(.68,ty.VLu),layer01:ty.HEo,layerActive01:ty.mUS,layerHover01:ty.Bpv,layerSelected01:ty.MeK,layerSelectedHover01:ty.YER,layer02:ty.MeK,layerActive02:ty.VLu,layerHover02:ty.YER,layerSelected02:ty.mUS,layerSelectedHover02:ty.xSj,layer03:ty.mUS,layerActive03:ty.HEo,layerHover03:ty.xSj,layerSelected03:ty.MeK,layerSelectedHover03:ty.YER,layerSelectedInverse:ty.YNN,layerSelectedDisabled:ty.tLT,layerAccent01:ty.MeK,layerAccentActive01:ty.VLu,layerAccentHover01:ty.YER,layerAccent02:ty.mUS,layerAccentActive02:ty.HEo,layerAccentHover02:ty.xSj,layerAccent03:ty.VLu,layerAccentActive03:ty.MeK,layerAccentHover03:ty.vpi,field01:ty.HEo,fieldHover01:ty.Bpv,field02:ty.MeK,fieldHover02:ty.YER,field03:ty.mUS,fieldHover03:ty.xSj,borderSubtle00:ty.MeK,borderSubtle01:ty.mUS,borderSubtleSelected01:ty.VLu,borderSubtle02:ty.VLu,borderSubtleSelected02:ty.tLT,borderSubtle03:ty.VLu,borderSubtleSelected03:ty.tLT,borderStrong01:ty.VLu,borderStrong02:ty.tLT,borderStrong03:ty.roR,borderTile01:ty.mUS,borderTile02:ty.VLu,borderTile03:ty.tLT,borderInverse:ty.YNN,borderDisabled:tI(.5,ty.VLu),textPrimary:ty.YNN,textSecondary:ty.roR,textPlaceholder:tI(.6,tL.textPrimary),textHelper:ty.roR,textInverse:ty.OQy,textDisabled:tI(.75,tL.textPrimary),linkInverseActive:ty.OQy,iconPrimary:ty.YNN,iconSecondary:ty.roR,iconInverse:ty.OQy,iconDisabled:tI(.75,tL.iconPrimary),focusInset:ty.OQy,skeletonBackground:ty.yyG,skeletonElement:ty.MeK,toggleOff:ty.VLu},tF={...m.TGX,...tM},tD={white:m.ixZ,g10:m.pCD,g90:tF,g100:tN},tj=["layer","layerActive","layerHover","layerSelected","layerSelectedHover","layerAccent","layerAccentHover","layerAccentActive","field","fieldHover","borderSubtle","borderSubtleSelected","borderStrong","borderTile"],tU=b(m.v4N.v11,"type");(0,O.Z)(tU.color,e=>ev(e.name));let tB=getThemesWithContextualAndButtonTokens(tD);function getThemesWithContextualAndButtonTokens(e){let t=buttonTokensByTheme();return lodash_es_mapValues(e,(e,r)=>({...e,...getContextualTokens(e),...t[r]}))}function formatThemeNames(e){return lodash_es_mapValues(e,({whiteTheme:e,...t})=>({...tp(t,"fallback"),white:e}))}function buttonTokensByTheme(){let e=formatThemeNames(m.tSh.buttonTokens),t={};for(let r in e)for(let n in e[r])t[n]=t[n]||{},t[n][r]=e[r][n];return t}function getContextualTokens(e){let t={};return lodash_es_forEach(tj,r=>{let n=`${r}00`;e[n]||(n=`${r}01`),t={...t,[r]:e[n]}}),t}var tz=_createCompounder(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()});let tW=(a=ty.O9T,s=(e,t)=>tz(t),l={},s=(0,eb.Z)(s,3),(0,ex.Z)(a,function(e,t,r){(0,y.Z)(l,s(e,t,r),e)}),l),tG={Container:{background:tB.white.background,padding:20},Wires:{color:tB.white.borderSubtle02,qubitsGapY:8,registersGapY:8},Operations:{padding:[0,8],singleQubitHeight:32,background:operationBackground,text:operationText,label:operationLabel,width:operationWidth,emptyColumnsWidth:32,gapX:8,qubitToBitWireColor:tB.white.borderStrong01,qubitToBitWireText:tB.white.textPrimary},RegisterLabels:{text:tB.white.textHelper,width:registerLabelWidth,padding:[0,10,0,0]},Grid:{gapY:30},Selection:{area:tB.white.backgroundInverse,hover:tB.white.borderSubtle01,selection:tB.white.interactive,selectionGroup:tB.white.backgroundInverse},Inspect:{inspecting:tB.white.interactive,breakpoint:tB.white.supportWarning},PhaseDisk:{border:tB.white.borderInverse,bg:tB.white.skeletonBackground,color:tW.cyan[40],padding:[0,8,0,12]},OperationsCatalog:{padding:4,itemBackground:catalogItemBackground,itemLabel:catalogItemLabel,itemText:catalogItemText,itemHeight:32,itemWidth:catalogItemWidth},Components:{Root:e=>(0,u.jsx)(g.cp,{theme:"g10",...e})}};function registerLabelWidth(e){let t=`${e.id}[${e.size}]`;return(0,f.X)(t,"IBM Plex Mono",16)}function operationWidth(e){if("if"===e.kind)return operationWidth(e.operation);if("annotation"===e.kind&&"phaseDisk"===e.id)return 57;if("gate"!==e.kind)return 32;switch(e.id){case"x":case"cx":case"CX":case"ccx":case"c3x":case"c4x":case"swap":case"sx":case"csx":case"sxdg":case"cz":return 32}let t=operationLabel(e),r="";if(e.arguments.length>0&&(r=`(${e.arguments.map(e=>e.expression).join(", ")})`),"rzz"===e.id){let e=(0,d.Z)([(0,f.X)(t,"IBM Plex Sans",16),(0,f.X)(r,"IBM Plex Mono",8)]);return Math.ceil(e+12+30)}let n=(0,d.Z)([(0,f.X)(t,"IBM Plex Sans",16),(0,f.X)(r,"IBM Plex Mono",8)])+20;return Math.ceil((0,d.Z)([32,n]))}function gateBackground(e){return"built-in"===e.location.kind&&"CX"===e.id?tW.blue[80]:(0,p.aE)(e)?"h"===e.id?"#fa4d56":["x","cx","ccx","c3x","c4x","swap","cswap","id"].includes(e.id)?tW.blue[80]:["t","s","z","tdg","sdg","p","rz"].includes(e.id)?tW.cyan[40]:tW.magenta[70]:tB.white.buttonSecondary}function operationBackground(e,t,r){return"annotation"===e.kind&&"phaseDisk"===e.id?tB.white.textPrimary:r.dragging||r.disabled||"not-executed"===r.inspect?tB.white.layerAccent01:"gate"===e.kind&&t?gateBackground(t):"reset"===e.kind||"measure"===e.kind?tB.white.layerAccentActive01:"barrier"===e.kind?tB.white.textPrimary:tB.white.layerAccentActive01}function operationText(e,t){return t.dragging||t.disabled||"not-executed"===t.inspect?tB.white.textPlaceholder:"gate"===e.kind?"h"===e.id?tB.white.textPrimary:"rzz"===e.id?tB.white.textPlaceholder:["t","s","z","tdg","sdg","p","rz"].includes(e.id)?tB.white.textPrimary:tB.white.textInverse:tB.white.textPrimary}function operationLabel(e){if("gate"!==e.kind)return"";switch(e.id){case"ch":case"cy":case"crx":case"cry":case"crz":case"cu1":case"cp":case"cu3":case"cu":return e.id.slice(1).toUpperCase();case"h":case"t":case"s":case"z":case"p":case"rz":case"y":case"rx":case"ry":case"u":case"rxx":case"rzz":return e.id.toUpperCase();case"id":return"I";case"tdg":return"T";case"sdg":return"S";default:return e.id}}function catalogItemWidth(e){let t=tG.OperationsCatalog.itemHeight;if("gate"===e.kind){if((0,p.aE)(e.definition)&&["ccx","c3x","c4x","cswap","cx","cz","x","swap","sx","sxdg"].includes(e.definition.id))return t;let r=catalogItemLabel(e.definition),n=Math.ceil((0,f.X)(r,"IBM Plex Sans",16)+8);return n>t?n:t}return t}function catalogItemBackground(e,t){return t.disabled?tB.white.layerAccent01:"gate"===e.kind?gateBackground(e.definition):tB.white.layerAccentActive01}function catalogItemText(e,t){if(t.disabled)return tB.white.textPlaceholder;if("gate"===e.kind){if("program"===e.definition.location.kind)return tB.white.textInverse;if("h"===e.definition.id||["t","s","z","tdg","sdg","p","rz"].includes(e.definition.id))return tB.white.textPrimary}return["barrier","reset","measure","control","conditional"].includes(e.kind)?tB.white.textPrimary:tB.white.background}function catalogItemLabel(e){if("program"===e.location.kind)return e.id;switch(e.id){case"ch":case"cy":case"crx":case"cry":case"crz":case"cu1":case"cp":case"cu3":case"cu":return`c${e.id.slice(1).toUpperCase()}`;case"id":return"I";case"tdg":return"T";case"sdg":return"S";default:return e.id.toUpperCase()}}},29120:function(e,t,r){"use strict";function measureText(e,t,r=10){let i;let{widths:a,avg:s}=n[t];if(0===a.length)i=e.length*s;else{i=0;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t),n=r<a.length?a[r]:s;i+=n}}return i*r}r.d(t,{X:function(){return measureText}});let n={"IBM Plex Sans":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2359375,.284375,.4203125,.7140625,.5984375,.928125,.6953125,.2421875,.340625,.3421875,.45,.6,.2734375,.4,.2734375,.384375,.6,.6,.6,.6,.6,.6,.6,.6,.6,.6,.2921875,.2921875,.6,.6,.6,.478125,.8921875,.6421875,.653125,.621875,.671875,.584375,.559375,.6953125,.7078125,.4,.5109375,.634375,.5015625,.8125,.7078125,.709375,.60625,.709375,.640625,.58125,.5734375,.678125,.609375,.8921875,.6140625,.59375,.58125,.3171875,.384375,.3171875,.6,.565625,.6,.534375,.58125,.503125,.58125,.55,.325,.528125,.56875,.25,.25,.528125,.2734375,.8734375,.56875,.5609375,.58125,.58125,.3671875,.4875,.3515625,.56875,.4921875,.76875,.5078125,.5,.4640625,.34375,.3140625,.34375,.6],avg:.5364473684210525},"IBM Plex Mono":{widths:[],avg:.6}}},13187:function(e,t,r){"use strict";function findIncludes(e){return e.filter(e=>"include"===e.kind)}function findRegisters(e){return e.filter(e=>"registerDefinition"===e.kind)}function findGateAndOpaqueGateDefinitions(e){return[...findGateDefinitions(e),...findOpaqueGateDefinitions(e)]}function findGateDefinitions(e){return e.filter(e=>"gateDefinition"===e.kind)}function findOpaqueGateDefinitions(e){return e.filter(e=>"opaqueGateDefinition"===e.kind)}function findOperations(e){return e.filter(e=>isOperation(e))}function isOperation(e){return["if","measure","gate","reset","barrier"].includes(e.kind)}r.d(t,{E8:function(){return findRegisters},G4:function(){return findOperations},NY:function(){return findGateAndOpaqueGateDefinitions},Y7:function(){return findGateDefinitions},_w:function(){return findOpaqueGateDefinitions},ze:function(){return findIncludes}})},25837:function(e,t,r){"use strict";r.d(t,{C:function(){return getBuiltInGates},b:function(){return getAllGates}});var n=r(90315),i=r(13187);let a=new Set(["ecr"]);function getAllGates(e){let t=getBuiltInGates(),r=(0,i.NY)(e),n=new Set;for(let e of r)a.has(e.id)&&n.add(e.id);let s=(0,i.ze)(e).flatMap(e=>{let t=(0,i.NY)(e.program??[]);return t.flatMap(t=>n.has(t.id)?[]:[{...t,location:{kind:"include",include:e}}])}),l=[...t.map(e=>({...e,location:{kind:"built-in"}})),...s,...r.map(e=>({...e,location:{kind:"program"}}))];return l}function getBuiltInGates(){return[{kind:"opaqueGateDefinition",id:"CX",parameters:[{type:"quantum",id:"c",range:n.UM},{type:"quantum",id:"t",range:n.UM}],range:n.UM,idRange:n.UM},{kind:"opaqueGateDefinition",id:"U",parameters:[{type:"classical",id:"theta",range:n.UM},{type:"classical",id:"phi",range:n.UM},{type:"classical",id:"lambda",range:n.UM},{type:"quantum",id:"q",range:n.UM}],range:n.UM,idRange:n.UM}]}},90315:function(e,t,r){"use strict";r.d(t,{UM:function(){return i},g7:function(){return combineRanges},Mc:function(){return getTokenRange}});var n=r(70388).Z.isFinite,lodash_es_isFinite=function(e){return"number"==typeof e&&n(e)};let i={start:{line:-1,column:-1},end:{line:-1,column:-1}};function getTokenRange(e){if(!lodash_es_isFinite(e.startLine)||!lodash_es_isFinite(e.startColumn)||!lodash_es_isFinite(e.endLine)||!lodash_es_isFinite(e.endColumn))return i;let t={start:{line:e.startLine,column:e.startColumn},end:{line:e.endLine,column:e.endColumn}};return t}function combineRanges(e,t){return e===i||t===i?i:{start:e.start,end:t.end}}},39708:function(e,t,r){"use strict";var n=r(97572);function arrayIncludes(e,t){return!!(null==e?0:e.length)&&(0,n.Z)(e,t,0)>-1}t.Z=arrayIncludes},20585:function(e,t){"use strict";function arrayIncludesWith(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}t.Z=arrayIncludesWith},22551:function(e,t){"use strict";function arrayReduce(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}t.Z=arrayReduce},11925:function(e,t,r){"use strict";var n=r(85700);function baseAssignValue(e,t,r){"__proto__"==t&&n.Z?(0,n.Z)(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}t.Z=baseAssignValue},34312:function(e,t,r){"use strict";var n=r(42839);function baseExtremum(e,t,r){for(var i=-1,a=e.length;++i<a;){var s=e[i],l=t(s);if(null!=l&&(void 0===u?l==l&&!(0,n.Z)(l):r(l,u)))var u=l,d=s}return d}t.Z=baseExtremum},72825:function(e,t){"use strict";function baseFindIndex(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return -1}t.Z=baseFindIndex},29607:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(54763),i=r(93623),a=r(58230),s=r(40437),l=i.Z?i.Z.isConcatSpreadable:void 0,_isFlattenable=function(e){return(0,s.Z)(e)||(0,a.Z)(e)||!!(l&&e&&e[l])};function baseFlatten(e,t,r,i,a){var s=-1,l=e.length;for(r||(r=_isFlattenable),a||(a=[]);++s<l;){var u=e[s];t>0&&r(u)?t>1?baseFlatten(u,t-1,r,i,a):(0,n.Z)(a,u):i||(a[a.length]=u)}return a}var u=baseFlatten},97572:function(e,t,r){"use strict";r.d(t,{Z:function(){return _baseIndexOf}});var n=r(72825),_baseIsNaN=function(e){return e!=e},_strictIndexOf=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return -1},_baseIndexOf=function(e,t,r){return t==t?_strictIndexOf(e,t,r):(0,n.Z)(e,_baseIsNaN,r)}},26641:function(e,t,r){"use strict";var n=r(22360),i=r(79983),a=r(81411);function baseRest(e,t){return(0,a.Z)((0,i.Z)(e,t,n.Z),e+"")}t.Z=baseRest},73021:function(e,t){"use strict";function baseSlice(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}t.Z=baseSlice},64130:function(e,t){"use strict";function baseSum(e,t){for(var r,n=-1,i=e.length;++n<i;){var a=t(e[n]);void 0!==a&&(r=void 0===r?a:r+a)}return r}t.Z=baseSum},29518:function(e,t,r){"use strict";r.d(t,{Z:function(){return _baseUniq}});var n=r(58373),i=r(39708),a=r(20585),s=r(63016),l=r(85464),u=r(87397),d=l.Z&&1/(0,u.Z)(new l.Z([,-0]))[1]==1/0?function(e){return new l.Z(e)}:function(){},_baseUniq=function(e,t,r){var l=-1,f=i.Z,p=e.length,g=!0,m=[],y=m;if(r)g=!1,f=a.Z;else if(p>=200){var v=t?null:d(e);if(v)return(0,u.Z)(v);g=!1,f=s.Z,y=new n.Z}else y=t?[]:m;r:for(;++l<p;){var x=e[l],b=t?t(x):x;if(x=r||0!==x?x:0,g&&b==b){for(var O=y.length;O--;)if(y[O]===b)continue r;t&&y.push(b),m.push(x)}else f(y,b,r)||(y!==m&&y.push(b),m.push(x))}return m}},95349:function(e,t,r){"use strict";r.d(t,{Z:function(){return _createAggregator}});var _arrayAggregator=function(e,t,r,n){for(var i=-1,a=null==e?0:e.length;++i<a;){var s=e[i];t(n,s,r(s),e)}return n},n=r(57812),_baseAggregator=function(e,t,r,i){return(0,n.Z)(e,function(e,n,a){t(i,e,r(e),a)}),i},i=r(34530),a=r(40437),_createAggregator=function(e,t){return function(r,n){var s=(0,a.Z)(r)?_arrayAggregator:_baseAggregator,l=t?t():{};return s(r,e,(0,i.Z)(n,2),l)}}},85700:function(e,t,r){"use strict";var n=r(46107),i=function(){try{var e=(0,n.Z)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.Z=i},96052:function(e,t,r){"use strict";var n=r(46178),i=r(63779),a=r(24696),s=r(20257);function isIterateeCall(e,t,r){if(!(0,s.Z)(r))return!1;var l=typeof t;return("number"==l?!!((0,i.Z)(r)&&(0,a.Z)(t,r.length)):"string"==l&&t in r)&&(0,n.Z)(r[t],e)}t.Z=isIterateeCall},79983:function(e,t,r){"use strict";r.d(t,{Z:function(){return _overRest}});var _apply=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},n=Math.max,_overRest=function(e,t,r){return t=n(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=n(i.length-t,0),l=Array(s);++a<s;)l[a]=i[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=i[a];return u[t]=r(l),_apply(e,this,u)}}},81411:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n,i,a=r(85700),s=r(22360),l=a.Z?function(e,t){return(0,a.Z)(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:s.Z,u=Date.now,d=(n=0,i=0,function(){var e=u(),t=16-(e-i);if(i=e,t>0){if(++n>=800)return arguments[0]}else n=0;return l.apply(void 0,arguments)})},10361:function(e,t,r){"use strict";var n=r(72825),i=r(34530),a=r(20276),s=Math.max;function findIndex(e,t,r){var l=null==e?0:e.length;if(!l)return -1;var u=null==r?0:(0,a.Z)(r);return u<0&&(u=s(l+u,0)),(0,n.Z)(e,(0,i.Z)(t,3),u)}t.Z=findIndex},71160:function(e,t,r){"use strict";var n=r(63779),i=r(992);function isArrayLikeObject(e){return(0,i.Z)(e)&&(0,n.Z)(e)}t.Z=isArrayLikeObject},98975:function(e,t){"use strict";function last(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}t.Z=last},47528:function(e,t,r){"use strict";r.d(t,{Z:function(){return lodash_es_max}});var n=r(34312),_baseGt=function(e,t){return e>t},i=r(22360),lodash_es_max=function(e){return e&&e.length?(0,n.Z)(e,i.Z,_baseGt):void 0}},69651:function(e,t,r){"use strict";r.d(t,{Z:function(){return lodash_es_min}});var n=r(34312),_baseLt=function(e,t){return e<t},i=r(22360),lodash_es_min=function(e){return e&&e.length?(0,n.Z)(e,i.Z,_baseLt):void 0}},63939:function(e,t,r){"use strict";r.d(t,{Z:function(){return lodash_es_range}});var n=Math.ceil,i=Math.max,_baseRange=function(e,t,r,a){for(var s=-1,l=i(n((t-e)/(r||1)),0),u=Array(l);l--;)u[a?l:++s]=e,e+=r;return u},a=r(96052),s=r(77816),lodash_es_range=function(e,t,r){return r&&"number"!=typeof r&&(0,a.Z)(e,t,r)&&(t=r=void 0),e=(0,s.Z)(e),void 0===t?(t=e,e=0):t=(0,s.Z)(t),r=void 0===r?e<t?1:-1:(0,s.Z)(r),_baseRange(e,t,r,void 0)}},36355:function(e,t,r){"use strict";r.d(t,{Z:function(){return y}});var n=r(29607),i=r(12758),a=r(63099),s=r(34530),l=r(46328),_baseSortBy=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e},u=r(86956),d=r(42839),_compareAscending=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e==e,a=(0,d.Z)(e),s=void 0!==t,l=null===t,u=t==t,f=(0,d.Z)(t);if(!l&&!f&&!a&&e>t||a&&s&&u&&!l&&!f||n&&s&&u||!r&&u||!i)return 1;if(!n&&!a&&!f&&e<t||f&&r&&i&&!n&&!a||l&&r&&i||!s&&i||!u)return -1}return 0},_compareMultiple=function(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,s=i.length,l=r.length;++n<s;){var u=_compareAscending(i[n],a[n]);if(u){if(n>=l)return u;return u*("desc"==r[n]?-1:1)}}return e.index-t.index},f=r(22360),p=r(40437),_baseOrderBy=function(e,t,r){t=t.length?(0,i.Z)(t,function(e){return(0,p.Z)(e)?function(t){return(0,a.Z)(t,1===e.length?e[0]:e)}:e}):[f.Z];var n=-1;return t=(0,i.Z)(t,(0,u.Z)(s.Z)),_baseSortBy((0,l.Z)(e,function(e,r,a){return{criteria:(0,i.Z)(t,function(t){return t(e)}),index:++n,value:e}}),function(e,t){return _compareMultiple(e,t,r)})},g=r(26641),m=r(96052),y=(0,g.Z)(function(e,t){if(null==e)return[];var r=t.length;return r>1&&(0,m.Z)(e,t[0],t[1])?t=[]:r>2&&(0,m.Z)(t[0],t[1],t[2])&&(t=[t[0]]),_baseOrderBy(e,(0,n.Z)(t,1),[])})},77816:function(e,t,r){"use strict";r.d(t,{Z:function(){return lodash_es_toFinite}});var n=/\s/,_trimmedEndIndex=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t},i=/^\s+/,a=r(20257),s=r(42839),l=0/0,u=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,f=/^0o[0-7]+$/i,p=parseInt,lodash_es_toNumber=function(e){if("number"==typeof e)return e;if((0,s.Z)(e))return l;if((0,a.Z)(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=(0,a.Z)(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=(t=e)?t.slice(0,_trimmedEndIndex(t)+1).replace(i,""):t;var n=d.test(e);return n||f.test(e)?p(e.slice(2),n?2:8):u.test(e)?l:+e},g=1/0,lodash_es_toFinite=function(e){return e?(e=lodash_es_toNumber(e))===g||e===-g?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},20276:function(e,t,r){"use strict";var n=r(77816);function toInteger(e){var t=(0,n.Z)(e),r=t%1;return t==t?r?t-r:t:0}t.Z=toInteger},76159:function(e,t,r){"use strict";r.d(t,{Z:function(){return lodash_es_values}});var n=r(12758),i=r(68332),lodash_es_values=function(e){var t;return null==e?[]:(t=(0,i.Z)(e),(0,n.Z)(t,function(t){return e[t]}))}}}]);