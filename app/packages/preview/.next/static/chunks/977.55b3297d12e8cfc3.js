(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[977],{91433:function(e,t){"use strict";var r=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};function isEmpty(e){return e&&0===e.length}function keys(e){return null==e?[]:Object.keys(e)}function values(e){for(var t=[],r=Object.keys(e),n=0;n<r.length;n++)t.push(e[r[n]]);return t}function mapValues(e,t){for(var r=[],n=keys(e),i=0;i<n.length;i++){var o=n[i];r.push(t.call(null,e[o],o))}return r}function map(e,t){for(var r=[],n=0;n<e.length;n++)r.push(t.call(null,e[n],n));return r}function flatten(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];Array.isArray(n)?t=t.concat(flatten(n)):t.push(n)}return t}function first(e){return isEmpty(e)?void 0:e[0]}function last(e){var t=e&&e.length;return t?e[t-1]:void 0}function forEach(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)t.call(null,e[r],r);else if(isObject(e))for(var n=keys(e),r=0;r<n.length;r++){var i=n[r],o=e[i];t.call(null,o,i)}else throw Error("non exhaustive match")}function isString(e){return"string"==typeof e}function isUndefined(e){return void 0===e}function isFunction(e){return e instanceof Function}function drop(e,t){return void 0===t&&(t=1),e.slice(t,e.length)}function dropRight(e,t){return void 0===t&&(t=1),e.slice(0,e.length-t)}function filter(e,t){var r=[];if(Array.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];t.call(null,i)&&r.push(i)}return r}function reject(e,t){return filter(e,function(e){return!t(e)})}function pick(e,t){for(var r=Object.keys(e),n={},i=0;i<r.length;i++){var o=r[i],a=e[o];t(a)&&(n[o]=a)}return n}function has(e,t){return!!isObject(e)&&e.hasOwnProperty(t)}function contains(e,t){return void 0!==find(e,function(e){return e===t})}function cloneArr(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t}function cloneObj(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function find(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(t.call(null,n))return n}}function findAll(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n];t.call(null,i)&&r.push(i)}return r}function reduce(e,t,r){for(var n=Array.isArray(e),i=n?e:values(e),o=n?[]:keys(e),a=r,s=0;s<i.length;s++)a=t.call(null,a,i[s],n?s:o[s]);return a}function compact(e){return reject(e,function(e){return null==e})}function uniq(e,t){void 0===t&&(t=function(e){return e});var r=[];return reduce(e,function(e,n){var i=t(n);return contains(r,i)?e:(r.push(i),e.concat(n))},[])}function partial(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=[null].concat(t);return Function.bind.apply(e,n)}function isArray(e){return Array.isArray(e)}function isRegExp(e){return e instanceof RegExp}function isObject(e){return e instanceof Object}function every(e,t){for(var r=0;r<e.length;r++)if(!t(e[r],r))return!1;return!0}function difference(e,t){return reject(e,function(e){return contains(t,e)})}function some(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}function indexOf(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return r;return -1}function sortBy(e,t){var r=cloneArr(e);return r.sort(function(e,r){return t(e)-t(r)}),r}function zipObject(e,t){if(e.length!==t.length)throw Error("can't zipObject with different number of keys and values!");for(var r={},n=0;n<e.length;n++)r[e[n]]=t[n];return r}function assign(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n++)for(var i=t[n],o=keys(i),a=0;a<o.length;a++){var s=o[a];e[s]=i[s]}return e}function assignNoOverwrite(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n++)for(var i=t[n],o=keys(i),a=0;a<o.length;a++){var s=o[a];has(e,s)||(e[s]=i[s])}return e}function defaults(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return assignNoOverwrite.apply(void 0,r([{}],e,!1))}function groupBy(e,t){var r={};return forEach(e,function(e){var n=t(e),i=r[n];i?i.push(e):r[n]=[e]}),r}function merge(e,t){for(var r=cloneObj(e),n=keys(t),i=0;i<n.length;i++){var o=n[i],a=t[o];r[o]=a}return r}function NOOP(){}function IDENTITY(e){return e}function packArray(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(void 0!==n?n:void 0)}return t}function PRINT_ERROR(e){console&&console.error&&console.error("Error: "+e)}function PRINT_WARNING(e){console&&console.warn&&console.warn("Warning: "+e)}function isES2015MapSupported(){return"function"==typeof Map}function peek(e){return e[e.length-1]}function timer(e){var t=new Date().getTime(),r=e();return{time:new Date().getTime()-t,value:r}}function toFastProperties(e){function FakeConstructor(){}FakeConstructor.prototype=e;var t=new FakeConstructor;function fakeAccess(){return typeof t.bar}return fakeAccess(),fakeAccess(),e}function upperFirst(e){if(!e)return e;var t=getCharacterFromCodePointAt(e,0);return t.toUpperCase()+e.substring(t.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.toFastProperties=t.timer=t.peek=t.isES2015MapSupported=t.PRINT_WARNING=t.PRINT_ERROR=t.packArray=t.IDENTITY=t.NOOP=t.merge=t.groupBy=t.defaults=t.assignNoOverwrite=t.assign=t.zipObject=t.sortBy=t.indexOf=t.some=t.difference=t.every=t.isObject=t.isRegExp=t.isArray=t.partial=t.uniq=t.compact=t.reduce=t.findAll=t.find=t.cloneObj=t.cloneArr=t.contains=t.has=t.pick=t.reject=t.filter=t.dropRight=t.drop=t.isFunction=t.isUndefined=t.isString=t.forEach=t.last=t.first=t.flatten=t.map=t.mapValues=t.values=t.keys=t.isEmpty=void 0,t.upperFirst=void 0,t.isEmpty=isEmpty,t.keys=keys,t.values=values,t.mapValues=mapValues,t.map=map,t.flatten=flatten,t.first=first,t.last=last,t.forEach=forEach,t.isString=isString,t.isUndefined=isUndefined,t.isFunction=isFunction,t.drop=drop,t.dropRight=dropRight,t.filter=filter,t.reject=reject,t.pick=pick,t.has=has,t.contains=contains,t.cloneArr=cloneArr,t.cloneObj=cloneObj,t.find=find,t.findAll=findAll,t.reduce=reduce,t.compact=compact,t.uniq=uniq,t.partial=partial,t.isArray=isArray,t.isRegExp=isRegExp,t.isObject=isObject,t.every=every,t.difference=difference,t.some=some,t.indexOf=indexOf,t.sortBy=sortBy,t.zipObject=zipObject,t.assign=assign,t.assignNoOverwrite=assignNoOverwrite,t.defaults=defaults,t.groupBy=groupBy,t.merge=merge,t.NOOP=NOOP,t.IDENTITY=IDENTITY,t.packArray=packArray,t.PRINT_ERROR=PRINT_ERROR,t.PRINT_WARNING=PRINT_WARNING,t.isES2015MapSupported=isES2015MapSupported,t.peek=peek,t.timer=timer,t.toFastProperties=toFastProperties,t.upperFirst=upperFirst;var n=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;function getCharacterFromCodePointAt(e,t){var r=e.substring(t,t+1);return n.test(r)?r:e[t]}},80670:function(e,t,r){"use strict";r.d(t,{b:function(){return CircuitWires}});var n=r(40253),i=r(77491),o=r(18875),a=r(80884),s=r.n(a);let CircuitWires=class CircuitWires{constructor(e){this.program=e;let t=0;for(let r of(this.registers=(0,i.E8)(e),this.registers))"quantum"===r.type&&(this.offsets[r.id]=t,t+=r.size,this.sizes[r.id]=r.size);for(let e of this.registers)"classical"===e.type&&(void 0===this.firstClassicalWire&&(this.firstClassicalWire=t),this.offsets[e.id]=t,t+=e.size,this.sizes[e.id]=e.size)}sizes={};offsets={};registers;firstClassicalWire;getRegisterWires({id:e,index:t}){return void 0!==t?[this.offsets[e]+t]:(0,n.range)(this.offsets[e],this.offsets[e]+this.sizes[e])}getOperationConnectedWires(e){return(0,n.uniq)((0,o.ap)(e).flatMap(e=>this.getRegisterWires(e)))}getOperationConnectedWiresBitSet(e){let t=(0,o.ap)(e),r=new(s());for(let e of t){let{id:t,index:n}=e;if(void 0!==n)r.add(this.offsets[t]+n);else for(let e=this.offsets[t];e<=this.offsets[t]+this.sizes[t];e++)r.add(e)}return r}getOperationOverlapWires(e){let t=this.getOperationConnectedWires(e),r=(0,n.min)(t)??0,i=(0,n.max)(t)??0;return(0,n.range)(r,i+1)}getOperationOverlapWiresBitSet(e){let t=this.getOperationConnectedWires(e),r=(0,n.min)(t)??0,i=(0,n.max)(t)??0,o=new(s());for(let e=r;e<=i;e++)o.add(e);return o}getOperationsOverlapWires(e){let t=e.flatMap(e=>this.getOperationConnectedWires(e)),r=(0,n.min)(t)??0,i=(0,n.max)(t)??0;return(0,n.range)(r,i+1)}getOperationFirstWire(e){return(0,n.min)(this.getOperationConnectedWires(e))}getRegisterAtWire(e){let t;for(let[r,i]of(0,n.entries)(this.offsets))if(i<=e)t=r;else break;if(!t)return;let r=this.registers.find(e=>e.id===t);return r}getRegisterAccessAtWire(e){let t=this.getRegisterAtWire(e);if(!t)return;let r=this.offsets[t.id],n=e-r;return{id:t.id,index:n}}getWireType(e){return void 0===this.firstClassicalWire?"quantum":e>=this.firstClassicalWire?"classical":"quantum"}wires(){return(0,n.range)(0,(0,n.sum)((0,n.values)(this.sizes)))}quantumWires(){return void 0===this.firstClassicalWire?this.wires():(0,n.range)(0,this.firstClassicalWire)}classicalWires(){return void 0===this.firstClassicalWire?[]:this.wires().slice(this.firstClassicalWire)}operationsOverlap(e){let t=e.flatMap(e=>this.getOperationOverlapWires(e)),r=new Set(t);return t.length!==r.size}}},8977:function(e,t,r){"use strict";let n,i,o;r.d(t,{q:function(){return tI}});var a,s,c=r(27573),l=r(82236),u=r(7653),d=r.t(u,2);let p=(0,u.createContext)(l.Q);function useTheme(){return(0,u.useContext)(p)}function ThemeContextProvider(e){return(0,c.jsx)(p.Provider,{value:e.theme,children:e.children})}var f=r(75439),m=r(80670),g=r(40253),y=r(6521),v=r(77491);function buildSingleGridOperationsLayout(e){let{theme:t,groupClassicalRegisters:r,program:n}=e,i=(0,v.E8)(n),o=getColumns(e),a=getRows({theme:t,groupClassicalRegisters:r,registers:i}),s=getWidth({columns:o}),c=getHeight({rows:a,theme:t});return{columns:o,width:s,rows:a,height:c}}function getColumns(e){let{operationsByColumns:t,theme:r,expandDefinitionNodeIds:n,program:i}=e,o=new Set(n),a=t.map(e=>(0,g.max)(e.map(e=>{if(o.has(e.meta.id)){let t=(0,y.ck)(i,"left",e);if(t){let e=(0,f.n)(t,"left"),n=buildSingleGridOperationsLayout({program:t,operationsByColumns:e,expandDefinitionNodeIds:[],groupClassicalRegisters:!1,theme:r});return Math.ceil(n.width+20)}}return Math.ceil(r.Operations.width(e))}))??r.Operations.emptyColumnsWidth),s=[0];for(let e=0;e<a.length-1;e++)s.push((0,g.last)(s)+a[e]+r.Operations.gapX);let c=a.map((e,r)=>({width:e,x:s[r],operations:t[r]}));return c}function getWidth(e){let{columns:t}=e,r=(0,g.last)(t);return r?r.x+r.width:0}function getRows(e){let{registers:t,groupClassicalRegisters:r,theme:n}=e,{qubitsGapY:i,registersGapY:o}=n.Wires,a=n.Operations.singleQubitHeight,s=[],c=a/2+0;for(let e of t)if("quantum"===e.type){for(let t=0;t<e.size;t++)s.push(c),c+=a+i;c+=o-i}for(let e of t)if("classical"===e.type){for(let t=0;t<e.size;t++)s.push(c),r||(c+=a+i);r?c+=a+o-i:c+=o-i}let l=s.map(e=>({y:e-n.Operations.singleQubitHeight/2,height:n.Operations.singleQubitHeight}));return l}function getHeight(e){let{rows:t,theme:r}=e,n=(0,g.last)(t);return n?n.y+n.height+r.Wires.registersGapY:0}function rectCenter(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function rectFromPoints(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),width:Math.abs(t.x-e.x),height:Math.abs(t.y-e.y)}}function rectToPoints(e){return{p1:{x:e.x,y:e.y},p2:{x:e.x+e.width,y:e.y+e.height}}}function rectUnion(e){if(!e)return;let t=e.flatMap(e=>{let{p1:t,p2:r}=rectToPoints(e);return[t,r]}),r=t.map(e=>e.x),n=t.map(e=>e.y),i=(0,g.min)(r),o=(0,g.min)(n),a=(0,g.max)(r),s=(0,g.max)(n);return rectFromPoints({x:i,y:o},{x:a,y:s})}function rectIntersects(e,t){return e.x<=t.x+t.width&&t.x<=e.x+e.width&&e.y<=t.y+t.height&&t.y<=e.y+e.height}function subtractBorder(e,t){return{x:e.x+t,y:e.y+t,width:e.width-2*t,height:e.height-2*t}}let MultiGridOperationsLayout=class MultiGridOperationsLayout{grids;x;y;width;maxGridWidth;height;columns;wires;theme;constructor(e){this.wires=e.wires,this.x=e.x,this.y=e.y,this.maxGridWidth=e.maxGridWidth,this.theme=e.theme;let{singleGridLayout:t,maxGridWidth:r,theme:n,x:i,y:o}=e;if(this.columns=e.singleGridLayout.columns.map(e=>e.operations),t.width<=r){this.grids=[{rows:t.rows.map(e=>({...e,y:e.y+o})),columns:t.columns.map(e=>({...e,x:e.x+i}))}],this.fillLastGridWithEmptyColumns(),this.width=t.width,this.height=t.height;return}let a=[],s={x:i,y:o},c={rows:[...t.rows.map(e=>({...e,y:o+e.y}))],columns:[]};for(let e of t.columns)s.x+e.width<i+r?(c.columns.push({...e,x:s.x}),s.x+=e.width+n.Operations.gapX):(a.push(c),s={x:i+e.width+n.Operations.gapX,y:s.y+t.height+n.Grid.gapY},c={rows:t.rows.map(e=>({...e,y:s.y+e.y})),columns:[{...e,x:i}]});c.columns.length>0&&a.push(c),this.fillLastGridWithEmptyColumns();let l=t.height*a.length+(0,g.max)([a.length-1,0])*n.Grid.gapY;this.grids=a,this.width=r,this.height=l}fillLastGridWithEmptyColumns(){let e=(0,g.last)(this.grids);if(!e)return;let t=(0,g.last)(e.columns),r=t?t.x+t.width+this.theme.Operations.gapX:0;for(;r<this.maxGridWidth;){let t=r,n=Math.min(this.theme.Operations.emptyColumnsWidth,this.maxGridWidth-t);e.columns.push({x:t,width:n,operations:[]}),r=t+n+this.theme.Operations.gapX}}getAbsoluteColumnIndex(e){let t=0;for(let r=0;r<e.grid;r++)t+=this.grids[r].columns.length;return t+e.column}getIndexAtPosition(e){for(let[t,r]of this.grids.entries()){let n=this.findGridRowIndex(r,e),i=(0,g.findIndex)(r.columns,t=>e.x>=t.x&&e.x<=t.x+t.width);if(-1!==n&&-1!==i)return{grid:t,row:n,column:i}}}getContinuosRowIndexPosition(e){for(let t of this.grids){let r=this.findGridRowIndex(t,e);if(-1!==r)return r}}getContinuosIndexPosition(e){for(let[t,r]of this.grids.entries()){let n=this.findGridRowIndex(r,e),i=r.columns.map((e,t)=>{let n=r.columns[t-1],i=n?n.x+n.width:e.x;return{x:i,width:e.width+(e.x-i)}}),o=(0,g.findIndex)(i,t=>e.x>=t.x&&e.x<t.x+t.width);if(-1!==n&&-1!==o)return{grid:t,row:n,column:o}}}getOperationAtPosition(e){let t=this.getIndexAtPosition(e);if(t){let r=this.grids[t.grid],n=r.columns[t.column];return(0,g.find)(n.operations,n=>{let i=this.wires.getOperationOverlapWires(n);if(!(0,g.includes)(i,t.row))return!1;let o=r.rows[(0,g.min)(i)],a=r.rows[(0,g.max)(i)];return e.y>=o.y&&e.y<=a.y+a.height})}}getOperationsAtRect(e){let t=[];for(let r of this.grids){let n=(0,g.filter)([...r.rows.entries()],([t,n])=>rectIntersects(this.rowRect(r,n),e)),i=n.map(([e])=>e),o=(0,g.filter)(r.columns,t=>rectIntersects(this.columnRect(r,t),e));for(let e of o)for(let r of e.operations){let e=this.wires.getOperationOverlapWires(r),n=(0,g.intersection)(e,i).length>0;n&&t.push(r)}}return t}getOperationCells(e){for(let t of this.grids){let r=t.columns.find(t=>t.operations.includes(e));if(r){let n=this.wires.getOperationOverlapWires(e),i=n.map(e=>t.rows[e]),o=i.map(e=>({y:e.y,height:e.height,x:r.x,width:r.width}));return o}}}gridRect(e){let t=g.first(e.columns)?.x??this.x,r=this.width,n=g.first(e.rows)?.y??this.y,i=(0,g.last)(e.rows),o=(i?.y??n)+(i?.height??0);return{x:t,y:n,width:r,height:o}}rowRect(e,t){let r=this.gridRect(e);return{x:r.x,width:r.width,y:t.y,height:t.height}}columnRect(e,t){let r=this.gridRect(e);return{x:t.x,width:t.width,y:r.y,height:r.height}}findGridRowIndex(e,t){return(0,g.findIndex)(e.rows,(r,n)=>{let i=n>0?e.rows[n-1]:void 0,o=n<e.rows.length-1?e.rows[n+1]:void 0,a=i?i.y+i.height:0,s=(r.y-a)/2,c=r.y-s,l=r.y+r.height,u=o?(o.y-l)/2:0;return t.y>=c&&t.y<=l+u})}};function Box(e){let{x:t,y:r,children:n}=e;return(0,c.jsx)("g",{transform:translate({x:t,y:r}),children:n})}function translate({x:e,y:t}){return void 0!==e&&void 0!==t?`translate(${e}, ${t})`:void 0!==e?`translate(${e}, 0)`:void 0!==t?`translate(0, ${t})`:void 0}var x=r(14311),O=r.n(x);function polarToCartesian(e){return{x:Math.cos(e),y:Math.sin(e)}}function getPurity(e,t,r){let n=Math.sqrt(e*e+t*t+r*r);return .5*(1+n*n)}var R=r(97157);function PhaseDiskHoverCardContent(e){let{qubit:t,data:r}=e;return(0,c.jsxs)("div",{className:"flex flex-col gap-4 p-16",children:[(0,c.jsxs)("div",{className:"font-600",children:[t.id,"[",t.index,"]"]}),(0,c.jsxs)("div",{className:"flex items-baseline gap-4",children:[(0,c.jsx)(PhaseAngleIcons,{size:12}),(0,c.jsx)("div",{children:"Phase \uD835\uDF11:"}),(0,c.jsx)("div",{className:"font-600",children:formatRadiansLabel(r.phase)})]}),(0,c.jsxs)("div",{className:"flex flex-col ml-16 border-solid border-0 border-l border-skeleton-02",children:[(0,c.jsxs)("div",{className:"flex pl-8 gap-4",children:[(0,c.jsxs)("div",{className:"flex items-baseline",children:["Re[",(0,c.jsx)(PhaseDiskEquation,{className:"inline"}),"]:"]}),(0,c.jsx)("div",{className:"font-600",children:r.x})]}),(0,c.jsxs)("div",{className:"flex pl-8 gap-4",children:[(0,c.jsxs)("div",{className:"flex items-baseline",children:["Im[",(0,c.jsx)(PhaseDiskEquation,{}),"]:"]}),(0,c.jsx)("div",{className:"font-600",children:r.y})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)(Circle,{className:"bg-cyan-40"})," ",(0,c.jsxs)("div",{children:["Prob of ","∣","1","⟩",":"]}),(0,c.jsxs)("div",{className:"font-600",children:[-(100*((r.z-1)/2)),"%"]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)(Circle,{className:"border border-solid border-ui-05"}),(0,c.jsx)("div",{children:"Purity of reduced state:"}),(0,c.jsx)("div",{className:"font-600",children:getPurity(r.x,r.y,r.z)})]})]})}function Circle(e){return(0,c.jsx)("div",{className:(0,R.Z)("w-8 h-8 rounded-full",e.className)})}function PhaseAngleIcons(e){let{size:t,className:r}=e;return(0,c.jsxs)("svg",{className:r,width:t,height:t-1,viewBox:"0 0 10 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,c.jsx)("path",{d:"M9 8.19995H1",strokeLinecap:"round",className:"stroke-text-03"}),(0,c.jsx)("path",{d:"M3 5C5 5.4 5 7 5 8.2",className:"stroke-text-03"}),(0,c.jsx)("path",{d:"M5.8 1L1 8.2",className:"stroke-text-05",strokeLinecap:"round"})]})}function PhaseDiskEquation(e){return(0,c.jsxs)("svg",{className:e.className,xmlns:"http://www.w3.org/2000/svg",width:22.984,height:16.136,viewBox:"0 -880.4 1269.8 891.4",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,c.jsxs)("defs",{children:[(0,c.jsx)("path",{id:"prefix__a",d:"M39 168q0 57 19 104t49 78 67 52 70 31 63 9h3q45 0 78-22t33-65q0-90-111-118-49-13-134-14-37 0-38-2 0-2-6-35t-7-58q0-47 21-74t63-28 93 19 92 66q9 10 12 10 4 0 13-9t10-14-9-16-30-27-46-31-63-25-76-10q-79 0-122 53T39 168zm334 185q-6 52-68 52-33 0-61-14t-45-34-29-41-16-36-5-19q0-1 20-1 113 0 158 24t46 69z"}),(0,c.jsx)("path",{id:"prefix__b",d:"M297 596q0 31 21 48t43 17q17 0 28-10t14-28q0-28-19-47t-44-19q-18 0-30 10t-13 29zm-9-220q0 29-26 29-22 0-42-12t-35-31-24-37-17-32l-7-14q-2-1-16-1h-14q-6 6-6 8t4 13q21 49 59 92t88 50h8q7 0 12 1 24-1 44-10 25-14 38-31t13-53v-16l-49-199Q267-67 264-75q-18-50-70-89T75-204q-50 0-68 21t-19 46q0 27 19 46t46 20q17 0 29-10t13-31q0-36-32-55 6-1 14-1 34 0 62 28t43 66l11 42q11 43 26 104t32 125 27 111 11 57q0 7-1 11z"}),(0,c.jsx)("path",{id:"prefix__c",d:"M92 210q0-34 14-61t36-41 43-23 35-13l15-2 2 1 13 41q18 58 33 99t39 88 48 76 59 48 73 19q45 0 80-32t36-108q0-78-43-150T457 35 299-10q-26 0-26-2l-7-36q-6-35-14-77t-11-54q-5-24-26-33-11-6-25-6-31 3-31 33 0 10 55 183l-5 2q-5 2-14 5t-22 9-26 14-27 18-26 25-23 32-15 39-6 48q0 48 26 121t73 120h13q21 0 21-8 0-6-8-14-41-48-61-109t-22-90zm482 68q0 42-24 66t-64 25q-49 0-92-40t-71-111q-14-34-28-109l-9-45q18-2 20-2 117 0 192 69t76 147z"})]}),(0,c.jsx)("g",{"data-mml-node":"math",stroke:"currentColor",fill:"currentColor",strokeWidth:0,children:(0,c.jsxs)("g",{"data-mml-node":"msup",children:[(0,c.jsx)("use",{xlinkHref:"#prefix__a","data-mml-node":"mi",transform:"scale(1 -1)"}),(0,c.jsxs)("g",{"data-mml-node":"TeXAtom",children:[(0,c.jsx)("use",{xlinkHref:"#prefix__b","data-mml-node":"mi",transform:"matrix(.707 0 0 -.707 466 -413)"}),(0,c.jsx)("use",{xlinkHref:"#prefix__c","data-mml-node":"mi",transform:"matrix(.707 0 0 -.707 757.284 -413)"})]})]})})]})}function formatRadiansLabel(e){let t;let r=new(O())(e/Math.PI);return r.n.toString().length>3||r.d.toString().length>3?parseFloat(e.toFixed(4)).toString():(t=0===r.n?"0":1===r.n?r.d>1?`π/${r.d}`:"π":1===r.d?`${r.n}π`:`${r.n}π/${r.d}`,-1===r.s?`-${t}`:t)}let A=(null==globalThis?void 0:globalThis.document)?u.useLayoutEffect:()=>{},b=d["useId".toString()]||(()=>{}),C=0;function useId(e){let[t,r]=u.useState(b());return A(()=>{e||r(e=>null!=e?e:String(C++))},[e]),e||(t?`radix-${t}`:"")}function usePrevious(e){var t=(0,u.useRef)();return(0,u.useEffect)(function(){t.current=e}),t.current}var _=r(27198),S=r(84989),k=r(74618),N=r(86475),P=r(42033),L=r(43506),M=r(87166),F=r(87482),D=r(54834),j=r(48820);let B="HoverCard",[z,W]=(0,k.b)(B,[L.D7]),G=(0,L.D7)(),[q,$]=z(B),Y=(0,u.forwardRef)((e,t)=>{let{__scopeHoverCard:r,...n}=e,i=$("HoverCardTrigger",r),o=G(r);return(0,u.createElement)(L.ee,(0,_.Z)({asChild:!0},o),(0,u.createElement)(D.WV.a,(0,_.Z)({"data-state":i.open?"open":"closed"},n,{ref:t,onPointerEnter:(0,S.M)(e.onPointerEnter,$cef8881cdc69808e$var$excludeTouch(i.onOpen)),onPointerLeave:(0,S.M)(e.onPointerLeave,$cef8881cdc69808e$var$excludeTouch(i.onClose)),onFocus:(0,S.M)(e.onFocus,i.onOpen),onBlur:(0,S.M)(e.onBlur,i.onClose),onTouchStart:(0,S.M)(e.onTouchStart,e=>e.preventDefault())})))}),X="HoverCardPortal",[Q,Z]=z(X,{forceMount:void 0}),ee="HoverCardContent",et=(0,u.forwardRef)((e,t)=>{let r=Z(ee,e.__scopeHoverCard),{forceMount:n=r.forceMount,...i}=e,o=$(ee,e.__scopeHoverCard);return(0,u.createElement)(F.z,{present:n||o.open},(0,u.createElement)(er,(0,_.Z)({"data-state":o.open?"open":"closed"},i,{onPointerEnter:(0,S.M)(e.onPointerEnter,$cef8881cdc69808e$var$excludeTouch(o.onOpen)),onPointerLeave:(0,S.M)(e.onPointerLeave,$cef8881cdc69808e$var$excludeTouch(o.onClose)),ref:t})))}),er=(0,u.forwardRef)((e,t)=>{let{__scopeHoverCard:r,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:s,...c}=e,l=$(ee,r),d=G(r),p=(0,u.useRef)(null),f=(0,P.e)(t,p),[m,g]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{if(m){let e=document.body;return n=e.style.userSelect||e.style.webkitUserSelect,e.style.userSelect="none",e.style.webkitUserSelect="none",()=>{e.style.userSelect=n,e.style.webkitUserSelect=n}}},[m]),(0,u.useEffect)(()=>{if(p.current){let handlePointerUp=()=>{g(!1),l.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var e;let t=(null===(e=document.getSelection())||void 0===e?void 0:e.toString())!=="";t&&(l.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",handlePointerUp),()=>{document.removeEventListener("pointerup",handlePointerUp),l.hasSelectionRef.current=!1,l.isPointerDownOnContentRef.current=!1}}},[l.isPointerDownOnContentRef,l.hasSelectionRef]),(0,u.useEffect)(()=>{if(p.current){let e=$cef8881cdc69808e$var$getTabbableNodes(p.current);e.forEach(e=>e.setAttribute("tabindex","-1"))}}),(0,u.createElement)(j.XB,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:s,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:(0,S.M)(a,e=>{e.preventDefault()}),onDismiss:l.onDismiss},(0,u.createElement)(L.VY,(0,_.Z)({},d,c,{onPointerDown:(0,S.M)(c.onPointerDown,e=>{e.currentTarget.contains(e.target)&&g(!0),l.hasSelectionRef.current=!1,l.isPointerDownOnContentRef.current=!0}),ref:f,style:{...c.style,userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})))}),en=(0,u.forwardRef)((e,t)=>{let{__scopeHoverCard:r,...n}=e,i=G(r);return(0,u.createElement)(L.Eh,(0,_.Z)({},i,n,{ref:t}))});function $cef8881cdc69808e$var$excludeTouch(e){return t=>"touch"===t.pointerType?void 0:e()}function $cef8881cdc69808e$var$getTabbableNodes(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;r.nextNode();)t.push(r.currentNode);return t}var ei=r(20022),eo=r.n(ei),ea=r(61223);function withClassName(e,t){let r=(0,u.forwardRef)((r,n)=>(0,u.createElement)(e,{ref:n,...r,className:(0,R.Z)(t,r.className)}));return eo()(r,e),r.displayName=getDisplayName(e)??"withClassName",r}function withCurrentTheme(e){let t=(0,u.forwardRef)((t,r)=>{let n=(0,ea.Fg)();return(0,u.createElement)(e,{ref:r,...t,className:(0,R.Z)(`theme-${n}`,t.className)})});return eo()(t,e),t.displayName=getDisplayName(e)??"withCurrentTheme",t}function getDisplayName(e){return e.displayName||e.name}let HoverCard=e=>{let{__scopeHoverCard:t,children:r,open:n,defaultOpen:i,onOpenChange:o,openDelay:a=700,closeDelay:s=300}=e,c=G(t),l=(0,u.useRef)(0),d=(0,u.useRef)(0),p=(0,u.useRef)(!1),f=(0,u.useRef)(!1),[m=!1,g]=(0,N.T)({prop:n,defaultProp:i,onChange:o}),y=(0,u.useCallback)(()=>{clearTimeout(d.current),l.current=window.setTimeout(()=>g(!0),a)},[a,g]),v=(0,u.useCallback)(()=>{clearTimeout(l.current),p.current||f.current||(d.current=window.setTimeout(()=>g(!1),s))},[s,g]),x=(0,u.useCallback)(()=>g(!1),[g]);return(0,u.useEffect)(()=>()=>{clearTimeout(l.current),clearTimeout(d.current)},[]),(0,u.createElement)(q,{scope:t,open:m,onOpenChange:g,onOpen:y,onClose:v,onDismiss:x,hasSelectionRef:p,isPointerDownOnContentRef:f},(0,u.createElement)(L.fC,c,r))},HoverCardPortal=e=>{let{__scopeHoverCard:t,forceMount:r,children:n,container:i}=e,o=$(X,t);return(0,u.createElement)(Q,{scope:t,forceMount:r},(0,u.createElement)(F.z,{present:r||o.open},(0,u.createElement)(M.h,{asChild:!0,container:i},n)))},es=withClassName(en,"HoverCardArrow"),ec=withCurrentTheme(withClassName(et,"HoverCardContent"));function withRoot(e){let t=(0,u.forwardRef)((t,r)=>(0,u.createElement)(e,{ref:r,...t,className:(0,R.Z)("composer",t.className)}));return t.displayName=e.displayName??"withRoot",t}function useThemeHoverCard(){let e=useTheme();return(0,u.useMemo)(()=>({HoverCard:e.Components?.HoverCard??HoverCard,HoverCardArrow:e.Components?.HoverCardArrow??es,HoverCardContent:e.Components?.HoverCardContent??withRoot(ec),HoverCardPortal:e.Components?.HoverCardPortal??HoverCardPortal,HoverCardTrigger:e.Components?.HoverCardTrigger??Y}),[e])}let el=(0,u.memo)(function(e){let{data:t,x:r,y:n,qubit:i}=e,o=useTheme(),{HoverCard:a,HoverCardArrow:s,HoverCardPortal:l,HoverCardTrigger:u,HoverCardContent:d}=useThemeHoverCard(),p=useId(),f=useDelayedTooltipOpen(e.tooltipOpen),m=e.size??o.Operations.singleQubitHeight,g={x:m/2,y:m/2},y=m/2,v=2*y,x=v-v*Math.abs(-((1-t.z)/2)),O=getPurity(t.x,t.y,t.z);return(0,c.jsxs)("g",{"data-testid":`phaseDisk-${i.id}[${i.index}]`,children:[(0,c.jsxs)(Box,{x:r,y:n,children:[(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:p,children:(0,c.jsx)("circle",{cx:g.x,cy:g.y,r:y})})}),(0,c.jsxs)("g",{children:[(0,c.jsx)("circle",{cx:g.x,cy:g.y,r:y,fill:o.PhaseDisk.bg}),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("g",{clipPath:`url(#${p})`,children:[(0,c.jsx)("rect",{x:0,y:x,width:v,height:v-x,fill:o.PhaseDisk.color}),(0,c.jsx)("rect",{x:0,y:0,width:v,height:x,fill:o.PhaseDisk.bg})]}),(0,c.jsx)("circle",{cx:g.x,cy:g.y,r:Math.max(y*O,1)-.75,fill:"none",stroke:o.PhaseDisk.border,strokeWidth:1.5}),(0,c.jsx)("line",{stroke:o.PhaseDisk.border,strokeWidth:2,x1:g.x,y1:g.y,x2:polarToCartesian(-t.phase).x*y+g.x,y2:polarToCartesian(-t.phase).y*y+g.y})]})]})]}),(0,c.jsxs)(a,{closeDelay:0,open:f,children:[(0,c.jsx)(u,{asChild:!0,children:(0,c.jsx)("rect",{width:m,height:m,y:n,x:r,style:{fill:"transparent"}})}),(0,c.jsx)(l,{children:(0,c.jsxs)(d,{sideOffset:5,side:"right",className:"z-50",children:[(0,c.jsx)(PhaseDiskHoverCardContent,{qubit:i,data:t}),(0,c.jsx)(s,{})]})})]})]})});function useDelayedTooltipOpen(e){let t=usePrevious(e),[r,n]=(0,u.useState)(e),i=(0,u.useRef)();return((0,u.useEffect)(()=>(e&&!t?i.current=setTimeout(()=>{n(!0)},700):n(e),()=>{i.current&&clearTimeout(i.current)}),[t,e]),e)?r:e}function PhaseDisksFallback(e){let{x:t,registers:r,registerPositions:n}=e;return(0,c.jsx)(c.Fragment,{children:r.map((e,r)=>{let i=n.get(e);return(0,c.jsx)(PhaseDiskFallback,{x:i.x+t,y:i.y},r)})})}function PhaseDiskFallback(e){let{x:t,y:r}=e,n=useTheme(),i=n.Operations.singleQubitHeight,o={x:i/2,y:i/2};return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("circle",{cx:t+o.x,cy:r+o.y,r:i/2-.75,fill:n.PhaseDisk.bg,stroke:n.PhaseDisk.border,strokeWidth:1.5})})}async function getPhaseDiskData(e){let{get_phase_disk_data:t}=await r.e(578).then(r.bind(r,578));return t(e)}function usePhaseDiskQuery(e){let[t,r]=(0,u.useState)({data:null,error:null});return(0,u.useEffect)(()=>{let t=!1;return async function(){if(r({data:null,error:null}),e)try{let n=await getPhaseDiskData(e);t||r({data:n,error:null})}catch(e){t||r({data:null,error:e})}}(),()=>{t=!0}},[e]),t}function PhaseDisks(e){let{x:t,program:r,registers:n,registerPositions:i,openTooltipIndex:o,stateVector:a}=e,s=(0,u.useMemo)(()=>new m.b(r),[r]),l=usePhaseDiskQuery(a);return(0,c.jsx)(c.Fragment,{children:n.map((e,r)=>{let n=i.get(e),a=s.getRegisterWires(e)[0],u=`phase-disk-wire-${e.id}[${e.index}]`,d=l.data?.[a];return d?(0,c.jsx)(el,{x:n.x+t,y:n.y,qubit:e,data:d,tooltipOpen:void 0===o?void 0:r===o},u):(0,c.jsx)(PhaseDiskFallback,{x:n.x+t,y:n.y},u)})})}var eu=r(1372),ed=r(3458);r(94850);let eh=Symbol(),ep=Symbol(),ef="undefined"==typeof window||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?u.useEffect:u.useLayoutEffect,em=eu.unstable_runWithPriority?e=>(0,eu.unstable_runWithPriority)(eu.unstable_NormalPriority,e):e=>e();function E(e){var t;let r=(0,u.createContext)({[eh]:{v:{current:e},n:{current:-1},l:new Set,u:e=>e()}});return r[ep]=r.Provider,r.Provider=(t=r.Provider,({value:e,children:r})=>{let n=(0,u.useRef)(e),i=(0,u.useRef)(0),[o,a]=(0,u.useState)(null);o&&(o(e),a(null));let s=(0,u.useRef)();if(!s.current){let e=new Set;s.current={[eh]:{v:n,n:i,l:e,u:(t,r)=>{(0,ed.unstable_batchedUpdates)(()=>{i.current+=1;let n={n:i.current};null!=r&&r.suspense&&(n.n*=-1,n.p=new Promise(e=>{a(()=>t=>{n.v=t,delete n.p,e(t)})})),e.forEach(e=>e(n)),t()})}}}}return ef(()=>{n.current=e,i.current+=1,em(()=>{s.current[eh].l.forEach(t=>{t({n:i.current,v:e})})})},[e]),(0,u.createElement)(t,{value:s.current},r)}),delete r.Consumer,r}function h(e,t){let r=(0,u.useContext)(e)[eh],{v:{current:n},n:{current:i},l:o}=r,a=t(n),[s,c]=(0,u.useReducer)((e,r)=>{if(!r)return[n,a];if("p"in r)throw r.p;if(r.n===i)return Object.is(e[1],a)?e:[n,a];try{if("v"in r){if(Object.is(e[0],r.v))return e;let n=t(r.v);return Object.is(e[1],n)?e:[r.v,n]}}catch(e){}return[...e]},[n,a]);return Object.is(s[1],a)||c(),ef(()=>(o.add(c),()=>{o.delete(c)}),[o]),s[1]}let eg=E(null),ey=eg.Provider;function useComposerContextSelector(e){return h(eg,t=>{if(null===t)throw Error("ComposerContextProvider not found");return e(t)})}function useComposerStateSelector(e){return h(eg,t=>{if(null===t)throw Error("ComposerContextProvider not found");return e(t.state)})}function PhaseDiskAnnotation(e){let{operation:t,modifiers:r,registerPositions:n,columnsMode:i}=e,o=useComposerStateSelector(e=>e.hover),a=useComposerStateSelector(e=>e.wireHover),s=useTheme(),l=useComposerStateSelector(e=>e.program),d=useComposerContextSelector(e=>e.stateVectors),p=(0,u.useMemo)(()=>{let e=(0,v.Vn)(l),r=e.findIndex(e=>e.meta.id===t.meta.id);return r>=0?d?.[r]:void 0},[d,l,t.meta.id]),f=(0,u.useMemo)(()=>r.dragging||o[0]!==t.meta.id?-1:a??-1,[o,r.dragging,t.meta.id,a]),m=(0,u.useMemo)(()=>r.dragging||r.floating?[]:(0,y.Oc)(l,i,t.meta.id),[r.dragging,r.floating,l,i,t.meta.id]),g=s.Operations.background(t,void 0,r),x=s.Operations.width(t),O=t.registers.map(e=>n.get(e)),R=s.Operations.singleQubitHeight,A=rectCenter(O[0]).x-x/2;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(c.Fragment,{children:O.map(e=>{let t=e.y+e.height/2;return(0,c.jsxs)(Box,{y:t,x:A+8,children:[(0,c.jsx)("line",{x1:0,y1:-R/2,x2:0,y2:-2,style:{strokeWidth:1,stroke:g}}),(0,c.jsx)("line",{x1:0,y1:2,x2:0,y2:R/2,style:{strokeWidth:1,stroke:g}})]},t)})}),r?.inspect==="not-executed"&&(0,c.jsx)(PhaseDisksFallback,{x:17,registers:t.registers,registerPositions:n}),r?.inspect!=="not-executed"&&(0,c.jsx)(PhaseDisks,{x:17,registers:t.registers,registerPositions:n,program:m,openTooltipIndex:f,stateVector:p})]})}let ev=(0,u.memo)(e=>{let{gridsLayout:t,hover:r,theme:n}=e;if(0===r.length)return null;let i=(0,g.compact)(r.map(e=>{let r=t.getOperationCells(e);if(r)return rectUnion(r)}));return(0,c.jsx)("g",{children:i.map(e=>(0,c.jsx)("rect",{x:e.x-2,y:e.y-2,width:e.width+4,height:e.height+4,style:{stroke:n.Selection.hover,fill:"transparent",strokeWidth:1}},`${e.x}_${e.y}`))})});function OperationsSelection(e){let t;let{gridsLayout:r,selection:n}=e,i=useTheme();if(0===n.length)return null;let o=(0,g.compact)(n.map(e=>{let t=r.getOperationCells(e);if(t)return rectUnion(t)}));return o.length>1&&(t=rectUnion(o)),(0,c.jsxs)("g",{children:[t&&(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("rect",{x:t.x-6,y:t.y-6,width:t.width+12,height:t.height+12,style:{stroke:i.Selection.selectionGroup,fill:"transparent",strokeWidth:1,strokeDasharray:"4"}})}),o.map(e=>(0,c.jsx)("rect",{x:e.x-2,y:e.y-2,width:e.width+4,height:e.height+4,style:{stroke:i.Selection.selection,fill:"transparent",strokeWidth:1}},`${e.x}_${e.y}`))]})}function Text(e){let{dominantBaseline:t,...r}=e;return(0,c.jsx)("text",{...r,dy:"middle"===t?".3em":0})}function BitLabel(e){let{rect:t,theme:r,bit:n}=e,i=e.showBitIndex??!0;return(0,c.jsx)(Text,{x:t.x+t.width,y:t.y,dominantBaseline:"middle",style:{fill:r.RegisterLabels.text,fontFamily:"IBM Plex Mono, monospace",fontWeight:400,textAnchor:"end",fontSize:14},children:(0,c.jsxs)("tspan",{children:[n.id,i&&(0,c.jsxs)(c.Fragment,{children:["[",n.index,"]"]})]})})}function RegisterLabel(e){let{rect:t,theme:r,register:n}=e;return(0,c.jsxs)(Text,{x:t.x+t.width,y:t.y,dominantBaseline:"middle",style:{fill:r.RegisterLabels.text,fontFamily:"IBM Plex Mono, monospace",fontWeight:400,textAnchor:"end",fontSize:14},children:[n.id,n.size]})}function Wire(e){let{x1:t,x2:r,y1:n,y2:i,kind:o,color:a}=e,s={fill:"none",stroke:a,strokeWidth:1,strokeLinecap:"round"};return"quantum"===o?(0,c.jsx)("line",{x1:t,x2:r,y1:n,y2:i,style:s}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("line",{x1:t,x2:r,y1:n-2,y2:i-2,style:s}),(0,c.jsx)("line",{x1:t,x2:r,y1:n+2,y2:i+2,style:s})]})}function CCXGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),o=r.OperationsCatalog.itemHeight,a=r.OperationsCatalog.itemWidth(t),s=a/6.5,l=a<=32?2:3,u={x:a/2,y:o/2};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("circle",{cx:u.x,cy:4+l,r:l,style:{fill:i}}),(0,c.jsx)("circle",{cx:u.x,cy:u.y-(s-l),r:l,style:{fill:i}}),(0,c.jsx)("circle",{cx:u.x,cy:o-4-s,r:s,style:{stroke:i,fill:"none",strokeWidth:1.25}}),(0,c.jsx)("line",{x1:u.x-s,x2:u.x+s,y1:o-4-s,y2:o-4-s,style:{stroke:i,strokeWidth:1.25}}),(0,c.jsx)("line",{x1:u.x,x2:u.x,y1:4,y2:o-4,style:{stroke:i,strokeWidth:1.25}})]})}function CSwapGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),o=r.OperationsCatalog.itemHeight,a=r.OperationsCatalog.itemWidth(t),s={x:a/2,y:o/2},l=a/5,u=a<=32?2:3;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("circle",{cx:s.x,cy:4+u,r:u,style:{fill:i}}),(0,c.jsx)(CrossSymbol,{x:s.x,y:s.y,width:l,color:i}),(0,c.jsx)(CrossSymbol,{x:s.x,y:o-4-l/2,width:l,color:i}),(0,c.jsx)("line",{x1:s.x,x2:s.x,y1:4+l/2,y2:o-4-l/2,style:{stroke:i,strokeWidth:1.5}})]})}function CrossSymbol(e){let{x:t,y:r,width:n,color:i}=e;return(0,c.jsxs)(Box,{y:r,x:t,children:[(0,c.jsx)("line",{x1:-n/2,y1:-n/2,x2:n/2,y2:n/2,style:{strokeWidth:1.5,stroke:i}}),(0,c.jsx)("line",{x1:n/2,y1:-n/2,x2:-n/2,y2:n/2,style:{strokeWidth:1.5,stroke:i}})]})}function CXGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),o=r.OperationsCatalog.itemHeight,a=r.OperationsCatalog.itemWidth(t),s=a/6,l=a<=32?2:4,u={x:a/2};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("circle",{cx:u.x,cy:6+l,r:l,style:{fill:i}}),(0,c.jsx)("circle",{cx:u.x,cy:o-6-s,r:s,style:{stroke:i,fill:"none",strokeWidth:1.25}}),(0,c.jsx)("line",{x1:u.x-s,x2:u.x+s,y1:o-6-s,y2:o-6-s,style:{stroke:i,strokeWidth:1.25}}),(0,c.jsx)("line",{x1:u.x,x2:u.x,y1:6,y2:o-6,style:{stroke:i,strokeWidth:1.25}})]})}function CZGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),o=r.OperationsCatalog.itemHeight,a=r.OperationsCatalog.itemWidth(t),s=a<=32?3:4,l={x:a/2};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("circle",{cx:l.x,cy:4+s,r:s,style:{fill:i}}),(0,c.jsx)("circle",{cx:l.x,cy:o-4-s,r:s,style:{fill:i}}),(0,c.jsx)("line",{x1:l.x,x2:l.x,y1:4,y2:o-4,style:{stroke:i,strokeWidth:"1.5"}})]})}function Dagger(e){return(0,c.jsx)("path",{transform:`translate(${e.gateCx-25.45}, ${e.gateCy-12.675})`,d:"M25.45 12.675V16.125L26 17.125L26.55 16.125V12.675H28V11.575H26.55V10.125H25.45V11.575H24V12.675H25.45Z",fill:e.color})}function DaggerCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemLabel(t.definition),o=r.OperationsCatalog.itemText(t,{disabled:n}),a=r.OperationsCatalog.itemWidth(t),s=r.OperationsCatalog.itemHeight,l={x:a/2,y:s/2};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Dagger,{color:o,gateCy:l.y-6,gateCx:l.x+8}),(0,c.jsx)(Text,{x:a/2,y:s/2,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:o,fontWeight:400,textAnchor:"middle"},children:i})]})}function DefaultGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemLabel(t.definition),o=r.OperationsCatalog.itemText(t,{disabled:n}),a=r.OperationsCatalog.itemWidth(t),s=r.OperationsCatalog.itemHeight;return(0,c.jsx)(Text,{x:a/2,y:s/2,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:o,fontWeight:400,textAnchor:"middle"},children:i})}function NotGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),o=r.OperationsCatalog.itemHeight,a=r.OperationsCatalog.itemWidth(t),s=a/4,l={x:a/2,y:o/2};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("circle",{cx:l.x,cy:l.y,r:s,style:{stroke:i,fill:"none",strokeWidth:1.25}}),(0,c.jsx)("line",{x1:l.x-s,x2:l.x+s,y1:l.y,y2:l.y,style:{stroke:i,strokeWidth:1.25}}),(0,c.jsx)("line",{x1:l.x,x2:l.x,y1:l.y-s,y2:l.y+s,style:{stroke:i,strokeWidth:1.25}})]})}function SwapGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),o=r.OperationsCatalog.itemHeight,a=r.OperationsCatalog.itemWidth(t),s={x:a/2},l=a/5;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(SwapGateCatalogSymbol_CrossSymbol,{x:s.x,y:6+l/2,width:l,color:i}),(0,c.jsx)(SwapGateCatalogSymbol_CrossSymbol,{x:s.x,y:o-6-l/2,width:l,color:i}),(0,c.jsx)("line",{x1:s.x,x2:s.x,y1:6+l/2,y2:o-6-l/2,style:{stroke:i,strokeWidth:1.25}})]})}function SwapGateCatalogSymbol_CrossSymbol(e){let{x:t,y:r,width:n,color:i}=e;return(0,c.jsxs)(Box,{y:r,x:t,children:[(0,c.jsx)("line",{x1:-n/2,y1:-n/2,x2:n/2,y2:n/2,style:{strokeWidth:1.25,stroke:i}}),(0,c.jsx)("line",{x1:n/2,y1:-n/2,x2:-n/2,y2:n/2,style:{strokeWidth:1.25,stroke:i}})]})}function SXGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),o=r.OperationsCatalog.itemHeight,a=r.OperationsCatalog.itemWidth(t);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4344 8H25.5V9.25H13.5656L12.0656 24.25H8.92123L8.42123 17.75H7V16.5H9.57877L10.0788 23H10.9344L12.4344 8Z",fill:i}),(0,c.jsx)(Text,{x:a/2+3,y:o/2+1,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:i,fontWeight:400,textAnchor:"middle"},children:"X"})]})}function SXDGGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),o=r.OperationsCatalog.itemHeight,a=r.OperationsCatalog.itemWidth(t),s={x:a/2,y:o/2};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Dagger,{color:i,gateCy:s.y-4,gateCx:s.x+10}),(0,c.jsx)("path",{d:"M10.4344 8H23.5V9.25H11.5656L10.0656 24.25H6.92123L6.42123 17.75H5V16.5H7.57877L8.07877 23H8.93438L10.4344 8Z",fill:i}),(0,c.jsx)(Text,{x:a/2+2,y:o/2+1,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:i,fontWeight:400,textAnchor:"middle"},children:"X"})]})}function parseBorder(e){let t=e.match(/(\d*\.?\d+)px\s+(solid)\s+([^ ]*)/);if(!t)throw Error("Invalid format");return{width:Number(t[1]),style:t[2],color:t[3]}}function parseBorderOrDefault(e){return e?parseBorder(e):{width:0,style:"solid",color:"transparent"}}function borderToStroke(e){return e?{strokeWidth:2*e.width,stroke:e.color,paintOrder:"stroke"}:{}}function C3XGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),o=r.OperationsCatalog.itemHeight,a=r.OperationsCatalog.itemWidth(t),s=a/7,l=a<=32?2:3,u={x:a/2};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("circle",{cx:u.x,cy:2+l,r:l,style:{fill:i}}),(0,c.jsx)("circle",{cx:u.x,cy:3*l+3,r:l,style:{fill:i}}),(0,c.jsx)("circle",{cx:u.x,cy:5*l+4,r:l,style:{fill:i}}),(0,c.jsx)("circle",{cx:u.x,cy:o-2-s,r:s,style:{stroke:i,fill:"none",strokeWidth:"1.5"}}),(0,c.jsx)("line",{x1:u.x-s,x2:u.x+s,y1:o-2-s,y2:o-2-s,style:{stroke:i,strokeWidth:"1.5"}}),(0,c.jsx)("line",{x1:u.x,x2:u.x,y1:2,y2:o-2,style:{stroke:i,strokeWidth:"1.5"}})]})}function C4XGateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemText(t,{disabled:n}),o=r.OperationsCatalog.itemHeight,a=r.OperationsCatalog.itemWidth(t),s=a/8,l={x:a/2};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("circle",{cx:l.x,cy:4,r:2,style:{fill:i}}),(0,c.jsx)("circle",{cx:l.x,cy:9,r:2,style:{fill:i}}),(0,c.jsx)("circle",{cx:l.x,cy:14,r:2,style:{fill:i}}),(0,c.jsx)("circle",{cx:l.x,cy:19,r:2,style:{fill:i}}),(0,c.jsx)("circle",{cx:l.x,cy:o-2-s,r:s,style:{stroke:i,fill:"none",strokeWidth:"1.5"}}),(0,c.jsx)("line",{x1:l.x-s,x2:l.x+s,y1:o-2-s,y2:o-2-s,style:{stroke:i,strokeWidth:"1.5"}}),(0,c.jsx)("line",{x1:l.x,x2:l.x,y1:2,y2:o-2,style:{stroke:i,strokeWidth:"1.5"}})]})}function GateCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemBackground(t,{disabled:n}),o=r.OperationsCatalog.itemHeight,a=r.OperationsCatalog.itemWidth(t),s=parseBorderOrDefault(r.OperationsCatalog.border?.(t,{disabled:n})),l=getSymbolComponent(t.definition);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("rect",{...subtractBorder({x:0,y:0,width:a,height:o},s.width),style:{fill:i,...borderToStroke(s)}}),(0,c.jsx)(l,{operation:t,disabled:n,theme:r})]})}function getSymbolComponent(e){if((0,y.aE)(e)||"built-in"===e.location.kind)switch(e.id){case"x":return NotGateCatalogSymbol;case"cx":case"CX":return CXGateCatalogSymbol;case"ccx":return CCXGateCatalogSymbol;case"c3x":return C3XGateCatalogSymbol;case"c4x":return C4XGateCatalogSymbol;case"cz":return CZGateCatalogSymbol;case"swap":return SwapGateCatalogSymbol;case"cswap":return CSwapGateCatalogSymbol;case"sdg":case"tdg":return DaggerCatalogSymbol;case"sx":return SXGateCatalogSymbol;case"sxdg":return SXDGGateCatalogSymbol}return DefaultGateCatalogSymbol}function MeasureCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemBackground(t,{disabled:n}),o=r.OperationsCatalog.itemText(t,{disabled:n}),a=r.OperationsCatalog.itemHeight,s=r.OperationsCatalog.itemWidth(t),l=parseBorderOrDefault(r.OperationsCatalog.border?.(t,{disabled:n}));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("rect",{...subtractBorder({x:0,y:0,width:s,height:a},l.width),style:{fill:i,...borderToStroke(l)}}),(0,c.jsx)("path",{d:"M25.2941 11.584H22.7981L25.2301 8.008V7H21.6141V8H23.9101L21.4861 11.576V12.584H25.2941V11.584ZM15.5662 23.4664C15.5662 24.0836 15.0658 24.584 14.4485 24.584C13.8313 24.584 13.3309 24.0836 13.3309 23.4664C13.3309 22.8621 13.8104 22.3699 14.4096 22.3494L17.1775 17.9208C16.3359 17.5757 15.4144 17.3855 14.4485 17.3855C10.4729 17.3855 7.25 20.6084 7.25 24.584H6C6 19.918 9.78254 16.1355 14.4485 16.1355C15.658 16.1355 16.8081 16.3896 17.8483 16.8474L19.5068 14.1939L20.5668 14.8564L18.9545 17.4361C21.3236 18.9327 22.8971 21.5746 22.8971 24.584H21.6471C21.6471 22.0216 20.3082 19.7719 18.2919 18.4962L15.4698 23.0116C15.5317 23.1505 15.5662 23.3044 15.5662 23.4664Z",fill:o})]})}function ResetCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemBackground(t,{disabled:n}),o=r.OperationsCatalog.itemText(t,{disabled:n}),a=parseBorderOrDefault(r.OperationsCatalog.border?.(t,{disabled:n})),s=r.OperationsCatalog.itemHeight,l=r.OperationsCatalog.itemWidth(t);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("rect",{...subtractBorder({x:0,y:0,width:l,height:s},a.width),style:{fill:i,...borderToStroke(a)}}),(0,c.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.1426 15.7872L20.0075 8.625L21.09 8L25.5847 15.785L21.091 23.6234L20.0065 23.0016L24.1426 15.7872ZM7 23.3125V8.3125H8.25V23.3125H7ZM13.9107 11.7054H15.8036C16.2178 11.7054 16.5536 12.0411 16.5536 12.4554V19.1696C16.5536 19.5839 16.2178 19.9196 15.8036 19.9196H13.9107C13.4965 19.9196 13.1607 19.5839 13.1607 19.1696V12.4554C13.1607 12.0411 13.4965 11.7054 13.9107 11.7054ZM11.9107 12.4554C11.9107 11.3508 12.8061 10.4554 13.9107 10.4554H15.8036C16.9081 10.4554 17.8036 11.3508 17.8036 12.4554V19.1696C17.8036 20.2742 16.9081 21.1696 15.8036 21.1696H13.9107C12.8061 21.1696 11.9107 20.2742 11.9107 19.1696V12.4554Z",fill:o})]})}function BarrierCatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e,i=r.OperationsCatalog.itemBackground(t,{disabled:n}),o=r.OperationsCatalog.itemText(t,{disabled:n}),a=r.OperationsCatalog.itemHeight,s=r.OperationsCatalog.itemWidth(t),l=parseBorderOrDefault(r.OperationsCatalog.border?.(t,{disabled:n}));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("rect",{...subtractBorder({x:0,y:0,width:s,height:a},l.width),style:{fill:i,...borderToStroke(l)}}),(0,c.jsx)("path",{d:"M15 12V8H16.25V12H15ZM15 18V14H16.25V18H15ZM15 20V24H16.25V20H15Z",fill:o})]})}function ControlCatalogSymbol(e){let{theme:t,disabled:r}=e,n={kind:"control"},i=t.OperationsCatalog.itemBackground(n,{disabled:r}),o=t.OperationsCatalog.itemText(n,{disabled:r}),a=t.OperationsCatalog.itemHeight,s=t.OperationsCatalog.itemWidth(n),l=parseBorderOrDefault(t.OperationsCatalog.border?.(n,{disabled:r})),u={x:s/2,y:a/2};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("rect",{...subtractBorder({x:0,y:0,width:s,height:a},l.width),style:{fill:i,...borderToStroke(l)}}),(0,c.jsx)("circle",{cx:u.x,cy:u.y,r:5,style:{fill:o}})]})}function ConditionalCatalogSymbol(e){let{theme:t,disabled:r}=e,n={kind:"conditional"},i=t.OperationsCatalog.itemBackground(n,{disabled:r}),o=t.OperationsCatalog.itemText(n,{disabled:r}),a=t.OperationsCatalog.itemHeight,s=t.OperationsCatalog.itemWidth(n),l=parseBorderOrDefault(t.OperationsCatalog.border?.(n,{disabled:r})),u={x:s/2,y:a/2};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("rect",{...subtractBorder({x:0,y:0,width:s,height:a},l.width),style:{fill:i,...borderToStroke(l)}}),(0,c.jsx)(Text,{x:u.x,y:u.y,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:o,fontWeight:400,textAnchor:"middle"},children:"if"})]})}function PhaseDiskAnnotationCatalogSymbol(e){let{theme:t}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(el,{x:0,y:0,data:{x:1,y:0,z:0,phase:Math.PI/2,norm:0},tooltipOpen:!1,qubit:{id:"q",index:0},size:t.OperationsCatalog.itemHeight})})}function CatalogSymbol(e){let{operation:t,theme:r,disabled:n}=e;switch(t.kind){case"gate":return(0,c.jsx)(GateCatalogSymbol,{operation:t,theme:r,disabled:n});case"measure":return(0,c.jsx)(MeasureCatalogSymbol,{operation:t,theme:r,disabled:n});case"reset":return(0,c.jsx)(ResetCatalogSymbol,{operation:t,theme:r,disabled:n});case"barrier":return(0,c.jsx)(BarrierCatalogSymbol,{operation:t,theme:r,disabled:n});case"control":return(0,c.jsx)(ControlCatalogSymbol,{theme:r,disabled:n});case"conditional":return(0,c.jsx)(ConditionalCatalogSymbol,{theme:r,disabled:n});case"phaseDiskAnnotation":return(0,c.jsx)(PhaseDiskAnnotationCatalogSymbol,{operation:t,theme:r,disabled:n})}}function PlusCircle(e){let{bg:t,color:r,size:n,border:i,plusPadding:o=n/2}=e;return(0,c.jsxs)("g",{children:[(0,c.jsx)("circle",{cx:0,cy:0,r:n,style:{fill:t,...borderToStroke(i)}}),(0,c.jsx)("line",{x1:0,y1:-n+o,x2:0,y2:n-o,style:{strokeWidth:1.25,stroke:r}}),(0,c.jsx)("line",{x1:n-o,y1:0,x2:-n+o,y2:0,style:{strokeWidth:1.25,stroke:r}})]})}function GateNot(e){let{theme:t,operation:r,registerPositions:n,modifiers:i,definition:o}=e,a=r.registers.map(e=>n.get(e)),s=t.Operations.singleQubitHeight,l=t.Operations.background(r,o,i),u=t.Operations.text(r,i),d=parseBorderOrDefault(t.Operations.border?.(r,i)),p=rectCenter(a[0]).x,f=s/2-d.width;return(0,c.jsx)(Box,{y:rectCenter(a[0]).y,x:p,children:(0,c.jsx)(PlusCircle,{bg:l,color:u,size:f,border:d})})}function GateDefault(e){let{theme:t,operation:r,registerPositions:n,modifiers:i,definition:o}=e,a=t.Operations.background(r,o,i),s=t.Operations.text(r,i),l=t.Operations.width(r),u=parseBorderOrDefault(t.Operations.border?.(r,i)),d=r.registers.map(e=>n.get(e)),p=d.map(e=>rectCenter(e).y),f=(0,g.max)(p)-(0,g.min)(p)+t.Operations.singleQubitHeight,m=rectCenter(d[0]).x-l/2,y=(0,g.min)(p)-t.Operations.singleQubitHeight/2,v=r.arguments.length>0,x=o.parameters.filter(e=>"quantum"===e.type);return(0,c.jsxs)(Box,{children:[(0,c.jsx)("rect",{...subtractBorder({x:m,y,width:l,height:f},u.width),style:{fill:a,...borderToStroke(u)}}),(0,c.jsx)(Text,{x:m+l/2,y:v?y+f/2-3:y+f/2,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:s,fontWeight:400,textAnchor:"middle"},children:t.Operations.label(r)}),v&&(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(Text,{x:m+l/2,y:y+f/2+10,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Mono, monospace",fontSize:8,fontStyle:"normal",fill:s,fontWeight:400,textAnchor:"middle"},children:["(",r.arguments.map(e=>e.expression).join(", "),")"]})}),d.length>1&&d.map((e,t)=>(0,c.jsx)(Text,{x:m+4,y:rectCenter(e).y,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Mono, monospace",fontSize:8,fontStyle:"normal",fill:s,fontWeight:400},children:x[t].id},e.y))]})}function GateSwap(e){let{theme:t,operation:r,registerPositions:n,modifiers:i,definition:o}=e,a=r.registers.map(e=>n.get(e)),s=t.Operations.background(r,o,i),l=parseBorderOrDefault(t.Operations.border?.(r,i)),u=l.width>0?l.color:s,d=rectCenter(a[0]).x,p=a.map(e=>rectCenter(e).y);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("line",{x1:d,y1:p[0],x2:d,y2:p[1],style:{strokeWidth:1,stroke:u}}),(0,c.jsxs)(Box,{y:p[0],x:d,children:[(0,c.jsx)("line",{x1:-8,y1:-8,x2:8,y2:8,style:{strokeWidth:1,stroke:u}}),(0,c.jsx)("line",{x1:8,y1:-8,x2:-8,y2:8,style:{strokeWidth:1,stroke:u}})]}),(0,c.jsxs)(Box,{y:p[1],x:d,children:[(0,c.jsx)("line",{x1:-8,y1:-8,x2:8,y2:8,style:{strokeWidth:1,stroke:u}}),(0,c.jsx)("line",{x1:8,y1:-8,x2:-8,y2:8,style:{strokeWidth:1,stroke:u}})]})]})}function GateTdg(e){let{theme:t,operation:r,registerPositions:n,modifiers:i}=e,o=t.Operations.text(r,i),a=r.registers.map(e=>n.get(e)),s=rectCenter(a[0]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(GateDefault,{...e}),(0,c.jsx)(Dagger,{color:o,gateCy:s.y-6,gateCx:s.x+7})]})}function GateSdg(e){let{theme:t,operation:r,registerPositions:n,modifiers:i}=e,o=r.registers.map(e=>n.get(e)),a=t.Operations.text(r,i),s=rectCenter(o[0]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(GateDefault,{...e}),(0,c.jsx)(Dagger,{color:a,gateCy:s.y-6,gateCx:s.x+6})]})}function GateSx(e){let{theme:t,operation:r,registerPositions:n,modifiers:i,definition:o}=e,a=r.registers.map(e=>n.get(e)),s=t.Operations.width(r),l=t.Operations.singleQubitHeight,u=rectCenter(a[0]).y-l/2,d=t.Operations.background(r,o,i),p=t.Operations.text(r,i),f=parseBorderOrDefault(t.Operations.border?.(r,i)),m=rectCenter(a[0]).x-s/2;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(Box,{y:u,x:m,children:[(0,c.jsx)("rect",{...subtractBorder({x:0,y:0,width:s,height:l},f.width),style:{fill:d,...borderToStroke(f)}}),(0,c.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4344 8H25.5V9.25H13.5656L12.0656 24.25H8.92123L8.42123 17.75H7V16.5H9.57877L10.0788 23H10.9344L12.4344 8Z",fill:p}),(0,c.jsx)(Text,{x:s/2+3,y:l/2+1,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:p,fontWeight:400,textAnchor:"middle"},children:"X"})]})})}function GateSxdg(e){let{theme:t,operation:r,registerPositions:n,modifiers:i,definition:o}=e,a=r.registers.map(e=>n.get(e)),s=t.Operations.width(r),l=t.Operations.singleQubitHeight,u=rectCenter(a[0]).y-l/2,d=t.Operations.background(r,o,i),p=t.Operations.text(r,i),f=parseBorderOrDefault(t.Operations.border?.(r,i)),m=rectCenter(a[0]).x-s/2;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(Box,{y:u,x:m,children:[(0,c.jsx)("rect",{...subtractBorder({x:0,y:0,width:s,height:l},f.width),style:{fill:d,...borderToStroke(f)}}),(0,c.jsx)(Dagger,{color:p,gateCy:s/2-4,gateCx:l/2+10}),(0,c.jsx)("path",{d:"M10.4344 8H23.5V9.25H11.5656L10.0656 24.25H6.92123L6.42123 17.75H5V16.5H7.57877L8.07877 23H8.93438L10.4344 8Z",fill:p}),(0,c.jsx)(Text,{x:s/2+2,y:l/2+1,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:p,fontWeight:400,textAnchor:"middle"},children:"X"})]})})}function GateRzz(e){let{theme:t,operation:r,registerPositions:n,modifiers:i,definition:o}=e,a=r.registers.map(e=>n.get(e)),s=t.Operations.width(r),l=t.Operations.background(r,o,i),u=t.Operations.text(r,i),d=parseBorderOrDefault(t.Operations.border?.(r,i)),p=d.width>0?d.color:l,f=a.map(e=>rectCenter(e).y),m=(0,g.min)(f)-t.Operations.singleQubitHeight/2,y=(0,g.max)(f)-(0,g.min)(f)+t.Operations.singleQubitHeight,v=rectCenter(a[0]).x-s/2,x=v+10,O=x+8+10+(s-8-30)/2;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(Box,{x:x,children:[(0,c.jsx)("line",{x1:0,y1:f[0],x2:0,y2:f[1],style:{strokeWidth:1,stroke:p}}),(0,c.jsx)("circle",{r:4,style:{fill:p},cx:0,cy:f[0]}),(0,c.jsx)("circle",{r:4,style:{fill:p},cx:0,cy:f[1]})]}),(0,c.jsx)(Text,{x:O,y:m+y/2-3,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:16,fontStyle:"normal",fill:u,fontWeight:400,textAnchor:"middle"},children:t.Operations.label(r)}),(0,c.jsxs)(Text,{x:O,y:m+y/2+10,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Mono, monospace",fontSize:8,fontStyle:"normal",fill:u,fontWeight:400,textAnchor:"middle"},children:["(",r.arguments.map(e=>e.expression).join(", "),")"]})]})}function Controls(e){let{theme:t,operation:r,controlRegisters:n,registerPositions:i,modifiers:o,definition:a}=e,s=t.Operations.background(r,a,o),l=parseBorderOrDefault(t.Operations.border?.(r,o)),u=l.width>0?l.color:s,d=r.registers.map(e=>i.get(e)),p=n.map(e=>i.get(e)),f=rectCenter(d[0]).x,m=d.map(e=>rectCenter(e).y);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("line",{x1:f,y1:(0,g.min)(m),x2:f,y2:(0,g.max)(m),style:{strokeWidth:1,stroke:u}}),p.map((e,t)=>(0,c.jsx)("circle",{r:4,cx:f,cy:rectCenter(e).y,style:{fill:u}},`${e.y}_${t}`))]})}function GateCz(e){let{theme:t,operation:r,registerPositions:n,modifiers:i,definition:o}=e,a=r.registers.map(e=>n.get(e)),s=t.Operations.background(r,o,i),l=parseBorderOrDefault(t.Operations.border?.(r,i)),u=l.width>0?l.color:s,d=rectCenter(a[0]).x;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(Box,{x:d,children:[(0,c.jsx)("line",{x1:0,y1:rectCenter(a[0]).y,x2:0,y2:rectCenter(a[1]).y,style:{strokeWidth:1,stroke:u}}),(0,c.jsx)("circle",{r:4,style:{fill:u},cx:0,cy:rectCenter(a[0]).y}),(0,c.jsx)("circle",{r:4,style:{fill:u},cx:0,cy:rectCenter(a[1]).y})]})})}ev.displayName="OperationsHover";let RegisterPositions=class RegisterPositions{constructor(e,t){if(this.registers=e,this.positions=t,e.length!==t.length)throw Error("Registers and positions must have the same length")}get(e){let t=this.registers.findIndex(t=>t.id===e.id&&t.index===(e.index??0));return this.positions[t]}getAll(e){let t=[];for(let[r,n]of this.registers.entries())n.id===e.id&&(void 0===e.index?t.push(this.positions[r]):e.index===n.index&&t.push(this.positions[r]));return t}};var ex=r(22514);function buildModifiers(e){return{floating:!1,dragging:!1,inspect:void 0,expandDefinition:!1,disabled:!1,...e}}function GateExpandDefinition(e){let{theme:t,operation:r,registerPositions:n,definition:i,modifiers:o}=e,a=new m.b(e.program),s=t.Operations.background(r,i,o),l=t.Operations.text(r,o),d="left",p=(0,u.useMemo)(()=>(0,y.ck)(e.program,d,r)??[],[e.program,r]),v=(0,u.useMemo)(()=>(0,f.n)(p,d),[p,d]),x=(0,u.useMemo)(()=>new m.b(p),[p]),O=r.id,R=(0,ex.X)(O,"IBM Plex Sans",14),A=R+8,b=(0,u.useMemo)(()=>buildSingleGridOperationsLayout({program:p,operationsByColumns:v,theme:t,groupClassicalRegisters:!0,expandDefinitionNodeIds:[]}),[p,v,t,!0]),C=x.wires().map(e=>x.getRegisterAccessAtWire(e)),_=r.registers.map(e=>n.get(e)),S=_.map(e=>rectCenter(e).y),k=b.width+16+4,N=rectCenter(_[0]).x-k/2,P=(0,g.min)(S)-t.Operations.singleQubitHeight/2,L=(0,g.max)(S)-(0,g.min)(S)+t.Operations.singleQubitHeight,M=(0,g.sortBy)(r.registers,e=>(0,g.min)(a.getRegisterWires(e)));return(0,c.jsxs)(Box,{y:0,x:N,children:[(0,c.jsx)(Box,{x:20,children:b.columns.map((e,t)=>{let r=x.wires().map(t=>{let r=wireToCell(b.rows,e,t);return r.y=n.get(M[t]).y,r}),i=new RegisterPositions(C,r);return e.operations.map((e,r)=>(0,c.jsx)(Operation,{operation:e,definition:(0,y.ZN)(p,e),registerPositions:i,modifiers:buildModifiers(),program:p,columnsMode:d},`${t}_${r}_${e.kind}`))})}),(0,c.jsx)("rect",{x:-2,y:P-2,width:k+4,height:L+4,style:{stroke:s,fill:"transparent"}}),(0,c.jsx)(Box,{x:-2,y:P-2,children:(0,c.jsxs)("g",{transform:`translate(0, ${A}) rotate(-90)`,children:[(0,c.jsx)("rect",{x:0,y:0,width:A,height:16,style:{fill:s}}),(0,c.jsx)(Text,{x:4,y:8,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:14,fontStyle:"normal",fill:l,fontWeight:400,textAnchor:"start"},children:O})]})})]})}function wireToCell(e,t,r){let n=e[r];return{x:t.x,y:n.y,width:t.width,height:n.height}}function Gate(e){let{operation:t,theme:r,registerPositions:n,modifiers:i,definition:o}=e;if(i.expandDefinition)return(0,c.jsx)(GateExpandDefinition,{...e});switch(t.id){case"x":return(0,c.jsx)(GateNot,{...e});case"swap":return(0,c.jsx)(GateSwap,{...e});case"tdg":return(0,c.jsx)(GateTdg,{...e});case"sdg":return(0,c.jsx)(GateSdg,{...e});case"sx":return(0,c.jsx)(GateSx,{...e});case"sxdg":return(0,c.jsx)(GateSxdg,{...e});case"rzz":return(0,c.jsx)(GateRzz,{...e});case"cz":return(0,c.jsx)(GateCz,{...e});case"ch":case"cy":case"crx":case"cry":case"crz":case"cu1":case"cp":case"cu3":case"cu":return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Controls,{theme:e.theme,operation:e.operation,controlRegisters:(0,g.initial)(e.operation.registers),registerPositions:n,modifiers:i,definition:o}),(0,c.jsx)(GateDefault,{...e,operation:{...t,registers:(0,g.takeRight)(t.registers,1)}})]});case"cx":case"CX":case"ccx":case"c3x":case"c4x":return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Controls,{theme:r,operation:t,controlRegisters:(0,g.initial)(t.registers),registerPositions:n,modifiers:i,definition:o}),(0,c.jsx)(GateNot,{...e,operation:{...t,registers:(0,g.takeRight)(t.registers,1)}})]});case"csx":return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Controls,{theme:r,operation:t,controlRegisters:(0,g.initial)(t.registers),registerPositions:n,modifiers:i,definition:o}),(0,c.jsx)(GateSx,{...e,operation:{...t,registers:(0,g.takeRight)(t.registers,1)}})]});case"cswap":return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Controls,{theme:r,operation:t,controlRegisters:(0,g.take)(t.registers,1),registerPositions:n,modifiers:i,definition:o}),(0,c.jsx)(GateSwap,{...e,operation:{...t,registers:(0,g.tail)(t.registers)}}),";"]});default:return(0,c.jsx)(GateDefault,{...e})}}function Reset(e){let{theme:t,operation:r,registerPositions:n,modifiers:i}=e,o=r.registers.map(e=>n.get(e)),a=o.map(e=>rectCenter(e).y),s=t.Operations.width(r),l=(0,g.max)(a)-(0,g.min)(a)+t.Operations.singleQubitHeight,u=(0,g.min)(a)-t.Operations.singleQubitHeight/2,d=t.Operations.background(r,void 0,i),p=t.Operations.text(r,i),f=parseBorderOrDefault(t.Operations.border?.(r,i)),m=rectCenter(o[0]).x-s/2;return(0,c.jsxs)(Box,{y:u,x:m,children:[(0,c.jsx)("rect",{...subtractBorder({x:0,y:0,width:s,height:l},f.width),style:{fill:d,...borderToStroke(f)}}),(0,c.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.1426 15.7872L20.0075 8.625L21.09 8L25.5847 15.785L21.091 23.6234L20.0065 23.0016L24.1426 15.7872ZM7 23.3125V8.3125H8.25V23.3125H7ZM13.9107 11.7054H15.8036C16.2178 11.7054 16.5536 12.0411 16.5536 12.4554V19.1696C16.5536 19.5839 16.2178 19.9196 15.8036 19.9196H13.9107C13.4965 19.9196 13.1607 19.5839 13.1607 19.1696V12.4554C13.1607 12.0411 13.4965 11.7054 13.9107 11.7054ZM11.9107 12.4554C11.9107 11.3508 12.8061 10.4554 13.9107 10.4554H15.8036C16.9081 10.4554 17.8036 11.3508 17.8036 12.4554V19.1696C17.8036 20.2742 16.9081 21.1696 15.8036 21.1696H13.9107C12.8061 21.1696 11.9107 20.2742 11.9107 19.1696V12.4554Z",fill:p})]})}function Measure(e){let{theme:t,operation:r,registerPositions:n,modifiers:i}=e,o=t.Operations.width(r),a=t.Operations.singleQubitHeight,s=[r.from,r.to].map(e=>n.get(e)),l=s.map(e=>rectCenter(e).y),u=l[0]-a/2,d=t.Operations.background(r,void 0,i),p=t.Operations.text(r,i),f=parseBorderOrDefault(t.Operations.border?.(r,i)),m=rectCenter(s[0]).x-o/2;return(0,c.jsxs)(Box,{x:m,children:[(0,c.jsx)("line",{x1:o/2,y1:l[0],x2:o/2,y2:l[1],style:{strokeWidth:1.5,stroke:t.Operations.qubitToBitWireColor,strokeDasharray:3}}),(0,c.jsx)(Box,{y:l[1]+2,x:o/2,children:(0,c.jsx)("path",{d:"M0,0 L8,0 L4,8 z",fill:t.Operations.qubitToBitWireColor,transform:"translate(-4, -8)"})}),(0,c.jsx)(Text,{x:o/2+8,y:l[1]-12,dy:".25em",dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:12,fill:t.Operations.qubitToBitWireText,fontWeight:700,textAnchor:"middle"},children:r.to.index}),(0,c.jsxs)(Box,{y:u,children:[(0,c.jsx)("rect",{...subtractBorder({x:0,y:0,width:o,height:a},f.width),style:{fill:d,...borderToStroke(f)}}),(0,c.jsx)("path",{d:"M25.2941 11.584H22.7981L25.2301 8.008V7H21.6141V8H23.9101L21.4861 11.576V12.584H25.2941V11.584ZM15.5662 23.4664C15.5662 24.0836 15.0658 24.584 14.4485 24.584C13.8313 24.584 13.3309 24.0836 13.3309 23.4664C13.3309 22.8621 13.8104 22.3699 14.4096 22.3494L17.1775 17.9208C16.3359 17.5757 15.4144 17.3855 14.4485 17.3855C10.4729 17.3855 7.25 20.6084 7.25 24.584H6C6 19.918 9.78254 16.1355 14.4485 16.1355C15.658 16.1355 16.8081 16.3896 17.8483 16.8474L19.5068 14.1939L20.5668 14.8564L18.9545 17.4361C21.3236 18.9327 22.8971 21.5746 22.8971 24.584H21.6471C21.6471 22.0216 20.3082 19.7719 18.2919 18.4962L15.4698 23.0116C15.5317 23.1505 15.5662 23.3044 15.5662 23.4664Z",fill:p})]})]})}var eE=r(18875);function If(e){let t;let{theme:r,operation:n,registerPositions:i,modifiers:o,definition:a,program:s}=e,{Gate:l,Reset:u,Measure:d}=useThemeOperations(),p=r.Operations.width(n),f=n.operation;"gate"===f.kind?t=(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l,{operation:f,definition:a,theme:r,registerPositions:i,modifiers:o,program:s})}):"reset"===f.kind?t=(0,c.jsx)(u,{operation:f,theme:r,registerPositions:i,modifiers:o}):"measure"===f.kind&&(t=(0,c.jsx)(d,{operation:f,theme:r,registerPositions:i,modifiers:o}));let m=(0,eE.ap)(n.operation).map(e=>i.get(e)),y=rectCenter(m[0]).x-p/2,v=m.map(e=>e.y),x=i.getAll(n.condition.register).map(e=>rectCenter(e).y);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(Box,{x:y,children:[(0,c.jsx)("line",{x1:p/2,y1:(0,g.max)(v),x2:p/2,y2:(0,g.max)(x),style:{strokeWidth:1.5,stroke:r.Operations.qubitToBitWireColor}}),x.map((e,t)=>(0,c.jsx)("circle",{cx:p/2,cy:e,r:3,style:{stroke:r.Operations.qubitToBitWireColor,fill:r.Operations.qubitToBitWireColor}},`${e}_${t}`)),(0,c.jsxs)(Text,{x:p/2,y:(0,g.max)(x)+12,dominantBaseline:"middle",style:{fontFamily:"IBM Plex Sans, sans-serif",fontSize:12,fill:r.Operations.qubitToBitWireText,fontWeight:700,textAnchor:"middle"},children:[n.condition.operator," ",n.condition.value]})]}),t]})}function Barrier(e){let{theme:t,operation:r,registerPositions:n,modifiers:i}=e,o=t.Operations.background(r,void 0,i),a=t.Operations.singleQubitHeight,s=r.registers.map(e=>n.get(e)),l=rectCenter(s[0]).x;return(0,c.jsx)(c.Fragment,{children:s.map(e=>{let t=e.y+e.height/2;return(0,c.jsxs)(Box,{y:t,x:l,children:[(0,c.jsx)("line",{x1:0,y1:-a/2,x2:0,y2:-2,style:{strokeWidth:1,stroke:o}}),(0,c.jsx)("line",{x1:0,y1:2,x2:0,y2:a/2,style:{strokeWidth:1,stroke:o}})]},t)})})}let eT=(0,u.forwardRef)((e,t)=>{let{points:r,...n}=e;return(0,c.jsx)("polygon",{ref:t,points:r.map(e=>`${e.x},${e.y}`).join(" "),...n})});function GridContinuations(e){let{grids:t,gridIndex:r,wiresLayout:n}=e,i=useTheme(),o=t[r],a=r<t.length-1;return(0,c.jsxs)(c.Fragment,{children:[r>0&&(0,c.jsx)(c.Fragment,{children:o.rows.map((e,t)=>{let r=e.y+e.height/2,o=n.x-5,a=[{x:o,y:r-5},{x:o,y:r+5},{x:o+5,y:r}];return(0,c.jsx)(eT,{points:a,style:{fill:i.Wires.color}},t)})}),a&&(0,c.jsx)(c.Fragment,{children:o.rows.map((e,t)=>{let r=e.y+e.height/2,o=n.x+n.width,a=[{x:o,y:r-5},{x:o,y:r+5},{x:o+5,y:r}];return(0,c.jsx)(eT,{points:a,style:{fill:i.Wires.color}},t)})})]})}eT.displayName="Polygon";let eO=(0,u.memo)(e=>{let{grids:t,gridIndex:r,operationsByLayersAndColumns:n,wiresLayout:i}=e,o=useTheme(),a=t[r],s=getVisibleLayersColumnsIndex({grids:t,gridIndex:r,operationsByLayersAndColumns:n});return(0,c.jsx)(c.Fragment,{children:s.map((e,t)=>{let r=a.columns[e.startColumnIndex],n=a.columns[e.endColumnIndex],s=(0,g.first)(a.rows),l=(0,g.last)(a.rows),u=e.startOpen?i.x:r.x-o.Operations.gapX/2,d=e.endOpen?i.x+i.width:n.x+n.width+o.Operations.gapX/2,p=s.y,f=l.y+l.height,m=a.columns.length-1===e.endColumnIndex;return(0,c.jsxs)("g",{children:[!e.startOpen&&(0,c.jsx)("line",{x1:u,x2:u,y1:p,y2:f,style:{fill:"none",stroke:o.Wires.color,strokeWidth:1,strokeLinecap:"round"}}),!(e.endOpen||!m)&&(0,c.jsx)("line",{x1:d,x2:d,y1:p,y2:f,style:{fill:"none",stroke:o.Wires.color,strokeWidth:1,strokeLinecap:"round"}})]},t)})})});function getVisibleLayersColumnsIndex(e){let{grids:t,gridIndex:r,operationsByLayersAndColumns:n}=e,i=t[r],o=(0,g.sumBy)(t.slice(0,r),e=>e.columns.length),a=o+i.columns.length-1,s=[],c=0;for(let e of n)s.push({startColumnOffset:c,endColumnOffset:c+e.length-1}),c+=e.length;let l=[];for(let e of s){if(e.startColumnOffset>a)break;if(e.startColumnOffset<=a&&e.endColumnOffset>=o){let t=e.startColumnOffset<o,r=e.endColumnOffset>a,n=(0,g.max)([e.startColumnOffset,o]),i=(0,g.min)([e.endColumnOffset,a]);l.push({startOpen:t,endOpen:r,startColumnIndex:n-o,endColumnIndex:i-o})}}return l}function useThemeOperations(){let e=useTheme();return(0,u.useMemo)(()=>({OperationsHover:e.Components?.OperationsHover??ev,OperationsSelection:e.Components?.OperationsSelection??OperationsSelection,GridContinuations:e.Components?.GridContinuations??GridContinuations,Layers:e.Components?.Layers??eO,BitLabel:e.Components?.BitLabel??BitLabel,RegisterLabel:e.Components?.RegisterLabel??RegisterLabel,Wire:e.Components?.Wire??Wire,CatalogSymbol:e.Components?.CatalogSymbol??CatalogSymbol,Gate:e.Components?.Gate??Gate,Reset:e.Components?.Reset??Reset,Measure:e.Components?.Measure??Measure,If:e.Components?.If??If,Barrier:e.Components?.Barrier??Barrier}),[e])}function Operation(e){let{operation:t,registerPositions:r,modifiers:n,definition:i,program:o,columnsMode:a}=e,s=useTheme(),{Gate:l,Reset:u,Barrier:d,If:p,Measure:f}=useThemeOperations();switch(t.kind){case"gate":return(0,c.jsx)(l,{operation:t,definition:i,theme:s,registerPositions:r,modifiers:n,program:o});case"reset":return(0,c.jsx)(u,{operation:t,theme:s,registerPositions:r,modifiers:n});case"measure":return(0,c.jsx)(f,{operation:t,theme:s,registerPositions:r,modifiers:n});case"if":return(0,c.jsx)(p,{operation:t,definition:i,theme:s,registerPositions:r,modifiers:n,program:o});case"barrier":return(0,c.jsx)(d,{operation:t,theme:s,registerPositions:r,modifiers:n});case"annotation":if("phaseDisk"===t.id)return(0,c.jsx)(PhaseDiskAnnotation,{operation:t,registerPositions:r,modifiers:n,columnsMode:a})}return null}eO.displayName="Layers";let eR=(0,u.memo)(function(e){let{grid:t,wires:r,movingNodeIds:n,program:i,mode:o,inspectingNodeId:a,addingNodes:s,addingModifier:l,columnsMode:d,expandDefinitionNodeIds:p,floating:f}=e,m=r.wires().map(e=>r.getRegisterAccessAtWire(e)),g=(0,u.useMemo)(()=>{if(f){let e=buildModifiers({floating:!0});return()=>e}if("edit"===o){if(l)return e=>(0,y.Fl)(l,i,e)?buildModifiers():buildModifiers({disabled:!0});let e=new Set(n??[]),t=new Set(s?.map(e=>e.meta.id)??[]),r=new Set(p);return n=>{let i=t.has(n.meta.id)||e.has(n.meta.id),o=r.has(n.meta.id);return i?buildModifiers({dragging:!0}):o?buildModifiers({expandDefinition:!0}):buildModifiers()}}if("inspect"===o){let e=new Map;for(let[t,r]of(0,y.T9)(i,d).entries())e.set(r.meta.id,t);return t=>{if(!a)return buildModifiers({inspect:"not-executed"});let r=e.get(a),n=e.get(t.meta.id);return void 0===r||void 0===n?buildModifiers({inspect:"not-executed"}):r===n?buildModifiers({inspect:"executing"}):r>n?buildModifiers({inspect:"executed"}):buildModifiers({inspect:"not-executed"})}}{let e=buildModifiers();return()=>e}},[f,o,l,n,s,p,i,d,a]);return(0,c.jsx)(c.Fragment,{children:t.columns.map((e,n)=>{let o=r.wires().map(r=>Operations_wireToCell(t.rows,e,r)),a=new RegisterPositions(m,o);return e.operations.map((e,t)=>(0,c.jsx)(Operation,{operation:e,definition:(0,y.ZN)(i,e),registerPositions:a,modifiers:g(e),program:i,columnsMode:d},`${n}_${t}_${e.kind}`))})})});function Operations_wireToCell(e,t,r){let n=e[r];return{x:t.x,y:n.y,width:t.width,height:n.height}}let eA=(0,u.memo)(e=>{let{rows:t,registers:r,groupClassicalRegisters:n,x:i,width:o}=e,a=useTheme(),{Wire:s}=useThemeOperations(),l=r.filter(e=>"quantum"===e.type).flatMap(e=>(0,g.range)(e.size).map(t=>({id:e.id,index:t}))),u=r.filter(e=>"classical"===e.type),d=u.flatMap(e=>(0,g.range)(e.size).map(t=>({id:e.id,index:t}))),p=n?u.map(e=>({id:e.id,size:e.size})):d.map(e=>({id:`${e.id}_${e.index}`,size:1})),f=0,m=i+o;return(0,c.jsxs)("g",{children:[(0,c.jsx)("g",{children:l.map((e,r)=>{let n=t[f++],o=n.y+n.height/2;return(0,c.jsx)(s,{x1:i,x2:m,y1:o,y2:o,color:a.Wires.color,kind:"quantum"},`${e.id}_${r}`)})}),p.map(e=>{let r=t[f];f+=e.size;let n=r.y+r.height/2;return(0,c.jsx)(s,{x1:i,x2:m,y1:n,y2:n,color:a.Wires.color,kind:"classical"},e.id)})]})});function normalizePadding(e){if((0,g.isNumber)(e))return{top:e,right:e,bottom:e,left:e};if(2===e.length){let[t,r]=e;return{top:t,right:r,bottom:t,left:r}}let[t,r,n,i]=e;return{top:t,right:r,bottom:n,left:i}}function addPaddingX(e,t){let{left:r,right:n}=normalizePadding(t);return e+r+n}function addPaddingY(e,t){let{top:r,bottom:n}=normalizePadding(t);return e+r+n}function subtractPaddingX(e,t){let{left:r,right:n}=normalizePadding(t);return e-r-n}function RegisterLabels(e){let{registers:t,rows:r,width:n,groupClassicalRegisters:i,showBitIndex:o}=e,a=useTheme(),{BitLabel:s,RegisterLabel:l}=useThemeOperations(),u=t.filter(e=>"quantum"===e.type).flatMap(e=>(0,g.range)(e.size).map(t=>({id:e.id,index:t,type:"quantum"}))),d=t.filter(e=>"classical"===e.type),p=d.flatMap(e=>(0,g.range)(e.size).map(t=>({id:e.id,index:t,type:"classical"}))),f=normalizePadding(a.RegisterLabels.padding),m=0,y={x:0,y:0,width:n-f.right,height:a.Operations.singleQubitHeight};return(0,c.jsxs)("g",{children:[(0,c.jsx)("g",{children:u.map(e=>{let t=r[m++],n=t.y+t.height/2;return(0,c.jsx)(s,{rect:{...y,y:n},theme:a,bit:e,showBitIndex:o},`${e.id}_${e.index}`)})}),(0,c.jsxs)("g",{children:[i&&d.map(e=>{let t=r[m];m+=e.size;let n=t.y+t.height/2;return(0,c.jsx)(l,{rect:{...y,y:n},theme:a,register:e},`${e.id}`)}),!i&&p.map(e=>{let t=r[m++],n=t.y+t.height/2;return(0,c.jsx)(s,{rect:{...y,y:n},theme:a,bit:e,showBitIndex:o},`${e.id}_${e.index}`)})]})]})}eA.displayName="Wires";let eb=(0,u.memo)((0,u.forwardRef)((e,t)=>{let{program:r,viewport:n,columnsMode:i,className:o}=e,a=e.showRegistersLabelBitIndex??!0,s=e.groupClassicalRegisters??!0,l=useTheme(),d=(0,u.useMemo)(()=>(0,f.n)(r,i),[r,i]),p=(0,u.useMemo)(()=>new m.b(r),[r]),g=(0,u.useMemo)(()=>buildSingleGridOperationsLayout({program:r,operationsByColumns:d,theme:l,groupClassicalRegisters:s,expandDefinitionNodeIds:[]}),[r,d,l,s]),y=useRegistersLayout(r,l),x=useWiresLayout(n,l,y,g),O=useOperationsLayout(x,l),R=(0,u.useMemo)(()=>(0,v.E8)(r),[r]),A=(0,u.useMemo)(()=>new MultiGridOperationsLayout({singleGridLayout:g,wires:p,theme:l,maxGridWidth:O.width,x:O.x,y:O.y}),[g,p,l,O.width,O.x,O.y]),b=useContainerLayout(n,A,l,y,x),C=(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",ref:t,className:o,style:{display:"block",userSelect:"none"},viewBox:`0 0 ${b.width} ${b.height}`,width:b.width,height:b.height,children:[(0,c.jsx)("rect",{x:0,y:0,width:b.width,height:b.height,style:{fill:l.Container.background}}),A.grids.map((e,t)=>(0,c.jsxs)(Box,{children:[n?.overflow!=="auto"&&(0,c.jsx)(Box,{x:y.x,children:(0,c.jsx)(RegisterLabels,{registers:R,rows:e.rows,width:y.width,groupClassicalRegisters:s,showBitIndex:a})}),(0,c.jsx)(eA,{registers:R,rows:e.rows,x:x.x,width:x.width,groupClassicalRegisters:s}),(0,c.jsx)(eR,{program:r,grid:e,wires:p,groupClassicalRegisters:s,movingNodeIds:void 0,addingNodes:void 0,addingModifier:void 0,inspectingNodeId:void 0,mode:"edit",columnsMode:i,expandDefinitionNodeIds:[],floating:!1}),(0,c.jsx)(GridContinuations,{grids:A.grids,gridIndex:t,wiresLayout:x})]},t))]});return"auto"!==n.overflow?C:(0,c.jsxs)("div",{className:"overflow-auto scrollbar relative h-auto w-full",children:[(0,c.jsx)("div",{className:"sticky left-0",children:(0,c.jsx)("div",{className:"absolute top-0 left-0",children:(0,c.jsxs)("svg",{width:y.x+y.width,height:O.height+O.y,children:[(0,c.jsx)("rect",{width:y.x+y.width,height:O.height+O.y,style:{fill:l.Container.background}}),(0,c.jsx)(Box,{x:y.x,children:(0,c.jsx)(RegisterLabels,{registers:R,rows:A.grids[0].rows,width:y.width,groupClassicalRegisters:s})})]})})}),C]})}));function useContainerLayout(e,t,r,n,i){let o="width"in e?e.width:0;return(0,u.useMemo)(()=>{switch(e?.overflow){case"wrap":return{width:o,height:addPaddingY(t.height,r.Container.padding)};case"none":case"auto":{let e=addPaddingX(n.width+i.width,r.Container.padding),t=addPaddingY(i.height,r.Container.padding);return{width:e,height:t}}}},[e.overflow,o,t.height,r.Container.padding,n.width,i.width,i.height])}function useWiresLayout(e,t,r,n){let i="width"in e?e.width:0;return(0,u.useMemo)(()=>{let o;let a=normalizePadding(t.Container.padding),s=normalizePadding(t.Operations.padding);if("wrap"===e.overflow){let e=subtractPaddingX(i,t.Container.padding);o=e-r.width}else o=n.width+2*t.Operations.gapX;let c=addPaddingY(n.height,t.Operations.padding),l=r.width+a.left,u=a.top+s.top;return{width:o,x:l,height:c,y:u}},[r.width,n.height,n.width,t.Container.padding,t.Operations.gapX,t.Operations.padding,e.overflow,i])}function useRegistersLayout(e,t){return(0,u.useMemo)(()=>{let r=normalizePadding(t.Container.padding),n=normalizePadding(t.Operations.padding),i=(0,v.E8)(e),o=(0,g.max)(i.map(e=>t.RegisterLabels.width(e)))??0,a=addPaddingX(o,t.RegisterLabels.padding),s=r.left,c=n.top+r.top;return{width:a,x:s,y:c}},[e,t.RegisterLabels,t.Operations.padding,t.Container.padding])}function useOperationsLayout(e,t){return(0,u.useMemo)(()=>{let r=e.width-2*t.Operations.gapX,n=e.height,i=normalizePadding(t.Operations.padding),o=e.x+i.left,a=e.y;return{width:r,height:n,x:o,y:a}},[t.Operations.gapX,t.Operations.padding,e.height,e.width,e.x,e.y])}var eC=r(39547),e_=r(68449);function astToComposerQasmAst(e){let t=new ComposerQasmAstBuilder(e);return t.build()}let eS=new Map,ek=e_.z.number().int().array();let ComposerQasmAstBuilder=class ComposerQasmAstBuilder{constructor(e){this.program=e,this.registerById=(0,g.keyBy)(eC.E8(e),e=>e.id)}registerById;nodes=[];build(){let e;for(let t of this.program)this.nodes.push(...this.transformNode(t,e)),e=t;return this.nodes}transformNode(e,t){switch(e.kind){case"version":return[this.transformVersion(e,t)];case"include":return[this.transformInclude(e,t)];case"gateDefinition":return[this.transformGateDefinition(e,t)];case"opaqueGateDefinition":return[this.transformOpaqueGateDefinition(e,t)];case"comment":return[this.transformCommentOrAnnotation(e,t)];case"registerDefinition":return[this.transformRegisterDefinition(e,t)];case"gate":return this.transformGate(e,t);case"measure":return this.transformMeasure(e,t);case"reset":return this.transformReset(e,t);case"barrier":return this.transformBarrier(e,t);case"if":return this.transformIf(e,t)}}transformVersion(e,t){let r=nodeDistance(e,t);return{version:e.version,kind:e.kind,meta:{id:Symbol(),previousNodeDistance:r}}}transformInclude(e,t){let r=nodeDistance(e,t),n=eS.get("node.id");return n||(n=astToComposerQasmAst(e.program),eS.set(e.id,n)),{kind:e.kind,id:e.id,program:n,source:e.source,meta:{id:Symbol(),previousNodeDistance:r}}}transformGateDefinition(e,t){let r;let n=nodeDistance(e,t),i=[];for(let t of e.operations){let e=r?nodeDistance(t,r):{line:1,column:2};switch(t.kind){case"comment":{let r={kind:t.kind,content:t.content,meta:{id:Symbol(),previousNodeDistance:e}};i.push(r);break}case"barrier":{let r={kind:t.kind,registers:t.registers.map(e=>({id:e.id,index:e.index})),meta:{id:Symbol(),previousNodeDistance:e}};i.push(r);break}case"gate":{let r={kind:t.kind,id:t.id,registers:t.registers.map(e=>({id:e.id,index:e.index})),arguments:t.arguments.map(e=>({expression:e.expression,variables:e.variables.map(e=>({id:e.id}))})),meta:{id:Symbol(),previousNodeDistance:e}};i.push(r)}}r=t}return{id:e.id,kind:e.kind,parameters:e.parameters.map(e=>({id:e.id,type:e.type})),operations:i,meta:{id:Symbol(),previousNodeDistance:n}}}transformOpaqueGateDefinition(e,t){let r=nodeDistance(e,t);return{kind:e.kind,id:e.id,parameters:e.parameters.map(e=>({id:e.id,type:e.type})),meta:{id:Symbol(),previousNodeDistance:r}}}transformCommentOrAnnotation(e,t){for(let r of[this.columnsAnnotationMatcher,this.phaseDiskAnnotationMatcher]){let n=r(e,t);if(n)return n}return{kind:e.kind,content:e.content,meta:{id:Symbol(),previousNodeDistance:nodeDistance(e,t)}}}columnsAnnotationMatcher=(e,t)=>{let r=e.content.match(/^\s*@columns\s+(.*)$/);if(r)try{return{kind:"annotation",id:"columns",value:ek.parse(JSON.parse(r[1])),meta:{id:Symbol(),previousNodeDistance:nodeDistance(e,t)}}}catch(e){}};phaseDiskAnnotationMatcher=(e,t)=>{let r=e.content.match(/^\s*@phaseDisk\s*(.*)$/),n=(0,g.values)(this.registerById).filter(e=>"quantum"===e.type).flatMap(e=>(0,g.range)(e.size).map(t=>({id:e.id,index:t})));if(r){if(r[1].trim().length>0)return;let i=(0,g.last)(this.nodes);if(!i||"barrier"!==i.kind||i.registers.length!==n.length||0!==nodeDistance(e,t).line)return;return this.nodes.pop(),{kind:"annotation",id:"phaseDisk",meta:{id:Symbol(),previousNodeDistance:i.meta.previousNodeDistance},registers:n}}};transformRegisterDefinition(e,t){let r=nodeDistance(e,t);return{kind:e.kind,id:e.id,type:e.type,size:e.size,meta:{id:Symbol(),previousNodeDistance:r}}}transformGate(e,t){let r=this.getUnrolledRegisters(e),n=r.length>1?e:void 0;return r.map((r,i)=>{let o=0===i?nodeDistance(e,t):{line:1,column:0};return{kind:e.kind,id:e.id,registers:r,arguments:e.arguments.map(e=>({expression:e.expression,variables:e.variables.map(e=>({id:e.id}))})),meta:{id:Symbol(),rolledNode:n,previousNodeDistance:o}}})}transformMeasure(e,t){let r=this.getUnrolledRegisters(e),n=r.length>1?e:void 0;return r.map((r,i)=>{let o=0===i?nodeDistance(e,t):{line:1,column:0};return{kind:e.kind,from:r[0],to:r[1],meta:{id:Symbol(),rolledNode:n,previousNodeDistance:o}}})}transformReset(e,t){let r=this.getUnrolledRegisters(e),n=r.length>1?e:void 0;return r.map((r,i)=>{let o=0===i?nodeDistance(e,t):{line:1,column:0};return{kind:e.kind,registers:r,meta:{id:Symbol(),rolledNode:n,previousNodeDistance:o}}})}transformBarrier(e,t){let r=nodeDistance(e,t),n=e.registers.find(e=>void 0===e.index)?e:void 0,i=e.registers.flatMap(e=>{if(void 0!==e.index)return[{id:e.id,index:e.index}];let t=this.registerById[e.id].size;return(0,g.range)(t).map(t=>({index:t,id:e.id}))});return[{kind:e.kind,registers:i,meta:{id:Symbol(),rolledNode:n,previousNodeDistance:r}}]}transformIf(e,t){let r=this.getUnrolledRegisters(e),n=r.length>1?e:void 0;return r.map((r,i)=>{let o;let a=0===i?nodeDistance(e,t):{line:1,column:0};switch(e.operation.kind){case"gate":{let t={id:e.operation.id,kind:e.operation.kind,registers:r,arguments:e.operation.arguments.map(e=>({expression:e.expression,variables:e.variables.map(e=>({id:e.id}))})),meta:{id:Symbol(),previousNodeDistance:{line:0,column:1}}};o=t;break}case"measure":{let t={kind:e.operation.kind,from:r[0],to:r[1],meta:{id:Symbol(),previousNodeDistance:{line:0,column:1}}};o=t;break}case"reset":{let t={kind:e.operation.kind,registers:r,meta:{id:Symbol(),previousNodeDistance:{line:0,column:1}}};o=t}}return{kind:e.kind,condition:{operator:e.condition.operator,register:{id:e.condition.register.id,index:e.condition.register.index},value:e.condition.value},operation:o,meta:{id:Symbol(),previousNodeDistance:a,rolledNode:n}}})}getUnrolledRegisters(e){let t=getOperationUnrollableRegisters(e),r=(0,g.find)(t,e=>void 0===e.index);if(!r)return[t.map(e=>({id:e.id,index:e.index}))];let n=this.registerById[r.id].size;return(0,g.range)(0,n).map(e=>t.map(t=>({id:t.id,index:t.index??e})))}};function getOperationUnrollableRegisters(e){switch(e.kind){case"gate":case"reset":case"barrier":return e.registers;case"measure":return[e.from,e.to];case"if":return getOperationUnrollableRegisters(e.operation)}}function nodeDistance(e,t){return t?t.range.end.line===e.range.start.line?{line:0,column:e.range.start.column-t.range.end.column-1}:{line:e.range.start.line-t.range.end.line,column:e.range.start.column-1}:{line:e.range.start.line-1,column:e.range.start.column-1}}var eI=r(54925);eI.ue,eI.r3,eI.wd,eI._o,eI.sd,eI.N7;let eN=eI.nu;eI.Mf;let eP=eI.hW;eI.Bw;let ew=eI.P7,eL=eI.z5;eI.Sj,eI.Oq,eI.Wx,eI._b,eI.b4,eI.hI,eI.ej,eI.fK,eI.pT,eI.$9,eI.oI,eI.q4,eI.LK,eI.H7;let eM=eI.V3;eI.dK,eI.ZW,eI.Hs,eI.bS,eI.N$,eI.SE,eI.l$,eI.ol,eI.vA;let eF=eM({name:"Int",pattern:/\d+/}),eD=eM({name:"Real",pattern:/(\d*\.\d+([eE][-+]?\d+)?)|(\d+[eE][-+]?\d+)/}),ej=eM({name:"Id",pattern:/[a-z][a-zA-Z0-9_]*/,label:"id"}),eU=eM({name:"MathFn",pattern:/sin|cos|tan|exp|ln|sqrt/,longer_alt:ej}),eB=eM({name:"PlusGroup",pattern:eP.NA}),ez=eM({name:"+",pattern:"+",categories:eB}),eW=eM({name:"-",pattern:"-",categories:eB}),eG=eM({name:"MultGroup",pattern:eP.NA}),eV=eM({name:"*",pattern:"*",categories:eG}),eH=eM({name:"/",pattern:"/",categories:eG}),eq=eM({name:"^",pattern:"^",categories:eG}),e$=eM({name:"pi",pattern:"pi",longer_alt:ej}),eK=eM({name:"built-in gate",pattern:/CX|U/,label:"CX, U"}),eY=eM({name:"ResetOp",pattern:/reset/,longer_alt:ej,label:"reset"}),eX=eM({name:"Qreg",pattern:/qreg/,longer_alt:ej,label:"qreg"}),eQ=eM({name:"Creg",pattern:/creg /,longer_alt:ej,label:"creg"}),eZ=eM({name:"LSquare",pattern:/\[/,label:"["}),eJ=eM({name:"RSquare",pattern:/]/,label:"]"}),e0=eM({name:"LParen",pattern:/\(/,label:"("}),e1=eM({name:"RParen",pattern:/\)/,label:")"}),e2=eM({name:"LCurly",pattern:/{/,label:"{"}),e5=eM({name:"RCurly",pattern:/}/,label:"}"}),e4=eM({name:"SemiColon",pattern:/;/,label:";"}),e3=eM({name:"Comma",pattern:/,/,label:","}),e6=eM({name:"Include",pattern:/include/,longer_alt:ej,label:"include"}),e8=eM({name:"Measure",pattern:/measure/,longer_alt:ej,label:"measure"}),e7=eM({name:"Barrier",pattern:/barrier/,longer_alt:ej,label:"barrier"}),e9=eM({name:"Opaque",pattern:/opaque/,longer_alt:ej,label:"opaque"}),te=eM({name:"If",pattern:/if/,longer_alt:ej,label:"if"}),tt=eM({name:"Equals",pattern:/=/,label:"="}),tr=eM({name:"Gate",pattern:/gate/,longer_alt:ej,label:"gate"}),tn=eM({name:"Assign",pattern:/->/,label:"->"}),ti=eM({name:"StringLiteral",pattern:/"[^"]*"/,label:'""'}),to=eM({name:"WhiteSpace",pattern:/\s+/,group:eP.SKIPPED}),ta=eM({name:"Version",pattern:/OPENQASM 2\.0/,label:"OPENQASM 2.0"}),ts=eM({name:"SingleLineComment",pattern:/\/\/.*/,label:"//"}),tc={WhiteSpace:to,SingleLineComment:ts,Version:ta,Real:eD,Int:eF,BuiltInGate:eK,ResetOp:eY,Opaque:e9,If:te,MathFn:eU,PlusGroup:eB,Plus:ez,Assign:tn,Minus:eW,MultGroup:eG,Mult:eV,Div:eH,Equal:tt,Pow:eq,Pi:e$,Qreg:eX,Creg:eQ,LSquare:eZ,RSquare:eJ,SemiColon:e4,Comma:e3,LParen:e0,RParen:e1,LCurly:e2,RCurly:e5,Include:e6,Measure:e8,Barrier:e7,Gate:tr,StringLiteral:ti,Id:ej},tl=Object.values(tc),tu=new eP(tl,{errorMessageProvider:{buildUnexpectedCharactersMessage:(e,t,r)=>`Unexpected '${e.slice(t,t+r)}'`,buildUnableToPopLexerModeMessage:e=>`Unexpected '${e.image}'`}});function lexer_tokenizeQasm(e){return tu.tokenize(e)}var td=r(41636);function diagnostic_lexicalErrorsToDiagnostic(e){return e.map(e=>({severity:"error",message:e.message,range:{start:{line:e.line,column:e.column},end:{line:e.line,column:e.column}}}))}function diagnostic_gramaticalErrorsToDiagnostic(e,t){let r;return t.map(t=>{let n=(0,td.Mc)(t.token);return!n&&(t instanceof ew||t instanceof eL)&&(n=(0,td.Mc)(t.previousToken)),n===td.UM&&(r||(r=getLastPosition(e)),n=r),{severity:"error",message:t.message,range:n}})}function getLastPosition(e){let t=e.split("\n"),r=t.length,n=t[t.length-1].length;return{start:{line:r,column:n},end:{line:r,column:n}}}var th=r(56352),tp=r(82509),tf=r.n(tp),tm=r(44453),tg=r.n(tm);(a=i||(i={})).ALL_CLOSEST_MATCHES="all-closest-matches",a.ALL_MATCHES="all-matches",a.ALL_SORTED_MATCHES="all-sorted-matches",a.FIRST_CLOSEST_MATCH="first-closest-match",a.FIRST_MATCH="first-match",(s=o||(o={})).EDIT_DISTANCE="edit-distance",s.SIMILARITY="similarity";let ty=Error("unknown returnType"),tv=Error("unknown thresholdType"),index_esm_a=(e,t)=>{let r=e;return t.trimSpaces&&(r=r.trim().replace(/\s+/g," ")),t.deburr&&(r=tg()(r)),t.caseSensitive||(r=r.toLowerCase()),r},index_esm_n=(e,t)=>{let{matchPath:r}=t,n=((e,t)=>{let r=Array.isArray(t)&&t.length?t.reduce((e,t)=>null==e?void 0:e[t],e):e;return"string"!=typeof r?"":r})(e,r);return index_esm_a(n,t)};function index_esm(e,t,r){let n,a;let s=(e=>{let t={caseSensitive:!1,deburr:!0,matchPath:[],returnType:i.FIRST_CLOSEST_MATCH,thresholdType:o.SIMILARITY,trimSpaces:!0,...e};switch(t.thresholdType){case o.EDIT_DISTANCE:return{threshold:20,...t};case o.SIMILARITY:return{threshold:.4,...t};default:throw tv}})(r),{returnType:c,threshold:l,thresholdType:u}=s,d=index_esm_a(e,s);switch(u){case o.EDIT_DISTANCE:n=e=>e<=l,a=e=>tf()(d,index_esm_n(e,s));break;case o.SIMILARITY:n=e=>e>=l,a=e=>((e,t)=>{if(!e||!t)return 0;if(e===t)return 1;let r=tf()(e,t),n=Math.max(e.length,t.length);return(n-r)/n})(d,index_esm_n(e,s));break;default:throw tv}let p=[],f=t.length;switch(c){case i.ALL_CLOSEST_MATCHES:case i.FIRST_CLOSEST_MATCH:{let e;let r=[];switch(u){case o.EDIT_DISTANCE:e=1/0;for(let n=0;n<f;n+=1){let i=a(t[n]);e>i&&(e=i),r.push(i)}break;case o.SIMILARITY:e=0;for(let n=0;n<f;n+=1){let i=a(t[n]);e<i&&(e=i),r.push(i)}break;default:throw tv}let i=r.length;for(let t=0;t<i;t+=1){let i=r[t];n(i)&&i===e&&p.push(t)}break}case i.ALL_MATCHES:for(let e=0;e<f;e+=1)n(a(t[e]))&&p.push(e);break;case i.ALL_SORTED_MATCHES:{let e=[];for(let r=0;r<f;r+=1){let i=a(t[r]);n(i)&&e.push({score:i,index:r})}switch(u){case o.EDIT_DISTANCE:e.sort((e,t)=>e.score-t.score);break;case o.SIMILARITY:e.sort((e,t)=>t.score-e.score);break;default:throw tv}for(let t of e)p.push(t.index);break}case i.FIRST_MATCH:for(let e=0;e<f;e+=1)if(n(a(t[e]))){p.push(e);break}break;default:throw ty}return((e,t,r)=>{switch(r){case i.ALL_CLOSEST_MATCHES:case i.ALL_MATCHES:case i.ALL_SORTED_MATCHES:return t.map(t=>e[t]);case i.FIRST_CLOSEST_MATCH:case i.FIRST_MATCH:return t.length?e[t[0]]:null;default:return null}})(t,p,c)}function semanticParse(e){let t=new SemanticParser(e);return t.validate(),{diagnostics:t.diagnostics}}let SemanticParser=class SemanticParser{ast;gates;gatesById;diagnostics=[];registersById;quantumRegistersId;includes;constructor(e){this.ast=e,this.gates=(0,th.b)(e),this.gatesById=(0,g.keyBy)((0,g.uniqBy)(this.gates,e=>e.id),e=>e.id);let t=(0,eC.E8)(e);this.registersById=(0,g.keyBy)((0,g.uniqBy)(t,e=>e.id),e=>e.id),this.includes=(0,eC.ze)(e),this.quantumRegistersId=t.filter(e=>"quantum"===e.type).map(e=>e.id)}validate(){for(let e of(0,eC.G4)(this.ast))this.validateOperation(e);for(let e of(0,eC.Y7)(this.ast))for(let t of(this.validateGateIdIsUnique(e),e.operations))"comment"!==t.kind&&this.validateOperationInsideGateDefinition(t,e);for(let e of(0,eC._w)(this.ast))this.validateGateIdIsUnique(e);for(let e of(0,eC.E8)(this.ast))this.validateRegister(e);for(let e of this.includes)this.validateIncludeIsUnique(e)}validateOperationInsideGateDefinition(e,t){"gate"===e.kind&&(this.validateGateOperationIsDefined(e),this.validateGateOperationIsUsedBeforeDeclaration(e),this.validateGateOperationParameters(e),this.validateGateExpressionIds(e,t),this.validateGateOperationDoesNotCallItself(e,t),this.validateQuantumParameter(e.registers,t)),"barrier"===e.kind&&this.validateQuantumParameter(e.registers,t)}validateOperation(e){"gate"===e.kind&&(this.validateGateOperationIsDefined(e),this.validateGateOperationIsUsedBeforeDeclaration(e),this.validateGateOperationParameters(e),this.validateGateExpressionIds(e,void 0),this.validateQuantumRegistersOrQubit(e.registers),this.validateNotIndexedRegistersHasSameSize(e.registers),this.validateNotDuplicatedRegisters(e.registers)),"barrier"===e.kind&&this.validateQuantumRegistersOrQubit(e.registers),"if"===e.kind&&(this.validateOperation(e.operation),this.validateClassicalRegistersOrBit([e.condition.register]),this.validateIfCondition(e)),"reset"===e.kind&&this.validateQuantumRegistersOrQubit(e.registers),"measure"===e.kind&&(this.validateQuantumRegistersOrQubit([e.from]),this.validateClassicalRegistersOrBit([e.to]),this.validateMeasureRegisters(e))}validateGateOperationIsDefined(e){let t=this.gatesById[e.id];t||this.addError(e.range,`Gate '${e.id}' is not defined`)}validateGateOperationIsUsedBeforeDeclaration(e){let t=this.gatesById[e.id];if(t)switch(t.location.kind){case"program":isAfter(t.range,e.range)&&this.addError(e.range,`Gate '${e.id}' is used before declaration`);break;case"include":isAfter(t.location.include.range,e.range)&&this.addError(e.range,`Gate '${e.id}' is used before declaration`)}}validateGateOperationParameters(e){let t=this.gatesById[e.id];if(!t)return;let r=t.parameters.filter(e=>"quantum"===e.type),n=t.parameters.filter(e=>"classical"===e.type),i="gateDefinition"===t.kind?"Gate":"Opaque gate";n.length!==e.arguments.length&&this.addError(e.range,`${i} call to '${e.id}' uses ${e.arguments.length} parameters but is declared for ${n.length} parameters`),r.length!==e.registers.length&&this.addError(e.range,`${i} call to '${e.id}' uses ${e.registers.length} qubits but is declared for ${r.length} qubits`)}validateNotIndexedRegistersHasSameSize(e){let t;for(let r of e){if(void 0!==r.index)continue;let e=this.registersById[r.id];if(e){if(void 0===t){t=e.size;continue}t!==e.size&&this.addError(r.range,`Expected register of size ${t}`)}}}validateNotDuplicatedRegisters(e){for(let[t,r]of e.entries()){let n=e.slice(0,t);for(let e of n)r.id===e.id&&(r.index===e.index?this.addError(r.range,"Duplicated register"):void 0===e.index?this.addError(r.range,"Duplicated register"):void 0===r.index&&this.addError(r.range,"Duplicated register"))}}validateGateOperationDoesNotCallItself(e,t){e.id===t.id&&this.addError(e.range,"Subroutines cannot call themselves")}validateGateExpressionIds(e,t){let r=(t?.parameters??[]).map(e=>e.id),n=(0,g.keyBy)(t?.parameters??[],e=>e.id);for(let t of e.arguments)for(let e of t.variables)if(!n[e.id]){let t=index_esm(e.id,r,{returnType:i.FIRST_CLOSEST_MATCH}),n=t?`Argument '${e.id}' is not defined. Did you mean '${t}'?`:`Argument '${e.id}' is not defined`;this.addError(e.range,n)}}validateQuantumParameter(e,t){let r=t.parameters.filter(e=>"quantum"===e.type).map(e=>e.id);for(let n of e){let e=t.parameters?.find(e=>e.id===n.id);if(e){"quantum"!==e.type&&this.addError(n.range,`'${n.id}' must be a quantum parameter`),void 0!==n.index&&this.addError(n.range,"Quantum parameters cannot be indexed");continue}let o=index_esm(n.id,r,{returnType:i.FIRST_CLOSEST_MATCH}),a=o?`Quantum parameter '${n.id}' does not exists. Did you mean '${o}'?`:`Quantum parameter '${n.id}' does not exists`;this.addError(n.range,a)}}validateQuantumRegistersOrQubit(e){for(let t of e){let e=this.registersById[t.id];if(e){"quantum"!==e.type&&this.addError(t.range,`Register '${t.id}' must be a quantum register`);let r=void 0===t.index||t.index>=0&&t.index<e.size;r||this.addError(t.range,`Register index for '${t.id}' is out of bounds. Bound is 0 <= index < ${e.size}`);continue}let r=index_esm(t.id,this.quantumRegistersId,{returnType:i.FIRST_CLOSEST_MATCH}),n=r?`Register '${t.id}' does not exists. Did you mean '${r}'?`:`Register '${t.id}' does not exists`;this.addError(t.range,n)}}validateClassicalRegistersOrBit(e){for(let t of e){let e=this.registersById[t.id];if(e){"classical"!==e.type&&this.addError(t.range,`Register '${t.id}' must be a classical register`);let r=void 0===t.index||t.index>=0&&t.index<e.size;r||this.addError(t.range,`Register index for '${t.id}' is out of bounds. Bound is 0 <= index < ${e.size}`);continue}this.addError(t.range,`Register '${t.id}' does not exists`)}}validateMeasureRegisters(e){let{from:t,to:r}=e,n=this.registersById[t.id],i=this.registersById[r.id];n&&i&&(void 0===t.index&&void 0===r.index?n.size!==i.size&&this.addError(r.range,`Registers '${t.id}' and '${r.id}' must have the same size`):void 0===t.index&&void 0!==r.index?this.addError(r.range,"A classical register was expected but a bit was found"):void 0!==t.index&&void 0===r.index&&this.addError(r.range,"A bit was expected but a classical register was found"))}validateIfCondition(e){let{register:t,value:r}=e.condition,n=this.registersById[t.id];if(!n)return;let i=Math.pow(2,n.size);r>=i&&this.addError(e.range,`Condition is always false: ${r} < max register value (${i})`)}validateRegister(e){let t=this.registersById[e.id];isAfter(e.range,t.range)&&this.addError(e.range,`A register named '${e.id}' is already declared on line ${t.range.start.line} column ${t.range.start.column}`);let r=this.gatesById[e.id];r&&("program"===r.location.kind&&isAfter(e.range,r.range)&&this.addError(e.range,`A gate named '${e.id}' is already declared on line ${r.range.start.line} column ${r.range.start.column}`),"include"===r.location.kind&&isAfter(e.range,r.location.include.range)&&this.addError(e.range,`A gate named '${e.id}' is already declared on '${r.location.include.id}'`)),e.size<=0&&this.addError(e.range,"Register size must be greater than 0")}validateGateIdIsUnique(e){let t=this.gatesById[e.id];"include"===t.location.kind&&this.addError(e.idRange,`A gate named '${e.id}' is already declared on '${t.location.include.id}'`),"program"===t.location.kind&&t.idRange!==e.idRange&&this.addError(e.idRange,`A gate named '${e.id}' is already declared on line ${t.range.start.line} column ${t.range.start.column}`);let r=this.registersById[e.id];r&&isAfter(e.range,r.range)&&this.addError(e.idRange,`A register named '${e.id}' is already declared on line ${r.range.start.line} column ${r.range.start.column}`)}validateIncludeIsUnique(e){let t=this.includes.find(t=>t.id===e.id);t&&t!==e&&this.addError(e.range,`Duplicated include. Already declared on line ${t.range.start.line} column ${t.range.start.column}`)}addError(e,t){this.diagnostics.push({severity:"error",range:e,message:t})}};function isAfter(e,t){return e.start.line>t.start.line||!(t.start.line>e.start.line)&&e.start.column>t.start.column}let OpenQasm2Parser=class OpenQasm2Parser extends eN{constructor(){super(tl,{recoveryEnabled:!0,errorMessageProvider:tx}),this.performSelfAnalysis()}ast=[];currentGateDefinition;program=this.RULE("program",()=>(this.ast=[],this.currentGateDefinition=void 0,this.SUBRULE(this.headers),this.SUBRULE(this.statements),this.ast),{recoveryValueFunc:()=>(this.currentGateDefinition&&this.ast.push(this.currentGateDefinition),this.ast)});addComment(e,t){let r=this.findLastComment(e);r&&r.range.end.line===t.range.start.line-1?r.range.end.line===t.range.start.line-1&&Object.assign(r,{content:`${r.content}
${t.content}`,range:(0,td.g7)(r.range,t.range)}):e.push(t)}headers=this.RULE("headers",()=>{this.MANY(()=>{let e=this.SUBRULE(this.comment);this.ACTION(()=>{e&&this.addComment(this.ast,e)})});let e=this.CONSUME(tc.Version),t=this.CONSUME(tc.SemiColon);this.ast.push({kind:"version",range:(0,td.g7)((0,td.Mc)(e),(0,td.Mc)(t)),version:"2.0"})});findLastComment(e){let t=(0,g.last)(e);if(t?.kind==="comment")return t}tryToAttachComment(e,t){let r=this.findLastComment(e);r&&r.range.end.line===t.range.start.line-1&&(t.comment=r)}statements=this.RULE("statements",()=>{this.MANY(()=>{this.OR([{ALT:()=>{let e=this.SUBRULE(this.comment);this.ACTION(()=>{e&&this.addComment(this.ast,e)})}},{ALT:()=>pushIfNotRecovery(this.ast,this.SUBRULE(this.include))},{ALT:()=>{let e=this.SUBRULE(this.gateDefinition);this.ACTION(()=>{e&&this.tryToAttachComment(this.ast,e),pushIfNotRecovery(this.ast,e)})}},{ALT:()=>{let e=this.SUBRULE(this.opaqueGateDefinition);this.ACTION(()=>{e&&this.tryToAttachComment(this.ast,e),pushIfNotRecovery(this.ast,e)})}},{ALT:()=>pushIfNotRecovery(this.ast,this.SUBRULE(this.resetOp))},{ALT:()=>pushIfNotRecovery(this.ast,this.SUBRULE(this.measure))},{ALT:()=>pushIfNotRecovery(this.ast,this.SUBRULE(this.barrier))},{ALT:()=>pushIfNotRecovery(this.ast,this.SUBRULE(this.registerDefinition))},{ALT:()=>pushIfNotRecovery(this.ast,this.SUBRULE(this.gate))},{ALT:()=>pushIfNotRecovery(this.ast,this.SUBRULE(this.ifOperation))}])})});include=this.RULE("include",()=>{let e=this.CONSUME(tc.Include),t=this.CONSUME(tc.StringLiteral),r=this.CONSUME(tc.SemiColon);return this.ACTION(()=>({kind:"include",id:t.image.substr(1,t.image.length-2),range:(0,td.g7)((0,td.Mc)(e),(0,td.Mc)(r)),idRange:(0,td.Mc)(t),program:[],source:""}))});ifOperation=this.RULE("ifOperation",()=>{let e=this.CONSUME(tc.If);this.CONSUME(tc.LParen);let t=this.CONSUME(tc.Id);this.CONSUME(tc.Equal),this.CONSUME2(tc.Equal);let r=this.CONSUME(tc.Int);this.CONSUME(tc.RParen);let n=this.OR([{ALT:()=>this.SUBRULE(this.resetOp)},{ALT:()=>this.SUBRULE(this.measure)},{ALT:()=>this.SUBRULE(this.gate)}]);return this.ACTION(()=>({kind:"if",condition:{register:{id:t.image,index:void 0,range:(0,td.Mc)(t)},operator:"==",value:parseInt(r.image)},operation:n,range:(0,td.g7)((0,td.Mc)(e),n.range)}))});registerDefinition=this.RULE("registerDefinition",()=>{let e;let t=this.OR([{ALT:()=>(e=this.CONSUME(tc.Qreg),"quantum")},{ALT:()=>(e=this.CONSUME(tc.Creg),"classical")}]),r=this.CONSUME(tc.Id);this.CONSUME(tc.LSquare);let n=this.CONSUME(tc.Int);this.CONSUME(tc.RSquare);let i=this.CONSUME(tc.SemiColon);return{kind:"registerDefinition",type:t,id:r.image,size:parseInt(n.image),range:(0,td.g7)((0,td.Mc)(e),(0,td.Mc)(i)),idRange:(0,td.Mc)(r)}});quantumRegister=this.RULE("quantumRegister",()=>{let e,t;let r=this.CONSUME(tc.Id);return this.OPTION(()=>{this.CONSUME(tc.LSquare),e=this.CONSUME1(tc.Int),t=this.CONSUME(tc.RSquare)}),this.ACTION(()=>{if(r.isInsertedInRecovery)return;let n=t?(0,td.g7)((0,td.Mc)(r),(0,td.Mc)(t)):(0,td.Mc)(r);return{id:r.image,index:e?parseInt(e.image):void 0,range:n}})});classicalRegister=this.RULE("classicalRegister",()=>{let e,t;let r=this.CONSUME(tc.Id);return this.OPTION(()=>{this.CONSUME(tc.LSquare),e=this.CONSUME1(tc.Int),t=this.CONSUME(tc.RSquare)}),this.ACTION(()=>{let n=t?(0,td.g7)((0,td.Mc)(r),(0,td.Mc)(t)):(0,td.Mc)(r);return{id:r.image,index:e?parseInt(e.image):void 0,range:n}})});resetOp=this.RULE("resetOp",()=>{let e=this.CONSUME(tc.ResetOp),t=this.SUBRULE(this.quantumRegister),r=this.CONSUME(tc.SemiColon);return this.ACTION(()=>{if(!t)return;let n=(0,td.g7)((0,td.Mc)(e),(0,td.Mc)(r));return{kind:"reset",registers:[t],range:n}})});measure=this.RULE("measure",()=>{let e=this.CONSUME(tc.Measure),t=this.SUBRULE(this.quantumRegister);this.CONSUME(tc.Assign);let r=this.SUBRULE1(this.classicalRegister),n=this.CONSUME(tc.SemiColon);return this.ACTION(()=>{if(t&&r)return{kind:"measure",from:t,to:r,range:(0,td.g7)((0,td.Mc)(e),(0,td.Mc)(n))}})});barrier=this.RULE("barrier",()=>{let e=this.CONSUME1(tc.Barrier),t=[];this.AT_LEAST_ONE_SEP({SEP:tc.Comma,DEF:()=>pushIfNotRecovery(t,this.SUBRULE(this.quantumRegister))});let r=this.CONSUME1(tc.SemiColon);return this.ACTION(()=>{let n=(0,td.g7)((0,td.Mc)(e),(0,td.Mc)(r));return{kind:"barrier",registers:t,range:n}})});gate=this.RULE("gate",()=>{let e=this.OR([{ALT:()=>this.CONSUME(tc.BuiltInGate)},{ALT:()=>this.CONSUME(tc.Id)}]),t=[],r=[];this.OPTION(()=>{this.CONSUME(tc.LParen),this.MANY_SEP({SEP:tc.Comma,DEF:()=>pushIfNotRecovery(t,this.SUBRULE(this.expression))}),this.CONSUME(tc.RParen)}),this.MANY_SEP1({SEP:tc.Comma,DEF:()=>pushIfNotRecovery(r,this.SUBRULE(this.quantumRegister))});let n=this.CONSUME(tc.SemiColon);return this.ACTION(()=>{let i=(0,td.g7)((0,td.Mc)(e),(0,td.Mc)(n));return{kind:"gate",id:e.image,registers:r,arguments:t,range:i}})});opaqueGateDefinition=this.RULE("opaqueGateDefinition",()=>{let e=this.CONSUME(tc.Opaque),t=this.CONSUME(tc.Id),r=[];this.OPTION(()=>{this.CONSUME(tc.LParen),this.MANY_SEP({SEP:tc.Comma,DEF:()=>{let e=this.CONSUME1(tc.Id);this.ACTION(()=>{r.push({type:"classical",id:e.image,range:(0,td.Mc)(e)})})}}),this.CONSUME(tc.RParen)}),this.AT_LEAST_ONE_SEP({SEP:tc.Comma,DEF:()=>{let e=this.CONSUME2(tc.Id);this.ACTION(()=>{r.push({type:"quantum",id:e.image,range:(0,td.Mc)(e)})})}});let n=this.CONSUME(tc.SemiColon);return this.ACTION(()=>({kind:"opaqueGateDefinition",id:t.image,parameters:r,range:(0,td.g7)((0,td.Mc)(e),(0,td.Mc)(n)),idRange:(0,td.Mc)(t)}))});gateDefinition=this.RULE("gateDefinition",()=>{let e=this.CONSUME(tc.Gate),t=this.CONSUME(tc.Id),r=[];this.OPTION(()=>{this.CONSUME(tc.LParen),this.MANY_SEP({SEP:tc.Comma,DEF:()=>{let e=this.CONSUME1(tc.Id);this.ACTION(()=>{r.push({type:"classical",id:e.image,range:(0,td.Mc)(e)})})}}),this.CONSUME(tc.RParen)}),this.AT_LEAST_ONE_SEP({SEP:tc.Comma,DEF:()=>{let e=this.CONSUME2(tc.Id);this.ACTION(()=>{r.push({type:"quantum",id:e.image,range:(0,td.Mc)(e)})})}});let n=this.CONSUME(tc.LCurly),i={kind:"gateDefinition",id:t.image,parameters:r,operations:[],idRange:(0,td.Mc)(t),range:(0,td.g7)((0,td.Mc)(e),(0,td.Mc)(n))};this.currentGateDefinition=i,this.MANY({DEF:()=>{this.OR([{ALT:()=>{let e=this.SUBRULE(this.comment);this.ACTION(()=>{e&&this.addComment(i.operations,e)})}},{ALT:()=>pushIfNotRecovery(i.operations,this.SUBRULE(this.gate))},{ALT:()=>pushIfNotRecovery(i.operations,this.SUBRULE(this.barrier))}])}});let o=this.CONSUME(tc.RCurly);return i.range=(0,td.g7)((0,td.Mc)(e),(0,td.Mc)(o)),this.ACTION(()=>(this.currentGateDefinition=void 0,i))});comment=this.RULE("comment",()=>{let e=this.CONSUME(tc.SingleLineComment),t=e.image.substring(2);return this.ACTION(()=>{let r={kind:"comment",content:t,range:(0,td.Mc)(e)};return r})});expression=this.RULE("expression",()=>this.SUBRULE(this.additionExpression));additionExpression=this.RULE("additionExpression",()=>{let e=this.SUBRULE(this.multiplicationExpression);return this.MANY(()=>{let t=this.CONSUME(tc.PlusGroup),r=this.SUBRULE1(this.multiplicationExpression);this.ACTION(()=>{e&&r&&(e={expression:`${e.expression} ${t.image} ${r.expression}`,range:(0,td.g7)(e.range,r.range),variables:[...e.variables,...r.variables]})})}),e});multiplicationExpression=this.RULE("multiplicationExpression",()=>{let e=this.SUBRULE(this.atomicExpression);return this.MANY(()=>{let t=this.CONSUME(tc.MultGroup),r=this.SUBRULE1(this.atomicExpression);this.ACTION(()=>{e&&r&&(e={expression:`${e.expression} ${t.image} ${r.expression}`,range:(0,td.g7)(e.range,r.range),variables:[...e.variables,...r.variables]})})}),e});atomicExpression=this.RULE("atomicExpression",()=>this.OR([{ALT:()=>this.SUBRULE(this.parenthesisExpression)},{ALT:()=>this.SUBRULE(this.mathFunExpression)},{ALT:()=>this.SUBRULE(this.unaryExpression)},{ALT:()=>{let e=this.CONSUME(tc.Real);return this.ACTION(()=>({expression:e.image,range:(0,td.Mc)(e),variables:[]}))}},{ALT:()=>{let e=this.CONSUME1(tc.Int);return this.ACTION(()=>({expression:e.image,range:(0,td.Mc)(e),variables:[]}))}},{ALT:()=>{let e=this.CONSUME2(tc.Pi);return this.ACTION(()=>({expression:"pi",range:(0,td.Mc)(e),variables:[]}))}},{ALT:()=>{let e=this.CONSUME3(tc.Id);return this.ACTION(()=>{let t=(0,td.Mc)(e);return{expression:e.image,range:t,variables:[{id:e.image,range:t}]}})}}]));unaryExpression=this.RULE("unaryExpression",()=>{let e=this.CONSUME(tc.Minus),t=this.SUBRULE(this.expression);return this.ACTION(()=>{if(!t)return;let r=(0,td.g7)((0,td.Mc)(e),t.range);return{expression:`-${t.expression}`,range:r,variables:t.variables}})});mathFunExpression=this.RULE("mathFunExpression",()=>{let e=this.CONSUME(tc.MathFn);this.CONSUME1(tc.LParen);let t=this.SUBRULE(this.expression),r=this.CONSUME2(tc.RParen);return this.ACTION(()=>{if(!t)return;let n=(0,td.g7)((0,td.Mc)(e),(0,td.Mc)(r));return{expression:`${e.image}(${t.expression})`,range:n,variables:t.variables}})});parenthesisExpression=this.RULE("parenthesisExpression",()=>{let e=this.CONSUME(tc.LParen),t=this.SUBRULE(this.expression),r=this.CONSUME1(tc.RParen);return this.ACTION(()=>{if(!t)return;let n=(0,td.g7)((0,td.Mc)(e),(0,td.Mc)(r));return{expression:`(${t.expression})`,range:n,variables:t.variables}})})};function parser_tokenLabel(e){return e.LABEL??e.name}let tx={buildMismatchTokenMessage:({expected:e})=>`'${parser_tokenLabel(e)}' expected`,buildNotAllInputParsedMessage:({firstRedundant:e})=>`Unexpected '${e.image}'`,buildNoViableAltMessage({expectedPathsPerAlt:e}){let t=(0,g.reduce)(e,(e,t)=>e.concat(t),[]),r=(0,g.flatMap)(t,e=>e.map(e=>`'${parser_tokenLabel(e)}'`));return`${joinDisjunction(r)} expected`},buildEarlyExitMessage({expectedIterationPaths:e}){let t=(0,g.flatMap)(e,e=>e.map(e=>`'${parser_tokenLabel(e)}'`));return`${joinDisjunction(t)} expected`}};function joinDisjunction(e){let t=e.length-1;return e.reduce((e,r,n)=>e+(n<t?", ":" or ")+r)}function pushIfNotRecovery(e,t){void 0!==t&&e.push(t)}let tE=new OpenQasm2Parser;var tT=r(30321),tO=r.n(tT);let tR={};function resolveIncludes(e){let t=[];for(let r of(0,eC.ze)(e)){if("qelib1.inc"!==r.id){t.push({severity:"error",range:r.range,message:`File "${r.id}" not found`});continue}if(tR[r.id])r.program=tR[r.id],r.source=tA;else{let e=lexer_tokenizeQasm(tA);tE.input=e.tokens;let t=tE.program();r.program=t,r.source=tA,tR[r.id]=t}}return{diagnostics:t}}let tA=tO()`
OPENQASM 2.0;
// Quantum Experience (QE) Standard Header
// file: qelib1.inc

// --- QE Hardware primitives ---

// 3-parameter 2-pulse single qubit gate
gate u3(theta,phi,lambda) q { U(theta,phi,lambda) q; }
// 2-parameter 1-pulse single qubit gate
gate u2(phi,lambda) q { U(pi/2,phi,lambda) q; }
// 1-parameter 0-pulse single qubit gate
gate u1(lambda) q { U(0,0,lambda) q; }
// controlled-NOT
gate cx c,t { CX c,t; }
// idle gate (identity)
gate id a { U(0,0,0) a; }
// idle gate (identity) with length gamma*sqglen
gate u0 q { U(0,0,0) q; }

// --- QE Standard Gates ---

// generic single qubit gate
gate u(theta,phi,lambda) q { U(theta,phi,lambda) q; }
// phase gate
gate p(lambda) q { U(0,0,lambda) q; }
// Pauli gate: bit-flip
gate x a { u3(pi,0,pi) a; }
// Pauli gate: bit and phase flip
gate y a { u3(pi,pi/2,pi/2) a; }
// Pauli gate: phase flip
gate z a { u1(pi) a; }
// Clifford gate: Hadamard
gate h a { u2(0,pi) a; }
// Clifford gate: sqrt(Z) phase gate
gate s a { u1(pi/2) a; }
// Clifford gate: conjugate of sqrt(Z)
gate sdg a { u1(-pi/2) a; }
// C3 gate: sqrt(S) phase gate
gate t a { u1(pi/4) a; }
// C3 gate: conjugate of sqrt(S)
gate tdg a { u1(-pi/4) a; }

// --- Standard rotations ---
// Rotation around X-axis
gate rx(theta) a { u3(theta, -pi/2,pi/2) a; }
// rotation around Y-axis
gate ry(theta) a { u3(theta,0,0) a; }
// rotation around Z axis
gate rz(phi) a { u1(phi) a; }

// --- QE Standard User-Defined Gates  ---

// sqrt(X)
gate sx a { sdg a; h a; sdg a; }
// inverse sqrt(X)
gate sxdg a { s a; h a; s a; }
// controlled-Z
gate cz a,b { h b; cx a,b; h b; }
// controlled-Y
gate cy a,b { sdg b; cx a,b; s b; }
// swap
gate swap a,b { cx a,b; cx b,a; cx a,b; }
// controlled-H
gate ch a,b {
h b; sdg b;
cx a,b;
h b; t b;
cx a,b;
t b; h b; s b; x b; s a;
}
// C3 gate: Toffoli
gate ccx a,b,c
{
  h c;
  cx b,c; tdg c;
  cx a,c; t c;
  cx b,c; tdg c;
  cx a,c; t b; t c; h c;
  cx a,b; t a; tdg b;
  cx a,b;
}
// cswap (Fredkin)
gate cswap a,b,c
{
  cx c,b;
  ccx a,b,c;
  cx c,b;
}
// controlled rx rotation
gate crx(lambda) a,b
{
  u1(pi/2) b;
  cx a,b;
  u3(-lambda/2,0,0) b;
  cx a,b;
  u3(lambda/2,-pi/2,0) b;
}
// controlled ry rotation
gate cry(lambda) a,b
{
  u3(lambda/2,0,0) b;
  cx a,b;
  u3(-lambda/2,0,0) b;
  cx a,b;
}
// controlled rz rotation
gate crz(lambda) a,b
{
  u1(lambda/2) b;
  cx a,b;
  u1(-lambda/2) b;
  cx a,b;
}
// controlled phase rotation
gate cu1(lambda) a,b
{
  u1(lambda/2) a;
  cx a,b;
  u1(-lambda/2) b;
  cx a,b;
  u1(lambda/2) b;
}
// controlled-Phase
gate cp(lambda) a,b
{
  p(lambda/2) a;
  cx a,b;
  p(-lambda/2) b;
  cx a,b;
  p(lambda/2) b;
}
// controlled-U
gate cu3(theta,phi,lambda) c, t
{
  // implements controlled-U(theta,phi,lambda) with  target t and control c
  u1((lambda+phi)/2) c;
  u1((lambda-phi)/2) t;
  cx c,t;
  u3(-theta/2,0,-(phi+lambda)/2) t;
  cx c,t;
  u3(theta/2,phi,0) t;
}
// controlled-sqrt(X)
gate csx a,b { h b; cu1(pi/2) a,b; h b; }
// controlled-U gate
gate cu(theta,phi,lambda,gamma) c, t
{ p(gamma) c;
  p((lambda+phi)/2) c;
  p((lambda-phi)/2) t;
  cx c,t;
  u(-theta/2,0,-(phi+lambda)/2) t;
  cx c,t;
  u(theta/2,phi,0) t;
}
// two-qubit XX rotation
gate rxx(theta) a,b
{
  u3(pi/2, theta, 0) a;
  h b;
  cx a,b;
  u1(-theta) b;
  cx a,b;
  h b;
  u2(-pi, pi-theta) a;
}
// two-qubit ZZ rotation
gate rzz(theta) a,b
{
  cx a,b;
  u1(theta) b;
  cx a,b;
}
// relative-phase CCX
gate rccx a,b,c
{
  u2(0,pi) c;
  u1(pi/4) c;
  cx b, c;
  u1(-pi/4) c;
  cx a, c;
  u1(pi/4) c;
  cx b, c;
  u1(-pi/4) c;
  u2(0,pi) c;
}
// relative-phase 3-controlled X gate
gate rc3x a,b,c,d
{
  u2(0,pi) d;
  u1(pi/4) d;
  cx c,d;
  u1(-pi/4) d;
  u2(0,pi) d;
  cx a,d;
  u1(pi/4) d;
  cx b,d;
  u1(-pi/4) d;
  cx a,d;
  u1(pi/4) d;
  cx b,d;
  u1(-pi/4) d;
  u2(0,pi) d;
  u1(pi/4) d;
  cx c,d;
  u1(-pi/4) d;
  u2(0,pi) d;
}
// 3-controlled X gate
gate c3x a,b,c,d
{
    h d; cu1(-pi/4) a,d; h d;
    cx a,b;
    h d; cu1(pi/4) b,d; h d;
    cx a,b;
    h d; cu1(-pi/4) b,d; h d;
    cx b,c;
    h d; cu1(pi/4) c,d; h d;
    cx a,c;
    h d; cu1(-pi/4) c,d; h d;
    cx b,c;
    h d; cu1(pi/4) c,d; h d;
    cx a,c;
    h d; cu1(-pi/4) c,d; h d;
}
// 3-controlled sqrt(X) gate, this equals the C3X gate where the CU1 rotations are -pi/8 not -pi/4
gate c3sqrtx a,b,c,d
{
    h d; cu1(-pi/8) a,d; h d;
    cx a,b;
    h d; cu1(pi/8) b,d; h d;
    cx a,b;
    h d; cu1(-pi/8) b,d; h d;
    cx b,c;
    h d; cu1(pi/8) c,d; h d;
    cx a,c;
    h d; cu1(-pi/8) c,d; h d;
    cx b,c;
    h d; cu1(pi/8) c,d; h d;
    cx a,c;
    h d; cu1(-pi/8) c,d; h d;
}
// 4-controlled X gate
gate c4x a,b,c,d,f
{
    h f; cu1(-pi/2) d,f; h f;
    c3x a,b,c,d;
    h f; cu1(pi/2) d,f; h f;
    c3x a,b,c,d;
    c3sqrtx a,b,c,f;
}
// echoed RZX(pi/2) gate implemented using RZX(pi/4) and RZX(-pi/4)
gate ecr a, b {
  U(3*pi/2, pi, pi) a;
  U(pi/2, pi/2, 3*pi/2) b;
  CX a, b;
}
`;function parseQasm(e,t={semantic:!0}){let{tokens:r,errors:n}=lexer_tokenizeQasm(e);tE.input=r;let i=tE.program(),o=[...diagnostic_lexicalErrorsToDiagnostic(n),...diagnostic_gramaticalErrorsToDiagnostic(e,tE.errors)],{diagnostics:a}=resolveIncludes(i);if(o.push(...a),t.semantic){let{diagnostics:e}=semanticParse(i);o.push(...e)}return{result:i,diagnostics:o}}var tb=r(20530);function composerStateInit(e){let t=e.columnsMode??((0,v.mB)(e.program)?"free":"left"),r=(0,tb.fp)(e.program,t);return{mode:"edit",program:r,dirtyProgram:void 0,movingNodeIds:void 0,focusNodeIds:[],selection:[],hover:[],wireHover:void 0,programPast:[],programFuture:[],clipboard:void 0,addingNodes:void 0,addingModifier:void 0,inspectingNodeId:void 0,breakpointNodeIds:[],showPhaseDiskAtEnd:e.showPhaseDiskAtEnd??!1,openDialog:void 0,leftPanel:void 0,expandDefinitionNodeIds:[],columnsMode:t}}var tC=r(4782),t_=r(11475);let tS=t_.zt;withClassName(t_.xz,"TooltipTrigger"),withCurrentTheme(withClassName(t_.VY,"TooltipContent")),withClassName(t_.Eh,"TooltipArrow");let noop=()=>{},tk=(0,u.forwardRef)((e,t)=>{let{program:r,groupClassicalRegisters:n,className:i}=e,o=e.theme??l.Q,a=(0,u.useMemo)(()=>composerStateInit({program:r}),[r]),s=(0,u.useMemo)(()=>({state:a,dispatch:noop,stateVectors:[],featuresSet:new Set([])}),[a]),d=(0,u.useRef)(null),{width:p=300}=(0,tC.Z)(d),f=(0,u.useMemo)(()=>e.viewport?"wrap"===e.viewport.overflow?{overflow:"wrap",width:p}:e.viewport:{overflow:"none"},[e.viewport,p]),m="auto"===f.overflow||"wrap"===f.overflow,g=(0,c.jsx)(tS,{children:(0,c.jsx)(ThemeContextProvider,{theme:o,children:(0,c.jsx)(ey,{value:s,children:(0,c.jsx)(eb,{ref:t,program:a.program,columnsMode:a.columnsMode,viewport:f,showRegistersLabelBitIndex:!0,className:m?void 0:(0,R.Z)("composer",i),groupClassicalRegisters:n})})})});return m?(0,c.jsx)("div",{ref:d,className:(0,R.Z)("composer",i),children:g}):g});tk.displayName="ComposerReadOnly";let tI=(0,u.forwardRef)((e,t)=>{let{qasm:r,...n}=e,i=(0,u.useMemo)(()=>{let{result:e,diagnostics:t}=parseQasm(r);return t.length>0?[]:astToComposerQasmAst(e)},[r]);return(0,c.jsx)(tk,{ref:t,program:i,...n})});tI.displayName="ComposerQasmReadOnly"},20530:function(e,t,r){"use strict";r.d(t,{QN:function(){return getRelativeColumnIndexByNodeId},fp:function(){return verifyColumnsMode},nw:function(){return setFreeColumnsAnnotation}});var n=r(77491),i=r(75439),o=r(96210),a=r(40253),s=r(80670);function setFreeColumnsAnnotation(e,t){let r=(0,n.mB)(e);if(r){let n=r.value,i=t({columns:n});if(!(0,a.isEqual)(n,i)){let t={...r,value:i};e=[...(0,a.without)(e,r),t]}}else{let r=getColumnIndexByNodeId(e,"left"),i=(0,n.G4)(e).map(e=>r.get(e.meta.id)),a={kind:"annotation",id:"columns",meta:{id:Symbol()},value:t({columns:i})};e=[...e,a],e=(0,o.A7)(e,a.meta.id,{line:2,column:0})}return e}function getColumnIndexByNodeId(e,t){let r=(0,i.n)(e,t);return new Map(r.flatMap((e,t)=>e.map(e=>[e.meta.id,t])))}function getRelativeColumnIndexByNodeId(e,t,r){let n=getColumnIndexByNodeId(e,t),i=(0,a.min)(r.map(e=>n.get(e)))??0;return new Map(r.map(e=>[e,n.get(e)-i]))}function verifyColumnsMode(e,t){if("left"===t||"layers-left"===t){let t=(0,n.mB)(e);return t?(0,a.without)(e,t):e}return validateFreeColumnsAnnotation(e)?e:setFreeColumnsAnnotationUsingLeftAlignment(e)}function setFreeColumnsAnnotationUsingLeftAlignment(e){let t=getColumnIndexByNodeId(e,"left"),r=(0,n.G4)(e).map(e=>t.get(e.meta.id));return setFreeColumnsAnnotation(e,()=>r)}function validateFreeColumnsAnnotation(e){let t=(0,n.G4)(e),r=(0,n.mB)(e);if(!r)return!1;let o=r.value;if(t.length!==o.length||!o.every(e=>e>=0))return!1;let a=(0,i.n)(e,"free"),c=new s.b(e);for(let e of a)if(c.operationsOverlap(e))return!1;return!0}},77491:function(e,t,r){"use strict";function isOperation(e){return"annotation"===e.kind&&"phaseDisk"===e.id||["if","measure","gate","reset","barrier"].includes(e.kind)}function findIncludes(e){return e.filter(e=>"include"===e.kind)}function findRegisters(e){return e.filter(e=>"registerDefinition"===e.kind)}function findGateAndOpaqueGateDefinitions(e){return[...findGateDefinitions(e),...findOpaqueGateDefinitions(e)]}function findGateDefinitions(e){return e.filter(e=>"gateDefinition"===e.kind)}function findOpaqueGateDefinitions(e){return e.filter(e=>"opaqueGateDefinition"===e.kind)}function findOperations(e){return e.filter(e=>isOperation(e))}function findColumnsAnnotation(e){return e.find(e=>"annotation"===e.kind&&"columns"===e.id)}function findPhaseDiskAnnotations(e){return e.filter(e=>"annotation"===e.kind&&"phaseDisk"===e.id)}r.d(t,{E8:function(){return findRegisters},G4:function(){return findOperations},NY:function(){return findGateAndOpaqueGateDefinitions},Vn:function(){return findPhaseDiskAnnotations},lr:function(){return isOperation},mB:function(){return findColumnsAnnotation},ze:function(){return findIncludes}})},18875:function(e,t,r){"use strict";r.d(t,{ap:function(){return getNodeRegisters}});var n=r(77491);function getNodeRegisters(e){if(!(0,n.lr)(e))return[];switch(e.kind){case"reset":case"gate":case"barrier":return e.registers;case"measure":return[e.from,e.to];case"if":return[e.condition.register,...getNodeRegisters(e.operation)];case"annotation":if("phaseDisk"===e.id)return e.registers}}r(40253)},6521:function(e,t,r){"use strict";r.d(t,{Fl:function(){return canApplyModifier},Oc:function(){return getInspectingSubProgram},T9:function(){return sortOperationsVisually},ZN:function(){return findGateDefinition},aE:function(){return isFromQelib1},ck:function(){return getGateDefinitionCircuit}});var n=r(56352),i=r(40253),o=r(75439),a=r(80670),s=r(77491),c=r(96210),l=r(20530);let u=new WeakMap;function findGateDefinition(e,t){return"gate"===t.kind||"gateDefinition"===t.kind?findGateDefinitionById(e,t.id):"if"===t.kind&&"gate"===t.operation.kind?findGateDefinitionById(e,t.operation.id):void 0}function findGateDefinitionById(e,t){let r=u.get(e);if(!r){let t=getAllGates(e),n=new Map;for(let e of t)n.set(e.id,e);u.set(e,n),r=n}return r.get(t)}function getAllGates(e){let t=(0,n.C)(),r=(0,s.ze)(e).flatMap(e=>{let t=(0,s.NY)(e.program??[]);return t.map(t=>({...t,location:{kind:"include",include:e}}))}),i=(0,s.NY)(e),o=[...t.map(t=>{let r={id:t.id,kind:t.kind,parameters:t.parameters.map(e=>({id:e.id,type:e.type})),meta:{id:Symbol()},location:{kind:"built-in"}};return(0,c.IJ)(e)&&(r.meta.previousNodeDistance={line:1,column:0}),r}),...r,...i.map(e=>({...e,location:{kind:"program"}}))];return o}function getSubprogram(e,t,r){let n=[],i=new Set(r),o=(0,c.IJ)(e),a=(0,l.QN)(e,t,r),s=[];for(let[t,r]of e.entries())switch(r.kind){case"version":case"include":case"gateDefinition":case"opaqueGateDefinition":case"registerDefinition":n.push(r);break;case"gate":case"measure":case"barrier":case"reset":case"if":i.has(r.meta.id)&&(n.push(r),s.push(a.get(r.meta.id)));break;case"comment":if(o&&t>0&&0===r.meta.previousNodeDistance.line){let o=e[t-1];i.has(o.meta.id)&&n.push(r)}break;case"annotation":"phaseDisk"===r.id&&i.has(r.meta.id)&&(n.push(r),s.push(a.get(r.meta.id)))}return"free"===t&&(n=(0,l.nw)(n,()=>s)),n}let d={u3:"cu3",u1:"cu1",cx:"ccx",u:"cu",p:"cp",x:"cx",y:"cy",z:"cz",h:"ch",rx:"crx",ry:"cry",rz:"crz",sx:"csx",swap:"cswap",ccx:"c3x",c3x:"c4x"};function getGateWithOneControlMore(e){return d[e]}function sortOperationsVisually(e,t){let r=(0,o.n)(e,t),n=new a.b(e),s=[];for(let e of r){let t=(0,i.sortBy)(e,e=>n.getOperationFirstWire(e));s.push(...t)}return s}function getGateDefinitionCircuit(e,t,r){let n="gate"===r.kind||"if"===r.kind&&"gate"===r.operation.kind;if(!n)return;let o=(0,c.IJ)(e),s=getSubprogram(e,t,[]).filter(e=>"registerDefinition"!==e.kind),l=findGateDefinition(e,r);if(!l||"opaqueGateDefinition"===l.kind)return;let u="gate"===r.kind?r:r.operation,d=new a.b(e),p=l.parameters.filter(e=>"quantum"===e.type),f=(0,i.sortBy)(p,e=>{let t=p.indexOf(e);return(0,i.min)(d.getRegisterWires(u.registers[t]))});for(let e of f)if("quantum"===e.type){let t={kind:"registerDefinition",type:"quantum",id:e.id,size:1,meta:{id:Symbol()}};o&&(t.meta.previousNodeDistance={line:1,column:0}),s.push(t)}let m=(0,i.fromPairs)(l.parameters.filter(e=>"classical"===e.type).map((e,t)=>[e.id,u.arguments[t]]));function mapArguments(e){let t=e.expression;for(let r of e.variables){let e=m[r.id];t=t.replace(RegExp(r.id,"g"),e.expression)}return{expression:t,variables:[]}}for(let e of l.operations)switch(e.kind){case"comment":{let t={kind:"comment",content:e.content,meta:{id:e.meta.id}};o&&(t.meta.previousNodeDistance={line:1,column:0}),s.push(t);break}case"gate":{let t={kind:"gate",id:e.id,arguments:e.arguments.map(mapArguments),registers:e.registers.map(e=>({id:e.id,index:0})),meta:{id:e.meta.id}};o&&(t.meta.previousNodeDistance={line:1,column:0}),s.push(t);break}case"barrier":{let t={kind:"barrier",registers:e.registers.map(e=>({id:e.id,index:0})),meta:{id:e.meta.id}};o&&(t.meta.previousNodeDistance={line:1,column:0}),s.push(t)}}return s}function isFromQelib1(e){return"include"===e.location.kind&&includeIsQelib1(e.location.include)}function includeIsQelib1(e){return"qelib1.inc"===e.id}function canApplyConditional(e,t){let r=new a.b(e);return 0!==r.classicalWires().length&&("measure"===t.kind||"gate"===t.kind||"reset"===t.kind)}function canApplyControl(e,t){let r=findGateDefinition(e,t);if(!r||!isFromQelib1(r))return!1;let n=getGateWithOneControlMore(r.id);if(!n)return!1;let i=findGateDefinitionById(e,n);if(!i)return!1;let o=new a.b(e),s=i.parameters.filter(e=>"quantum"===e.type);return s.length<=o.quantumWires().length}function canApplyModifier(e,t,r){return"control"===e.kind?canApplyControl(t,r):"conditional"===e.kind&&canApplyConditional(t,r)}function getInspectingSubProgram(e,t,r){let n=sortOperationsVisually(e,t),i=n.slice(0,n.findIndex(e=>e.meta.id===r)+1),o=getSubprogram(e,t,i.map(e=>e.meta.id));return o}(0,i.fromPairs)((0,i.map)(d,(e,t)=>[e,t]))},75439:function(e,t,r){"use strict";r.d(t,{n:function(){return groupByColumns}});var n=r(80670),i=r(40253),o=r(77491);function groupByLayers(e){let t=new ProgramLayerBuilder(e);return t.layers().map(e=>[...e.values()])}let ProgramLayerBuilder=class ProgramLayerBuilder{program;wires;inputs=new Map;outputs=new Map;constructor(e){this.program=e,this.wires=new n.b(e)}layers(){this.addRegisters(),this.addOperations();let e=this.iterateThreeCreatingLayers();return e}addRegisters(){for(let e of(0,o.E8)(this.program)){let t=this.wires.getRegisterWires({id:e.id,index:void 0});for(let r of t){let t=new DagNode(e),n=new DagNode(e);t.children.set(r,n),n.parents.set(r,t),this.inputs.set(r,t),this.outputs.set(r,n)}}}addOperations(){for(let e of(0,o.G4)(this.program)){let t=new DagNode(e);for(let r of this.wires.getOperationConnectedWires(e)){let e=this.outputs.get(r),n=e.parents.get(r);n.children.set(r,t),t.parents.set(r,n),e.parents.set(r,t),t.children.set(r,e)}}}iterateThreeCreatingLayers(){let e=[],t=new Set(this.inputs.values()),r=new Set;for(;0!==t.size;){let n=new Set;for(let e of t)for(let t of(r.add(e),e.children.values())){let e=[...t.parents.values()].filter(e=>!r.has(e));0===e.length&&isOperationNode(t)&&n.add(t)}if(t=n,n.size>0){let t=new Set;for(let e of n.values())isOperationNode(e)&&t.add(e.ref);e.push(t)}}return e}};let DagNode=class DagNode{ref;parents=new Map;children=new Map;constructor(e){this.ref=e}};function isOperationNode(e){return(0,o.lr)(e.ref)}var a=r(80884),s=r.n(a);function groupByColumns(e,t){return groupByLayerColumns(e,t).flat()}function groupByLayerColumns(e,t){switch(t){case"left":return[groupByColumnsLeftAligned(e)];case"layers-left":return groupByLayersLeftColumns(e);case"free":return[groupByFreeColumns(e)]}}function groupByColumnsLeftAligned(e){let t=groupByLayersLeftColumns(e).flat(),r=new n.b(e),o=[];for(let e of t)for(let t of e){let e=r.getOperationConnectedWiresBitSet(t),n=r.getOperationOverlapWiresBitSet(t),a=(0,i.findLastIndex)(o,t=>overlap(t.connectedWires,e)),c=(0,i.findIndex)(o,e=>!overlap(e.overlapWires,n),a+1);-1===c&&(c=o.length);let l=o[c];l||(o[c]={operations:[],connectedWires:new(s()),overlapWires:new(s())},l=o[c]),l.operations.push(t),l.connectedWires.union(e),l.overlapWires.union(n)}return o.map(e=>e.operations)}function groupByLayersLeftColumns(e){let t=groupByLayers(e),r=new n.b(e),o=[];for(let e of t){let t=[];for(let n of(0,i.sortBy)(e,e=>r.getOperationFirstWire(e))){let e;let i=r.getOperationOverlapWiresBitSet(n);for(let r of t)if(!overlap(i,r.visibleOffsets)){e=r;break}e?(e.operations.push(n),e.visibleOffsets.union(i)):t.push({operations:[n],visibleOffsets:i})}o.push(t.map(e=>e.operations))}return o}function groupByFreeColumns(e){let t=(0,o.G4)(e),r=(0,o.mB)(e),n=r?.value;if(!n)return groupByColumnsLeftAligned(e);let a=(0,i.max)(r.value)??1,s=(0,i.range)(0,a+1).map(()=>[]);for(let[e,n]of t.entries()){let t=r.value[e];s[t].push(n)}return s}function overlap(e,t){return 0!==e.intersection_size(t)}},96210:function(e,t,r){"use strict";r.d(t,{IJ:function(){return isQasmAst},A7:function(){return setPreviousNodeDistance}});var n=r(40253);function replaceItemAtIndex(e,t,r){return[...e.slice(0,t),r,...e.slice(t+1)]}function isQasmAst(e){return!(e.length>0)||isQasmAstNode(e[0])}function isQasmAstNode(e){return(0,n.has)(e.meta,"previousNodeDistance")}function setPreviousNodeDistance(e,t,r){if(!isQasmAst(e))return e;let n=e.findIndex(e=>e.meta.id===t);if(-1===n)return e;let i=e[n];return replaceItemAtIndex(e,n,{...i,meta:{...i.meta,previousNodeDistance:r}})}},82236:function(e,t,r){"use strict";r.d(t,{Q:function(){return c}});var n=r(27573),i=r(40253),o=r(22514),a=r(6521),s=r(61223);let c={Container:{background:"#fff",padding:20},Wires:{color:"#e0e0e0",qubitsGapY:8,registersGapY:8},Operations:{padding:[0,8],singleQubitHeight:32,background:operationBackground,text:operationText,label:operationLabel,width:operationWidth,emptyColumnsWidth:32,gapX:8,qubitToBitWireColor:"#979797",qubitToBitWireText:"#161616"},RegisterLabels:{text:"#6f6f6f",width:registerLabelWidth,padding:[0,10,0,0]},Grid:{gapY:30},Selection:{area:"#393939",hover:"#cacaca",selection:"#0f62fe",selectionGroup:"#393939"},Inspect:{inspecting:"#0f62fe",breakpoint:"#fdd13a"},PhaseDisk:{border:"#161616",bg:"#e5e5e5",color:"#33b1ff",padding:[0,8,0,12]},OperationsCatalog:{padding:4,itemBackground:catalogItemBackground,itemLabel:catalogItemLabel,itemText:catalogItemText,itemHeight:32,itemWidth:catalogItemWidth},Components:{Root:e=>(0,n.jsx)(s.cp,{theme:"g10",...e})}};function registerLabelWidth(e){let t=`${e.id}[${e.size}]`;return(0,o.X)(t,"IBM Plex Mono",16)}function operationWidth(e){if("if"===e.kind)return operationWidth(e.operation);if("annotation"===e.kind&&"phaseDisk"===e.id)return 57;if("gate"!==e.kind)return 32;switch(e.id){case"x":case"cx":case"CX":case"ccx":case"c3x":case"c4x":case"swap":case"sx":case"csx":case"sxdg":case"cz":return 32}let t=operationLabel(e),r="";if(e.arguments.length>0&&(r=`(${e.arguments.map(e=>e.expression).join(", ")})`),"rzz"===e.id){let e=(0,i.max)([(0,o.X)(t,"IBM Plex Sans",16),(0,o.X)(r,"IBM Plex Mono",8)]);return Math.ceil(e+12+30)}let n=(0,i.max)([(0,o.X)(t,"IBM Plex Sans",16),(0,o.X)(r,"IBM Plex Mono",8)])+20;return Math.ceil((0,i.max)([32,n]))}function gateBackground(e){return"built-in"===e.location.kind&&"CX"===e.id?"#002d9c":(0,a.aE)(e)?"h"===e.id?"#fa4d56":["x","cx","ccx","c3x","c4x","swap","cswap","id"].includes(e.id)?"#002d9c":["t","s","z","tdg","sdg","p","rz"].includes(e.id)?"#33b1ff":"#9f1853":"#393939"}function operationBackground(e,t,r){return"annotation"===e.kind&&"phaseDisk"===e.id?"#000":r.dragging||r.disabled||"not-executed"===r.inspect?"#e0e0e0":"gate"===e.kind&&t?gateBackground(t):"reset"===e.kind||"measure"===e.kind?"#a8a8a8":"barrier"===e.kind?"#000":"#a8a8a8"}function operationText(e,t){return t.dragging||t.disabled||"not-executed"===t.inspect?"#161616":"gate"===e.kind?"h"===e.id?"#000":"rzz"===e.id?"#161616":["t","s","z","tdg","sdg","p","rz"].includes(e.id)?"#000":"#fff":"#000"}function operationLabel(e){if("gate"!==e.kind)return"";switch(e.id){case"ch":case"cy":case"crx":case"cry":case"crz":case"cu1":case"cp":case"cu3":case"cu":return e.id.slice(1).toUpperCase();case"h":case"t":case"s":case"z":case"p":case"rz":case"y":case"rx":case"ry":case"u":case"rxx":case"rzz":return e.id.toUpperCase();case"id":return"I";case"tdg":return"T";case"sdg":return"S";default:return e.id}}function catalogItemWidth(e){let t=c.OperationsCatalog.itemHeight;if("gate"===e.kind){if((0,a.aE)(e.definition)&&["ccx","c3x","c4x","cswap","cx","cz","x","swap","sx","sxdg"].includes(e.definition.id))return t;let r=catalogItemLabel(e.definition),n=Math.ceil((0,o.X)(r,"IBM Plex Sans",16)+8);return n>t?n:t}return t}function catalogItemBackground(e,t){return t.disabled?"#e0e0e0":"gate"===e.kind?gateBackground(e.definition):"#a8a8a8"}function catalogItemText(e,t){if(t.disabled)return"#161616";if("gate"===e.kind){if("program"===e.definition.location.kind)return"#fff";if("h"===e.definition.id||["t","s","z","tdg","sdg","p","rz"].includes(e.definition.id))return"#000"}return["barrier","reset","measure","control","conditional"].includes(e.kind)?"#000":"#fff"}function catalogItemLabel(e){if("program"===e.location.kind)return e.id;switch(e.id){case"ch":case"cy":case"crx":case"cry":case"crz":case"cu1":case"cp":case"cu3":case"cu":return`c${e.id.slice(1).toUpperCase()}`;case"id":return"I";case"tdg":return"T";case"sdg":return"S";default:return e.id.toUpperCase()}}},22514:function(e,t,r){"use strict";function measureText(e,t,r=10){let i;let{widths:o,avg:a}=n[t];if(0===o.length)i=e.length*a;else{i=0;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t),n=r<o.length?o[r]:a;i+=n}}return i*r}r.d(t,{X:function(){return measureText}});let n={"IBM Plex Sans":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2359375,.284375,.4203125,.7140625,.5984375,.928125,.6953125,.2421875,.340625,.3421875,.45,.6,.2734375,.4,.2734375,.384375,.6,.6,.6,.6,.6,.6,.6,.6,.6,.6,.2921875,.2921875,.6,.6,.6,.478125,.8921875,.6421875,.653125,.621875,.671875,.584375,.559375,.6953125,.7078125,.4,.5109375,.634375,.5015625,.8125,.7078125,.709375,.60625,.709375,.640625,.58125,.5734375,.678125,.609375,.8921875,.6140625,.59375,.58125,.3171875,.384375,.3171875,.6,.565625,.6,.534375,.58125,.503125,.58125,.55,.325,.528125,.56875,.25,.25,.528125,.2734375,.8734375,.56875,.5609375,.58125,.58125,.3671875,.4875,.3515625,.56875,.4921875,.76875,.5078125,.5,.4640625,.34375,.3140625,.34375,.6],avg:.5364473684210525},"IBM Plex Mono":{widths:[],avg:.6}}},61223:function(e,t,r){"use strict";r.d(t,{cp:function(){return ThemeSetter},Fg:function(){return useTheme}});var n=r(27573);function inverseTheme(e){switch(e){case"white":return"g90";case"g10":return"g100";case"g90":return"white";case"g100":return"g10"}}function variantTheme(e){switch(e){case"white":return"g10";case"g10":return"white";case"g90":return"g100";case"g100":return"g90"}}var i=r(7653),o=r(88377),a=r(97157);let s=(0,i.createContext)("g10");function useTheme(){return(0,i.useContext)(s)}let c=s.Provider;function ThemeSetter(e){let{theme:t,variant:r,inverse:s,asChild:l,className:u,...d}=e,p=useTheme(),f=(0,i.useMemo)(()=>{let e=t??p;return s&&(e=inverseTheme(e)),r&&(e=variantTheme(e)),e},[p,t,r,s]),m=l?o.g7:"div";return(0,n.jsx)(c,{value:f,children:(0,n.jsx)(m,{className:(0,a.Z)({[`theme-${t}`]:void 0!==t,"theme-inverse":!0===s,"theme-variant":!0===r},u),...d})})}},39547:function(e,t,r){"use strict";function findIncludes(e){return e.filter(e=>"include"===e.kind)}function findRegisters(e){return e.filter(e=>"registerDefinition"===e.kind)}function findGateAndOpaqueGateDefinitions(e){return[...findGateDefinitions(e),...findOpaqueGateDefinitions(e)]}function findGateDefinitions(e){return e.filter(e=>"gateDefinition"===e.kind)}function findOpaqueGateDefinitions(e){return e.filter(e=>"opaqueGateDefinition"===e.kind)}function findOperations(e){return e.filter(e=>isOperation(e))}function isOperation(e){return["if","measure","gate","reset","barrier"].includes(e.kind)}r.d(t,{E8:function(){return findRegisters},G4:function(){return findOperations},NY:function(){return findGateAndOpaqueGateDefinitions},Y7:function(){return findGateDefinitions},_w:function(){return findOpaqueGateDefinitions},ze:function(){return findIncludes}})},56352:function(e,t,r){"use strict";r.d(t,{C:function(){return getBuiltInGates},b:function(){return getAllGates}});var n=r(41636),i=r(39547);let o=new Set(["ecr"]);function getAllGates(e){let t=getBuiltInGates(),r=(0,i.NY)(e),n=new Set;for(let e of r)o.has(e.id)&&n.add(e.id);let a=(0,i.ze)(e).flatMap(e=>{let t=(0,i.NY)(e.program??[]);return t.flatMap(t=>n.has(t.id)?[]:[{...t,location:{kind:"include",include:e}}])}),s=[...t.map(e=>({...e,location:{kind:"built-in"}})),...a,...r.map(e=>({...e,location:{kind:"program"}}))];return s}function getBuiltInGates(){return[{kind:"opaqueGateDefinition",id:"CX",parameters:[{type:"quantum",id:"c",range:n.UM},{type:"quantum",id:"t",range:n.UM}],range:n.UM,idRange:n.UM},{kind:"opaqueGateDefinition",id:"U",parameters:[{type:"classical",id:"theta",range:n.UM},{type:"classical",id:"phi",range:n.UM},{type:"classical",id:"lambda",range:n.UM},{type:"quantum",id:"q",range:n.UM}],range:n.UM,idRange:n.UM}]}},41636:function(e,t,r){"use strict";r.d(t,{Mc:function(){return getTokenRange},UM:function(){return i},g7:function(){return combineRanges}});var n=r(40253);let i={start:{line:-1,column:-1},end:{line:-1,column:-1}};function getTokenRange(e){if(!(0,n.isFinite)(e.startLine)||!(0,n.isFinite)(e.startColumn)||!(0,n.isFinite)(e.endLine)||!(0,n.isFinite)(e.endColumn))return i;let t={start:{line:e.startLine,column:e.startColumn},end:{line:e.endLine,column:e.endColumn}};return t}function combineRanges(e,t){return e===i||t===i?i:{start:e.start,end:t.end}}},54925:function(e,t,r){"use strict";t._b=t.H7=t.LK=t.Mf=t.SE=t.N$=t.oI=t.$9=t.pT=t.fK=t.ej=t.hI=t.Wx=t.Sj=t.r3=t.ue=t.ZW=t.z5=t.Oq=t.P7=t.bS=t.N7=t.Hs=t.vA=t.ol=t.l$=t.sd=t.dK=t.V3=t.Bw=t.hW=t._o=t.b4=t.nu=t.wd=t.q4=void 0;var n=r(62839);Object.defineProperty(t,"q4",{enumerable:!0,get:function(){return n.VERSION}});var i=r(72092);Object.defineProperty(t,"wd",{enumerable:!0,get:function(){return i.CstParser}}),Object.defineProperty(t,"nu",{enumerable:!0,get:function(){return i.EmbeddedActionsParser}}),Object.defineProperty(t,"b4",{enumerable:!0,get:function(){return i.ParserDefinitionErrorType}}),Object.defineProperty(t,"_o",{enumerable:!0,get:function(){return i.EMPTY_ALT}});var o=r(80593);Object.defineProperty(t,"hW",{enumerable:!0,get:function(){return o.Lexer}}),Object.defineProperty(t,"Bw",{enumerable:!0,get:function(){return o.LexerDefinitionErrorType}});var a=r(40711);Object.defineProperty(t,"V3",{enumerable:!0,get:function(){return a.createToken}}),Object.defineProperty(t,"dK",{enumerable:!0,get:function(){return a.createTokenInstance}}),Object.defineProperty(t,"sd",{enumerable:!0,get:function(){return a.EOF}}),Object.defineProperty(t,"l$",{enumerable:!0,get:function(){return a.tokenLabel}}),Object.defineProperty(t,"ol",{enumerable:!0,get:function(){return a.tokenMatcher}}),Object.defineProperty(t,"vA",{enumerable:!0,get:function(){return a.tokenName}});var s=r(23566);Object.defineProperty(t,"Hs",{enumerable:!0,get:function(){return s.defaultParserErrorProvider}});var c=r(60193);Object.defineProperty(t,"N7",{enumerable:!0,get:function(){return c.EarlyExitException}}),Object.defineProperty(t,"bS",{enumerable:!0,get:function(){return c.isRecognitionException}}),Object.defineProperty(t,"P7",{enumerable:!0,get:function(){return c.MismatchedTokenException}}),Object.defineProperty(t,"Oq",{enumerable:!0,get:function(){return c.NotAllInputParsedException}}),Object.defineProperty(t,"z5",{enumerable:!0,get:function(){return c.NoViableAltException}});var l=r(65389);Object.defineProperty(t,"ZW",{enumerable:!0,get:function(){return l.defaultLexerErrorProvider}});var u=r(84925);Object.defineProperty(t,"ue",{enumerable:!0,get:function(){return u.Alternation}}),Object.defineProperty(t,"r3",{enumerable:!0,get:function(){return u.Alternative}}),Object.defineProperty(t,"Sj",{enumerable:!0,get:function(){return u.NonTerminal}}),Object.defineProperty(t,"Wx",{enumerable:!0,get:function(){return u.Option}}),Object.defineProperty(t,"hI",{enumerable:!0,get:function(){return u.Repetition}}),Object.defineProperty(t,"ej",{enumerable:!0,get:function(){return u.RepetitionMandatory}}),Object.defineProperty(t,"fK",{enumerable:!0,get:function(){return u.RepetitionMandatoryWithSeparator}}),Object.defineProperty(t,"pT",{enumerable:!0,get:function(){return u.RepetitionWithSeparator}}),Object.defineProperty(t,"$9",{enumerable:!0,get:function(){return u.Rule}}),Object.defineProperty(t,"oI",{enumerable:!0,get:function(){return u.Terminal}});var d=r(84925);Object.defineProperty(t,"N$",{enumerable:!0,get:function(){return d.serializeGrammar}}),Object.defineProperty(t,"SE",{enumerable:!0,get:function(){return d.serializeProduction}});var p=r(17884);function clearCache(){console.warn("The clearCache function was 'soft' removed from the Chevrotain API.\n	 It performs no action other than printing this message.\n	 Please avoid using it as it will be completely removed in the future")}Object.defineProperty(t,"Mf",{enumerable:!0,get:function(){return p.GAstVisitor}}),t.LK=clearCache;var f=r(61084);Object.defineProperty(t,"H7",{enumerable:!0,get:function(){return f.createSyntaxDiagramsCode}}),t._b=function(){throw Error("The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.	\nSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0")}},61084:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSyntaxDiagramsCode=void 0;var n=r(62839);function createSyntaxDiagramsCode(e,t){var r=void 0===t?{}:t,i=r.resourceBase,o=void 0===i?"https://unpkg.com/chevrotain@"+n.VERSION+"/diagrams/":i,a=r.css;return"\n<!-- This is a generated file -->\n<!DOCTYPE html>\n<meta charset=\"utf-8\">\n<style>\n  body {\n    background-color: hsl(30, 20%, 95%)\n  }\n</style>\n\n\n<link rel='stylesheet' href='"+(void 0===a?"https://unpkg.com/chevrotain@"+n.VERSION+"/diagrams/diagrams.css":a)+"'>\n"+("\n<script src='"+o+"vendor/railroad-diagrams.js'></script>\n<script src='"+o+"src/diagrams_builder.js'></script>\n<script src='"+o)+"src/diagrams_behavior.js'></script>\n<script src='"+o+'src/main.js\'></script>\n\n<div id="diagrams" align="center"></div>    \n'+("\n<script>\n    window.serializedGrammar = "+JSON.stringify(e,null,"  "))+';\n</script>\n\n<script>\n    var diagramsDiv = document.getElementById("diagrams");\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\n</script>\n'}t.createSyntaxDiagramsCode=createSyntaxDiagramsCode},98543:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineNameProp=t.functionName=t.classNameFromInstance=void 0;var n=r(91433);function classNameFromInstance(e){return functionName(e.constructor)}t.classNameFromInstance=classNameFromInstance;var i="name";function functionName(e){return e.name||"anonymous"}function defineNameProp(e,t){var r=Object.getOwnPropertyDescriptor(e,i);return(!!(0,n.isUndefined)(r)||!!r.configurable)&&(Object.defineProperty(e,i,{enumerable:!1,configurable:!0,writable:!1,value:t}),!0)}t.functionName=functionName,t.defineNameProp=defineNameProp},2786:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IN=void 0,t.IN="_~IN~_"},40886:function(e,t){"use strict";function setNodeLocationOnlyOffset(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset==!0&&(e.endOffset=t.endOffset)}function setNodeLocationFull(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset==!0&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}function addTerminalToCst(e,t,r){void 0===e.children[r]?e.children[r]=[t]:e.children[r].push(t)}function addNoneTerminalToCst(e,t,r){void 0===e.children[t]?e.children[t]=[r]:e.children[t].push(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.addNoneTerminalToCst=t.addTerminalToCst=t.setNodeLocationFull=t.setNodeLocationOnlyOffset=void 0,t.setNodeLocationOnlyOffset=setNodeLocationOnlyOffset,t.setNodeLocationFull=setNodeLocationFull,t.addTerminalToCst=addTerminalToCst,t.addNoneTerminalToCst=addNoneTerminalToCst},25980:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateRedundantMethods=t.validateMissingCstMethods=t.validateVisitor=t.CstVisitorDefinitionError=t.createBaseVisitorConstructorWithDefaults=t.createBaseSemanticVisitorConstructor=t.defaultVisit=void 0;var n,i,o=r(91433),a=r(98543);function defaultVisit(e,t){for(var r=(0,o.keys)(e),n=r.length,i=0;i<n;i++)for(var a=e[r[i]],s=a.length,c=0;c<s;c++){var l=a[c];void 0===l.tokenTypeIdx&&this[l.name](l.children,t)}}function createBaseSemanticVisitorConstructor(e,t){var derivedConstructor=function(){};return(0,a.defineNameProp)(derivedConstructor,e+"BaseSemantics"),derivedConstructor.prototype={visit:function(e,t){if((0,o.isArray)(e)&&(e=e[0]),!(0,o.isUndefined)(e))return this[e.name](e.children,t)},validateVisitor:function(){var e=validateVisitor(this,t);if(!(0,o.isEmpty)(e)){var r=(0,o.map)(e,function(e){return e.msg});throw Error("Errors Detected in CST Visitor <"+(0,a.functionName)(this.constructor)+">:\n	"+r.join("\n\n").replace(/\n/g,"\n	"))}}},derivedConstructor.prototype.constructor=derivedConstructor,derivedConstructor._RULE_NAMES=t,derivedConstructor}function createBaseVisitorConstructorWithDefaults(e,t,r){var derivedConstructor=function(){};(0,a.defineNameProp)(derivedConstructor,e+"BaseSemanticsWithDefaults");var n=Object.create(r.prototype);return(0,o.forEach)(t,function(e){n[e]=defaultVisit}),derivedConstructor.prototype=n,derivedConstructor.prototype.constructor=derivedConstructor,derivedConstructor}function validateVisitor(e,t){var r=validateMissingCstMethods(e,t),n=validateRedundantMethods(e,t);return r.concat(n)}function validateMissingCstMethods(e,t){var r=(0,o.map)(t,function(t){if(!(0,o.isFunction)(e[t]))return{msg:"Missing visitor method: <"+t+"> on "+(0,a.functionName)(e.constructor)+" CST Visitor.",type:i.MISSING_METHOD,methodName:t}});return(0,o.compact)(r)}t.defaultVisit=defaultVisit,t.createBaseSemanticVisitorConstructor=createBaseSemanticVisitorConstructor,t.createBaseVisitorConstructorWithDefaults=createBaseVisitorConstructorWithDefaults,(n=i=t.CstVisitorDefinitionError||(t.CstVisitorDefinitionError={}))[n.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",n[n.MISSING_METHOD=1]="MISSING_METHOD",t.validateVisitor=validateVisitor,t.validateMissingCstMethods=validateMissingCstMethods;var s=["constructor","visit","validateVisitor"];function validateRedundantMethods(e,t){var r=[];for(var n in e)!(0,o.isFunction)(e[n])||(0,o.contains)(s,n)||(0,o.contains)(t,n)||r.push({msg:"Redundant visitor method: <"+n+"> on "+(0,a.functionName)(e.constructor)+" CST Visitor\nThere is no Grammar Rule corresponding to this method's name.\n",type:i.REDUNDANT_METHOD,methodName:n});return r}t.validateRedundantMethods=validateRedundantMethods},23566:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultGrammarValidatorErrorProvider=t.defaultGrammarResolverErrorProvider=t.defaultParserErrorProvider=void 0;var n=r(40711),i=r(91433),o=r(91433),a=r(84925),s=r(48527);t.defaultParserErrorProvider={buildMismatchTokenMessage:function(e){var t=e.expected,r=e.actual;return e.previous,e.ruleName,"Expecting "+((0,n.hasTokenLabel)(t)?"--> "+(0,n.tokenLabel)(t)+" <--":"token of type --> "+t.name+" <--")+" but found --> '"+r.image+"' <--"},buildNotAllInputParsedMessage:function(e){var t=e.firstRedundant;return e.ruleName,"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage:function(e){var t=e.expectedPathsPerAlt,r=e.actual,i=(e.previous,e.customUserDescription);e.ruleName;var a="Expecting: ",s="\nbut found: '"+(0,o.first)(r).image+"'";if(i)return a+i+s;var c=(0,o.reduce)(t,function(e,t){return e.concat(t)},[]),l=(0,o.map)(c,function(e){return"["+(0,o.map)(e,function(e){return(0,n.tokenLabel)(e)}).join(", ")+"]"});return a+"one of these possible Token sequences:\n"+(0,o.map)(l,function(e,t){return"  "+(t+1)+". "+e}).join("\n")+s},buildEarlyExitMessage:function(e){var t=e.expectedIterationPaths,r=e.actual,i=e.customUserDescription;e.ruleName;var a="Expecting: ",s="\nbut found: '"+(0,o.first)(r).image+"'";return i?a+i+s:a+"expecting at least one iteration which starts with one of these possible Token sequences::\n  <"+(0,o.map)(t,function(e){return"["+(0,o.map)(e,function(e){return(0,n.tokenLabel)(e)}).join(",")+"]"}).join(" ,")+">"+s}},Object.freeze(t.defaultParserErrorProvider),t.defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(e,t){return"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+"<-\ninside top level rule: ->"+e.name+"<-"}},t.defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(e,t){function getExtraProductionArgument(e){return e instanceof a.Terminal?e.terminalType.name:e instanceof a.NonTerminal?e.nonTerminalName:""}var r=e.name,n=(0,o.first)(t),i=n.idx,c=(0,s.getProductionDslName)(n),l=getExtraProductionArgument(n),u="->"+c+(i>0?i:"")+"<- "+(l?"with argument: ->"+l+"<-":"")+"\n                  appears more than once ("+t.length+" times) in the top level rule: ->"+r+"<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  ";return(u=u.replace(/[ \t]+/g," ")).replace(/\s\s+/g,"\n")},buildNamespaceConflictError:function(e){return"Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+e.name+">.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter."},buildAlternationPrefixAmbiguityError:function(e){var t=(0,o.map)(e.prefixPath,function(e){return(0,n.tokenLabel)(e)}).join(", "),r=0===e.alternation.idx?"":e.alternation.idx;return"Ambiguous alternatives: <"+e.ambiguityIndices.join(" ,")+"> due to common lookahead prefix\n"+("in <OR"+r)+"> inside <"+e.topLevelRule.name+"> Rule,\n<"+t+"> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details."},buildAlternationAmbiguityError:function(e){var t=(0,o.map)(e.prefixPath,function(e){return(0,n.tokenLabel)(e)}).join(", "),r=0===e.alternation.idx?"":e.alternation.idx;return"Ambiguous Alternatives Detected: <"+e.ambiguityIndices.join(" ,")+"> in <OR"+r+"> inside <"+e.topLevelRule.name+"> Rule,\n<"+t+"> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details."},buildEmptyRepetitionError:function(e){var t=(0,s.getProductionDslName)(e.repetition);return 0!==e.repetition.idx&&(t+=e.repetition.idx),"The repetition <"+t+"> within Rule <"+e.topLevelRule.name+"> can never consume any tokens.\nThis could lead to an infinite loop."},buildTokenNameError:function(e){return"deprecated"},buildEmptyAlternationError:function(e){return"Ambiguous empty alternative: <"+(e.emptyChoiceIdx+1)+">"+(" in <OR"+e.alternation.idx)+"> inside <"+e.topLevelRule.name+"> Rule.\nOnly the last alternative may be an empty alternative."},buildTooManyAlternativesError:function(e){return"An Alternation cannot have more than 256 alternatives:\n"+("<OR"+e.alternation.idx+"> inside <"+e.topLevelRule.name)+"> Rule.\n has "+(e.alternation.definition.length+1)+" alternatives."},buildLeftRecursionError:function(e){var t=e.topLevelRule.name,r=t+" --> "+i.map(e.leftRecursionPath,function(e){return e.name}).concat([t]).join(" --> ");return"Left Recursion found in grammar.\nrule: <"+t+"> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n "+r+"\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring."},buildInvalidRuleNameError:function(e){return"deprecated"},buildDuplicateRuleNameError:function(e){return"Duplicate definition, rule: ->"+(e.topLevelRule instanceof a.Rule?e.topLevelRule.name:e.topLevelRule)+"<- is already defined in the grammar: ->"+e.grammarName+"<-"}}},60193:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.EarlyExitException=t.NotAllInputParsedException=t.NoViableAltException=t.MismatchedTokenException=t.isRecognitionException=void 0;var o=r(91433),a="MismatchedTokenException",s="NoViableAltException",c="EarlyExitException",l="NotAllInputParsedException",u=[a,s,c,l];function isRecognitionException(e){return(0,o.contains)(u,e.name)}Object.freeze(u),t.isRecognitionException=isRecognitionException;var d=function(e){function RecognitionException(t,r){var n=this.constructor,i=e.call(this,t)||this;return i.token=r,i.resyncedTokens=[],Object.setPrototypeOf(i,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,i.constructor),i}return i(RecognitionException,e),RecognitionException}(Error),p=function(e){function MismatchedTokenException(t,r,n){var i=e.call(this,t,r)||this;return i.previousToken=n,i.name=a,i}return i(MismatchedTokenException,e),MismatchedTokenException}(d);t.MismatchedTokenException=p;var f=function(e){function NoViableAltException(t,r,n){var i=e.call(this,t,r)||this;return i.previousToken=n,i.name=s,i}return i(NoViableAltException,e),NoViableAltException}(d);t.NoViableAltException=f;var m=function(e){function NotAllInputParsedException(t,r){var n=e.call(this,t,r)||this;return n.name=l,n}return i(NotAllInputParsedException,e),NotAllInputParsedException}(d);t.NotAllInputParsedException=m;var g=function(e){function EarlyExitException(t,r,n){var i=e.call(this,t,r)||this;return i.previousToken=n,i.name=c,i}return i(EarlyExitException,e),EarlyExitException}(d);t.EarlyExitException=g},6678:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.checkPrefixAlternativesAmbiguities=t.validateSomeNonEmptyLookaheadPath=t.validateTooManyAlts=t.RepetionCollector=t.validateAmbiguousAlternationAlternatives=t.validateEmptyOrAlternative=t.getFirstNoneTerminal=t.validateNoLeftRecursion=t.validateRuleIsOverridden=t.validateRuleDoesNotAlreadyExist=t.OccurrenceValidationCollector=t.identifyProductionForDuplicates=t.validateGrammar=void 0;var o=r(91433),a=r(91433),s=r(72092),c=r(48527),l=r(61054),u=r(2717),d=r(84925),p=r(17884);function validateGrammar(e,t,r,n,i){var s=o.map(e,function(e){return validateDuplicateProductions(e,n)}),c=o.map(e,function(e){return validateNoLeftRecursion(e,e,n)}),l=[],u=[],d=[];(0,a.every)(c,a.isEmpty)&&(l=(0,a.map)(e,function(e){return validateEmptyOrAlternative(e,n)}),u=(0,a.map)(e,function(e){return validateAmbiguousAlternationAlternatives(e,t,n)}),d=validateSomeNonEmptyLookaheadPath(e,t,n));var p=checkTerminalAndNoneTerminalsNameSpace(e,r,n),f=(0,a.map)(e,function(e){return validateTooManyAlts(e,n)}),m=(0,a.map)(e,function(t){return validateRuleDoesNotAlreadyExist(t,e,i,n)});return o.flatten(s.concat(d,c,l,u,p,f,m))}function validateDuplicateProductions(e,t){var r=new f;e.accept(r);var n=r.allProductions,i=o.groupBy(n,identifyProductionForDuplicates),a=o.pick(i,function(e){return e.length>1});return o.map(o.values(a),function(r){var n=o.first(r),i=t.buildDuplicateFoundError(e,r),a=(0,c.getProductionDslName)(n),l={message:i,type:s.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:a,occurrence:n.idx},u=getExtraProductionArgument(n);return u&&(l.parameter=u),l})}function identifyProductionForDuplicates(e){return(0,c.getProductionDslName)(e)+"_#_"+e.idx+"_#_"+getExtraProductionArgument(e)}function getExtraProductionArgument(e){return e instanceof d.Terminal?e.terminalType.name:e instanceof d.NonTerminal?e.nonTerminalName:""}t.validateGrammar=validateGrammar,t.identifyProductionForDuplicates=identifyProductionForDuplicates;var f=function(e){function OccurrenceValidationCollector(){var t=null!==e&&e.apply(this,arguments)||this;return t.allProductions=[],t}return i(OccurrenceValidationCollector,e),OccurrenceValidationCollector.prototype.visitNonTerminal=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitOption=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitRepetitionWithSeparator=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitRepetitionMandatory=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitRepetition=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitAlternation=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitTerminal=function(e){this.allProductions.push(e)},OccurrenceValidationCollector}(p.GAstVisitor);function validateRuleDoesNotAlreadyExist(e,t,r,n){var i=[];if((0,a.reduce)(t,function(t,r){return r.name===e.name?t+1:t},0)>1){var o=n.buildDuplicateRuleNameError({topLevelRule:e,grammarName:r});i.push({message:o,type:s.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:e.name})}return i}function validateRuleIsOverridden(e,t,r){var n=[];return o.contains(t,e)||n.push({message:"Invalid rule override, rule: ->"+e+"<- cannot be overridden in the grammar: ->"+r+"<-as it is not defined in any of the super grammars ",type:s.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:e}),n}function validateNoLeftRecursion(e,t,r,n){void 0===n&&(n=[]);var i=[],a=getFirstNoneTerminal(t.definition);if(o.isEmpty(a))return[];var c=e.name;o.contains(a,e)&&i.push({message:r.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:n}),type:s.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:c});var l=o.difference(a,n.concat([e])),u=o.map(l,function(t){var i=o.cloneArr(n);return i.push(t),validateNoLeftRecursion(e,t,r,i)});return i.concat(o.flatten(u))}function getFirstNoneTerminal(e){var t=[];if(o.isEmpty(e))return t;var r=o.first(e);if(r instanceof d.NonTerminal)t.push(r.referencedRule);else if(r instanceof d.Alternative||r instanceof d.Option||r instanceof d.RepetitionMandatory||r instanceof d.RepetitionMandatoryWithSeparator||r instanceof d.RepetitionWithSeparator||r instanceof d.Repetition)t=t.concat(getFirstNoneTerminal(r.definition));else if(r instanceof d.Alternation)t=o.flatten(o.map(r.definition,function(e){return getFirstNoneTerminal(e.definition)}));else if(r instanceof d.Terminal);else throw Error("non exhaustive match");var n=(0,c.isOptionalProd)(r),i=e.length>1;if(!n||!i)return t;var a=o.drop(e);return t.concat(getFirstNoneTerminal(a))}t.OccurrenceValidationCollector=f,t.validateRuleDoesNotAlreadyExist=validateRuleDoesNotAlreadyExist,t.validateRuleIsOverridden=validateRuleIsOverridden,t.validateNoLeftRecursion=validateNoLeftRecursion,t.getFirstNoneTerminal=getFirstNoneTerminal;var m=function(e){function OrCollector(){var t=null!==e&&e.apply(this,arguments)||this;return t.alternations=[],t}return i(OrCollector,e),OrCollector.prototype.visitAlternation=function(e){this.alternations.push(e)},OrCollector}(p.GAstVisitor);function validateEmptyOrAlternative(e,t){var r=new m;e.accept(r);var n=r.alternations;return o.reduce(n,function(r,n){var i=o.dropRight(n.definition),a=o.map(i,function(r,i){var a=(0,u.nextPossibleTokensAfter)([r],[],null,1);return o.isEmpty(a)?{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:n,emptyChoiceIdx:i}),type:s.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:n.idx,alternative:i+1}:null});return r.concat(o.compact(a))},[])}function validateAmbiguousAlternationAlternatives(e,t,r){var n=new m;e.accept(n);var i=n.alternations;return i=(0,a.reject)(i,function(e){return!0===e.ignoreAmbiguities}),o.reduce(i,function(n,i){var o=i.idx,a=i.maxLookahead||t,s=(0,l.getLookaheadPathsForOr)(o,e,a,i),c=checkAlternativesAmbiguities(s,i,e,r),u=checkPrefixAlternativesAmbiguities(s,i,e,r);return n.concat(c,u)},[])}t.validateEmptyOrAlternative=validateEmptyOrAlternative,t.validateAmbiguousAlternationAlternatives=validateAmbiguousAlternationAlternatives;var g=function(e){function RepetionCollector(){var t=null!==e&&e.apply(this,arguments)||this;return t.allProductions=[],t}return i(RepetionCollector,e),RepetionCollector.prototype.visitRepetitionWithSeparator=function(e){this.allProductions.push(e)},RepetionCollector.prototype.visitRepetitionMandatory=function(e){this.allProductions.push(e)},RepetionCollector.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.allProductions.push(e)},RepetionCollector.prototype.visitRepetition=function(e){this.allProductions.push(e)},RepetionCollector}(p.GAstVisitor);function validateTooManyAlts(e,t){var r=new m;e.accept(r);var n=r.alternations;return o.reduce(n,function(r,n){return n.definition.length>255&&r.push({message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:n}),type:s.ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:e.name,occurrence:n.idx}),r},[])}function validateSomeNonEmptyLookaheadPath(e,t,r){var n=[];return(0,a.forEach)(e,function(e){var i=new g;e.accept(i);var o=i.allProductions;(0,a.forEach)(o,function(i){var o=(0,l.getProdType)(i),c=i.maxLookahead||t,u=i.idx,d=(0,l.getLookaheadPathsForOptionalProd)(u,e,o,c)[0];if((0,a.isEmpty)((0,a.flatten)(d))){var p=r.buildEmptyRepetitionError({topLevelRule:e,repetition:i});n.push({message:p,type:s.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:e.name})}})}),n}function checkAlternativesAmbiguities(e,t,r,n){var i=[],c=(0,a.reduce)(e,function(r,n,o){return!0===t.definition[o].ignoreAmbiguities||(0,a.forEach)(n,function(n){var s=[o];(0,a.forEach)(e,function(e,r){o!==r&&(0,l.containsPath)(e,n)&&!0!==t.definition[r].ignoreAmbiguities&&s.push(r)}),s.length>1&&!(0,l.containsPath)(i,n)&&(i.push(n),r.push({alts:s,path:n}))}),r},[]);return o.map(c,function(e){var i=(0,a.map)(e.alts,function(e){return e+1});return{message:n.buildAlternationAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:s.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:t.idx,alternatives:[e.alts]}})}function checkPrefixAlternativesAmbiguities(e,t,r,n){var i=[],o=(0,a.reduce)(e,function(e,t,r){var n=(0,a.map)(t,function(e){return{idx:r,path:e}});return e.concat(n)},[]);return(0,a.forEach)(o,function(e){if(!0!==t.definition[e.idx].ignoreAmbiguities){var c=e.idx,u=e.path,d=(0,a.findAll)(o,function(e){return!0!==t.definition[e.idx].ignoreAmbiguities&&e.idx<c&&(0,l.isStrictPrefixOfPath)(e.path,u)}),p=(0,a.map)(d,function(e){var i=[e.idx+1,c+1],o=0===t.idx?"":t.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:s.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:o,alternatives:i}});i=i.concat(p)}}),i}function checkTerminalAndNoneTerminalsNameSpace(e,t,r){var n=[],i=(0,a.map)(t,function(e){return e.name});return(0,a.forEach)(e,function(e){var t=e.name;if((0,a.contains)(i,t)){var o=r.buildNamespaceConflictError(e);n.push({message:o,type:s.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:t})}}),n}t.RepetionCollector=g,t.validateTooManyAlts=validateTooManyAlts,t.validateSomeNonEmptyLookaheadPath=validateSomeNonEmptyLookaheadPath,t.checkPrefixAlternativesAmbiguities=checkPrefixAlternativesAmbiguities},75910:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firstForTerminal=t.firstForBranching=t.firstForSequence=t.first=void 0;var n=r(91433),i=r(84925),o=r(48527);function first(e){if(e instanceof i.NonTerminal)return first(e.referencedRule);if(e instanceof i.Terminal)return firstForTerminal(e);if((0,o.isSequenceProd)(e))return firstForSequence(e);if((0,o.isBranchingProd)(e))return firstForBranching(e);throw Error("non exhaustive match")}function firstForSequence(e){for(var t,r=[],i=e.definition,a=0,s=i.length>a,c=!0;s&&c;)t=i[a],c=(0,o.isOptionalProd)(t),r=r.concat(first(t)),a+=1,s=i.length>a;return(0,n.uniq)(r)}function firstForBranching(e){var t=(0,n.map)(e.definition,function(e){return first(e)});return(0,n.uniq)((0,n.flatten)(t))}function firstForTerminal(e){return[e.terminalType]}t.first=first,t.firstForSequence=firstForSequence,t.firstForBranching=firstForBranching,t.firstForTerminal=firstForTerminal},40291:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.buildInProdFollowPrefix=t.buildBetweenProdsFollowPrefix=t.computeAllProdsFollows=t.ResyncFollowsWalker=void 0;var o=r(48589),a=r(75910),s=r(91433),c=r(2786),l=r(84925),u=function(e){function ResyncFollowsWalker(t){var r=e.call(this)||this;return r.topProd=t,r.follows={},r}return i(ResyncFollowsWalker,e),ResyncFollowsWalker.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},ResyncFollowsWalker.prototype.walkTerminal=function(e,t,r){},ResyncFollowsWalker.prototype.walkProdRef=function(e,t,r){var n=buildBetweenProdsFollowPrefix(e.referencedRule,e.idx)+this.topProd.name,i=t.concat(r),o=new l.Alternative({definition:i}),s=(0,a.first)(o);this.follows[n]=s},ResyncFollowsWalker}(o.RestWalker);function computeAllProdsFollows(e){var t={};return(0,s.forEach)(e,function(e){var r=new u(e).startWalking();(0,s.assign)(t,r)}),t}function buildBetweenProdsFollowPrefix(e,t){return e.name+t+c.IN}function buildInProdFollowPrefix(e){return e.terminalType.name+e.idx+c.IN}t.ResyncFollowsWalker=u,t.computeAllProdsFollows=computeAllProdsFollows,t.buildBetweenProdsFollowPrefix=buildBetweenProdsFollowPrefix,t.buildInProdFollowPrefix=buildInProdFollowPrefix},48527:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.collectMethods=t.DslMethodsCollectorVisitor=t.getProductionDslName=t.isBranchingProd=t.isOptionalProd=t.isSequenceProd=void 0;var o=r(91433),a=r(84925),s=r(17884);function isSequenceProd(e){return e instanceof a.Alternative||e instanceof a.Option||e instanceof a.Repetition||e instanceof a.RepetitionMandatory||e instanceof a.RepetitionMandatoryWithSeparator||e instanceof a.RepetitionWithSeparator||e instanceof a.Terminal||e instanceof a.Rule}function isOptionalProd(e,t){return void 0===t&&(t=[]),e instanceof a.Option||e instanceof a.Repetition||e instanceof a.RepetitionWithSeparator||(e instanceof a.Alternation?(0,o.some)(e.definition,function(e){return isOptionalProd(e,t)}):!(e instanceof a.NonTerminal&&(0,o.contains)(t,e))&&e instanceof a.AbstractProduction&&(e instanceof a.NonTerminal&&t.push(e),(0,o.every)(e.definition,function(e){return isOptionalProd(e,t)})))}function isBranchingProd(e){return e instanceof a.Alternation}function getProductionDslName(e){if(e instanceof a.NonTerminal)return"SUBRULE";if(e instanceof a.Option)return"OPTION";if(e instanceof a.Alternation)return"OR";if(e instanceof a.RepetitionMandatory)return"AT_LEAST_ONE";if(e instanceof a.RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(e instanceof a.RepetitionWithSeparator)return"MANY_SEP";if(e instanceof a.Repetition)return"MANY";else if(e instanceof a.Terminal)return"CONSUME";else throw Error("non exhaustive match")}t.isSequenceProd=isSequenceProd,t.isOptionalProd=isOptionalProd,t.isBranchingProd=isBranchingProd,t.getProductionDslName=getProductionDslName;var c=function(e){function DslMethodsCollectorVisitor(){var t=null!==e&&e.apply(this,arguments)||this;return t.separator="-",t.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},t}return i(DslMethodsCollectorVisitor,e),DslMethodsCollectorVisitor.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},DslMethodsCollectorVisitor.prototype.visitTerminal=function(e){var t=e.terminalType.name+this.separator+"Terminal";(0,o.has)(this.dslMethods,t)||(this.dslMethods[t]=[]),this.dslMethods[t].push(e)},DslMethodsCollectorVisitor.prototype.visitNonTerminal=function(e){var t=e.nonTerminalName+this.separator+"Terminal";(0,o.has)(this.dslMethods,t)||(this.dslMethods[t]=[]),this.dslMethods[t].push(e)},DslMethodsCollectorVisitor.prototype.visitOption=function(e){this.dslMethods.option.push(e)},DslMethodsCollectorVisitor.prototype.visitRepetitionWithSeparator=function(e){this.dslMethods.repetitionWithSeparator.push(e)},DslMethodsCollectorVisitor.prototype.visitRepetitionMandatory=function(e){this.dslMethods.repetitionMandatory.push(e)},DslMethodsCollectorVisitor.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)},DslMethodsCollectorVisitor.prototype.visitRepetition=function(e){this.dslMethods.repetition.push(e)},DslMethodsCollectorVisitor.prototype.visitAlternation=function(e){this.dslMethods.alternation.push(e)},DslMethodsCollectorVisitor}(s.GAstVisitor);t.DslMethodsCollectorVisitor=c;var l=new c;function collectMethods(e){l.reset(),e.accept(l);var t=l.dslMethods;return l.reset(),t}t.collectMethods=collectMethods},84925:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.serializeProduction=t.serializeGrammar=t.Terminal=t.Alternation=t.RepetitionWithSeparator=t.Repetition=t.RepetitionMandatoryWithSeparator=t.RepetitionMandatory=t.Option=t.Alternative=t.Rule=t.NonTerminal=t.AbstractProduction=void 0;var o=r(91433),a=r(40711),s=function(){function AbstractProduction(e){this._definition=e}return Object.defineProperty(AbstractProduction.prototype,"definition",{get:function(){return this._definition},set:function(e){this._definition=e},enumerable:!1,configurable:!0}),AbstractProduction.prototype.accept=function(e){e.visit(this),(0,o.forEach)(this.definition,function(t){t.accept(e)})},AbstractProduction}();t.AbstractProduction=s;var c=function(e){function NonTerminal(t){var r=e.call(this,[])||this;return r.idx=1,(0,o.assign)(r,(0,o.pick)(t,function(e){return void 0!==e})),r}return i(NonTerminal,e),Object.defineProperty(NonTerminal.prototype,"definition",{get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(e){},enumerable:!1,configurable:!0}),NonTerminal.prototype.accept=function(e){e.visit(this)},NonTerminal}(s);t.NonTerminal=c;var l=function(e){function Rule(t){var r=e.call(this,t.definition)||this;return r.orgText="",(0,o.assign)(r,(0,o.pick)(t,function(e){return void 0!==e})),r}return i(Rule,e),Rule}(s);t.Rule=l;var u=function(e){function Alternative(t){var r=e.call(this,t.definition)||this;return r.ignoreAmbiguities=!1,(0,o.assign)(r,(0,o.pick)(t,function(e){return void 0!==e})),r}return i(Alternative,e),Alternative}(s);t.Alternative=u;var d=function(e){function Option(t){var r=e.call(this,t.definition)||this;return r.idx=1,(0,o.assign)(r,(0,o.pick)(t,function(e){return void 0!==e})),r}return i(Option,e),Option}(s);t.Option=d;var p=function(e){function RepetitionMandatory(t){var r=e.call(this,t.definition)||this;return r.idx=1,(0,o.assign)(r,(0,o.pick)(t,function(e){return void 0!==e})),r}return i(RepetitionMandatory,e),RepetitionMandatory}(s);t.RepetitionMandatory=p;var f=function(e){function RepetitionMandatoryWithSeparator(t){var r=e.call(this,t.definition)||this;return r.idx=1,(0,o.assign)(r,(0,o.pick)(t,function(e){return void 0!==e})),r}return i(RepetitionMandatoryWithSeparator,e),RepetitionMandatoryWithSeparator}(s);t.RepetitionMandatoryWithSeparator=f;var m=function(e){function Repetition(t){var r=e.call(this,t.definition)||this;return r.idx=1,(0,o.assign)(r,(0,o.pick)(t,function(e){return void 0!==e})),r}return i(Repetition,e),Repetition}(s);t.Repetition=m;var g=function(e){function RepetitionWithSeparator(t){var r=e.call(this,t.definition)||this;return r.idx=1,(0,o.assign)(r,(0,o.pick)(t,function(e){return void 0!==e})),r}return i(RepetitionWithSeparator,e),RepetitionWithSeparator}(s);t.RepetitionWithSeparator=g;var y=function(e){function Alternation(t){var r=e.call(this,t.definition)||this;return r.idx=1,r.ignoreAmbiguities=!1,r.hasPredicates=!1,(0,o.assign)(r,(0,o.pick)(t,function(e){return void 0!==e})),r}return i(Alternation,e),Object.defineProperty(Alternation.prototype,"definition",{get:function(){return this._definition},set:function(e){this._definition=e},enumerable:!1,configurable:!0}),Alternation}(s);t.Alternation=y;var v=function(){function Terminal(e){this.idx=1,(0,o.assign)(this,(0,o.pick)(e,function(e){return void 0!==e}))}return Terminal.prototype.accept=function(e){e.visit(this)},Terminal}();function serializeGrammar(e){return(0,o.map)(e,serializeProduction)}function serializeProduction(e){function convertDefinition(e){return(0,o.map)(e,serializeProduction)}if(e instanceof c){var t={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return(0,o.isString)(e.label)&&(t.label=e.label),t}if(e instanceof u)return{type:"Alternative",definition:convertDefinition(e.definition)};if(e instanceof d)return{type:"Option",idx:e.idx,definition:convertDefinition(e.definition)};if(e instanceof p)return{type:"RepetitionMandatory",idx:e.idx,definition:convertDefinition(e.definition)};if(e instanceof f)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:serializeProduction(new v({terminalType:e.separator})),definition:convertDefinition(e.definition)};if(e instanceof g)return{type:"RepetitionWithSeparator",idx:e.idx,separator:serializeProduction(new v({terminalType:e.separator})),definition:convertDefinition(e.definition)};if(e instanceof m)return{type:"Repetition",idx:e.idx,definition:convertDefinition(e.definition)};else if(e instanceof y)return{type:"Alternation",idx:e.idx,definition:convertDefinition(e.definition)};else if(e instanceof v){var r={type:"Terminal",name:e.terminalType.name,label:(0,a.tokenLabel)(e.terminalType),idx:e.idx};(0,o.isString)(e.label)&&(r.terminalLabel=e.label);var n=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(r.pattern=(0,o.isRegExp)(n)?n.source:n),r}else if(e instanceof l)return{type:"Rule",name:e.name,orgText:e.orgText,definition:convertDefinition(e.definition)};else throw Error("non exhaustive match")}t.Terminal=v,t.serializeGrammar=serializeGrammar,t.serializeProduction=serializeProduction},70108:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateGrammar=t.resolveGrammar=void 0;var n=r(91433),i=r(45738),o=r(6678),a=r(23566);function resolveGrammar(e){e=(0,n.defaults)(e,{errMsgProvider:a.defaultGrammarResolverErrorProvider});var t={};return(0,n.forEach)(e.rules,function(e){t[e.name]=e}),(0,i.resolveGrammar)(t,e.errMsgProvider)}function validateGrammar(e){return e=(0,n.defaults)(e,{errMsgProvider:a.defaultGrammarValidatorErrorProvider}),(0,o.validateGrammar)(e.rules,e.maxLookahead,e.tokenTypes,e.errMsgProvider,e.grammarName)}t.resolveGrammar=resolveGrammar,t.validateGrammar=validateGrammar},17884:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GAstVisitor=void 0;var n=r(84925),i=function(){function GAstVisitor(){}return GAstVisitor.prototype.visit=function(e){switch(e.constructor){case n.NonTerminal:return this.visitNonTerminal(e);case n.Alternative:return this.visitAlternative(e);case n.Option:return this.visitOption(e);case n.RepetitionMandatory:return this.visitRepetitionMandatory(e);case n.RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(e);case n.RepetitionWithSeparator:return this.visitRepetitionWithSeparator(e);case n.Repetition:return this.visitRepetition(e);case n.Alternation:return this.visitAlternation(e);case n.Terminal:return this.visitTerminal(e);case n.Rule:return this.visitRule(e);default:throw Error("non exhaustive match")}},GAstVisitor.prototype.visitNonTerminal=function(e){},GAstVisitor.prototype.visitAlternative=function(e){},GAstVisitor.prototype.visitOption=function(e){},GAstVisitor.prototype.visitRepetition=function(e){},GAstVisitor.prototype.visitRepetitionMandatory=function(e){},GAstVisitor.prototype.visitRepetitionMandatoryWithSeparator=function(e){},GAstVisitor.prototype.visitRepetitionWithSeparator=function(e){},GAstVisitor.prototype.visitAlternation=function(e){},GAstVisitor.prototype.visitTerminal=function(e){},GAstVisitor.prototype.visitRule=function(e){},GAstVisitor}();t.GAstVisitor=i},2717:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.nextPossibleTokensAfter=t.possiblePathsFrom=t.NextTerminalAfterAtLeastOneSepWalker=t.NextTerminalAfterAtLeastOneWalker=t.NextTerminalAfterManySepWalker=t.NextTerminalAfterManyWalker=t.AbstractNextTerminalAfterProductionWalker=t.NextAfterTokenWalker=t.AbstractNextPossibleTokensWalker=void 0;var o=r(48589),a=r(91433),s=r(75910),c=r(84925),l=function(e){function AbstractNextPossibleTokensWalker(t,r){var n=e.call(this)||this;return n.topProd=t,n.path=r,n.possibleTokTypes=[],n.nextProductionName="",n.nextProductionOccurrence=0,n.found=!1,n.isAtEndOfPath=!1,n}return i(AbstractNextPossibleTokensWalker,e),AbstractNextPossibleTokensWalker.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=(0,a.cloneArr)(this.path.ruleStack).reverse(),this.occurrenceStack=(0,a.cloneArr)(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},AbstractNextPossibleTokensWalker.prototype.walk=function(t,r){void 0===r&&(r=[]),this.found||e.prototype.walk.call(this,t,r)},AbstractNextPossibleTokensWalker.prototype.walkProdRef=function(e,t,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){var n=t.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,n)}},AbstractNextPossibleTokensWalker.prototype.updateExpectedNext=function(){(0,a.isEmpty)(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},AbstractNextPossibleTokensWalker}(o.RestWalker);t.AbstractNextPossibleTokensWalker=l;var u=function(e){function NextAfterTokenWalker(t,r){var n=e.call(this,t,r)||this;return n.path=r,n.nextTerminalName="",n.nextTerminalOccurrence=0,n.nextTerminalName=n.path.lastTok.name,n.nextTerminalOccurrence=n.path.lastTokOccurrence,n}return i(NextAfterTokenWalker,e),NextAfterTokenWalker.prototype.walkTerminal=function(e,t,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){var n=t.concat(r),i=new c.Alternative({definition:n});this.possibleTokTypes=(0,s.first)(i),this.found=!0}},NextAfterTokenWalker}(l);t.NextAfterTokenWalker=u;var d=function(e){function AbstractNextTerminalAfterProductionWalker(t,r){var n=e.call(this)||this;return n.topRule=t,n.occurrence=r,n.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},n}return i(AbstractNextTerminalAfterProductionWalker,e),AbstractNextTerminalAfterProductionWalker.prototype.startWalking=function(){return this.walk(this.topRule),this.result},AbstractNextTerminalAfterProductionWalker}(o.RestWalker);t.AbstractNextTerminalAfterProductionWalker=d;var p=function(e){function NextTerminalAfterManyWalker(){return null!==e&&e.apply(this,arguments)||this}return i(NextTerminalAfterManyWalker,e),NextTerminalAfterManyWalker.prototype.walkMany=function(t,r,n){if(t.idx===this.occurrence){var i=(0,a.first)(r.concat(n));this.result.isEndOfRule=void 0===i,i instanceof c.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkMany.call(this,t,r,n)},NextTerminalAfterManyWalker}(d);t.NextTerminalAfterManyWalker=p;var f=function(e){function NextTerminalAfterManySepWalker(){return null!==e&&e.apply(this,arguments)||this}return i(NextTerminalAfterManySepWalker,e),NextTerminalAfterManySepWalker.prototype.walkManySep=function(t,r,n){if(t.idx===this.occurrence){var i=(0,a.first)(r.concat(n));this.result.isEndOfRule=void 0===i,i instanceof c.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkManySep.call(this,t,r,n)},NextTerminalAfterManySepWalker}(d);t.NextTerminalAfterManySepWalker=f;var m=function(e){function NextTerminalAfterAtLeastOneWalker(){return null!==e&&e.apply(this,arguments)||this}return i(NextTerminalAfterAtLeastOneWalker,e),NextTerminalAfterAtLeastOneWalker.prototype.walkAtLeastOne=function(t,r,n){if(t.idx===this.occurrence){var i=(0,a.first)(r.concat(n));this.result.isEndOfRule=void 0===i,i instanceof c.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkAtLeastOne.call(this,t,r,n)},NextTerminalAfterAtLeastOneWalker}(d);t.NextTerminalAfterAtLeastOneWalker=m;var g=function(e){function NextTerminalAfterAtLeastOneSepWalker(){return null!==e&&e.apply(this,arguments)||this}return i(NextTerminalAfterAtLeastOneSepWalker,e),NextTerminalAfterAtLeastOneSepWalker.prototype.walkAtLeastOneSep=function(t,r,n){if(t.idx===this.occurrence){var i=(0,a.first)(r.concat(n));this.result.isEndOfRule=void 0===i,i instanceof c.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkAtLeastOneSep.call(this,t,r,n)},NextTerminalAfterAtLeastOneSepWalker}(d);function possiblePathsFrom(e,t,r){void 0===r&&(r=[]),r=(0,a.cloneArr)(r);var n=[],i=0;function remainingPathWith(t){return t.concat((0,a.drop)(e,i+1))}function getAlternativesForProd(e){var i=possiblePathsFrom(remainingPathWith(e),t,r);return n.concat(i)}for(;r.length<t&&i<e.length;){var o=e[i];if(o instanceof c.Alternative||o instanceof c.NonTerminal)return getAlternativesForProd(o.definition);if(o instanceof c.Option)n=getAlternativesForProd(o.definition);else if(o instanceof c.RepetitionMandatory){var s=o.definition.concat([new c.Repetition({definition:o.definition})]);return getAlternativesForProd(s)}else if(o instanceof c.RepetitionMandatoryWithSeparator){var s=[new c.Alternative({definition:o.definition}),new c.Repetition({definition:[new c.Terminal({terminalType:o.separator})].concat(o.definition)})];return getAlternativesForProd(s)}else if(o instanceof c.RepetitionWithSeparator){var s=o.definition.concat([new c.Repetition({definition:[new c.Terminal({terminalType:o.separator})].concat(o.definition)})]);n=getAlternativesForProd(s)}else if(o instanceof c.Repetition){var s=o.definition.concat([new c.Repetition({definition:o.definition})]);n=getAlternativesForProd(s)}else if(o instanceof c.Alternation)return(0,a.forEach)(o.definition,function(e){!1===(0,a.isEmpty)(e.definition)&&(n=getAlternativesForProd(e.definition))}),n;else if(o instanceof c.Terminal)r.push(o.terminalType);else throw Error("non exhaustive match");i++}return n.push({partialPath:r,suffixDef:(0,a.drop)(e,i)}),n}function nextPossibleTokensAfter(e,t,r,n){var i="EXIT_NONE_TERMINAL",o=[i],s="EXIT_ALTERNATIVE",l=!1,u=t.length,d=u-n-1,p=[],f=[];for(f.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!(0,a.isEmpty)(f);){var m=f.pop();if(m===s){l&&(0,a.last)(f).idx<=d&&f.pop();continue}var g=m.def,y=m.idx,v=m.ruleStack,x=m.occurrenceStack;if(!(0,a.isEmpty)(g)){var O=g[0];if(O===i){var R={idx:y,def:(0,a.drop)(g),ruleStack:(0,a.dropRight)(v),occurrenceStack:(0,a.dropRight)(x)};f.push(R)}else if(O instanceof c.Terminal){if(y<u-1){var A=y+1;if(r(t[A],O.terminalType)){var R={idx:A,def:(0,a.drop)(g),ruleStack:v,occurrenceStack:x};f.push(R)}}else if(y===u-1)p.push({nextTokenType:O.terminalType,nextTokenOccurrence:O.idx,ruleStack:v,occurrenceStack:x}),l=!0;else throw Error("non exhaustive match")}else if(O instanceof c.NonTerminal){var b=(0,a.cloneArr)(v);b.push(O.nonTerminalName);var C=(0,a.cloneArr)(x);C.push(O.idx);var R={idx:y,def:O.definition.concat(o,(0,a.drop)(g)),ruleStack:b,occurrenceStack:C};f.push(R)}else if(O instanceof c.Option){var _={idx:y,def:(0,a.drop)(g),ruleStack:v,occurrenceStack:x};f.push(_),f.push(s);var S={idx:y,def:O.definition.concat((0,a.drop)(g)),ruleStack:v,occurrenceStack:x};f.push(S)}else if(O instanceof c.RepetitionMandatory){var k=new c.Repetition({definition:O.definition,idx:O.idx}),N=O.definition.concat([k],(0,a.drop)(g)),R={idx:y,def:N,ruleStack:v,occurrenceStack:x};f.push(R)}else if(O instanceof c.RepetitionMandatoryWithSeparator){var P=new c.Terminal({terminalType:O.separator}),k=new c.Repetition({definition:[P].concat(O.definition),idx:O.idx}),N=O.definition.concat([k],(0,a.drop)(g)),R={idx:y,def:N,ruleStack:v,occurrenceStack:x};f.push(R)}else if(O instanceof c.RepetitionWithSeparator){var _={idx:y,def:(0,a.drop)(g),ruleStack:v,occurrenceStack:x};f.push(_),f.push(s);var P=new c.Terminal({terminalType:O.separator}),L=new c.Repetition({definition:[P].concat(O.definition),idx:O.idx}),N=O.definition.concat([L],(0,a.drop)(g)),S={idx:y,def:N,ruleStack:v,occurrenceStack:x};f.push(S)}else if(O instanceof c.Repetition){var _={idx:y,def:(0,a.drop)(g),ruleStack:v,occurrenceStack:x};f.push(_),f.push(s);var L=new c.Repetition({definition:O.definition,idx:O.idx}),N=O.definition.concat([L],(0,a.drop)(g)),S={idx:y,def:N,ruleStack:v,occurrenceStack:x};f.push(S)}else if(O instanceof c.Alternation)for(var M=O.definition.length-1;M>=0;M--){var F={idx:y,def:O.definition[M].definition.concat((0,a.drop)(g)),ruleStack:v,occurrenceStack:x};f.push(F),f.push(s)}else if(O instanceof c.Alternative)f.push({idx:y,def:O.definition.concat((0,a.drop)(g)),ruleStack:v,occurrenceStack:x});else if(O instanceof c.Rule)f.push(expandTopLevelRule(O,y,v,x));else throw Error("non exhaustive match")}}return p}function expandTopLevelRule(e,t,r,n){var i=(0,a.cloneArr)(r);i.push(e.name);var o=(0,a.cloneArr)(n);return o.push(1),{idx:t,def:e.definition,ruleStack:i,occurrenceStack:o}}t.NextTerminalAfterAtLeastOneSepWalker=g,t.possiblePathsFrom=possiblePathsFrom,t.nextPossibleTokensAfter=nextPossibleTokensAfter},61729:function(e,t){"use strict";function getKeyForAutomaticLookahead(e,t,r){return r|t|e}Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyForAutomaticLookahead=t.AT_LEAST_ONE_SEP_IDX=t.MANY_SEP_IDX=t.AT_LEAST_ONE_IDX=t.MANY_IDX=t.OPTION_IDX=t.OR_IDX=t.BITS_FOR_ALT_IDX=t.BITS_FOR_RULE_IDX=t.BITS_FOR_OCCURRENCE_IDX=t.BITS_FOR_METHOD_TYPE=void 0,t.BITS_FOR_METHOD_TYPE=4,t.BITS_FOR_OCCURRENCE_IDX=8,t.BITS_FOR_RULE_IDX=12,t.BITS_FOR_ALT_IDX=8,t.OR_IDX=1<<t.BITS_FOR_OCCURRENCE_IDX,t.OPTION_IDX=2<<t.BITS_FOR_OCCURRENCE_IDX,t.MANY_IDX=3<<t.BITS_FOR_OCCURRENCE_IDX,t.AT_LEAST_ONE_IDX=4<<t.BITS_FOR_OCCURRENCE_IDX,t.MANY_SEP_IDX=5<<t.BITS_FOR_OCCURRENCE_IDX,t.AT_LEAST_ONE_SEP_IDX=6<<t.BITS_FOR_OCCURRENCE_IDX,t.getKeyForAutomaticLookahead=getKeyForAutomaticLookahead,t.BITS_FOR_ALT_IDX},61054:function(e,t,r){"use strict";var n,i,o,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.areTokenCategoriesNotUsed=t.isStrictPrefixOfPath=t.containsPath=t.getLookaheadPathsForOptionalProd=t.getLookaheadPathsForOr=t.lookAheadSequenceFromAlternatives=t.buildSingleAlternativeLookaheadFunction=t.buildAlternativesLookAheadFunc=t.buildLookaheadFuncForOptionalProd=t.buildLookaheadFuncForOr=t.getProdType=t.PROD_TYPE=void 0;var s=r(91433),c=r(2717),l=r(48589),u=r(91122),d=r(84925),p=r(17884);function getProdType(e){if(e instanceof d.Option)return o.OPTION;if(e instanceof d.Repetition)return o.REPETITION;if(e instanceof d.RepetitionMandatory)return o.REPETITION_MANDATORY;if(e instanceof d.RepetitionMandatoryWithSeparator)return o.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof d.RepetitionWithSeparator)return o.REPETITION_WITH_SEPARATOR;if(e instanceof d.Alternation)return o.ALTERNATION;throw Error("non exhaustive match")}function buildLookaheadFuncForOr(e,t,r,n,i,o){var a=getLookaheadPathsForOr(e,t,r),s=areTokenCategoriesNotUsed(a)?u.tokenStructuredMatcherNoCategories:u.tokenStructuredMatcher;return o(a,n,s,i)}function buildLookaheadFuncForOptionalProd(e,t,r,n,i,o){var a=getLookaheadPathsForOptionalProd(e,t,i,r),s=areTokenCategoriesNotUsed(a)?u.tokenStructuredMatcherNoCategories:u.tokenStructuredMatcher;return o(a[0],s,n)}function buildAlternativesLookAheadFunc(e,t,r,n){var i=e.length,o=(0,s.every)(e,function(e){return(0,s.every)(e,function(e){return 1===e.length})});if(t)return function(t){for(var n=(0,s.map)(t,function(e){return e.GATE}),o=0;o<i;o++){var a=e[o],c=a.length,l=n[o];if(void 0===l||!1!==l.call(this))e:for(var u=0;u<c;u++){for(var d=a[u],p=d.length,f=0;f<p;f++)if(!1===r(this.LA(f+1),d[f]))continue e;return o}}};if(!o||n)return function(){for(var t=0;t<i;t++){var n=e[t],o=n.length;e:for(var a=0;a<o;a++){for(var s=n[a],c=s.length,l=0;l<c;l++)if(!1===r(this.LA(l+1),s[l]))continue e;return t}}};var a=(0,s.map)(e,function(e){return(0,s.flatten)(e)}),c=(0,s.reduce)(a,function(e,t,r){return(0,s.forEach)(t,function(t){(0,s.has)(e,t.tokenTypeIdx)||(e[t.tokenTypeIdx]=r),(0,s.forEach)(t.categoryMatches,function(t){(0,s.has)(e,t)||(e[t]=r)})}),e},[]);return function(){return c[this.LA(1).tokenTypeIdx]}}function buildSingleAlternativeLookaheadFunction(e,t,r){var n=(0,s.every)(e,function(e){return 1===e.length}),i=e.length;if(!n||r)return function(){e:for(var r=0;r<i;r++){for(var n=e[r],o=n.length,a=0;a<o;a++)if(!1===t(this.LA(a+1),n[a]))continue e;return!0}return!1};var o=(0,s.flatten)(e);if(1===o.length&&(0,s.isEmpty)(o[0].categoryMatches)){var a=o[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===a}}var c=(0,s.reduce)(o,function(e,t,r){return e[t.tokenTypeIdx]=!0,(0,s.forEach)(t.categoryMatches,function(t){e[t]=!0}),e},[]);return function(){return!0===c[this.LA(1).tokenTypeIdx]}}(n=o=t.PROD_TYPE||(t.PROD_TYPE={}))[n.OPTION=0]="OPTION",n[n.REPETITION=1]="REPETITION",n[n.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",n[n.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",n[n.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",n[n.ALTERNATION=5]="ALTERNATION",t.getProdType=getProdType,t.buildLookaheadFuncForOr=buildLookaheadFuncForOr,t.buildLookaheadFuncForOptionalProd=buildLookaheadFuncForOptionalProd,t.buildAlternativesLookAheadFunc=buildAlternativesLookAheadFunc,t.buildSingleAlternativeLookaheadFunction=buildSingleAlternativeLookaheadFunction;var f=function(e){function RestDefinitionFinderWalker(t,r,n){var i=e.call(this)||this;return i.topProd=t,i.targetOccurrence=r,i.targetProdType=n,i}return a(RestDefinitionFinderWalker,e),RestDefinitionFinderWalker.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},RestDefinitionFinderWalker.prototype.checkIsTarget=function(e,t,r,n){return e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.restDef=r.concat(n),!0)},RestDefinitionFinderWalker.prototype.walkOption=function(t,r,n){this.checkIsTarget(t,o.OPTION,r,n)||e.prototype.walkOption.call(this,t,r,n)},RestDefinitionFinderWalker.prototype.walkAtLeastOne=function(t,r,n){this.checkIsTarget(t,o.REPETITION_MANDATORY,r,n)||e.prototype.walkOption.call(this,t,r,n)},RestDefinitionFinderWalker.prototype.walkAtLeastOneSep=function(t,r,n){this.checkIsTarget(t,o.REPETITION_MANDATORY_WITH_SEPARATOR,r,n)||e.prototype.walkOption.call(this,t,r,n)},RestDefinitionFinderWalker.prototype.walkMany=function(t,r,n){this.checkIsTarget(t,o.REPETITION,r,n)||e.prototype.walkOption.call(this,t,r,n)},RestDefinitionFinderWalker.prototype.walkManySep=function(t,r,n){this.checkIsTarget(t,o.REPETITION_WITH_SEPARATOR,r,n)||e.prototype.walkOption.call(this,t,r,n)},RestDefinitionFinderWalker}(l.RestWalker),m=function(e){function InsideDefinitionFinderVisitor(t,r,n){var i=e.call(this)||this;return i.targetOccurrence=t,i.targetProdType=r,i.targetRef=n,i.result=[],i}return a(InsideDefinitionFinderVisitor,e),InsideDefinitionFinderVisitor.prototype.checkIsTarget=function(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(void 0===this.targetRef||e===this.targetRef)&&(this.result=e.definition)},InsideDefinitionFinderVisitor.prototype.visitOption=function(e){this.checkIsTarget(e,o.OPTION)},InsideDefinitionFinderVisitor.prototype.visitRepetition=function(e){this.checkIsTarget(e,o.REPETITION)},InsideDefinitionFinderVisitor.prototype.visitRepetitionMandatory=function(e){this.checkIsTarget(e,o.REPETITION_MANDATORY)},InsideDefinitionFinderVisitor.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.checkIsTarget(e,o.REPETITION_MANDATORY_WITH_SEPARATOR)},InsideDefinitionFinderVisitor.prototype.visitRepetitionWithSeparator=function(e){this.checkIsTarget(e,o.REPETITION_WITH_SEPARATOR)},InsideDefinitionFinderVisitor.prototype.visitAlternation=function(e){this.checkIsTarget(e,o.ALTERNATION)},InsideDefinitionFinderVisitor}(p.GAstVisitor);function initializeArrayOfArrays(e){for(var t=Array(e),r=0;r<e;r++)t[r]=[];return t}function pathToHashKeys(e){for(var t=[""],r=0;r<e.length;r++){for(var n=e[r],i=[],o=0;o<t.length;o++){var a=t[o];i.push(a+"_"+n.tokenTypeIdx);for(var s=0;s<n.categoryMatches.length;s++){var c="_"+n.categoryMatches[s];i.push(a+c)}}t=i}return t}function isUniquePrefixHash(e,t,r){for(var n=0;n<e.length;n++)if(n!==r){for(var i=e[n],o=0;o<t.length;o++)if(!0===i[t[o]])return!1}return!0}function lookAheadSequenceFromAlternatives(e,t){for(var r=(0,s.map)(e,function(e){return(0,c.possiblePathsFrom)([e],1)}),n=initializeArrayOfArrays(r.length),i=(0,s.map)(r,function(e){var t={};return(0,s.forEach)(e,function(e){var r=pathToHashKeys(e.partialPath);(0,s.forEach)(r,function(e){t[e]=!0})}),t}),o=r,a=1;a<=t;a++){var l=o;o=initializeArrayOfArrays(l.length);for(var _loop_1=function(e){for(var r=l[e],u=0;u<r.length;u++){var d=r[u].partialPath,p=r[u].suffixDef,f=pathToHashKeys(d);if(isUniquePrefixHash(i,f,e)||(0,s.isEmpty)(p)||d.length===t){var m=n[e];if(!1===containsPath(m,d)){m.push(d);for(var g=0;g<f.length;g++){var y=f[g];i[e][y]=!0}}}else{var v=(0,c.possiblePathsFrom)(p,a+1,d);o[e]=o[e].concat(v),(0,s.forEach)(v,function(t){var r=pathToHashKeys(t.partialPath);(0,s.forEach)(r,function(t){i[e][t]=!0})})}}},u=0;u<l.length;u++)_loop_1(u)}return n}function getLookaheadPathsForOr(e,t,r,n){var i=new m(e,o.ALTERNATION,n);return t.accept(i),lookAheadSequenceFromAlternatives(i.result,r)}function getLookaheadPathsForOptionalProd(e,t,r,n){var i=new m(e,r);t.accept(i);var o=i.result,a=new f(t,e,r).startWalking();return lookAheadSequenceFromAlternatives([new d.Alternative({definition:o}),new d.Alternative({definition:a})],n)}function containsPath(e,t){t:for(var r=0;r<e.length;r++){var n=e[r];if(n.length===t.length){for(var i=0;i<n.length;i++){var o=t[i],a=n[i];if(!1==(o===a||void 0!==a.categoryMatchesMap[o.tokenTypeIdx]))continue t}return!0}}return!1}function isStrictPrefixOfPath(e,t){return e.length<t.length&&(0,s.every)(e,function(e,r){var n=t[r];return e===n||n.categoryMatchesMap[e.tokenTypeIdx]})}function areTokenCategoriesNotUsed(e){return(0,s.every)(e,function(e){return(0,s.every)(e,function(e){return(0,s.every)(e,function(e){return(0,s.isEmpty)(e.categoryMatches)})})})}t.lookAheadSequenceFromAlternatives=lookAheadSequenceFromAlternatives,t.getLookaheadPathsForOr=getLookaheadPathsForOr,t.getLookaheadPathsForOptionalProd=getLookaheadPathsForOptionalProd,t.containsPath=containsPath,t.isStrictPrefixOfPath=isStrictPrefixOfPath,t.areTokenCategoriesNotUsed=areTokenCategoriesNotUsed},45738:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.GastRefResolverVisitor=t.resolveGrammar=void 0;var o=r(72092),a=r(91433),s=r(17884);function resolveGrammar(e,t){var r=new c(e,t);return r.resolveRefs(),r.errors}t.resolveGrammar=resolveGrammar;var c=function(e){function GastRefResolverVisitor(t,r){var n=e.call(this)||this;return n.nameToTopRule=t,n.errMsgProvider=r,n.errors=[],n}return i(GastRefResolverVisitor,e),GastRefResolverVisitor.prototype.resolveRefs=function(){var e=this;(0,a.forEach)((0,a.values)(this.nameToTopRule),function(t){e.currTopLevel=t,t.accept(e)})},GastRefResolverVisitor.prototype.visitNonTerminal=function(e){var t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{var r=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:r,type:o.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}},GastRefResolverVisitor}(s.GAstVisitor);t.GastRefResolverVisitor=c},48589:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestWalker=void 0;var n=r(91433),i=r(84925),o=function(){function RestWalker(){}return RestWalker.prototype.walk=function(e,t){var r=this;void 0===t&&(t=[]),(0,n.forEach)(e.definition,function(o,a){var s=(0,n.drop)(e.definition,a+1);if(o instanceof i.NonTerminal)r.walkProdRef(o,s,t);else if(o instanceof i.Terminal)r.walkTerminal(o,s,t);else if(o instanceof i.Alternative)r.walkFlat(o,s,t);else if(o instanceof i.Option)r.walkOption(o,s,t);else if(o instanceof i.RepetitionMandatory)r.walkAtLeastOne(o,s,t);else if(o instanceof i.RepetitionMandatoryWithSeparator)r.walkAtLeastOneSep(o,s,t);else if(o instanceof i.RepetitionWithSeparator)r.walkManySep(o,s,t);else if(o instanceof i.Repetition)r.walkMany(o,s,t);else if(o instanceof i.Alternation)r.walkOr(o,s,t);else throw Error("non exhaustive match")})},RestWalker.prototype.walkTerminal=function(e,t,r){},RestWalker.prototype.walkProdRef=function(e,t,r){},RestWalker.prototype.walkFlat=function(e,t,r){var n=t.concat(r);this.walk(e,n)},RestWalker.prototype.walkOption=function(e,t,r){var n=t.concat(r);this.walk(e,n)},RestWalker.prototype.walkAtLeastOne=function(e,t,r){var n=[new i.Option({definition:e.definition})].concat(t,r);this.walk(e,n)},RestWalker.prototype.walkAtLeastOneSep=function(e,t,r){var n=restForRepetitionWithSeparator(e,t,r);this.walk(e,n)},RestWalker.prototype.walkMany=function(e,t,r){var n=[new i.Option({definition:e.definition})].concat(t,r);this.walk(e,n)},RestWalker.prototype.walkManySep=function(e,t,r){var n=restForRepetitionWithSeparator(e,t,r);this.walk(e,n)},RestWalker.prototype.walkOr=function(e,t,r){var o=this,a=t.concat(r);(0,n.forEach)(e.definition,function(e){var t=new i.Alternative({definition:[e]});o.walk(t,a)})},RestWalker}();function restForRepetitionWithSeparator(e,t,r){return[new i.Option({definition:[new i.Terminal({terminalType:e.separator})].concat(e.definition)})].concat(t,r)}t.RestWalker=o},72092:function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedActionsParser=t.CstParser=t.Parser=t.EMPTY_ALT=t.ParserDefinitionErrorType=t.DEFAULT_RULE_CONFIG=t.DEFAULT_PARSER_CONFIG=t.END_OF_FILE=void 0;var a=r(91433),s=r(40291),c=r(40711),l=r(23566),u=r(70108),d=r(8133),p=r(4966),f=r(57745),m=r(55453),g=r(54154),y=r(60586),v=r(94442),x=r(54480),O=r(21798),R=r(21270),A=r(46657);function EMPTY_ALT(e){return void 0===e&&(e=void 0),function(){return e}}t.END_OF_FILE=(0,c.createTokenInstance)(c.EOF,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(t.END_OF_FILE),t.DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:l.defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),t.DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0}),(n=t.ParserDefinitionErrorType||(t.ParserDefinitionErrorType={}))[n.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",n[n.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",n[n.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",n[n.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",n[n.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",n[n.LEFT_RECURSION=5]="LEFT_RECURSION",n[n.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",n[n.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",n[n.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",n[n.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",n[n.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",n[n.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",n[n.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t.EMPTY_ALT=EMPTY_ALT;var b=function(){function Parser(e,r){if(this.definitionErrors=[],this.selfAnalysisDone=!1,this.initErrorHandler(r),this.initLexerAdapter(),this.initLooksAhead(r),this.initRecognizerEngine(e,r),this.initRecoverable(r),this.initTreeBuilder(r),this.initContentAssist(),this.initGastRecorder(r),this.initPerformanceTracer(r),(0,a.has)(r,"ignoredIssues"))throw Error("The <ignoredIssues> IParserConfig property has been deprecated.\n	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n	For further details.");this.skipValidations=(0,a.has)(r,"skipValidations")?r.skipValidations:t.DEFAULT_PARSER_CONFIG.skipValidations}return Parser.performSelfAnalysis=function(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")},Parser.prototype.performSelfAnalysis=function(){var e=this;this.TRACE_INIT("performSelfAnalysis",function(){e.selfAnalysisDone=!0;var t=e.className;e.TRACE_INIT("toFastProps",function(){(0,a.toFastProperties)(e)}),e.TRACE_INIT("Grammar Recording",function(){try{e.enableRecording(),(0,a.forEach)(e.definedRulesNames,function(t){var r=e[t].originalGrammarAction,n=void 0;e.TRACE_INIT(t+" Rule",function(){n=e.topLevelRuleRecord(t,r)}),e.gastProductionsCache[t]=n})}finally{e.disableRecording()}});var r=[];if(e.TRACE_INIT("Grammar Resolving",function(){r=(0,u.resolveGrammar)({rules:(0,a.values)(e.gastProductionsCache)}),e.definitionErrors=e.definitionErrors.concat(r)}),e.TRACE_INIT("Grammar Validations",function(){if((0,a.isEmpty)(r)&&!1===e.skipValidations){var n=(0,u.validateGrammar)({rules:(0,a.values)(e.gastProductionsCache),maxLookahead:e.maxLookahead,tokenTypes:(0,a.values)(e.tokensMap),errMsgProvider:l.defaultGrammarValidatorErrorProvider,grammarName:t});e.definitionErrors=e.definitionErrors.concat(n)}}),(0,a.isEmpty)(e.definitionErrors)&&(e.recoveryEnabled&&e.TRACE_INIT("computeAllProdsFollows",function(){var t=(0,s.computeAllProdsFollows)((0,a.values)(e.gastProductionsCache));e.resyncFollows=t}),e.TRACE_INIT("ComputeLookaheadFunctions",function(){e.preComputeLookaheadFunctions((0,a.values)(e.gastProductionsCache))})),!Parser.DEFER_DEFINITION_ERRORS_HANDLING&&!(0,a.isEmpty)(e.definitionErrors))throw Error("Parser Definition Errors detected:\n "+(0,a.map)(e.definitionErrors,function(e){return e.message}).join("\n-------------------------------\n"))})},Parser.DEFER_DEFINITION_ERRORS_HANDLING=!1,Parser}();t.Parser=b,(0,A.applyMixins)(b,[d.Recoverable,p.LooksAhead,f.TreeBuilder,m.LexerAdapter,y.RecognizerEngine,g.RecognizerApi,v.ErrorHandler,x.ContentAssist,O.GastRecorder,R.PerformanceTracer]);var C=function(e){function CstParser(r,n){void 0===n&&(n=t.DEFAULT_PARSER_CONFIG);var i=(0,a.cloneObj)(n);return i.outputCst=!0,e.call(this,r,i)||this}return o(CstParser,e),CstParser}(b);t.CstParser=C;var _=function(e){function EmbeddedActionsParser(r,n){void 0===n&&(n=t.DEFAULT_PARSER_CONFIG);var i=(0,a.cloneObj)(n);return i.outputCst=!1,e.call(this,r,i)||this}return o(EmbeddedActionsParser,e),EmbeddedActionsParser}(b);t.EmbeddedActionsParser=_},54480:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentAssist=void 0;var n=r(2717),i=r(91433),o=function(){function ContentAssist(){}return ContentAssist.prototype.initContentAssist=function(){},ContentAssist.prototype.computeContentAssist=function(e,t){var r=this.gastProductionsCache[e];if((0,i.isUndefined)(r))throw Error("Rule ->"+e+"<- does not exist in this grammar.");return(0,n.nextPossibleTokensAfter)([r],t,this.tokenMatcher,this.maxLookahead)},ContentAssist.prototype.getNextPossibleTokenTypes=function(e){var t=(0,i.first)(e.ruleStack),r=this.getGAstProductions()[t];return new n.NextAfterTokenWalker(r,e).startWalking()},ContentAssist}();t.ContentAssist=o},94442:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorHandler=void 0;var n=r(60193),i=r(91433),o=r(61054),a=r(72092),s=function(){function ErrorHandler(){}return ErrorHandler.prototype.initErrorHandler=function(e){this._errors=[],this.errorMessageProvider=(0,i.has)(e,"errorMessageProvider")?e.errorMessageProvider:a.DEFAULT_PARSER_CONFIG.errorMessageProvider},ErrorHandler.prototype.SAVE_ERROR=function(e){if((0,n.isRecognitionException)(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:(0,i.cloneArr)(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(ErrorHandler.prototype,"errors",{get:function(){return(0,i.cloneArr)(this._errors)},set:function(e){this._errors=e},enumerable:!1,configurable:!0}),ErrorHandler.prototype.raiseEarlyExitException=function(e,t,r){for(var i=this.getCurrRuleFullName(),a=this.getGAstProductions()[i],s=(0,o.getLookaheadPathsForOptionalProd)(e,a,t,this.maxLookahead)[0],c=[],l=1;l<=this.maxLookahead;l++)c.push(this.LA(l));var u=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:s,actual:c,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new n.EarlyExitException(u,this.LA(1),this.LA(0)))},ErrorHandler.prototype.raiseNoAltException=function(e,t){for(var r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],a=(0,o.getLookaheadPathsForOr)(e,i,this.maxLookahead),s=[],c=1;c<=this.maxLookahead;c++)s.push(this.LA(c));var l=this.LA(0),u=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:a,actual:s,previous:l,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new n.NoViableAltException(u,this.LA(1),l))},ErrorHandler}();t.ErrorHandler=s},21798:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GastRecorder=void 0;var n=r(91433),i=r(84925),o=r(80593),a=r(91122),s=r(40711),c=r(72092),l=r(61729),u={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(u);var d=Math.pow(2,l.BITS_FOR_OCCURRENCE_IDX)-1,p=(0,s.createToken)({name:"RECORDING_PHASE_TOKEN",pattern:o.Lexer.NA});(0,a.augmentTokenTypes)([p]);var f=(0,s.createTokenInstance)(p,"This IToken indicates the Parser is in Recording Phase\n	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(f);var m={name:"This CSTNode indicates the Parser is in Recording Phase\n	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}},g=function(){function GastRecorder(){}return GastRecorder.prototype.initGastRecorder=function(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1},GastRecorder.prototype.enableRecording=function(){var e=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",function(){for(var _loop_1=function(t){var r=t>0?t:"";e["CONSUME"+r]=function(e,r){return this.consumeInternalRecord(e,t,r)},e["SUBRULE"+r]=function(e,r){return this.subruleInternalRecord(e,t,r)},e["OPTION"+r]=function(e){return this.optionInternalRecord(e,t)},e["OR"+r]=function(e){return this.orInternalRecord(e,t)},e["MANY"+r]=function(e){this.manyInternalRecord(t,e)},e["MANY_SEP"+r]=function(e){this.manySepFirstInternalRecord(t,e)},e["AT_LEAST_ONE"+r]=function(e){this.atLeastOneInternalRecord(t,e)},e["AT_LEAST_ONE_SEP"+r]=function(e){this.atLeastOneSepFirstInternalRecord(t,e)}},t=0;t<10;t++)_loop_1(t);e.consume=function(e,t,r){return this.consumeInternalRecord(t,e,r)},e.subrule=function(e,t,r){return this.subruleInternalRecord(t,e,r)},e.option=function(e,t){return this.optionInternalRecord(t,e)},e.or=function(e,t){return this.orInternalRecord(t,e)},e.many=function(e,t){this.manyInternalRecord(e,t)},e.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},e.ACTION=e.ACTION_RECORD,e.BACKTRACK=e.BACKTRACK_RECORD,e.LA=e.LA_RECORD})},GastRecorder.prototype.disableRecording=function(){var e=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",function(){for(var t=0;t<10;t++){var r=t>0?t:"";delete e["CONSUME"+r],delete e["SUBRULE"+r],delete e["OPTION"+r],delete e["OR"+r],delete e["MANY"+r],delete e["MANY_SEP"+r],delete e["AT_LEAST_ONE"+r],delete e["AT_LEAST_ONE_SEP"+r]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})},GastRecorder.prototype.ACTION_RECORD=function(e){},GastRecorder.prototype.BACKTRACK_RECORD=function(e,t){return function(){return!0}},GastRecorder.prototype.LA_RECORD=function(e){return c.END_OF_FILE},GastRecorder.prototype.topLevelRuleRecord=function(e,t){try{var r=new i.Rule({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),t.call(this),this.recordingProdStack.pop(),r}catch(e){if(!0!==e.KNOWN_RECORDER_ERROR)try{e.message=e.message+'\n	 This error was thrown during the "grammar recording phase" For more info see:\n	https://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch(t){throw e}throw e}},GastRecorder.prototype.optionInternalRecord=function(e,t){return recordProd.call(this,i.Option,e,t)},GastRecorder.prototype.atLeastOneInternalRecord=function(e,t){recordProd.call(this,i.RepetitionMandatory,t,e)},GastRecorder.prototype.atLeastOneSepFirstInternalRecord=function(e,t){recordProd.call(this,i.RepetitionMandatoryWithSeparator,t,e,!0)},GastRecorder.prototype.manyInternalRecord=function(e,t){recordProd.call(this,i.Repetition,t,e)},GastRecorder.prototype.manySepFirstInternalRecord=function(e,t){recordProd.call(this,i.RepetitionWithSeparator,t,e,!0)},GastRecorder.prototype.orInternalRecord=function(e,t){return recordOrProd.call(this,e,t)},GastRecorder.prototype.subruleInternalRecord=function(e,t,r){if(assertMethodIdxIsValid(t),!e||!1===(0,n.has)(e,"ruleName")){var o=Error("<SUBRULE"+getIdxSuffix(t)+"> argument is invalid expecting a Parser method reference but got: <"+JSON.stringify(e)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw o.KNOWN_RECORDER_ERROR=!0,o}var a=(0,n.peek)(this.recordingProdStack),s=e.ruleName,c=new i.NonTerminal({idx:t,nonTerminalName:s,label:null==r?void 0:r.LABEL,referencedRule:void 0});return a.definition.push(c),this.outputCst?m:u},GastRecorder.prototype.consumeInternalRecord=function(e,t,r){if(assertMethodIdxIsValid(t),!(0,a.hasShortKeyProperty)(e)){var o=Error("<CONSUME"+getIdxSuffix(t)+"> argument is invalid expecting a TokenType reference but got: <"+JSON.stringify(e)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw o.KNOWN_RECORDER_ERROR=!0,o}var s=(0,n.peek)(this.recordingProdStack),c=new i.Terminal({idx:t,terminalType:e,label:null==r?void 0:r.LABEL});return s.definition.push(c),f},GastRecorder}();function recordProd(e,t,r,i){void 0===i&&(i=!1),assertMethodIdxIsValid(r);var o=(0,n.peek)(this.recordingProdStack),a=(0,n.isFunction)(t)?t:t.DEF,s=new e({definition:[],idx:r});return i&&(s.separator=t.SEP),(0,n.has)(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(s),a.call(this),o.definition.push(s),this.recordingProdStack.pop(),u}function recordOrProd(e,t){var r=this;assertMethodIdxIsValid(t);var o=(0,n.peek)(this.recordingProdStack),a=!1===(0,n.isArray)(e),s=!1===a?e:e.DEF,c=new i.Alternation({definition:[],idx:t,ignoreAmbiguities:a&&!0===e.IGNORE_AMBIGUITIES});(0,n.has)(e,"MAX_LOOKAHEAD")&&(c.maxLookahead=e.MAX_LOOKAHEAD);var l=(0,n.some)(s,function(e){return(0,n.isFunction)(e.GATE)});return c.hasPredicates=l,o.definition.push(c),(0,n.forEach)(s,function(e){var t=new i.Alternative({definition:[]});c.definition.push(t),(0,n.has)(e,"IGNORE_AMBIGUITIES")?t.ignoreAmbiguities=e.IGNORE_AMBIGUITIES:(0,n.has)(e,"GATE")&&(t.ignoreAmbiguities=!0),r.recordingProdStack.push(t),e.ALT.call(r),r.recordingProdStack.pop()}),u}function getIdxSuffix(e){return 0===e?"":""+e}function assertMethodIdxIsValid(e){if(e<0||e>d){var t=Error("Invalid DSL Method idx value: <"+e+">\n	Idx value must be a none negative value smaller than "+(d+1));throw t.KNOWN_RECORDER_ERROR=!0,t}}t.GastRecorder=g},55453:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LexerAdapter=void 0;var n=r(72092),i=function(){function LexerAdapter(){}return LexerAdapter.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(LexerAdapter.prototype,"input",{get:function(){return this.tokVector},set:function(e){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length},enumerable:!1,configurable:!0}),LexerAdapter.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):n.END_OF_FILE},LexerAdapter.prototype.LA=function(e){var t=this.currIdx+e;return t<0||this.tokVectorLength<=t?n.END_OF_FILE:this.tokVector[t]},LexerAdapter.prototype.consumeToken=function(){this.currIdx++},LexerAdapter.prototype.exportLexerState=function(){return this.currIdx},LexerAdapter.prototype.importLexerState=function(e){this.currIdx=e},LexerAdapter.prototype.resetLexerState=function(){this.currIdx=-1},LexerAdapter.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},LexerAdapter.prototype.getLexerPosition=function(){return this.exportLexerState()},LexerAdapter}();t.LexerAdapter=i},4966:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LooksAhead=void 0;var n=r(61054),i=r(91433),o=r(72092),a=r(61729),s=r(48527),c=function(){function LooksAhead(){}return LooksAhead.prototype.initLooksAhead=function(e){this.dynamicTokensEnabled=(0,i.has)(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:o.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=(0,i.has)(e,"maxLookahead")?e.maxLookahead:o.DEFAULT_PARSER_CONFIG.maxLookahead,this.lookAheadFuncsCache=(0,i.isES2015MapSupported)()?new Map:[],(0,i.isES2015MapSupported)()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},LooksAhead.prototype.preComputeLookaheadFunctions=function(e){var t=this;(0,i.forEach)(e,function(e){t.TRACE_INIT(e.name+" Rule Lookahead",function(){var r=(0,s.collectMethods)(e),o=r.alternation,c=r.repetition,l=r.option,u=r.repetitionMandatory,d=r.repetitionMandatoryWithSeparator,p=r.repetitionWithSeparator;(0,i.forEach)(o,function(r){var i=0===r.idx?"":r.idx;t.TRACE_INIT(""+(0,s.getProductionDslName)(r)+i,function(){var i=(0,n.buildLookaheadFuncForOr)(r.idx,e,r.maxLookahead||t.maxLookahead,r.hasPredicates,t.dynamicTokensEnabled,t.lookAheadBuilderForAlternatives),o=(0,a.getKeyForAutomaticLookahead)(t.fullRuleNameToShort[e.name],a.OR_IDX,r.idx);t.setLaFuncCache(o,i)})}),(0,i.forEach)(c,function(r){t.computeLookaheadFunc(e,r.idx,a.MANY_IDX,n.PROD_TYPE.REPETITION,r.maxLookahead,(0,s.getProductionDslName)(r))}),(0,i.forEach)(l,function(r){t.computeLookaheadFunc(e,r.idx,a.OPTION_IDX,n.PROD_TYPE.OPTION,r.maxLookahead,(0,s.getProductionDslName)(r))}),(0,i.forEach)(u,function(r){t.computeLookaheadFunc(e,r.idx,a.AT_LEAST_ONE_IDX,n.PROD_TYPE.REPETITION_MANDATORY,r.maxLookahead,(0,s.getProductionDslName)(r))}),(0,i.forEach)(d,function(r){t.computeLookaheadFunc(e,r.idx,a.AT_LEAST_ONE_SEP_IDX,n.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,r.maxLookahead,(0,s.getProductionDslName)(r))}),(0,i.forEach)(p,function(r){t.computeLookaheadFunc(e,r.idx,a.MANY_SEP_IDX,n.PROD_TYPE.REPETITION_WITH_SEPARATOR,r.maxLookahead,(0,s.getProductionDslName)(r))})})})},LooksAhead.prototype.computeLookaheadFunc=function(e,t,r,i,o,s){var c=this;this.TRACE_INIT(""+s+(0===t?"":t),function(){var s=(0,n.buildLookaheadFuncForOptionalProd)(t,e,o||c.maxLookahead,c.dynamicTokensEnabled,i,c.lookAheadBuilderForOptional),l=(0,a.getKeyForAutomaticLookahead)(c.fullRuleNameToShort[e.name],r,t);c.setLaFuncCache(l,s)})},LooksAhead.prototype.lookAheadBuilderForOptional=function(e,t,r){return(0,n.buildSingleAlternativeLookaheadFunction)(e,t,r)},LooksAhead.prototype.lookAheadBuilderForAlternatives=function(e,t,r,i){return(0,n.buildAlternativesLookAheadFunc)(e,t,r,i)},LooksAhead.prototype.getKeyForAutomaticLookahead=function(e,t){var r=this.getLastExplicitRuleShortName();return(0,a.getKeyForAutomaticLookahead)(r,e,t)},LooksAhead.prototype.getLaFuncFromCache=function(e){},LooksAhead.prototype.getLaFuncFromMap=function(e){return this.lookAheadFuncsCache.get(e)},LooksAhead.prototype.getLaFuncFromObj=function(e){return this.lookAheadFuncsCache[e]},LooksAhead.prototype.setLaFuncCache=function(e,t){},LooksAhead.prototype.setLaFuncCacheUsingMap=function(e,t){this.lookAheadFuncsCache.set(e,t)},LooksAhead.prototype.setLaFuncUsingObj=function(e,t){this.lookAheadFuncsCache[e]=t},LooksAhead}();t.LooksAhead=c},21270:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceTracer=void 0;var n=r(91433),i=r(72092),o=function(){function PerformanceTracer(){}return PerformanceTracer.prototype.initPerformanceTracer=function(e){if((0,n.has)(e,"traceInitPerf")){var t=e.traceInitPerf,r="number"==typeof t;this.traceInitMaxIdent=r?t:1/0,this.traceInitPerf=r?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=i.DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1},PerformanceTracer.prototype.TRACE_INIT=function(e,t){if(!0!==this.traceInitPerf)return t();this.traceInitIndent++;var r=Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(r+"--> <"+e+">");var i=(0,n.timer)(t),o=i.time,a=i.value,s=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(r+"<-- <"+e+"> time: "+o+"ms"),this.traceInitIndent--,a},PerformanceTracer}();t.PerformanceTracer=o},54154:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerApi=void 0;var n=r(91433),i=r(60193),o=r(72092),a=r(23566),s=r(6678),c=r(84925),l=function(){function RecognizerApi(){}return RecognizerApi.prototype.ACTION=function(e){return e.call(this)},RecognizerApi.prototype.consume=function(e,t,r){return this.consumeInternal(t,e,r)},RecognizerApi.prototype.subrule=function(e,t,r){return this.subruleInternal(t,e,r)},RecognizerApi.prototype.option=function(e,t){return this.optionInternal(t,e)},RecognizerApi.prototype.or=function(e,t){return this.orInternal(t,e)},RecognizerApi.prototype.many=function(e,t){return this.manyInternal(e,t)},RecognizerApi.prototype.atLeastOne=function(e,t){return this.atLeastOneInternal(e,t)},RecognizerApi.prototype.CONSUME=function(e,t){return this.consumeInternal(e,0,t)},RecognizerApi.prototype.CONSUME1=function(e,t){return this.consumeInternal(e,1,t)},RecognizerApi.prototype.CONSUME2=function(e,t){return this.consumeInternal(e,2,t)},RecognizerApi.prototype.CONSUME3=function(e,t){return this.consumeInternal(e,3,t)},RecognizerApi.prototype.CONSUME4=function(e,t){return this.consumeInternal(e,4,t)},RecognizerApi.prototype.CONSUME5=function(e,t){return this.consumeInternal(e,5,t)},RecognizerApi.prototype.CONSUME6=function(e,t){return this.consumeInternal(e,6,t)},RecognizerApi.prototype.CONSUME7=function(e,t){return this.consumeInternal(e,7,t)},RecognizerApi.prototype.CONSUME8=function(e,t){return this.consumeInternal(e,8,t)},RecognizerApi.prototype.CONSUME9=function(e,t){return this.consumeInternal(e,9,t)},RecognizerApi.prototype.SUBRULE=function(e,t){return this.subruleInternal(e,0,t)},RecognizerApi.prototype.SUBRULE1=function(e,t){return this.subruleInternal(e,1,t)},RecognizerApi.prototype.SUBRULE2=function(e,t){return this.subruleInternal(e,2,t)},RecognizerApi.prototype.SUBRULE3=function(e,t){return this.subruleInternal(e,3,t)},RecognizerApi.prototype.SUBRULE4=function(e,t){return this.subruleInternal(e,4,t)},RecognizerApi.prototype.SUBRULE5=function(e,t){return this.subruleInternal(e,5,t)},RecognizerApi.prototype.SUBRULE6=function(e,t){return this.subruleInternal(e,6,t)},RecognizerApi.prototype.SUBRULE7=function(e,t){return this.subruleInternal(e,7,t)},RecognizerApi.prototype.SUBRULE8=function(e,t){return this.subruleInternal(e,8,t)},RecognizerApi.prototype.SUBRULE9=function(e,t){return this.subruleInternal(e,9,t)},RecognizerApi.prototype.OPTION=function(e){return this.optionInternal(e,0)},RecognizerApi.prototype.OPTION1=function(e){return this.optionInternal(e,1)},RecognizerApi.prototype.OPTION2=function(e){return this.optionInternal(e,2)},RecognizerApi.prototype.OPTION3=function(e){return this.optionInternal(e,3)},RecognizerApi.prototype.OPTION4=function(e){return this.optionInternal(e,4)},RecognizerApi.prototype.OPTION5=function(e){return this.optionInternal(e,5)},RecognizerApi.prototype.OPTION6=function(e){return this.optionInternal(e,6)},RecognizerApi.prototype.OPTION7=function(e){return this.optionInternal(e,7)},RecognizerApi.prototype.OPTION8=function(e){return this.optionInternal(e,8)},RecognizerApi.prototype.OPTION9=function(e){return this.optionInternal(e,9)},RecognizerApi.prototype.OR=function(e){return this.orInternal(e,0)},RecognizerApi.prototype.OR1=function(e){return this.orInternal(e,1)},RecognizerApi.prototype.OR2=function(e){return this.orInternal(e,2)},RecognizerApi.prototype.OR3=function(e){return this.orInternal(e,3)},RecognizerApi.prototype.OR4=function(e){return this.orInternal(e,4)},RecognizerApi.prototype.OR5=function(e){return this.orInternal(e,5)},RecognizerApi.prototype.OR6=function(e){return this.orInternal(e,6)},RecognizerApi.prototype.OR7=function(e){return this.orInternal(e,7)},RecognizerApi.prototype.OR8=function(e){return this.orInternal(e,8)},RecognizerApi.prototype.OR9=function(e){return this.orInternal(e,9)},RecognizerApi.prototype.MANY=function(e){this.manyInternal(0,e)},RecognizerApi.prototype.MANY1=function(e){this.manyInternal(1,e)},RecognizerApi.prototype.MANY2=function(e){this.manyInternal(2,e)},RecognizerApi.prototype.MANY3=function(e){this.manyInternal(3,e)},RecognizerApi.prototype.MANY4=function(e){this.manyInternal(4,e)},RecognizerApi.prototype.MANY5=function(e){this.manyInternal(5,e)},RecognizerApi.prototype.MANY6=function(e){this.manyInternal(6,e)},RecognizerApi.prototype.MANY7=function(e){this.manyInternal(7,e)},RecognizerApi.prototype.MANY8=function(e){this.manyInternal(8,e)},RecognizerApi.prototype.MANY9=function(e){this.manyInternal(9,e)},RecognizerApi.prototype.MANY_SEP=function(e){this.manySepFirstInternal(0,e)},RecognizerApi.prototype.MANY_SEP1=function(e){this.manySepFirstInternal(1,e)},RecognizerApi.prototype.MANY_SEP2=function(e){this.manySepFirstInternal(2,e)},RecognizerApi.prototype.MANY_SEP3=function(e){this.manySepFirstInternal(3,e)},RecognizerApi.prototype.MANY_SEP4=function(e){this.manySepFirstInternal(4,e)},RecognizerApi.prototype.MANY_SEP5=function(e){this.manySepFirstInternal(5,e)},RecognizerApi.prototype.MANY_SEP6=function(e){this.manySepFirstInternal(6,e)},RecognizerApi.prototype.MANY_SEP7=function(e){this.manySepFirstInternal(7,e)},RecognizerApi.prototype.MANY_SEP8=function(e){this.manySepFirstInternal(8,e)},RecognizerApi.prototype.MANY_SEP9=function(e){this.manySepFirstInternal(9,e)},RecognizerApi.prototype.AT_LEAST_ONE=function(e){this.atLeastOneInternal(0,e)},RecognizerApi.prototype.AT_LEAST_ONE1=function(e){return this.atLeastOneInternal(1,e)},RecognizerApi.prototype.AT_LEAST_ONE2=function(e){this.atLeastOneInternal(2,e)},RecognizerApi.prototype.AT_LEAST_ONE3=function(e){this.atLeastOneInternal(3,e)},RecognizerApi.prototype.AT_LEAST_ONE4=function(e){this.atLeastOneInternal(4,e)},RecognizerApi.prototype.AT_LEAST_ONE5=function(e){this.atLeastOneInternal(5,e)},RecognizerApi.prototype.AT_LEAST_ONE6=function(e){this.atLeastOneInternal(6,e)},RecognizerApi.prototype.AT_LEAST_ONE7=function(e){this.atLeastOneInternal(7,e)},RecognizerApi.prototype.AT_LEAST_ONE8=function(e){this.atLeastOneInternal(8,e)},RecognizerApi.prototype.AT_LEAST_ONE9=function(e){this.atLeastOneInternal(9,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP=function(e){this.atLeastOneSepFirstInternal(0,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP1=function(e){this.atLeastOneSepFirstInternal(1,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP2=function(e){this.atLeastOneSepFirstInternal(2,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP3=function(e){this.atLeastOneSepFirstInternal(3,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP4=function(e){this.atLeastOneSepFirstInternal(4,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP5=function(e){this.atLeastOneSepFirstInternal(5,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP6=function(e){this.atLeastOneSepFirstInternal(6,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP7=function(e){this.atLeastOneSepFirstInternal(7,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP8=function(e){this.atLeastOneSepFirstInternal(8,e)},RecognizerApi.prototype.AT_LEAST_ONE_SEP9=function(e){this.atLeastOneSepFirstInternal(9,e)},RecognizerApi.prototype.RULE=function(e,t,r){if(void 0===r&&(r=o.DEFAULT_RULE_CONFIG),(0,n.contains)(this.definedRulesNames,e)){var i={message:a.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:o.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(i)}this.definedRulesNames.push(e);var s=this.defineRule(e,t,r);return this[e]=s,s},RecognizerApi.prototype.OVERRIDE_RULE=function(e,t,r){void 0===r&&(r=o.DEFAULT_RULE_CONFIG);var n=[];n=n.concat((0,s.validateRuleIsOverridden)(e,this.definedRulesNames,this.className)),this.definitionErrors=this.definitionErrors.concat(n);var i=this.defineRule(e,t,r);return this[e]=i,i},RecognizerApi.prototype.BACKTRACK=function(e,t){return function(){this.isBackTrackingStack.push(1);var r=this.saveRecogState();try{return e.apply(this,t),!0}catch(e){if((0,i.isRecognitionException)(e))return!1;throw e}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}},RecognizerApi.prototype.getGAstProductions=function(){return this.gastProductionsCache},RecognizerApi.prototype.getSerializedGastProductions=function(){return(0,c.serializeGrammar)((0,n.values)(this.gastProductionsCache))},RecognizerApi}();t.RecognizerApi=l},60586:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerEngine=void 0;var n=r(91433),i=r(61729),o=r(60193),a=r(61054),s=r(2717),c=r(72092),l=r(8133),u=r(40711),d=r(91122),p=r(98543),f=function(){function RecognizerEngine(){}return RecognizerEngine.prototype.initRecognizerEngine=function(e,t){if(this.className=(0,p.classNameFromInstance)(this),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=d.tokenStructuredMatcherNoCategories,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},(0,n.has)(t,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n	For Further details.");if((0,n.isArray)(e)){if((0,n.isEmpty)(e))throw Error("A Token Vocabulary cannot be empty.\n	Note that the first argument for the parser constructor\n	is no longer a Token vector (since v4.0).");if("number"==typeof e[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n	For Further details.")}if((0,n.isArray)(e))this.tokensMap=(0,n.reduce)(e,function(e,t){return e[t.name]=t,e},{});else if((0,n.has)(e,"modes")&&(0,n.every)((0,n.flatten)((0,n.values)(e.modes)),d.isTokenType)){var r=(0,n.flatten)((0,n.values)(e.modes)),i=(0,n.uniq)(r);this.tokensMap=(0,n.reduce)(i,function(e,t){return e[t.name]=t,e},{})}else if((0,n.isObject)(e))this.tokensMap=(0,n.cloneObj)(e);else throw Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=u.EOF;var o=(0,n.every)((0,n.values)(e),function(e){return(0,n.isEmpty)(e.categoryMatches)});this.tokenMatcher=o?d.tokenStructuredMatcherNoCategories:d.tokenStructuredMatcher,(0,d.augmentTokenTypes)((0,n.values)(this.tokensMap))},RecognizerEngine.prototype.defineRule=function(e,t,r){if(this.selfAnalysisDone)throw Error("Grammar rule <"+e+"> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.");var o=(0,n.has)(r,"resyncEnabled")?r.resyncEnabled:c.DEFAULT_RULE_CONFIG.resyncEnabled,a=(0,n.has)(r,"recoveryValueFunc")?r.recoveryValueFunc:c.DEFAULT_RULE_CONFIG.recoveryValueFunc,s=this.ruleShortNameIdx<<i.BITS_FOR_METHOD_TYPE+i.BITS_FOR_OCCURRENCE_IDX;function invokeRuleWithTry(e){try{if(!0!==this.outputCst)return t.apply(this,e);t.apply(this,e);var r=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(r),r}catch(e){return this.invokeRuleCatch(e,o,a)}finally{this.ruleFinallyStateUpdate()}}this.ruleShortNameIdx++,this.shortRuleNameToFull[s]=e,this.fullRuleNameToShort[e]=s;var wrappedGrammarRule=function(t,r){return void 0===t&&(t=0),this.ruleInvocationStateUpdate(s,e,t),invokeRuleWithTry.call(this,r)};return wrappedGrammarRule.ruleName=e,wrappedGrammarRule.originalGrammarAction=t,wrappedGrammarRule},RecognizerEngine.prototype.invokeRuleCatch=function(e,t,r){var n=1===this.RULE_STACK.length,i=t&&!this.isBackTracking()&&this.recoveryEnabled;if((0,o.isRecognitionException)(e)){if(i){var a=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(a)){if(e.resyncedTokens=this.reSyncTo(a),!this.outputCst)return r();var s=this.CST_STACK[this.CST_STACK.length-1];return s.recoveredNode=!0,s}if(this.outputCst){var s=this.CST_STACK[this.CST_STACK.length-1];s.recoveredNode=!0,e.partialCstResult=s}throw e}if(n)return this.moveToTerminatedState(),r()}throw e},RecognizerEngine.prototype.optionInternal=function(e,t){var r=this.getKeyForAutomaticLookahead(i.OPTION_IDX,t);return this.optionInternalLogic(e,t,r)},RecognizerEngine.prototype.optionInternalLogic=function(e,t,r){var n,i,o=this,a=this.getLaFuncFromCache(r);if(void 0!==e.DEF){if(n=e.DEF,void 0!==(i=e.GATE)){var s=a;a=function(){return i.call(o)&&s.call(o)}}}else n=e;if(!0===a.call(this))return n.call(this)},RecognizerEngine.prototype.atLeastOneInternal=function(e,t){var r=this.getKeyForAutomaticLookahead(i.AT_LEAST_ONE_IDX,e);return this.atLeastOneInternalLogic(e,t,r)},RecognizerEngine.prototype.atLeastOneInternalLogic=function(e,t,r){var n,o,c=this,l=this.getLaFuncFromCache(r);if(void 0!==t.DEF){if(n=t.DEF,void 0!==(o=t.GATE)){var u=l;l=function(){return o.call(c)&&u.call(c)}}}else n=t;if(!0===l.call(this))for(var d=this.doSingleRepetition(n);!0===l.call(this)&&!0===d;)d=this.doSingleRepetition(n);else throw this.raiseEarlyExitException(e,a.PROD_TYPE.REPETITION_MANDATORY,t.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],l,i.AT_LEAST_ONE_IDX,e,s.NextTerminalAfterAtLeastOneWalker)},RecognizerEngine.prototype.atLeastOneSepFirstInternal=function(e,t){var r=this.getKeyForAutomaticLookahead(i.AT_LEAST_ONE_SEP_IDX,e);this.atLeastOneSepFirstInternalLogic(e,t,r)},RecognizerEngine.prototype.atLeastOneSepFirstInternalLogic=function(e,t,r){var n=this,o=t.DEF,c=t.SEP;if(!0===this.getLaFuncFromCache(r).call(this)){o.call(this);for(var separatorLookAheadFunc=function(){return n.tokenMatcher(n.LA(1),c)};!0===this.tokenMatcher(this.LA(1),c);)this.CONSUME(c),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,c,separatorLookAheadFunc,o,s.NextTerminalAfterAtLeastOneSepWalker],separatorLookAheadFunc,i.AT_LEAST_ONE_SEP_IDX,e,s.NextTerminalAfterAtLeastOneSepWalker)}else throw this.raiseEarlyExitException(e,a.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG)},RecognizerEngine.prototype.manyInternal=function(e,t){var r=this.getKeyForAutomaticLookahead(i.MANY_IDX,e);return this.manyInternalLogic(e,t,r)},RecognizerEngine.prototype.manyInternalLogic=function(e,t,r){var n,o,a=this,c=this.getLaFuncFromCache(r);if(void 0!==t.DEF){if(n=t.DEF,void 0!==(o=t.GATE)){var l=c;c=function(){return o.call(a)&&l.call(a)}}}else n=t;for(var u=!0;!0===c.call(this)&&!0===u;)u=this.doSingleRepetition(n);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],c,i.MANY_IDX,e,s.NextTerminalAfterManyWalker,u)},RecognizerEngine.prototype.manySepFirstInternal=function(e,t){var r=this.getKeyForAutomaticLookahead(i.MANY_SEP_IDX,e);this.manySepFirstInternalLogic(e,t,r)},RecognizerEngine.prototype.manySepFirstInternalLogic=function(e,t,r){var n=this,o=t.DEF,a=t.SEP;if(!0===this.getLaFuncFromCache(r).call(this)){o.call(this);for(var separatorLookAheadFunc=function(){return n.tokenMatcher(n.LA(1),a)};!0===this.tokenMatcher(this.LA(1),a);)this.CONSUME(a),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,a,separatorLookAheadFunc,o,s.NextTerminalAfterManySepWalker],separatorLookAheadFunc,i.MANY_SEP_IDX,e,s.NextTerminalAfterManySepWalker)}},RecognizerEngine.prototype.repetitionSepSecondInternal=function(e,t,r,n,o){for(;r();)this.CONSUME(t),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,r,n,o],r,i.AT_LEAST_ONE_SEP_IDX,e,o)},RecognizerEngine.prototype.doSingleRepetition=function(e){var t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t},RecognizerEngine.prototype.orInternal=function(e,t){var r=this.getKeyForAutomaticLookahead(i.OR_IDX,t),o=(0,n.isArray)(e)?e:e.DEF,a=this.getLaFuncFromCache(r).call(this,o);if(void 0!==a)return o[a].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)},RecognizerEngine.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){var e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new o.NotAllInputParsedException(t,e))}},RecognizerEngine.prototype.subruleInternal=function(e,t,r){var n;try{var i=void 0!==r?r.ARGS:void 0;return n=e.call(this,t,i),this.cstPostNonTerminal(n,void 0!==r&&void 0!==r.LABEL?r.LABEL:e.ruleName),n}catch(t){this.subruleInternalError(t,r,e.ruleName)}},RecognizerEngine.prototype.subruleInternalError=function(e,t,r){throw(0,o.isRecognitionException)(e)&&void 0!==e.partialCstResult&&(this.cstPostNonTerminal(e.partialCstResult,void 0!==t&&void 0!==t.LABEL?t.LABEL:r),delete e.partialCstResult),e},RecognizerEngine.prototype.consumeInternal=function(e,t,r){var n;try{var i=this.LA(1);!0===this.tokenMatcher(i,e)?(this.consumeToken(),n=i):this.consumeInternalError(e,i,r)}catch(r){n=this.consumeInternalRecovery(e,t,r)}return this.cstPostTerminal(void 0!==r&&void 0!==r.LABEL?r.LABEL:e.name,n),n},RecognizerEngine.prototype.consumeInternalError=function(e,t,r){var n,i=this.LA(0);throw n=void 0!==r&&r.ERR_MSG?r.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new o.MismatchedTokenException(n,t,i))},RecognizerEngine.prototype.consumeInternalRecovery=function(e,t,r){if(this.recoveryEnabled&&"MismatchedTokenException"===r.name&&!this.isBackTracking()){var n=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,n)}catch(e){if(e.name===l.IN_RULE_RECOVERY_EXCEPTION)throw r;throw e}}else throw r},RecognizerEngine.prototype.saveRecogState=function(){var e=this.errors,t=(0,n.cloneArr)(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}},RecognizerEngine.prototype.reloadRecogState=function(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK},RecognizerEngine.prototype.ruleInvocationStateUpdate=function(e,t,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t,e)},RecognizerEngine.prototype.isBackTracking=function(){return 0!==this.isBackTrackingStack.length},RecognizerEngine.prototype.getCurrRuleFullName=function(){var e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]},RecognizerEngine.prototype.shortRuleNameToFullName=function(e){return this.shortRuleNameToFull[e]},RecognizerEngine.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),u.EOF)},RecognizerEngine.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},RecognizerEngine}();t.RecognizerEngine=f},8133:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attemptInRepetitionRecovery=t.Recoverable=t.InRuleRecoveryException=t.IN_RULE_RECOVERY_EXCEPTION=t.EOF_FOLLOW_KEY=void 0;var n=r(40711),i=r(91433),o=r(60193),a=r(2786),s=r(72092);function InRuleRecoveryException(e){this.name=t.IN_RULE_RECOVERY_EXCEPTION,this.message=e}t.EOF_FOLLOW_KEY={},t.IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException",t.InRuleRecoveryException=InRuleRecoveryException,InRuleRecoveryException.prototype=Error.prototype;var c=function(){function Recoverable(){}return Recoverable.prototype.initRecoverable=function(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=(0,i.has)(e,"recoveryEnabled")?e.recoveryEnabled:s.DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=attemptInRepetitionRecovery)},Recoverable.prototype.getTokenToInsert=function(e){var t=(0,n.createTokenInstance)(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t},Recoverable.prototype.canTokenTypeBeInsertedInRecovery=function(e){return!0},Recoverable.prototype.tryInRepetitionRecovery=function(e,t,r,n){for(var a=this,s=this.findReSyncTokenType(),c=this.exportLexerState(),l=[],u=!1,d=this.LA(1),p=this.LA(1),generateErrorMessage=function(){var e=a.LA(0),t=a.errorMessageProvider.buildMismatchTokenMessage({expected:n,actual:d,previous:e,ruleName:a.getCurrRuleFullName()}),r=new o.MismatchedTokenException(t,d,a.LA(0));r.resyncedTokens=(0,i.dropRight)(l),a.SAVE_ERROR(r)};!u;){if(this.tokenMatcher(p,n)){generateErrorMessage();return}if(r.call(this)){generateErrorMessage(),e.apply(this,t);return}this.tokenMatcher(p,s)?u=!0:(p=this.SKIP_TOKEN(),this.addToResyncTokens(p,l))}this.importLexerState(c)},Recoverable.prototype.shouldInRepetitionRecoveryBeTried=function(e,t,r){return!(!1===r||void 0===e||void 0===t||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))},Recoverable.prototype.getFollowsForInRuleRecovery=function(e,t){var r=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(r)},Recoverable.prototype.tryInRuleRecovery=function(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){var r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new InRuleRecoveryException("sad sad panda")},Recoverable.prototype.canPerformInRuleRecovery=function(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)},Recoverable.prototype.canRecoverWithSingleTokenInsertion=function(e,t){var r=this;if(!this.canTokenTypeBeInsertedInRecovery(e)||(0,i.isEmpty)(t))return!1;var n=this.LA(1);return void 0!==(0,i.find)(t,function(e){return r.tokenMatcher(n,e)})},Recoverable.prototype.canRecoverWithSingleTokenDeletion=function(e){return this.tokenMatcher(this.LA(2),e)},Recoverable.prototype.isInCurrentRuleReSyncSet=function(e){var t=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(t);return(0,i.contains)(r,e)},Recoverable.prototype.findReSyncTokenType=function(){for(var e=this.flattenFollowSet(),t=this.LA(1),r=2;;){var n=t.tokenType;if((0,i.contains)(e,n))return n;t=this.LA(r),r++}},Recoverable.prototype.getCurrFollowKey=function(){if(1===this.RULE_STACK.length)return t.EOF_FOLLOW_KEY;var e=this.getLastExplicitRuleShortName(),r=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:r,inRule:this.shortRuleNameToFullName(n)}},Recoverable.prototype.buildFullFollowKeyStack=function(){var e=this,r=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return(0,i.map)(r,function(i,o){return 0===o?t.EOF_FOLLOW_KEY:{ruleName:e.shortRuleNameToFullName(i),idxInCallingRule:n[o],inRule:e.shortRuleNameToFullName(r[o-1])}})},Recoverable.prototype.flattenFollowSet=function(){var e=this,t=(0,i.map)(this.buildFullFollowKeyStack(),function(t){return e.getFollowSetFromFollowKey(t)});return(0,i.flatten)(t)},Recoverable.prototype.getFollowSetFromFollowKey=function(e){if(e===t.EOF_FOLLOW_KEY)return[n.EOF];var r=e.ruleName+e.idxInCallingRule+a.IN+e.inRule;return this.resyncFollows[r]},Recoverable.prototype.addToResyncTokens=function(e,t){return this.tokenMatcher(e,n.EOF)||t.push(e),t},Recoverable.prototype.reSyncTo=function(e){for(var t=[],r=this.LA(1);!1===this.tokenMatcher(r,e);)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,t);return(0,i.dropRight)(t)},Recoverable.prototype.attemptInRepetitionRecovery=function(e,t,r,n,i,o,a){},Recoverable.prototype.getCurrentGrammarPath=function(e,t){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:(0,i.cloneArr)(this.RULE_OCCURRENCE_STACK),lastTok:e,lastTokOccurrence:t}},Recoverable.prototype.getHumanReadableRuleStack=function(){var e=this;return(0,i.map)(this.RULE_STACK,function(t){return e.shortRuleNameToFullName(t)})},Recoverable}();function attemptInRepetitionRecovery(e,t,r,i,o,a,s){var c=this.getKeyForAutomaticLookahead(i,o),l=this.firstAfterRepMap[c];if(void 0===l){var u=this.getCurrRuleFullName();l=new a(this.getGAstProductions()[u],o).startWalking(),this.firstAfterRepMap[c]=l}var d=l.token,p=l.occurrence,f=l.isEndOfRule;1===this.RULE_STACK.length&&f&&void 0===d&&(d=n.EOF,p=1),this.shouldInRepetitionRecoveryBeTried(d,p,s)&&this.tryInRepetitionRecovery(e,t,r,d)}t.Recoverable=c,t.attemptInRepetitionRecovery=attemptInRepetitionRecovery},57745:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreeBuilder=void 0;var n=r(40886),i=r(91433),o=r(25980),a=r(72092),s=function(){function TreeBuilder(){}return TreeBuilder.prototype.initTreeBuilder=function(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=(0,i.has)(e,"nodeLocationTracking")?e.nodeLocationTracking:a.DEFAULT_PARSER_CONFIG.nodeLocationTracking,this.outputCst){if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=n.setNodeLocationFull,this.setNodeLocationFromNode=n.setNodeLocationFull,this.cstPostRule=i.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=i.NOOP,this.setNodeLocationFromNode=i.NOOP,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=n.setNodeLocationOnlyOffset,this.setNodeLocationFromNode=n.setNodeLocationOnlyOffset,this.cstPostRule=i.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=i.NOOP,this.setNodeLocationFromNode=i.NOOP,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=i.NOOP,this.setNodeLocationFromNode=i.NOOP,this.cstPostRule=i.NOOP,this.setInitialNodeLocation=i.NOOP;else throw Error('Invalid <nodeLocationTracking> config option: "'+e.nodeLocationTracking+'"')}else this.cstInvocationStateUpdate=i.NOOP,this.cstFinallyStateUpdate=i.NOOP,this.cstPostTerminal=i.NOOP,this.cstPostNonTerminal=i.NOOP,this.cstPostRule=i.NOOP},TreeBuilder.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(e){e.location={startOffset:NaN,endOffset:NaN}},TreeBuilder.prototype.setInitialNodeLocationOnlyOffsetRegular=function(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},TreeBuilder.prototype.setInitialNodeLocationFullRecovery=function(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},TreeBuilder.prototype.setInitialNodeLocationFullRegular=function(e){var t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},TreeBuilder.prototype.cstInvocationStateUpdate=function(e,t){var r={name:e,children:{}};this.setInitialNodeLocation(r),this.CST_STACK.push(r)},TreeBuilder.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},TreeBuilder.prototype.cstPostRuleFull=function(e){var t=this.LA(0),r=e.location;r.startOffset<=t.startOffset==!0?(r.endOffset=t.endOffset,r.endLine=t.endLine,r.endColumn=t.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)},TreeBuilder.prototype.cstPostRuleOnlyOffset=function(e){var t=this.LA(0),r=e.location;r.startOffset<=t.startOffset==!0?r.endOffset=t.endOffset:r.startOffset=NaN},TreeBuilder.prototype.cstPostTerminal=function(e,t){var r=this.CST_STACK[this.CST_STACK.length-1];(0,n.addTerminalToCst)(r,t,e),this.setNodeLocationFromToken(r.location,t)},TreeBuilder.prototype.cstPostNonTerminal=function(e,t){var r=this.CST_STACK[this.CST_STACK.length-1];(0,n.addNoneTerminalToCst)(r,t,e),this.setNodeLocationFromNode(r.location,e.location)},TreeBuilder.prototype.getBaseCstVisitorConstructor=function(){if((0,i.isUndefined)(this.baseCstVisitorConstructor)){var e=(0,o.createBaseSemanticVisitorConstructor)(this.className,(0,i.keys)(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor},TreeBuilder.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if((0,i.isUndefined)(this.baseCstVisitorWithDefaultsConstructor)){var e=(0,o.createBaseVisitorConstructorWithDefaults)(this.className,(0,i.keys)(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor},TreeBuilder.prototype.getLastExplicitRuleShortName=function(){var e=this.RULE_STACK;return e[e.length-1]},TreeBuilder.prototype.getPreviousExplicitRuleShortName=function(){var e=this.RULE_STACK;return e[e.length-2]},TreeBuilder.prototype.getLastExplicitRuleOccurrenceIndex=function(){var e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]},TreeBuilder}();t.TreeBuilder=s},46657:function(e,t){"use strict";function applyMixins(e,t){t.forEach(function(t){var r=t.prototype;Object.getOwnPropertyNames(r).forEach(function(n){if("constructor"!==n){var i=Object.getOwnPropertyDescriptor(r,n);i&&(i.get||i.set)?Object.defineProperty(e.prototype,n,i):e.prototype[n]=t.prototype[n]}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.applyMixins=void 0,t.applyMixins=applyMixins},91536:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.charCodeToOptimizedIndex=t.minOptimizationVal=t.buildLineBreakIssueMessage=t.LineTerminatorOptimizedTester=t.isShortPattern=t.isCustomPattern=t.cloneEmptyGroups=t.performWarningRuntimeChecks=t.performRuntimeChecks=t.addStickyFlag=t.addStartOfInput=t.findUnreachablePatterns=t.findModesThatDoNotExist=t.findInvalidGroupType=t.findDuplicatePatterns=t.findUnsupportedFlags=t.findStartOfInputAnchor=t.findEmptyMatchRegExps=t.findEndOfInputAnchor=t.findInvalidPatterns=t.findMissingPatterns=t.validatePatterns=t.analyzeTokenTypes=t.enableSticky=t.disableSticky=t.SUPPORT_STICKY=t.MODES=t.DEFAULT_MODE=void 0;var o=r(50272),a=r(80593),s=r(91433),c=r(34704),l=r(73228),u="PATTERN";function disableSticky(){t.SUPPORT_STICKY=!1}function enableSticky(){t.SUPPORT_STICKY=!0}function analyzeTokenTypes(e,r){var n,i,o,l,d,p,f,m,g,y,v,x,O=(r=(0,s.defaults)(r,{useSticky:t.SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:function(e,t){return t()}})).tracer;O("initCharCodeToOptimizedIndexMap",function(){initCharCodeToOptimizedIndexMap()}),O("Reject Lexer.NA",function(){n=(0,s.reject)(e,function(e){return e[u]===a.Lexer.NA})});var R=!1;O("Transform Patterns",function(){R=!1,i=(0,s.map)(n,function(e){var t=e[u];if((0,s.isRegExp)(t)){var n=t.source;return 1!==n.length||"^"===n||"$"===n||"."===n||t.ignoreCase?2!==n.length||"\\"!==n[0]||(0,s.contains)(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],n[1])?r.useSticky?addStickyFlag(t):addStartOfInput(t):n[1]:n}if((0,s.isFunction)(t))return R=!0,{exec:t};if((0,s.has)(t,"exec"))return R=!0,t;if("string"==typeof t){if(1===t.length)return t;var i=new RegExp(t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"));return r.useSticky?addStickyFlag(i):addStartOfInput(i)}throw Error("non exhaustive match")})}),O("misc mapping",function(){o=(0,s.map)(n,function(e){return e.tokenTypeIdx}),l=(0,s.map)(n,function(e){var t=e.GROUP;if(t!==a.Lexer.SKIPPED){if((0,s.isString)(t))return t;if((0,s.isUndefined)(t))return!1;throw Error("non exhaustive match")}}),d=(0,s.map)(n,function(e){var t=e.LONGER_ALT;if(t)return(0,s.isArray)(t)?(0,s.map)(t,function(e){return(0,s.indexOf)(n,e)}):[(0,s.indexOf)(n,t)]}),p=(0,s.map)(n,function(e){return e.PUSH_MODE}),f=(0,s.map)(n,function(e){return(0,s.has)(e,"POP_MODE")})}),O("Line Terminator Handling",function(){var e=getCharCodes(r.lineTerminatorCharacters);m=(0,s.map)(n,function(e){return!1}),"onlyOffset"!==r.positionTracking&&(m=(0,s.map)(n,function(t){return(0,s.has)(t,"LINE_BREAKS")?t.LINE_BREAKS:!1===checkLineBreaksIssues(t,e)?(0,c.canMatchCharCode)(e,t.PATTERN):void 0}))}),O("Misc Mapping #2",function(){g=(0,s.map)(n,isCustomPattern),y=(0,s.map)(i,isShortPattern),v=(0,s.reduce)(n,function(e,t){var r=t.GROUP;return(0,s.isString)(r)&&r!==a.Lexer.SKIPPED&&(e[r]=[]),e},{}),x=(0,s.map)(i,function(e,t){return{pattern:i[t],longerAlt:d[t],canLineTerminator:m[t],isCustom:g[t],short:y[t],group:l[t],push:p[t],pop:f[t],tokenTypeIdx:o[t],tokenType:n[t]}})});var A=!0,b=[];return r.safeMode||O("First Char Optimization",function(){b=(0,s.reduce)(n,function(e,t,n){if("string"==typeof t.PATTERN){var i;addToMapOfArrays(e,charCodeToOptimizedIndex(t.PATTERN.charCodeAt(0)),x[n])}else if((0,s.isArray)(t.START_CHARS_HINT))(0,s.forEach)(t.START_CHARS_HINT,function(t){var r=charCodeToOptimizedIndex("string"==typeof t?t.charCodeAt(0):t);i!==r&&(i=r,addToMapOfArrays(e,r,x[n]))});else if((0,s.isRegExp)(t.PATTERN)){if(t.PATTERN.unicode)A=!1,r.ensureOptimizations&&(0,s.PRINT_ERROR)(""+c.failedOptimizationPrefixMsg+"	Unable to analyze < "+t.PATTERN.toString()+" > pattern.\n	The regexp unicode flag is not currently supported by the regexp-to-ast library.\n	This will disable the lexer's first char optimizations.\n	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE");else{var o=(0,c.getOptimizedStartCodesIndices)(t.PATTERN,r.ensureOptimizations);(0,s.isEmpty)(o)&&(A=!1),(0,s.forEach)(o,function(t){addToMapOfArrays(e,t,x[n])})}}else r.ensureOptimizations&&(0,s.PRINT_ERROR)(""+c.failedOptimizationPrefixMsg+"	TokenType: <"+t.name+"> is using a custom token pattern without providing <start_chars_hint> parameter.\n	This will disable the lexer's first char optimizations.\n	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE"),A=!1;return e},[])}),O("ArrayPacking",function(){b=(0,s.packArray)(b)}),{emptyGroups:v,patternIdxToConfig:x,charCodeToPatternIdxToConfig:b,hasCustom:R,canBeOptimized:A}}function validatePatterns(e,t){var r=[],n=findMissingPatterns(e);r=r.concat(n.errors);var i=findInvalidPatterns(n.valid),o=i.valid;return(r=(r=(r=(r=r.concat(i.errors)).concat(validateRegExpPattern(o))).concat(findInvalidGroupType(o))).concat(findModesThatDoNotExist(o,t))).concat(findUnreachablePatterns(o))}function validateRegExpPattern(e){var t=[],r=(0,s.filter)(e,function(e){return(0,s.isRegExp)(e[u])});return(t=(t=(t=(t=t.concat(findEndOfInputAnchor(r))).concat(findStartOfInputAnchor(r))).concat(findUnsupportedFlags(r))).concat(findDuplicatePatterns(r))).concat(findEmptyMatchRegExps(r))}function findMissingPatterns(e){var t=(0,s.filter)(e,function(e){return!(0,s.has)(e,u)});return{errors:(0,s.map)(t,function(e){return{message:"Token Type: ->"+e.name+"<- missing static 'PATTERN' property",type:a.LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[e]}}),valid:(0,s.difference)(e,t)}}function findInvalidPatterns(e){var t=(0,s.filter)(e,function(e){var t=e[u];return!(0,s.isRegExp)(t)&&!(0,s.isFunction)(t)&&!(0,s.has)(t,"exec")&&!(0,s.isString)(t)});return{errors:(0,s.map)(t,function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:a.LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[e]}}),valid:(0,s.difference)(e,t)}}t.DEFAULT_MODE="defaultMode",t.MODES="modes",t.SUPPORT_STICKY="boolean"==typeof RegExp("(?:)").sticky,t.disableSticky=disableSticky,t.enableSticky=enableSticky,t.analyzeTokenTypes=analyzeTokenTypes,t.validatePatterns=validatePatterns,t.findMissingPatterns=findMissingPatterns,t.findInvalidPatterns=findInvalidPatterns;var d=/[^\\][\$]/;function findEndOfInputAnchor(e){var t=function(e){function EndAnchorFinder(){var t=null!==e&&e.apply(this,arguments)||this;return t.found=!1,t}return i(EndAnchorFinder,e),EndAnchorFinder.prototype.visitEndAnchor=function(e){this.found=!0},EndAnchorFinder}(o.BaseRegExpVisitor),r=(0,s.filter)(e,function(e){var r=e[u];try{var n=(0,l.getRegExpAst)(r),i=new t;return i.visit(n),i.found}catch(e){return d.test(r.source)}});return(0,s.map)(r,function(e){return{message:"Unexpected RegExp Anchor Error:\n	Token Type: ->"+e.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.",type:a.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[e]}})}function findEmptyMatchRegExps(e){var t=(0,s.filter)(e,function(e){return e[u].test("")});return(0,s.map)(t,function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' must not match an empty string",type:a.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[e]}})}t.findEndOfInputAnchor=findEndOfInputAnchor,t.findEmptyMatchRegExps=findEmptyMatchRegExps;var p=/[^\\[][\^]|^\^/;function findStartOfInputAnchor(e){var t=function(e){function StartAnchorFinder(){var t=null!==e&&e.apply(this,arguments)||this;return t.found=!1,t}return i(StartAnchorFinder,e),StartAnchorFinder.prototype.visitStartAnchor=function(e){this.found=!0},StartAnchorFinder}(o.BaseRegExpVisitor),r=(0,s.filter)(e,function(e){var r=e[u];try{var n=(0,l.getRegExpAst)(r),i=new t;return i.visit(n),i.found}catch(e){return p.test(r.source)}});return(0,s.map)(r,function(e){return{message:"Unexpected RegExp Anchor Error:\n	Token Type: ->"+e.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.",type:a.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[e]}})}function findUnsupportedFlags(e){var t=(0,s.filter)(e,function(e){var t=e[u];return t instanceof RegExp&&(t.multiline||t.global)});return(0,s.map)(t,function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:a.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[e]}})}function findDuplicatePatterns(e){var t=[],r=(0,s.map)(e,function(r){return(0,s.reduce)(e,function(e,n){return r.PATTERN.source!==n.PATTERN.source||(0,s.contains)(t,n)||n.PATTERN===a.Lexer.NA||(t.push(n),e.push(n)),e},[])});r=(0,s.compact)(r);var n=(0,s.filter)(r,function(e){return e.length>1});return(0,s.map)(n,function(e){var t=(0,s.map)(e,function(e){return e.name});return{message:"The same RegExp pattern ->"+(0,s.first)(e).PATTERN+"<-has been used in all of the following Token Types: "+t.join(", ")+" <-",type:a.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:e}})}function findInvalidGroupType(e){var t=(0,s.filter)(e,function(e){if(!(0,s.has)(e,"GROUP"))return!1;var t=e.GROUP;return t!==a.Lexer.SKIPPED&&t!==a.Lexer.NA&&!(0,s.isString)(t)});return(0,s.map)(t,function(e){return{message:"Token Type: ->"+e.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:a.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[e]}})}function findModesThatDoNotExist(e,t){var r=(0,s.filter)(e,function(e){return void 0!==e.PUSH_MODE&&!(0,s.contains)(t,e.PUSH_MODE)});return(0,s.map)(r,function(e){return{message:"Token Type: ->"+e.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+e.PUSH_MODE+"<-which does not exist",type:a.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[e]}})}function findUnreachablePatterns(e){var t=[],r=(0,s.reduce)(e,function(e,t,r){var n=t.PATTERN;return n===a.Lexer.NA||((0,s.isString)(n)?e.push({str:n,idx:r,tokenType:t}):(0,s.isRegExp)(n)&&noMetaChar(n)&&e.push({str:n.source,idx:r,tokenType:t})),e},[]);return(0,s.forEach)(e,function(e,n){(0,s.forEach)(r,function(r){var i=r.str,o=r.idx,s=r.tokenType;if(n<o&&testTokenType(i,e.PATTERN)){var c="Token: ->"+s.name+"<- can never be matched.\nBecause it appears AFTER the Token Type ->"+e.name+"<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE";t.push({message:c,type:a.LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[e,s]})}})}),t}function testTokenType(e,t){if((0,s.isRegExp)(t)){var r=t.exec(e);return null!==r&&0===r.index}if((0,s.isFunction)(t))return t(e,0,[],{});if((0,s.has)(t,"exec"))return t.exec(e,0,[],{});if("string"==typeof t)return t===e;throw Error("non exhaustive match")}function noMetaChar(e){return void 0===(0,s.find)([".","\\","[","]","|","^","$","(",")","?","*","+","{"],function(t){return -1!==e.source.indexOf(t)})}function addStartOfInput(e){var t=e.ignoreCase?"i":"";return RegExp("^(?:"+e.source+")",t)}function addStickyFlag(e){var t=e.ignoreCase?"iy":"y";return RegExp(""+e.source,t)}function performRuntimeChecks(e,r,n){var i=[];return(0,s.has)(e,t.DEFAULT_MODE)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+t.DEFAULT_MODE+"> property in its definition\n",type:a.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),(0,s.has)(e,t.MODES)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+t.MODES+"> property in its definition\n",type:a.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),(0,s.has)(e,t.MODES)&&(0,s.has)(e,t.DEFAULT_MODE)&&!(0,s.has)(e.modes,e.defaultMode)&&i.push({message:"A MultiMode Lexer cannot be initialized with a "+t.DEFAULT_MODE+": <"+e.defaultMode+">which does not exist\n",type:a.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),(0,s.has)(e,t.MODES)&&(0,s.forEach)(e.modes,function(e,t){(0,s.forEach)(e,function(e,r){(0,s.isUndefined)(e)&&i.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:<"+t+"> at index: <"+r+">\n",type:a.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),i}function performWarningRuntimeChecks(e,t,r){var n=[],i=!1,o=(0,s.compact)((0,s.flatten)((0,s.mapValues)(e.modes,function(e){return e}))),l=(0,s.reject)(o,function(e){return e[u]===a.Lexer.NA}),d=getCharCodes(r);return t&&(0,s.forEach)(l,function(e){var t=checkLineBreaksIssues(e,d);if(!1!==t){var r={message:buildLineBreakIssueMessage(e,t),type:t.issue,tokenType:e};n.push(r)}else(0,s.has)(e,"LINE_BREAKS")?!0===e.LINE_BREAKS&&(i=!0):(0,c.canMatchCharCode)(d,e.PATTERN)&&(i=!0)}),t&&!i&&n.push({message:"Warning: No LINE_BREAKS Found.\n	This Lexer has been defined to track line and column information,\n	But none of the Token Types can be identified as matching a line terminator.\n	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n	for details.",type:a.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),n}function cloneEmptyGroups(e){var t={},r=(0,s.keys)(e);return(0,s.forEach)(r,function(r){var n=e[r];if((0,s.isArray)(n))t[r]=[];else throw Error("non exhaustive match")}),t}function isCustomPattern(e){var t=e.PATTERN;if((0,s.isRegExp)(t))return!1;if((0,s.isFunction)(t)||(0,s.has)(t,"exec"))return!0;if((0,s.isString)(t))return!1;throw Error("non exhaustive match")}function isShortPattern(e){return!!(0,s.isString)(e)&&1===e.length&&e.charCodeAt(0)}function checkLineBreaksIssues(e,t){if((0,s.has)(e,"LINE_BREAKS"))return!1;if((0,s.isRegExp)(e.PATTERN)){try{(0,c.canMatchCharCode)(t,e.PATTERN)}catch(e){return{issue:a.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:e.message}}return!1}if((0,s.isString)(e.PATTERN))return!1;if(isCustomPattern(e))return{issue:a.LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function buildLineBreakIssueMessage(e,t){if(t.issue===a.LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return"Warning: unable to identify line terminator usage in pattern.\n	The problem is in the <"+e.name+"> Token Type\n	 Root cause: "+t.errMsg+".\n	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(t.issue===a.LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return"Warning: A Custom Token Pattern should specify the <line_breaks> option.\n	The problem is in the <"+e.name+"> Token Type\n	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}function getCharCodes(e){return(0,s.map)(e,function(e){return(0,s.isString)(e)&&e.length>0?e.charCodeAt(0):e})}function addToMapOfArrays(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}t.findStartOfInputAnchor=findStartOfInputAnchor,t.findUnsupportedFlags=findUnsupportedFlags,t.findDuplicatePatterns=findDuplicatePatterns,t.findInvalidGroupType=findInvalidGroupType,t.findModesThatDoNotExist=findModesThatDoNotExist,t.findUnreachablePatterns=findUnreachablePatterns,t.addStartOfInput=addStartOfInput,t.addStickyFlag=addStickyFlag,t.performRuntimeChecks=performRuntimeChecks,t.performWarningRuntimeChecks=performWarningRuntimeChecks,t.cloneEmptyGroups=cloneEmptyGroups,t.isCustomPattern=isCustomPattern,t.isShortPattern=isShortPattern,t.LineTerminatorOptimizedTester={test:function(e){for(var t=e.length,r=this.lastIndex;r<t;r++){var n=e.charCodeAt(r);if(10===n)return this.lastIndex=r+1,!0;if(13===n)return 10===e.charCodeAt(r+1)?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1},lastIndex:0},t.buildLineBreakIssueMessage=buildLineBreakIssueMessage,t.minOptimizationVal=256;var f=[];function charCodeToOptimizedIndex(e){return e<t.minOptimizationVal?e:f[e]}function initCharCodeToOptimizedIndexMap(){if((0,s.isEmpty)(f)){f=Array(65536);for(var e=0;e<65536;e++)f[e]=e>255?255+~~(e/255):e}}t.charCodeToOptimizedIndex=charCodeToOptimizedIndex},65389:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultLexerErrorProvider=void 0,t.defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(e){return"Unable to pop Lexer Mode after encountering Token ->"+e.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(e,t,r,n,i){return"unexpected character: ->"+e.charAt(t)+"<- at offset: "+t+", skipped "+r+" characters."}}},80593:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lexer=t.LexerDefinitionErrorType=void 0;var n,i=r(91536),o=r(91433),a=r(91122),s=r(65389),c=r(73228);(n=t.LexerDefinitionErrorType||(t.LexerDefinitionErrorType={}))[n.MISSING_PATTERN=0]="MISSING_PATTERN",n[n.INVALID_PATTERN=1]="INVALID_PATTERN",n[n.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",n[n.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",n[n.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",n[n.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",n[n.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",n[n.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",n[n.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",n[n.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",n[n.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",n[n.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",n[n.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",n[n.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",n[n.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",n[n.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",n[n.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK";var l={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:s.defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1};Object.freeze(l);var u=function(){function Lexer(e,t){var r=this;if(void 0===t&&(t=l),this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},"boolean"==typeof t)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=(0,o.merge)(l,t);var n=this.config.traceInitPerf;!0===n?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof n&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",function(){var n,s=!0;r.TRACE_INIT("Lexer Config handling",function(){if(r.config.lineTerminatorsPattern===l.lineTerminatorsPattern)r.config.lineTerminatorsPattern=i.LineTerminatorOptimizedTester;else if(r.config.lineTerminatorCharacters===l.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');r.trackStartLines=/full|onlyStart/i.test(r.config.positionTracking),r.trackEndLines=/full/i.test(r.config.positionTracking),(0,o.isArray)(e)?((n={modes:{}}).modes[i.DEFAULT_MODE]=(0,o.cloneArr)(e),n[i.DEFAULT_MODE]=i.DEFAULT_MODE):(s=!1,n=(0,o.cloneObj)(e))}),!1===r.config.skipValidations&&(r.TRACE_INIT("performRuntimeChecks",function(){r.lexerDefinitionErrors=r.lexerDefinitionErrors.concat((0,i.performRuntimeChecks)(n,r.trackStartLines,r.config.lineTerminatorCharacters))}),r.TRACE_INIT("performWarningRuntimeChecks",function(){r.lexerDefinitionWarning=r.lexerDefinitionWarning.concat((0,i.performWarningRuntimeChecks)(n,r.trackStartLines,r.config.lineTerminatorCharacters))})),n.modes=n.modes?n.modes:{},(0,o.forEach)(n.modes,function(e,t){n.modes[t]=(0,o.reject)(e,function(e){return(0,o.isUndefined)(e)})});var u=(0,o.keys)(n.modes);if((0,o.forEach)(n.modes,function(e,n){r.TRACE_INIT("Mode: <"+n+"> processing",function(){if(r.modes.push(n),!1===r.config.skipValidations&&r.TRACE_INIT("validatePatterns",function(){r.lexerDefinitionErrors=r.lexerDefinitionErrors.concat((0,i.validatePatterns)(e,u))}),(0,o.isEmpty)(r.lexerDefinitionErrors)){var s;(0,a.augmentTokenTypes)(e),r.TRACE_INIT("analyzeTokenTypes",function(){s=(0,i.analyzeTokenTypes)(e,{lineTerminatorCharacters:r.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:r.TRACE_INIT.bind(r)})}),r.patternIdxToConfig[n]=s.patternIdxToConfig,r.charCodeToPatternIdxToConfig[n]=s.charCodeToPatternIdxToConfig,r.emptyGroups=(0,o.merge)(r.emptyGroups,s.emptyGroups),r.hasCustom=s.hasCustom||r.hasCustom,r.canModeBeOptimized[n]=s.canBeOptimized}})}),r.defaultMode=n.defaultMode,!(0,o.isEmpty)(r.lexerDefinitionErrors)&&!r.config.deferDefinitionErrorsHandling)throw Error("Errors detected in definition of Lexer:\n"+(0,o.map)(r.lexerDefinitionErrors,function(e){return e.message}).join("-----------------------\n"));(0,o.forEach)(r.lexerDefinitionWarning,function(e){(0,o.PRINT_WARNING)(e.message)}),r.TRACE_INIT("Choosing sub-methods implementations",function(){if(i.SUPPORT_STICKY?(r.chopInput=o.IDENTITY,r.match=r.matchWithTest):(r.updateLastIndex=o.NOOP,r.match=r.matchWithExec),s&&(r.handleModes=o.NOOP),!1===r.trackStartLines&&(r.computeNewColumn=o.IDENTITY),!1===r.trackEndLines&&(r.updateTokenEndLineColumnLocation=o.NOOP),/full/i.test(r.config.positionTracking))r.createTokenInstance=r.createFullToken;else if(/onlyStart/i.test(r.config.positionTracking))r.createTokenInstance=r.createStartOnlyToken;else if(/onlyOffset/i.test(r.config.positionTracking))r.createTokenInstance=r.createOffsetOnlyToken;else throw Error('Invalid <positionTracking> config option: "'+r.config.positionTracking+'"');r.hasCustom?(r.addToken=r.addTokenUsingPush,r.handlePayload=r.handlePayloadWithCustom):(r.addToken=r.addTokenUsingMemberAccess,r.handlePayload=r.handlePayloadNoCustom)}),r.TRACE_INIT("Failed Optimization Warnings",function(){var e=(0,o.reduce)(r.canModeBeOptimized,function(e,t,r){return!1===t&&e.push(r),e},[]);if(t.ensureOptimizations&&!(0,o.isEmpty)(e))throw Error("Lexer Modes: < "+e.join(", ")+' > cannot be optimized.\n	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n	 Or inspect the console log for details on how to resolve these issues.')}),r.TRACE_INIT("clearRegExpParserCache",function(){(0,c.clearRegExpParserCache)()}),r.TRACE_INIT("toFastProperties",function(){(0,o.toFastProperties)(r)})})}return Lexer.prototype.tokenize=function(e,t){if(void 0===t&&(t=this.defaultMode),!(0,o.isEmpty)(this.lexerDefinitionErrors))throw Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+(0,o.map)(this.lexerDefinitionErrors,function(e){return e.message}).join("-----------------------\n"));return this.tokenizeInternal(e,t)},Lexer.prototype.tokenizeInternal=function(e,t){var r,n,a,s,c,l,u,d,p,f,m,g,y,v,x,O,R=this,A=e,b=A.length,C=0,_=0,S=Array(this.hasCustom?0:Math.floor(e.length/10)),k=[],N=this.trackStartLines?1:void 0,P=this.trackStartLines?1:void 0,L=(0,i.cloneEmptyGroups)(this.emptyGroups),M=this.trackStartLines,F=this.config.lineTerminatorsPattern,D=0,j=[],B=[],z=[],W=[];Object.freeze(W);var G=void 0;function getPossiblePatternsSlow(){return j}function getPossiblePatternsOptimized(e){var t=B[(0,i.charCodeToOptimizedIndex)(e)];return void 0===t?W:t}var pop_mode=function(e){if(1===z.length&&void 0===e.tokenType.PUSH_MODE){var t=R.config.errorMessageProvider.buildUnableToPopLexerModeMessage(e);k.push({offset:e.startOffset,line:void 0!==e.startLine?e.startLine:void 0,column:void 0!==e.startColumn?e.startColumn:void 0,length:e.image.length,message:t})}else{z.pop();var r=(0,o.last)(z);j=R.patternIdxToConfig[r],B=R.charCodeToPatternIdxToConfig[r],D=j.length;var n=R.canModeBeOptimized[r]&&!1===R.config.safeMode;G=B&&n?getPossiblePatternsOptimized:getPossiblePatternsSlow}};function push_mode(e){z.push(e),B=this.charCodeToPatternIdxToConfig[e],D=(j=this.patternIdxToConfig[e]).length,D=j.length;var t=this.canModeBeOptimized[e]&&!1===this.config.safeMode;G=B&&t?getPossiblePatternsOptimized:getPossiblePatternsSlow}for(push_mode.call(this,t);C<b;){l=null;var q=A.charCodeAt(C),$=G(q),Y=$.length;for(r=0;r<Y;r++){var X=(O=$[r]).pattern;u=null;var Q=O.short;if(!1!==Q?q===Q&&(l=X):!0===O.isCustom?null!==(x=X.exec(A,C,S,L))?(l=x[0],void 0!==x.payload&&(u=x.payload)):l=null:(this.updateLastIndex(X,C),l=this.match(X,e,C)),null!==l){if(void 0!==(c=O.longerAlt)){var Z=c.length;for(a=0;a<Z;a++){var ee=j[c[a]],et=ee.pattern;if(d=null,!0===ee.isCustom?null!==(x=et.exec(A,C,S,L))?(s=x[0],void 0!==x.payload&&(d=x.payload)):s=null:(this.updateLastIndex(et,C),s=this.match(et,e,C)),s&&s.length>l.length){l=s,u=d,O=ee;break}}}break}}if(null!==l){if(p=l.length,void 0!==(f=O.group)&&(m=O.tokenTypeIdx,g=this.createTokenInstance(l,C,m,O.tokenType,N,P,p),this.handlePayload(g,u),!1===f?_=this.addToken(S,_,g):L[f].push(g)),e=this.chopInput(e,p),C+=p,P=this.computeNewColumn(P,p),!0===M&&!0===O.canLineTerminator){var er=0,en=void 0,ei=void 0;F.lastIndex=0;do!0===(en=F.test(l))&&(ei=F.lastIndex-1,er++);while(!0===en);0!==er&&(N+=er,P=p-ei,this.updateTokenEndLineColumnLocation(g,f,ei,er,N,P,p))}this.handleModes(O,pop_mode,push_mode,g)}else{for(var eo=C,ea=N,es=P,ec=!1;!ec&&C<b;)for(A.charCodeAt(C),e=this.chopInput(e,1),C++,n=0;n<D;n++){var el=j[n],X=el.pattern,Q=el.short;if(!1!==Q?A.charCodeAt(C)===Q&&(ec=!0):!0===el.isCustom?ec=null!==X.exec(A,C,S,L):(this.updateLastIndex(X,C),ec=null!==X.exec(e)),!0===ec)break}y=C-eo,v=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(A,eo,y,ea,es),k.push({offset:eo,line:ea,column:es,length:y,message:v})}}return this.hasCustom||(S.length=_),{tokens:S,groups:L,errors:k}},Lexer.prototype.handleModes=function(e,t,r,n){if(!0===e.pop){var i=e.push;t(n),void 0!==i&&r.call(this,i)}else void 0!==e.push&&r.call(this,e.push)},Lexer.prototype.chopInput=function(e,t){return e.substring(t)},Lexer.prototype.updateLastIndex=function(e,t){e.lastIndex=t},Lexer.prototype.updateTokenEndLineColumnLocation=function(e,t,r,n,i,o,a){var s,c;void 0===t||(c=(s=r===a-1)?-1:0,1===n&&!0===s||(e.endLine=i+c,e.endColumn=o-1+-c))},Lexer.prototype.computeNewColumn=function(e,t){return e+t},Lexer.prototype.createTokenInstance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return null},Lexer.prototype.createOffsetOnlyToken=function(e,t,r,n){return{image:e,startOffset:t,tokenTypeIdx:r,tokenType:n}},Lexer.prototype.createStartOnlyToken=function(e,t,r,n,i,o){return{image:e,startOffset:t,startLine:i,startColumn:o,tokenTypeIdx:r,tokenType:n}},Lexer.prototype.createFullToken=function(e,t,r,n,i,o,a){return{image:e,startOffset:t,endOffset:t+a-1,startLine:i,endLine:i,startColumn:o,endColumn:o+a-1,tokenTypeIdx:r,tokenType:n}},Lexer.prototype.addToken=function(e,t,r){return 666},Lexer.prototype.addTokenUsingPush=function(e,t,r){return e.push(r),t},Lexer.prototype.addTokenUsingMemberAccess=function(e,t,r){return e[t]=r,++t},Lexer.prototype.handlePayload=function(e,t){},Lexer.prototype.handlePayloadNoCustom=function(e,t){},Lexer.prototype.handlePayloadWithCustom=function(e,t){null!==t&&(e.payload=t)},Lexer.prototype.match=function(e,t,r){return null},Lexer.prototype.matchWithTest=function(e,t,r){return!0===e.test(t)?t.substring(r,e.lastIndex):null},Lexer.prototype.matchWithExec=function(e,t){var r=e.exec(t);return null!==r?r[0]:r},Lexer.prototype.TRACE_INIT=function(e,t){if(!0!==this.traceInitPerf)return t();this.traceInitIndent++;var r=Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(r+"--> <"+e+">");var n=(0,o.timer)(t),i=n.time,a=n.value,s=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(r+"<-- <"+e+"> time: "+i+"ms"),this.traceInitIndent--,a},Lexer.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",Lexer.NA=/NOT_APPLICABLE/,Lexer}();t.Lexer=u},34704:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.canMatchCharCode=t.firstCharOptimizedIndices=t.getOptimizedStartCodesIndices=t.failedOptimizationPrefixMsg=void 0;var o=r(50272),a=r(91433),s=r(73228),c=r(91536),l="Complement Sets are not supported for first char optimization";function getOptimizedStartCodesIndices(e,r){void 0===r&&(r=!1);try{var n=(0,s.getRegExpAst)(e);return firstCharOptimizedIndices(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===l)r&&(0,a.PRINT_WARNING)(""+t.failedOptimizationPrefixMsg+"	Unable to optimize: < "+e.toString()+" >\n	Complement Sets cannot be automatically optimized.\n	This will disable the lexer's first char optimizations.\n	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.");else{var i="";r&&(i="\n	This will disable the lexer's first char optimizations.\n	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),(0,a.PRINT_ERROR)(t.failedOptimizationPrefixMsg+"\n	Failed parsing: < "+e.toString()+" >\n	Using the regexp-to-ast library version: "+o.VERSION+"\n	Please open an issue at: https://github.com/bd82/regexp-to-ast/issues"+i)}}return[]}function firstCharOptimizedIndices(e,t,r){switch(e.type){case"Disjunction":for(var n=0;n<e.value.length;n++)firstCharOptimizedIndices(e.value[n],t,r);break;case"Alternative":for(var i=e.value,n=0;n<i.length;n++){var o=i[n];switch(o.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}switch(o.type){case"Character":addOptimizedIdxToResult(o.value,t,r);break;case"Set":if(!0===o.complement)throw Error(l);(0,a.forEach)(o.value,function(e){if("number"==typeof e)addOptimizedIdxToResult(e,t,r);else if(!0===r)for(var n=e.from;n<=e.to;n++)addOptimizedIdxToResult(n,t,r);else{for(var n=e.from;n<=e.to&&n<c.minOptimizationVal;n++)addOptimizedIdxToResult(n,t,r);if(e.to>=c.minOptimizationVal)for(var i=e.from>=c.minOptimizationVal?e.from:c.minOptimizationVal,o=e.to,a=(0,c.charCodeToOptimizedIndex)(i),s=(0,c.charCodeToOptimizedIndex)(o),l=a;l<=s;l++)t[l]=l}});break;case"Group":firstCharOptimizedIndices(o.value,t,r);break;default:throw Error("Non Exhaustive Match")}var s=void 0!==o.quantifier&&0===o.quantifier.atLeast;if("Group"===o.type&&!1===isWholeOptional(o)||"Group"!==o.type&&!1===s)break}break;default:throw Error("non exhaustive match!")}return(0,a.values)(t)}function addOptimizedIdxToResult(e,t,r){var n=(0,c.charCodeToOptimizedIndex)(e);t[n]=n,!0===r&&handleIgnoreCase(e,t)}function handleIgnoreCase(e,t){var r=String.fromCharCode(e),n=r.toUpperCase();if(n!==r){var i=(0,c.charCodeToOptimizedIndex)(n.charCodeAt(0));t[i]=i}else{var o=r.toLowerCase();if(o!==r){var i=(0,c.charCodeToOptimizedIndex)(o.charCodeAt(0));t[i]=i}}}function findCode(e,t){return(0,a.find)(e.value,function(e){return"number"==typeof e?(0,a.contains)(t,e):void 0!==(0,a.find)(t,function(t){return e.from<=t&&t<=e.to})})}function isWholeOptional(e){return!!e.quantifier&&0===e.quantifier.atLeast||!!e.value&&((0,a.isArray)(e.value)?(0,a.every)(e.value,isWholeOptional):isWholeOptional(e.value))}t.failedOptimizationPrefixMsg='Unable to use "first char" lexer optimizations:\n',t.getOptimizedStartCodesIndices=getOptimizedStartCodesIndices,t.firstCharOptimizedIndices=firstCharOptimizedIndices;var u=function(e){function CharCodeFinder(t){var r=e.call(this)||this;return r.targetCharCodes=t,r.found=!1,r}return i(CharCodeFinder,e),CharCodeFinder.prototype.visitChildren=function(t){if(!0!==this.found){switch(t.type){case"Lookahead":this.visitLookahead(t);return;case"NegativeLookahead":this.visitNegativeLookahead(t);return}e.prototype.visitChildren.call(this,t)}},CharCodeFinder.prototype.visitCharacter=function(e){(0,a.contains)(this.targetCharCodes,e.value)&&(this.found=!0)},CharCodeFinder.prototype.visitSet=function(e){e.complement?void 0===findCode(e,this.targetCharCodes)&&(this.found=!0):void 0!==findCode(e,this.targetCharCodes)&&(this.found=!0)},CharCodeFinder}(o.BaseRegExpVisitor);function canMatchCharCode(e,t){if(!(t instanceof RegExp))return void 0!==(0,a.find)(t,function(t){return(0,a.contains)(e,t.charCodeAt(0))});var r=(0,s.getRegExpAst)(t),n=new u(e);return n.visit(r),n.found}t.canMatchCharCode=canMatchCharCode},73228:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearRegExpParserCache=t.getRegExpAst=void 0;var n=r(50272),i={},o=new n.RegExpParser;function getRegExpAst(e){var t=e.toString();if(i.hasOwnProperty(t))return i[t];var r=o.pattern(t);return i[t]=r,r}function clearRegExpParserCache(){i={}}t.getRegExpAst=getRegExpAst,t.clearRegExpParserCache=clearRegExpParserCache},91122:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTokenType=t.hasExtendingTokensTypesMapProperty=t.hasExtendingTokensTypesProperty=t.hasCategoriesProperty=t.hasShortKeyProperty=t.singleAssignCategoriesToksMap=t.assignCategoriesMapProp=t.assignCategoriesTokensProp=t.assignTokenDefaultProps=t.expandCategories=t.augmentTokenTypes=t.tokenIdxToClass=t.tokenShortNameIdx=t.tokenStructuredMatcherNoCategories=t.tokenStructuredMatcher=void 0;var n=r(91433);function tokenStructuredMatcher(e,t){var r=e.tokenTypeIdx;return r===t.tokenTypeIdx||!0===t.isParent&&!0===t.categoryMatchesMap[r]}function tokenStructuredMatcherNoCategories(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}function augmentTokenTypes(e){var t=expandCategories(e);assignTokenDefaultProps(t),assignCategoriesMapProp(t),assignCategoriesTokensProp(t),(0,n.forEach)(t,function(e){e.isParent=e.categoryMatches.length>0})}function expandCategories(e){for(var t=(0,n.cloneArr)(e),r=e,i=!0;i;){r=(0,n.compact)((0,n.flatten)((0,n.map)(r,function(e){return e.CATEGORIES})));var o=(0,n.difference)(r,t);t=t.concat(o),(0,n.isEmpty)(o)?i=!1:r=o}return t}function assignTokenDefaultProps(e){(0,n.forEach)(e,function(e){hasShortKeyProperty(e)||(t.tokenIdxToClass[t.tokenShortNameIdx]=e,e.tokenTypeIdx=t.tokenShortNameIdx++),hasCategoriesProperty(e)&&!(0,n.isArray)(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),hasCategoriesProperty(e)||(e.CATEGORIES=[]),hasExtendingTokensTypesProperty(e)||(e.categoryMatches=[]),hasExtendingTokensTypesMapProperty(e)||(e.categoryMatchesMap={})})}function assignCategoriesTokensProp(e){(0,n.forEach)(e,function(e){e.categoryMatches=[],(0,n.forEach)(e.categoryMatchesMap,function(r,n){e.categoryMatches.push(t.tokenIdxToClass[n].tokenTypeIdx)})})}function assignCategoriesMapProp(e){(0,n.forEach)(e,function(e){singleAssignCategoriesToksMap([],e)})}function singleAssignCategoriesToksMap(e,t){(0,n.forEach)(e,function(e){t.categoryMatchesMap[e.tokenTypeIdx]=!0}),(0,n.forEach)(t.CATEGORIES,function(r){var i=e.concat(t);(0,n.contains)(i,r)||singleAssignCategoriesToksMap(i,r)})}function hasShortKeyProperty(e){return(0,n.has)(e,"tokenTypeIdx")}function hasCategoriesProperty(e){return(0,n.has)(e,"CATEGORIES")}function hasExtendingTokensTypesProperty(e){return(0,n.has)(e,"categoryMatches")}function hasExtendingTokensTypesMapProperty(e){return(0,n.has)(e,"categoryMatchesMap")}function isTokenType(e){return(0,n.has)(e,"tokenTypeIdx")}t.tokenStructuredMatcher=tokenStructuredMatcher,t.tokenStructuredMatcherNoCategories=tokenStructuredMatcherNoCategories,t.tokenShortNameIdx=1,t.tokenIdxToClass={},t.augmentTokenTypes=augmentTokenTypes,t.expandCategories=expandCategories,t.assignTokenDefaultProps=assignTokenDefaultProps,t.assignCategoriesTokensProp=assignCategoriesTokensProp,t.assignCategoriesMapProp=assignCategoriesMapProp,t.singleAssignCategoriesToksMap=singleAssignCategoriesToksMap,t.hasShortKeyProperty=hasShortKeyProperty,t.hasCategoriesProperty=hasCategoriesProperty,t.hasExtendingTokensTypesProperty=hasExtendingTokensTypesProperty,t.hasExtendingTokensTypesMapProperty=hasExtendingTokensTypesMapProperty,t.isTokenType=isTokenType},40711:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tokenMatcher=t.createTokenInstance=t.EOF=t.createToken=t.hasTokenLabel=t.tokenName=t.tokenLabel=void 0;var n=r(91433),i=r(80593),o=r(91122);function tokenLabel(e){return hasTokenLabel(e)?e.LABEL:e.name}function tokenName(e){return e.name}function hasTokenLabel(e){return(0,n.isString)(e.LABEL)&&""!==e.LABEL}t.tokenLabel=tokenLabel,t.tokenName=tokenName,t.hasTokenLabel=hasTokenLabel;var a="categories",s="label",c="group",l="push_mode",u="pop_mode",d="longer_alt",p="line_breaks",f="start_chars_hint";function createToken(e){return createTokenInternal(e)}function createTokenInternal(e){var t=e.pattern,r={};if(r.name=e.name,(0,n.isUndefined)(t)||(r.PATTERN=t),(0,n.has)(e,"parent"))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";return(0,n.has)(e,a)&&(r.CATEGORIES=e[a]),(0,o.augmentTokenTypes)([r]),(0,n.has)(e,s)&&(r.LABEL=e[s]),(0,n.has)(e,c)&&(r.GROUP=e[c]),(0,n.has)(e,u)&&(r.POP_MODE=e[u]),(0,n.has)(e,l)&&(r.PUSH_MODE=e[l]),(0,n.has)(e,d)&&(r.LONGER_ALT=e[d]),(0,n.has)(e,p)&&(r.LINE_BREAKS=e[p]),(0,n.has)(e,f)&&(r.START_CHARS_HINT=e[f]),r}function createTokenInstance(e,t,r,n,i,o,a,s){return{image:t,startOffset:r,endOffset:n,startLine:i,endLine:o,startColumn:a,endColumn:s,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function tokenMatcher(e,t){return(0,o.tokenStructuredMatcher)(e,t)}t.createToken=createToken,t.EOF=createTokenInternal({name:"EOF",pattern:i.Lexer.NA}),(0,o.augmentTokenTypes)([t.EOF]),t.createTokenInstance=createTokenInstance,t.tokenMatcher=tokenMatcher},62839:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="9.1.0"},30321:function(e){"use strict";function dedent(e){var t=void 0;t="string"==typeof e?[e]:e.raw;for(var r="",n=0;n<t.length;n++)r+=t[n].replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`"),n<(arguments.length<=1?0:arguments.length-1)&&(r+=arguments.length<=n+1?void 0:arguments[n+1]);var i=r.split("\n"),o=null;return i.forEach(function(e){var t=e.match(/^(\s+)\S+/);if(t){var r=t[1].length;o=o?Math.min(o,r):r}}),null!==o&&(r=i.map(function(e){return" "===e[0]?e.slice(o):e}).join("\n")),(r=r.trim()).replace(/\\n/g,"\n")}e.exports=dedent},80884:function(e){"use strict";function FastBitSet(e){if(this.words=[],e){if(Symbol&&Symbol.iterator&&void 0!==e[Symbol.iterator]){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.add(r.value),r=t.next()}else for(let t=0;t<e.length;t++)this.add(e[t])}}FastBitSet.fromWords=function(e){let t=Object.create(FastBitSet.prototype);return t.words=e,t},FastBitSet.prototype.add=function(e){this.resize(e),this.words[e>>>5]|=1<<e},FastBitSet.prototype.flip=function(e){this.resize(e),this.words[e>>>5]^=1<<e},FastBitSet.prototype.clear=function(){this.words.length=0},FastBitSet.prototype.remove=function(e){this.resize(e),this.words[e>>>5]&=~(1<<e)},FastBitSet.prototype.isEmpty=function(e){let t=this.words.length;for(let e=0;e<t;e++)if(0!==this.words[e])return!1;return!0},FastBitSet.prototype.has=function(e){return(this.words[e>>>5]&1<<e)!=0},FastBitSet.prototype.checkedAdd=function(e){this.resize(e);let t=this.words[e>>>5],r=t|1<<e;return this.words[e>>>5]=r,(r^t)>>>e},FastBitSet.prototype.trim=function(e){let t=this.words.length;for(;t>0&&0===this.words[t-1];)t--;this.words.length=t},FastBitSet.prototype.resize=function(e){let t=e+32>>>5;for(let e=this.words.length;e<t;e++)this.words[e]=0},FastBitSet.prototype.hammingWeight=function(e){return e-=e>>>1&1431655765,((e=(858993459&e)+(e>>>2&858993459))+(e>>>4)&252645135)*16843009>>>24},FastBitSet.prototype.hammingWeight4=function(e,t,r,n){return e-=e>>>1&1431655765,t-=t>>>1&1431655765,r-=r>>>1&1431655765,n-=n>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),t=(858993459&t)+(t>>>2&858993459),r=(858993459&r)+(r>>>2&858993459),n=(858993459&n)+(n>>>2&858993459),e=e+(e>>>4)&252645135,t=t+(t>>>4)&252645135,r=r+(r>>>4)&252645135,n=n+(n>>>4)&252645135,(e+t+r+n)*16843009>>>24},FastBitSet.prototype.size=function(){let e=0,t=this.words.length,r=this.words;for(let n=0;n<t;n++)e+=this.hammingWeight(r[n]);return e},FastBitSet.prototype.array=function(){let e=Array(this.size()),t=0,r=this.words.length;for(let n=0;n<r;++n){let r=this.words[n];for(;0!=r;){let i=r&-r;e[t++]=(n<<5)+this.hammingWeight(i-1|0),r^=i}}return e},FastBitSet.prototype.forEach=function(e){let t=this.words.length;for(let r=0;r<t;++r){let t=this.words[r];for(;0!=t;){let n=t&-t;e((r<<5)+this.hammingWeight(n-1|0)),t^=n}}},FastBitSet.prototype[Symbol.iterator]=function(){let e=this.words.length,t=0,r=this.words[t],n=this.hammingWeight,i=this.words;return{[Symbol.iterator](){return this},next(){for(;t<e;){if(0!==r){let e=r&-r,i=(t<<5)+n(e-1|0);return r^=e,{done:!1,value:i}}++t<e&&(r=i[t])}return{done:!0,value:void 0}}}},FastBitSet.prototype.clone=function(){let e=Object.create(FastBitSet.prototype);return e.words=this.words.slice(),e},FastBitSet.prototype.intersects=function(e){let t=Math.min(this.words.length,e.words.length);for(let r=0;r<t;++r)if((this.words[r]&e.words[r])!=0)return!0;return!1},FastBitSet.prototype.intersection=function(e){let t=Math.min(this.words.length,e.words.length),r=0;for(;r+7<t;r+=8)this.words[r]&=e.words[r],this.words[r+1]&=e.words[r+1],this.words[r+2]&=e.words[r+2],this.words[r+3]&=e.words[r+3],this.words[r+4]&=e.words[r+4],this.words[r+5]&=e.words[r+5],this.words[r+6]&=e.words[r+6],this.words[r+7]&=e.words[r+7];for(;r<t;++r)this.words[r]&=e.words[r];let n=this.words.length;for(r=t;r<n;++r)this.words[r]=0;return this},FastBitSet.prototype.intersection_size=function(e){let t=Math.min(this.words.length,e.words.length),r=0;for(let n=0;n<t;++n)r+=this.hammingWeight(this.words[n]&e.words[n]);return r},FastBitSet.prototype.new_intersection=function(e){let t=Object.create(FastBitSet.prototype),r=Math.min(this.words.length,e.words.length);t.words=Array(r);let n=0;for(;n+7<r;n+=8)t.words[n]=this.words[n]&e.words[n],t.words[n+1]=this.words[n+1]&e.words[n+1],t.words[n+2]=this.words[n+2]&e.words[n+2],t.words[n+3]=this.words[n+3]&e.words[n+3],t.words[n+4]=this.words[n+4]&e.words[n+4],t.words[n+5]=this.words[n+5]&e.words[n+5],t.words[n+6]=this.words[n+6]&e.words[n+6],t.words[n+7]=this.words[n+7]&e.words[n+7];for(;n<r;++n)t.words[n]=this.words[n]&e.words[n];return t},FastBitSet.prototype.equals=function(e){let t=Math.min(this.words.length,e.words.length);for(let r=0;r<t;++r)if(this.words[r]!=e.words[r])return!1;if(this.words.length<e.words.length){let t=e.words.length;for(let r=this.words.length;r<t;++r)if(0!=e.words[r])return!1}else if(e.words.length<this.words.length){let t=this.words.length;for(let r=e.words.length;r<t;++r)if(0!=this.words[r])return!1}return!0},FastBitSet.prototype.difference=function(e){let t=Math.min(this.words.length,e.words.length),r=0;for(;r+7<t;r+=8)this.words[r]&=~e.words[r],this.words[r+1]&=~e.words[r+1],this.words[r+2]&=~e.words[r+2],this.words[r+3]&=~e.words[r+3],this.words[r+4]&=~e.words[r+4],this.words[r+5]&=~e.words[r+5],this.words[r+6]&=~e.words[r+6],this.words[r+7]&=~e.words[r+7];for(;r<t;++r)this.words[r]&=~e.words[r];return this},FastBitSet.prototype.new_difference=function(e){return this.clone().difference(e)},FastBitSet.prototype.difference2=function(e){let t=Math.min(this.words.length,e.words.length),r=0;for(;r+7<t;r+=8)e.words[r]=this.words[r]&~e.words[r],e.words[r+1]=this.words[r+1]&~e.words[r+1],e.words[r+2]=this.words[r+2]&~e.words[r+2],e.words[r+3]=this.words[r+3]&~e.words[r+3],e.words[r+4]=this.words[r+4]&~e.words[r+4],e.words[r+5]=this.words[r+5]&~e.words[r+5],e.words[r+6]=this.words[r+6]&~e.words[r+6],e.words[r+7]=this.words[r+7]&~e.words[r+7];for(;r<t;++r)e.words[r]=this.words[r]&~e.words[r];for(r=this.words.length-1;r>=t;--r)e.words[r]=this.words[r];return e.words.length=this.words.length,e},FastBitSet.prototype.difference_size=function(e){let t=Math.min(this.words.length,e.words.length),r=0,n=0;for(;n<t;++n)r+=this.hammingWeight(this.words[n]&~e.words[n]);let i=this.words.length;for(;n<i;++n)r+=this.hammingWeight(this.words[n]);return r},FastBitSet.prototype.change=function(e){let t=Math.min(this.words.length,e.words.length),r=0;for(;r+7<t;r+=8)this.words[r]^=e.words[r],this.words[r+1]^=e.words[r+1],this.words[r+2]^=e.words[r+2],this.words[r+3]^=e.words[r+3],this.words[r+4]^=e.words[r+4],this.words[r+5]^=e.words[r+5],this.words[r+6]^=e.words[r+6],this.words[r+7]^=e.words[r+7];for(;r<t;++r)this.words[r]^=e.words[r];for(r=e.words.length-1;r>=t;--r)this.words[r]=e.words[r];return this},FastBitSet.prototype.new_change=function(e){let t=Object.create(FastBitSet.prototype),r=Math.max(this.words.length,e.words.length);t.words=Array(r);let n=Math.min(this.words.length,e.words.length),i=0;for(;i+7<n;i+=8)t.words[i]=this.words[i]^e.words[i],t.words[i+1]=this.words[i+1]^e.words[i+1],t.words[i+2]=this.words[i+2]^e.words[i+2],t.words[i+3]=this.words[i+3]^e.words[i+3],t.words[i+4]=this.words[i+4]^e.words[i+4],t.words[i+5]=this.words[i+5]^e.words[i+5],t.words[i+6]=this.words[i+6]^e.words[i+6],t.words[i+7]=this.words[i+7]^e.words[i+7];for(;i<n;++i)t.words[i]=this.words[i]^e.words[i];let o=this.words.length;for(i=n;i<o;++i)t.words[i]=this.words[i];let a=e.words.length;for(i=n;i<a;++i)t.words[i]=e.words[i];return t},FastBitSet.prototype.change_size=function(e){let t=Math.min(this.words.length,e.words.length),r=0,n=0;for(;n<t;++n)r+=this.hammingWeight(this.words[n]^e.words[n]);let i=this.words.length>e.words.length?this:e,o=i.words.length;for(;n<o;++n)r+=this.hammingWeight(i.words[n]);return r},FastBitSet.prototype.toString=function(){return"{"+this.array().join(",")+"}"},FastBitSet.prototype.union=function(e){let t=Math.min(this.words.length,e.words.length),r=0;for(;r+7<t;r+=8)this.words[r]|=e.words[r],this.words[r+1]|=e.words[r+1],this.words[r+2]|=e.words[r+2],this.words[r+3]|=e.words[r+3],this.words[r+4]|=e.words[r+4],this.words[r+5]|=e.words[r+5],this.words[r+6]|=e.words[r+6],this.words[r+7]|=e.words[r+7];for(;r<t;++r)this.words[r]|=e.words[r];if(this.words.length<e.words.length){this.resize((e.words.length<<5)-1);let r=e.words.length;for(let n=t;n<r;++n)this.words[n]=e.words[n]}return this},FastBitSet.prototype.new_union=function(e){let t=Object.create(FastBitSet.prototype),r=Math.max(this.words.length,e.words.length);t.words=Array(r);let n=Math.min(this.words.length,e.words.length),i=0;for(;i+7<n;i+=8)t.words[i]=this.words[i]|e.words[i],t.words[i+1]=this.words[i+1]|e.words[i+1],t.words[i+2]=this.words[i+2]|e.words[i+2],t.words[i+3]=this.words[i+3]|e.words[i+3],t.words[i+4]=this.words[i+4]|e.words[i+4],t.words[i+5]=this.words[i+5]|e.words[i+5],t.words[i+6]=this.words[i+6]|e.words[i+6],t.words[i+7]=this.words[i+7]|e.words[i+7];for(;i<n;++i)t.words[i]=this.words[i]|e.words[i];let o=this.words.length;for(i=n;i<o;++i)t.words[i]=this.words[i];let a=e.words.length;for(i=n;i<a;++i)t.words[i]=e.words[i];return t},FastBitSet.prototype.union_size=function(e){let t=Math.min(this.words.length,e.words.length),r=0;for(let n=0;n<t;++n)r+=this.hammingWeight(this.words[n]|e.words[n]);if(this.words.length<e.words.length){let t=e.words.length;for(let n=this.words.length;n<t;++n)r+=this.hammingWeight(0|e.words[n])}else{let t=this.words.length;for(let n=e.words.length;n<t;++n)r+=this.hammingWeight(0|this.words[n])}return r},e.exports=FastBitSet},14311:function(e,t){var r;/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/!function(n){"use strict";var i={s:1,n:0,d:1};function assign(e,t){if(isNaN(e=parseInt(e,10)))throw Fraction.InvalidParameter;return e*t}function newFraction(e,t){if(0===t)throw Fraction.DivisionByZero;var r=Object.create(Fraction.prototype);r.s=e<0?-1:1;var n=gcd(e=e<0?-e:e,t);return r.n=e/n,r.d=t/n,r}function factorize(e){for(var t={},r=e,n=2,i=4;i<=r;){for(;r%n==0;)r/=n,t[n]=(t[n]||0)+1;i+=1+2*n++}return r!==e?r>1&&(t[r]=(t[r]||0)+1):t[e]=(t[e]||0)+1,t}var parse=function(e,t){var r,n=0,o=1,a=1,s=0,c=0,l=0,u=1,d=1,p=0,f=1,m=1,g=1;if(null==e);else if(void 0!==t){if(a=(n=e)*(o=t),n%1!=0||o%1!=0)throw Fraction.NonIntegerParameter}else switch(typeof e){case"object":if("d"in e&&"n"in e)n=e.n,o=e.d,"s"in e&&(n*=e.s);else if(0 in e)n=e[0],1 in e&&(o=e[1]);else throw Fraction.InvalidParameter;a=n*o;break;case"number":if(e<0&&(a=e,e=-e),e%1==0)n=e;else if(e>0){for(e>=1&&(d=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)),e/=d);f<=1e7&&g<=1e7;){if(e===(r=(p+m)/(f+g))){f+g<=1e7?(n=p+m,o=f+g):g>f?(n=m,o=g):(n=p,o=f);break}e>r?(p+=m,f+=g):(m+=p,g+=f),f>1e7?(n=m,o=g):(n=p,o=f)}n*=d}else(isNaN(e)||isNaN(t))&&(o=n=NaN);break;case"string":if(null===(f=e.match(/\d+|./g)))throw Fraction.InvalidParameter;if("-"===f[p]?(a=-1,p++):"+"===f[p]&&p++,f.length===p+1?c=assign(f[p++],a):"."===f[p+1]||"."===f[p]?("."!==f[p]&&(s=assign(f[p++],a)),(++p+1===f.length||"("===f[p+1]&&")"===f[p+3]||"'"===f[p+1]&&"'"===f[p+3])&&(c=assign(f[p],a),u=Math.pow(10,f[p].length),p++),("("===f[p]&&")"===f[p+2]||"'"===f[p]&&"'"===f[p+2])&&(l=assign(f[p+1],a),d=Math.pow(10,f[p+1].length)-1,p+=3)):"/"===f[p+1]||":"===f[p+1]?(c=assign(f[p],a),u=assign(f[p+2],1),p+=3):"/"===f[p+3]&&" "===f[p+1]&&(s=assign(f[p],a),c=assign(f[p+2],a),u=assign(f[p+4],1),p+=5),f.length<=p){a=n=l+(o=u*d)*s+d*c;break}default:throw Fraction.InvalidParameter}if(0===o)throw Fraction.DivisionByZero;i.s=a<0?-1:1,i.n=Math.abs(n),i.d=Math.abs(o)};function modpow(e,t,r){for(var n=1;t>0;e=e*e%r,t>>=1)1&t&&(n=n*e%r);return n}function cycleLen(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var r=10%t,n=1;1!==r;n++)if(r=10*r%t,n>2e3)return 0;return n}function cycleStart(e,t,r){for(var n=1,i=modpow(10,r,t),o=0;o<300;o++){if(n===i)return o;n=10*n%t,i=10*i%t}return 0}function gcd(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function Fraction(e,t){if(parse(e,t),!(this instanceof Fraction))return newFraction(i.s*i.n,i.d);e=gcd(i.d,i.n),this.s=i.s,this.n=i.n/e,this.d=i.d/e}Fraction.DivisionByZero=Error("Division by Zero"),Fraction.InvalidParameter=Error("Invalid argument"),Fraction.NonIntegerParameter=Error("Parameters must be integer"),Fraction.prototype={s:1,n:0,d:1,abs:function(){return newFraction(this.n,this.d)},neg:function(){return newFraction(-this.s*this.n,this.d)},add:function(e,t){return parse(e,t),newFraction(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(e,t){return parse(e,t),newFraction(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(e,t){return parse(e,t),newFraction(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(e,t){return parse(e,t),newFraction(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return newFraction(this.s*this.n,this.d)},mod:function(e,t){if(isNaN(this.n)||isNaN(this.d))return new Fraction(NaN);if(void 0===e)return newFraction(this.s*this.n%this.d,1);if(parse(e,t),0===i.n&&0===this.d)throw Fraction.DivisionByZero;return newFraction(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(e,t){return parse(e,t),newFraction(gcd(i.n,this.n)*gcd(i.d,this.d),i.d*this.d)},lcm:function(e,t){return(parse(e,t),0===i.n&&0===this.n)?newFraction(0,1):newFraction(i.n*this.n,gcd(i.n,this.n)*gcd(i.d,this.d))},ceil:function(e){return(e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d))?new Fraction(NaN):newFraction(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return(e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d))?new Fraction(NaN):newFraction(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return(e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d))?new Fraction(NaN):newFraction(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return newFraction(this.s*this.d,this.n)},pow:function(e,t){if(parse(e,t),1===i.d)return i.s<0?newFraction(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):newFraction(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var r=factorize(this.n),n=factorize(this.d),o=1,a=1;for(var s in r)if("1"!==s){if("0"===s){o=0;break}if(r[s]*=i.n,r[s]%i.d!=0)return null;r[s]/=i.d,o*=Math.pow(s,r[s])}for(var s in n)if("1"!==s){if(n[s]*=i.n,n[s]%i.d!=0)return null;n[s]/=i.d,a*=Math.pow(s,n[s])}return i.s<0?newFraction(a,o):newFraction(o,a)},equals:function(e,t){return parse(e,t),this.s*this.n*i.d==i.s*i.n*this.d},compare:function(e,t){parse(e,t);var r=this.s*this.n*i.d-i.s*i.n*this.d;return(0<r)-(r<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;e=e||.001;for(var t=this.abs(),r=t.toContinued(),n=1;n<r.length;n++){for(var i=newFraction(r[n-1],1),o=n-2;o>=0;o--)i=i.inverse().add(r[o]);if(i.sub(t).abs().valueOf()<e)return i.mul(this.s)}return this},divisible:function(e,t){return parse(e,t),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,r="",n=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=n:(e&&(t=Math.floor(n/i))>0&&(r+=t+" ",n%=i),r+=n+"/"+i),r},toLatex:function(e){var t,r="",n=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=n:(e&&(t=Math.floor(n/i))>0&&(r+=t,n%=i),r+="\\frac{"+n+"}{"+i+"}"),r},toContinued:function(){var e,t=this.n,r=this.d,n=[];if(isNaN(t)||isNaN(r))return n;do n.push(Math.floor(t/r)),e=t%r,t=r,r=e;while(1!==t);return n},toString:function(e){var t=this.n,r=this.d;if(isNaN(t)||isNaN(r))return"NaN";e=e||15;var n=cycleLen(t,r),i=cycleStart(t,r,n),o=this.s<0?"-":"";if(o+=t/r|0,t%=r,(t*=10)&&(o+="."),n){for(var a=i;a--;)o+=t/r|0,t%=r,t*=10;o+="(";for(var a=n;a--;)o+=t/r|0,t%=r,t*=10;o+=")"}else for(var a=e;t&&a--;)o+=t/r|0,t%=r,t*=10;return o}},void 0!==(r=(function(){return Fraction}).apply(t,[]))&&(e.exports=r)}(0)},82509:function(e){"use strict";let t=[],r=[],leven=(e,n)=>{let i,o,a,s;if(e===n)return 0;let c=e;e.length>n.length&&(e=n,n=c);let l=e.length,u=n.length;for(;l>0&&e.charCodeAt(~-l)===n.charCodeAt(~-u);)l--,u--;let d=0;for(;d<l&&e.charCodeAt(d)===n.charCodeAt(d);)d++;if(l-=d,u-=d,0===l)return u;let p=0,f=0;for(;p<l;)r[p]=e.charCodeAt(d+p),t[p]=++p;for(;f<u;)for(p=0,i=n.charCodeAt(d+f),a=f++,o=f;p<l;p++)s=i===r[p]?a:a+1,a=t[p],o=t[p]=a>o?s>o?o+1:s:s>a?a+1:s;return o};e.exports=leven,e.exports.default=leven},44453:function(e,t,r){var n,i=1/0,o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),s="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),u=(n={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},function(e){return null==n?void 0:n[e]}),d=Object.prototype.toString,p=l.Symbol,f=p?p.prototype:void 0,m=f?f.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isSymbol(e))return m?m.call(e):"";var t=e+"";return"0"==t&&1/e==-i?"-0":t}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&"[object Symbol]"==d.call(e)}function toString(e){return null==e?"":baseToString(e)}function deburr(e){return(e=toString(e))&&e.replace(o,u).replace(a,"")}e.exports=deburr},4782:function(e,t,r){"use strict";var n=r(36068),i=r(7653),o=n.__importDefault(r(65596));t.Z=function(e){var t=i.useRef(0),r=i.useState({width:0,height:0,top:0,left:0,bottom:0,right:0}),n=r[0],a=r[1],s=i.useState(function(){return new o.default(function(r){var n=r[0];n&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(function(){e.current&&a(n.contentRect)}))})})[0];return i.useEffect(function(){s.disconnect(),e.current&&s.observe(e.current)},[e]),n}},50272:function(e,t){var r,n;"undefined"!=typeof self&&self,void 0!==(n="function"==typeof(r=function(){function RegExpParser(){}RegExpParser.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},RegExpParser.prototype.restoreState=function(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx},RegExpParser.prototype.pattern=function(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");var t=this.disjunction();this.consumeChar("/");for(var r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":addFlag(r,"global");break;case"i":addFlag(r,"ignoreCase");break;case"m":addFlag(r,"multiLine");break;case"u":addFlag(r,"unicode");break;case"y":addFlag(r,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:t,loc:this.loc(0)}},RegExpParser.prototype.disjunction=function(){var e=[],t=this.idx;for(e.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}},RegExpParser.prototype.alternative=function(){for(var e=[],t=this.idx;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}},RegExpParser.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},RegExpParser.prototype.assertion=function(){var e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":switch(this.consumeChar("?"),this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead"}ASSERT_EXISTS(t);var t,r=this.disjunction();return this.consumeChar(")"),{type:t,value:r,loc:this.loc(e)}}ASSERT_NEVER_REACH_HERE()},RegExpParser.prototype.quantifier=function(e){var t=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:1/0};break;case"+":r={atLeast:1,atMost:1/0};break;case"?":r={atLeast:0,atMost:1};break;case"{":var r,n=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:n,atMost:n};break;case",":r=this.isDigit()?{atLeast:n,atMost:this.integerIncludingZero()}:{atLeast:n,atMost:1/0},this.consumeChar("}")}if(!0===e&&void 0===r)return;ASSERT_EXISTS(r)}if(!0!==e||void 0!==r)return ASSERT_EXISTS(r),"?"===this.peekChar(0)?(this.consumeChar("?"),r.greedy=!1):r.greedy=!0,r.type="Quantifier",r.loc=this.loc(t),r},RegExpParser.prototype.atom=function(){var e,t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group()}return void 0===e&&this.isPatternCharacter()&&(e=this.patternCharacter()),ASSERT_EXISTS(e),e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e},RegExpParser.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[cc("\n"),cc("\r"),cc("\u2028"),cc("\u2029")]}},RegExpParser.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},RegExpParser.prototype.decimalEscapeAtom=function(){return{type:"GroupBackReference",value:this.positiveInteger()}},RegExpParser.prototype.characterClassEscape=function(){var e,t=!1;switch(this.popChar()){case"d":e=i;break;case"D":e=i,t=!0;break;case"s":e=a;break;case"S":e=a,t=!0;break;case"w":e=o;break;case"W":e=o,t=!0}return ASSERT_EXISTS(e),{type:"Set",value:e,complement:t}},RegExpParser.prototype.controlEscapeAtom=function(){var e;switch(this.popChar()){case"f":e=cc("\f");break;case"n":e=cc("\n");break;case"r":e=cc("\r");break;case"t":e=cc("	");break;case"v":e=cc("\v")}return ASSERT_EXISTS(e),{type:"Character",value:e}},RegExpParser.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var e=this.popChar();if(!1===/[a-zA-Z]/.test(e))throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}},RegExpParser.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:cc("\x00")}},RegExpParser.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},RegExpParser.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},RegExpParser.prototype.identityEscapeAtom=function(){return{type:"Character",value:cc(this.popChar())}},RegExpParser.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:cc(this.popChar())}}},RegExpParser.prototype.characterClass=function(){var e=[],t=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),t=!0);this.isClassAtom();){var r=this.classAtom();if("Character"===r.type&&this.isRangeDash()){this.consumeChar("-");var n=this.classAtom();if("Character"===n.type){if(n.value<r.value)throw Error("Range out of order in character class");e.push({from:r.value,to:n.value})}else insertToSet(r.value,e),e.push(cc("-")),insertToSet(n.value,e)}else insertToSet(r.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}},RegExpParser.prototype.classAtom=function(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},RegExpParser.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:cc("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},RegExpParser.prototype.group=function(){var e=!0;(this.consumeChar("("),"?"===this.peekChar(0))?(this.consumeChar("?"),this.consumeChar(":"),e=!1):this.groupIdx++;var t=this.disjunction();this.consumeChar(")");var r={type:"Group",capturing:e,value:t};return e&&(r.idx=this.groupIdx),r},RegExpParser.prototype.positiveInteger=function(){var e=this.popChar();if(!1===n.test(e))throw Error("Expecting a positive integer");for(;r.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)},RegExpParser.prototype.integerIncludingZero=function(){var e=this.popChar();if(!1===r.test(e))throw Error("Expecting an integer");for(;r.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)},RegExpParser.prototype.patternCharacter=function(){var e=this.popChar();switch(e){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:cc(e)}}},RegExpParser.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},RegExpParser.prototype.isRangeDash=function(){return"-"===this.peekChar()&&this.isClassAtom(1)},RegExpParser.prototype.isDigit=function(){return r.test(this.peekChar(0))},RegExpParser.prototype.isClassAtom=function(e){switch(void 0===e&&(e=0),this.peekChar(e)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},RegExpParser.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},RegExpParser.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},RegExpParser.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}},RegExpParser.prototype.isQuantifier=function(){var e=this.saveState();try{return void 0!==this.quantifier(!0)}catch(e){return!1}finally{this.restoreState(e)}},RegExpParser.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},RegExpParser.prototype.parseHexDigits=function(e){for(var r="",n=0;n<e;n++){var i=this.popChar();if(!1===t.test(i))throw Error("Expecting a HexDecimal digits");r+=i}return{type:"Character",value:parseInt(r,16)}},RegExpParser.prototype.peekChar=function(e){return void 0===e&&(e=0),this.input[this.idx+e]},RegExpParser.prototype.popChar=function(){var e=this.peekChar(0);return this.consumeChar(),e},RegExpParser.prototype.consumeChar=function(e){if(void 0!==e&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},RegExpParser.prototype.loc=function(e){return{begin:e,end:this.idx}};var e,t=/[0-9a-fA-F]/,r=/[0-9]/,n=/[1-9]/;function cc(e){return e.charCodeAt(0)}function insertToSet(e,t){void 0!==e.length?e.forEach(function(e){t.push(e)}):t.push(e)}function addFlag(e,t){if(!0===e[t])throw"duplicate flag "+t;e[t]=!0}function ASSERT_EXISTS(e){if(void 0===e)throw Error("Internal Error - Should never get here!")}function ASSERT_NEVER_REACH_HERE(){throw Error("Internal Error - Should never get here!")}var i=[];for(e=cc("0");e<=cc("9");e++)i.push(e);var o=[cc("_")].concat(i);for(e=cc("a");e<=cc("z");e++)o.push(e);for(e=cc("A");e<=cc("Z");e++)o.push(e);var a=[cc(" "),cc("\f"),cc("\n"),cc("\r"),cc("	"),cc("\v"),cc("	"),cc("\xa0"),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc("\u2028"),cc("\u2029"),cc(" "),cc(" "),cc("　"),cc("\uFEFF")];function BaseRegExpVisitor(){}return BaseRegExpVisitor.prototype.visitChildren=function(e){for(var t in e){var r=e[t];e.hasOwnProperty(t)&&(void 0!==r.type?this.visit(r):Array.isArray(r)&&r.forEach(function(e){this.visit(e)},this))}},BaseRegExpVisitor.prototype.visit=function(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e)}this.visitChildren(e)},BaseRegExpVisitor.prototype.visitPattern=function(e){},BaseRegExpVisitor.prototype.visitFlags=function(e){},BaseRegExpVisitor.prototype.visitDisjunction=function(e){},BaseRegExpVisitor.prototype.visitAlternative=function(e){},BaseRegExpVisitor.prototype.visitStartAnchor=function(e){},BaseRegExpVisitor.prototype.visitEndAnchor=function(e){},BaseRegExpVisitor.prototype.visitWordBoundary=function(e){},BaseRegExpVisitor.prototype.visitNonWordBoundary=function(e){},BaseRegExpVisitor.prototype.visitLookahead=function(e){},BaseRegExpVisitor.prototype.visitNegativeLookahead=function(e){},BaseRegExpVisitor.prototype.visitCharacter=function(e){},BaseRegExpVisitor.prototype.visitSet=function(e){},BaseRegExpVisitor.prototype.visitGroup=function(e){},BaseRegExpVisitor.prototype.visitGroupBackReference=function(e){},BaseRegExpVisitor.prototype.visitQuantifier=function(e){},{RegExpParser:RegExpParser,BaseRegExpVisitor:BaseRegExpVisitor,VERSION:"0.5.0"}})?r.apply(t,[]):r)&&(e.exports=n)},65596:function(e,t,r){"use strict";r.r(t);var n=function(){if("undefined"!=typeof Map)return Map;function getIndex(e,t){var r=-1;return e.some(function(e,n){return e[0]===t&&(r=n,!0)}),r}return function(){function class_1(){this.__entries__=[]}return Object.defineProperty(class_1.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),class_1.prototype.get=function(e){var t=getIndex(this.__entries__,e),r=this.__entries__[t];return r&&r[1]},class_1.prototype.set=function(e,t){var r=getIndex(this.__entries__,e);~r?this.__entries__[r][1]=t:this.__entries__.push([e,t])},class_1.prototype.delete=function(e){var t=this.__entries__,r=getIndex(t,e);~r&&t.splice(r,1)},class_1.prototype.has=function(e){return!!~getIndex(this.__entries__,e)},class_1.prototype.clear=function(){this.__entries__.splice(0)},class_1.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,n=this.__entries__;r<n.length;r++){var i=n[r];e.call(t,i[1],i[0])}},class_1}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==r.g&&r.g.Math===Math?r.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),a="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)};function throttle(e,t){var r=!1,n=!1,i=0;function resolvePending(){r&&(r=!1,e()),n&&proxy()}function timeoutCallback(){a(resolvePending)}function proxy(){var e=Date.now();if(r){if(e-i<2)return;n=!0}else r=!0,n=!1,setTimeout(timeoutCallback,t);i=e}return proxy}var s=["top","right","bottom","left","width","height","size","weight"],c="undefined"!=typeof MutationObserver,l=function(){function ResizeObserverController(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=throttle(this.refresh.bind(this),20)}return ResizeObserverController.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},ResizeObserverController.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},ResizeObserverController.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},ResizeObserverController.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},ResizeObserverController.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},ResizeObserverController.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},ResizeObserverController.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=void 0===t?"":t;s.some(function(e){return!!~r.indexOf(e)})&&this.refresh()},ResizeObserverController.getInstance=function(){return this.instance_||(this.instance_=new ResizeObserverController),this.instance_},ResizeObserverController.instance_=null,ResizeObserverController}(),defineConfigurable=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},getWindowOf=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},u=createRectInit(0,0,0,0);function toFloat(e){return parseFloat(e)||0}function getBordersSize(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(t,r){return t+toFloat(e["border-"+r+"-width"])},0)}function getPaddings(e){for(var t={},r=0,n=["top","right","bottom","left"];r<n.length;r++){var i=n[r],o=e["padding-"+i];t[i]=toFloat(o)}return t}function getSVGContentRect(e){var t=e.getBBox();return createRectInit(0,0,t.width,t.height)}function getHTMLElementContentRect(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return u;var n=getWindowOf(e).getComputedStyle(e),i=getPaddings(n),o=i.left+i.right,a=i.top+i.bottom,s=toFloat(n.width),c=toFloat(n.height);if("border-box"===n.boxSizing&&(Math.round(s+o)!==t&&(s-=getBordersSize(n,"left","right")+o),Math.round(c+a)!==r&&(c-=getBordersSize(n,"top","bottom")+a)),!isDocumentElement(e)){var l=Math.round(s+o)-t,d=Math.round(c+a)-r;1!==Math.abs(l)&&(s-=l),1!==Math.abs(d)&&(c-=d)}return createRectInit(i.left,i.top,s,c)}var d="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof getWindowOf(e).SVGGraphicsElement}:function(e){return e instanceof getWindowOf(e).SVGElement&&"function"==typeof e.getBBox};function isDocumentElement(e){return e===getWindowOf(e).document.documentElement}function getContentRect(e){return i?d(e)?getSVGContentRect(e):getHTMLElementContentRect(e):u}function createReadOnlyRect(e){var t=e.x,r=e.y,n=e.width,i=e.height,o=Object.create(("undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object).prototype);return defineConfigurable(o,{x:t,y:r,width:n,height:i,top:r,right:t+n,bottom:i+r,left:t}),o}function createRectInit(e,t,r,n){return{x:e,y:t,width:r,height:n}}var p=function(){function ResizeObservation(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=e}return ResizeObservation.prototype.isActive=function(){var e=getContentRect(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},ResizeObservation.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},ResizeObservation}(),ResizeObserverEntry=function(e,t){defineConfigurable(this,{target:e,contentRect:createReadOnlyRect(t)})},f=function(){function ResizeObserverSPI(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return ResizeObserverSPI.prototype.observe=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof getWindowOf(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new p(e)),this.controller_.addObserver(this),this.controller_.refresh())}},ResizeObserverSPI.prototype.unobserve=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof getWindowOf(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},ResizeObserverSPI.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},ResizeObserverSPI.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},ResizeObserverSPI.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new ResizeObserverEntry(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)},ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0},ResizeObserverSPI}(),m="undefined"!=typeof WeakMap?new WeakMap:new n,g=function(){function ResizeObserver(e){if(!(this instanceof ResizeObserver))throw TypeError("Cannot call a class as a function.");if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");var t=new f(e,l.getInstance(),this);m.set(this,t)}return ResizeObserver}();["observe","unobserve","disconnect"].forEach(function(e){g.prototype[e]=function(){var t;return(t=m.get(this))[e].apply(t,arguments)}});var y=void 0!==o.ResizeObserver?o.ResizeObserver:g;t.default=y},97437:function(e,t){"use strict";if("object"==typeof performance&&"function"==typeof performance.now){var r,n,i,o,a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,u=null,w=function(){if(null!==l)try{var e=t.unstable_now();l(!0,e),l=null}catch(e){throw setTimeout(w,0),e}};r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(w,0))},n=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var f=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,v=5,x=0;t.unstable_shouldYield=function(){return t.unstable_now()>=x},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var O=new MessageChannel,R=O.port2;O.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();x=e+v;try{g(!0,e)?R.postMessage(null):(m=!1,g=null)}catch(e){throw R.postMessage(null),e}}else m=!1},r=function(e){g=e,m||(m=!0,R.postMessage(null))},n=function(e,r){y=d(function(){e(t.unstable_now())},r)},i=function(){p(y),y=-1}}function H(e,t){var r=e.length;for(e.push(t);;){var n=r-1>>>1,i=e[n];if(void 0!==i&&0<I(i,t))e[n]=t,e[r]=i,r=n;else break}}function J(e){return void 0===(e=e[0])?null:e}function K(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;for(var n=0,i=e.length;n<i;){var o=2*(n+1)-1,a=e[o],s=o+1,c=e[s];if(void 0!==a&&0>I(a,r))void 0!==c&&0>I(c,a)?(e[n]=c,e[s]=r,n=s):(e[n]=a,e[o]=r,n=o);else if(void 0!==c&&0>I(c,r))e[n]=c,e[s]=r,n=s;else break}}return t}return null}function I(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}var A=[],b=[],C=1,_=null,S=3,k=!1,N=!1,P=!1;function T(e){for(var t=J(b);null!==t;){if(null===t.callback)K(b);else if(t.startTime<=e)K(b),t.sortIndex=t.expirationTime,H(A,t);else break;t=J(b)}}function U(e){if(P=!1,T(e),!N){if(null!==J(A))N=!0,r(V);else{var t=J(b);null!==t&&n(U,t.startTime-e)}}}function V(e,r){N=!1,P&&(P=!1,i()),k=!0;var o=S;try{for(T(r),_=J(A);null!==_&&(!(_.expirationTime>r)||e&&!t.unstable_shouldYield());){var a=_.callback;if("function"==typeof a){_.callback=null,S=_.priorityLevel;var s=a(_.expirationTime<=r);r=t.unstable_now(),"function"==typeof s?_.callback=s:_===J(A)&&K(A),T(r)}else K(A);_=J(A)}if(null!==_)var c=!0;else{var l=J(b);null!==l&&n(U,l.startTime-r),c=!1}return c}finally{_=null,S=o,k=!1}}var L=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){N||k||(N=!0,r(V))},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return J(A)},t.unstable_next=function(e){switch(S){case 1:case 2:case 3:var t=3;break;default:t=S}var r=S;S=t;try{return e()}finally{S=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=L,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=S;S=e;try{return t()}finally{S=r}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return c=a+c,e={id:C++,callback:o,priorityLevel:e,startTime:a,expirationTime:c,sortIndex:-1},a>s?(e.sortIndex=a,H(b,e),null===J(A)&&e===J(b)&&(P?i():P=!0,n(U,a-s))):(e.sortIndex=c,H(A,e),N||k||(N=!0,r(V))),e},t.unstable_wrapCallback=function(e){var t=S;return function(){var r=S;S=t;try{return e.apply(this,arguments)}finally{S=r}}}},1372:function(e,t,r){"use strict";e.exports=r(97437)},36068:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return __assign},__asyncDelegator:function(){return __asyncDelegator},__asyncGenerator:function(){return __asyncGenerator},__asyncValues:function(){return __asyncValues},__await:function(){return __await},__awaiter:function(){return __awaiter},__classPrivateFieldGet:function(){return __classPrivateFieldGet},__classPrivateFieldIn:function(){return __classPrivateFieldIn},__classPrivateFieldSet:function(){return __classPrivateFieldSet},__createBinding:function(){return n},__decorate:function(){return __decorate},__esDecorate:function(){return __esDecorate},__exportStar:function(){return __exportStar},__extends:function(){return __extends},__generator:function(){return __generator},__importDefault:function(){return __importDefault},__importStar:function(){return __importStar},__makeTemplateObject:function(){return __makeTemplateObject},__metadata:function(){return __metadata},__param:function(){return __param},__propKey:function(){return __propKey},__read:function(){return __read},__rest:function(){return __rest},__runInitializers:function(){return __runInitializers},__setFunctionName:function(){return __setFunctionName},__spread:function(){return __spread},__spreadArray:function(){return __spreadArray},__spreadArrays:function(){return __spreadArrays},__values:function(){return __values}});var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function __rest(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function __decorate(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function __param(e,t){return function(r,n){t(r,n,e)}}function __esDecorate(e,t,r,n,i,o){function accept(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var a,s=n.kind,c="getter"===s?"get":"setter"===s?"set":"value",l=!t&&e?n.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),d=!1,p=r.length-1;p>=0;p--){var f={};for(var m in n)f[m]="access"===m?{}:n[m];for(var m in n.access)f.access[m]=n.access[m];f.addInitializer=function(e){if(d)throw TypeError("Cannot add initializers after decoration has completed");o.push(accept(e||null))};var g=(0,r[p])("accessor"===s?{get:u.get,set:u.set}:u[c],f);if("accessor"===s){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw TypeError("Object expected");(a=accept(g.get))&&(u.get=a),(a=accept(g.set))&&(u.set=a),(a=accept(g.init))&&i.push(a)}else(a=accept(g))&&("field"===s?i.push(a):u[c]=a)}l&&Object.defineProperty(l,n.name,u),d=!0}function __runInitializers(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function __propKey(e){return"symbol"==typeof e?e:"".concat(e)}function __setFunctionName(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})}function __generator(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}var n=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function __exportStar(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function __spreadArray(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n;function verb(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||resume(e,t)})})}function resume(e,t){try{step(i[e](t))}catch(e){settle(o[0][3],e)}}function step(e){e.value instanceof __await?Promise.resolve(e.value.v).then(fulfill,reject):settle(o[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),o.shift(),o.length&&resume(o[0][0],o[0][1])}}function __asyncDelegator(e){var t,r;return t={},verb("next"),verb("throw",function(e){throw e}),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:__await(e[n](t)),done:!1}:i?i(t):t}:i}}function __asyncValues(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=__values(e),t={},verb("next"),verb("throw"),verb("return"),t[Symbol.asyncIterator]=function(){return this},t);function verb(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){settle(n,i,(t=e[r](t)).done,t.value)})}}function settle(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var i=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function __classPrivateFieldSet(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function __classPrivateFieldIn(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}}}]);